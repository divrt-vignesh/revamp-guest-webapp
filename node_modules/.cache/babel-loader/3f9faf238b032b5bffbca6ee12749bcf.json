{"remainingRequest":"/home/vignesh/DIVRT/guest-webapp/node_modules/babel-loader/lib/index.js!/home/vignesh/DIVRT/guest-webapp/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/vignesh/DIVRT/guest-webapp/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/vignesh/DIVRT/guest-webapp/src/views/ApplePay.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/vignesh/DIVRT/guest-webapp/src/views/ApplePay.vue","mtime":1687345808892},{"path":"/home/vignesh/DIVRT/guest-webapp/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vignesh/DIVRT/guest-webapp/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/vignesh/DIVRT/guest-webapp/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vignesh/DIVRT/guest-webapp/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9ob21lL3ZpZ25lc2gvRElWUlQvZ3Vlc3Qtd2ViYXBwL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL2hvbWUvdmlnbmVzaC9ESVZSVC9ndWVzdC13ZWJhcHAvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDIiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5yZXBsYWNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IEFQSUhlbHBlciBmcm9tICIuLi9hcGlIZWxwZXIiOyAvLyBpbXBvcnQgbG9nZ2VySGVscGVyIGZyb20gIi4uL2xvZ2dlckhlbHBlciI7CgppbXBvcnQgeyBtYXBHZXR0ZXJzIH0gZnJvbSAidnVleCI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiQXBwbGVQYXkiLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBhcHBJZDogInNhbmRib3gtc3EwaWRiLUp5cjFmTWU4cTFIZFVEUVhLLURRTmciLAogICAgICBsb2NhdGlvbklkOiAiTDhSMTlGUzlLSDdGUSIsCiAgICAgIHBheW1lbnRzOiBudWxsLAogICAgICBhbGVydERpYWxvZzogZmFsc2UsCiAgICAgIGFsZXJ0TXNnOiAiIiwKICAgICAgYWxlcnRJY29uOiAibWRpLWNoZWNrLWNpcmNsZSIKICAgIH07CiAgfSwKICBwcm9wczogewogICAgd2lkdGg6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiBmdW5jdGlvbiBfZGVmYXVsdCgpIHsKICAgICAgICByZXR1cm4gIjEwMCUiOwogICAgICB9CiAgICB9LAogICAgaGVpZ2h0OiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogZnVuY3Rpb24gX2RlZmF1bHQoKSB7CiAgICAgICAgcmV0dXJuICI1MHB4IjsKICAgICAgfQogICAgfSwKICAgIGlvc0RldmljZTogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiBmdW5jdGlvbiBfZGVmYXVsdCgpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgIH0KICB9LAogIGNvbXB1dGVkOiBfb2JqZWN0U3ByZWFkKHt9LCBtYXBHZXR0ZXJzKHsKICAgIGJvb2tpbmdJZDogImdldHRlckJvb2tpbmdJZCIsCiAgICBib29raW5nRGV0YWlsczogImdldHRlckJvb2tpbmdEZXRhaWxzIgogIH0pKSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKCiAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgdmFyIGNhcmQsIGFwcGxlUGF5LCBzZWxmLCBhcHBsZVBheUJ1dHRvbjsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBpZiAod2luZG93LlNxdWFyZSkgewogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAyOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIlNxdWFyZS5qcyBmYWlsZWQgdG8gbG9hZCBwcm9wZXJseSIpOwoKICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgIF9jb250ZXh0Mi5wcmV2ID0gMjsKICAgICAgICAgICAgICBfdGhpcy5wYXltZW50cyA9IHdpbmRvdy5TcXVhcmUucGF5bWVudHMoJ3NhbmRib3gtc3EwaWRiLUp5cjFmTWU4cTFIZFVEUVhLLURRTmcnLCAnTDhSMTlGUzlLSDdGUScpOwogICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gOTsKICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICBfY29udGV4dDIucHJldiA9IDY7CiAgICAgICAgICAgICAgX2NvbnRleHQyLnQwID0gX2NvbnRleHQyWyJjYXRjaCJdKDIpOwogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgICBfY29udGV4dDIucHJldiA9IDk7CiAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAxMjsKICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuaW5pdGlhbGl6ZUNhcmQoX3RoaXMucGF5bWVudHMpOwoKICAgICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgICAgICBjYXJkID0gX2NvbnRleHQyLnNlbnQ7CiAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAxOTsKICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIGNhc2UgMTU6CiAgICAgICAgICAgICAgX2NvbnRleHQyLnByZXYgPSAxNTsKICAgICAgICAgICAgICBfY29udGV4dDIudDEgPSBfY29udGV4dDJbImNhdGNoIl0oOSk7CiAgICAgICAgICAgICAgY29uc29sZS5lcnJvcigiSW5pdGlhbGl6aW5nIENhcmQgZmFpbGVkIiwgX2NvbnRleHQyLnQxKTsKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICBjYXNlIDE5OgogICAgICAgICAgICAgIF9jb250ZXh0Mi5wcmV2ID0gMTk7CiAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAyMjsKICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuaW5pdGlhbGl6ZUFwcGxlUGF5KF90aGlzLnBheW1lbnRzKTsKCiAgICAgICAgICAgIGNhc2UgMjI6CiAgICAgICAgICAgICAgYXBwbGVQYXkgPSBfY29udGV4dDIuc2VudDsKICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDI4OwogICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgY2FzZSAyNToKICAgICAgICAgICAgICBfY29udGV4dDIucHJldiA9IDI1OwogICAgICAgICAgICAgIF9jb250ZXh0Mi50MiA9IF9jb250ZXh0MlsiY2F0Y2giXSgxOSk7CiAgICAgICAgICAgICAgY29uc29sZS5lcnJvcigiSW5pdGlhbGl6aW5nIEFwcGxlIFBheSBmYWlsZWQiLCBfY29udGV4dDIudDIpOyAvLyBUaGVyZSBhcmUgYSBudW1iZXIgb2YgcmVhc29uIHdoeSBBcHBsZSBQYXkgbWF5IG5vdCBiZSBzdXBwb3J0ZWQKICAgICAgICAgICAgICAvLyAoZS5nLiBCcm93c2VyIFN1cHBvcnQsIERldmljZSBTdXBwb3J0LCBBY2NvdW50KS4gVGhlcmVmb3JlIHlvdSBzaG91bGQgaGFuZGxlCiAgICAgICAgICAgICAgLy8gaW5pdGlhbGl6YXRpb24gZmFpbHVyZXMsIHdoaWxlIHN0aWxsIGxvYWRpbmcgb3RoZXIgYXBwbGljYWJsZSBwYXltZW50IG1ldGhvZHMuCgogICAgICAgICAgICBjYXNlIDI4OgogICAgICAgICAgICAgIHNlbGYgPSBfdGhpczsgLy8gY29uc3QgY2FyZEJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJjYXJkLWJ1dHRvbiIpOwogICAgICAgICAgICAgIC8vIGNhcmRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLCBhc3luYyBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgICAgICAgICAvLyAgIGNvbnNvbGUubG9nKGV2ZW50KQoKICAgICAgICAgICAgICBjb25zb2xlLmxvZyhjYXJkKTsgLy8gICBhd2FpdCBzZWxmLmhhbmRsZVBheW1lbnRNZXRob2RTdWJtaXNzaW9uKGV2ZW50LCBjYXJkKTsKICAgICAgICAgICAgICAvLyB9KTsKICAgICAgICAgICAgICAvLyBDaGVja3BvaW50IDIuCgogICAgICAgICAgICAgIGlmIChhcHBsZVBheSkgewogICAgICAgICAgICAgICAgYXBwbGVQYXlCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiY2FyZC1idXR0b24iKTsKICAgICAgICAgICAgICAgIGFwcGxlUGF5QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIiwgLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgdmFyIF9yZWYgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygiQ2xpY2tlZCIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2VsZi5oYW5kbGVQYXltZW50TWV0aG9kU3VibWlzc2lvbihldmVudCwgYXBwbGVQYXkpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgICAgICAgICAgICAgfSkpOwoKICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChfeCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBfcmVmLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB9KCkpOwogICAgICAgICAgICAgIH0gLy8gfSk7CgoKICAgICAgICAgICAgY2FzZSAzMToKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUyLCBudWxsLCBbWzIsIDZdLCBbOSwgMTVdLCBbMTksIDI1XV0pOwogICAgfSkpKCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBjbG9zZUFsZXJ0RGlhbG9nOiBmdW5jdGlvbiBjbG9zZUFsZXJ0RGlhbG9nKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzKCkgewogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMyQoX2NvbnRleHQzKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfdGhpczIuYWxlcnREaWFsb2cgPSBmYWxzZTsKICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTsKICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gNDsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczIuZ2V0Qm9va2luZ1N0YXRlKCk7CgogICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMyk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGhhbmRsZVBheW1lbnRNZXRob2RTdWJtaXNzaW9uOiBmdW5jdGlvbiBoYW5kbGVQYXltZW50TWV0aG9kU3VibWlzc2lvbihldmVudCwgcGF5bWVudE1ldGhvZCkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU0KCkgewogICAgICAgIHZhciBzZWxmLCB0b2tlblJlc3VsdCwgdmVyZmllZFRva2VuOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNCQoX2NvbnRleHQ0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NC5wcmV2ID0gX2NvbnRleHQ0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgICAgICAgc2VsZiA9IF90aGlzMzsgLy8gY29uc3QgY2FyZEJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJjYXJkLWJ1dHRvbiIpOwoKICAgICAgICAgICAgICAgIF9jb250ZXh0NC5wcmV2ID0gMjsKICAgICAgICAgICAgICAgIC8vIGRpc2FibGUgdGhlIHN1Ym1pdCBidXR0b24gYXMgd2UgYXdhaXQgdG9rZW5pemF0aW9uIGFuZCBtYWtlIGEgcGF5bWVudCByZXF1ZXN0LgogICAgICAgICAgICAgICAgLy8gY2FyZEJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygicGF5bWVudE1ldGgwZCIsIHBheW1lbnRNZXRob2QpOwogICAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSA2OwogICAgICAgICAgICAgICAgcmV0dXJuIHNlbGYudG9rZW5pemUocGF5bWVudE1ldGhvZCk7CgogICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICAgIHRva2VuUmVzdWx0ID0gX2NvbnRleHQ0LnNlbnQ7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygidG9rZW4iLCB0b2tlblJlc3VsdCk7CiAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDEwOwogICAgICAgICAgICAgICAgcmV0dXJuIHNlbGYudmVyaWZ5QnV5ZXIoX3RoaXMzLnBheW1lbnRzLCB0b2tlblJlc3VsdCk7CgogICAgICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgICAgICB2ZXJmaWVkVG9rZW4gPSBfY29udGV4dDQuc2VudDsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJ2ZXJmaWVkVG9rZW4iLCB2ZXJmaWVkVG9rZW4pOwogICAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSAxNDsKICAgICAgICAgICAgICAgIHJldHVybiBzZWxmLmFkZENhcmQodG9rZW5SZXN1bHQsIHZlcmZpZWRUb2tlbik7CgogICAgICAgICAgICAgIGNhc2UgMTQ6CiAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDIyOwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgMTY6CiAgICAgICAgICAgICAgICBfY29udGV4dDQucHJldiA9IDE2OwogICAgICAgICAgICAgICAgX2NvbnRleHQ0LnQwID0gX2NvbnRleHQ0WyJjYXRjaCJdKDIpOwogICAgICAgICAgICAgICAgY29uc29sZS5sb2coc2VsZik7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygiRXJyb3IiKTsgLy8gY2FyZEJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlOwoKICAgICAgICAgICAgICAgIHNlbGYuZGlzcGxheVBheW1lbnRSZXN1bHRzKCJGQUlMVVJFIik7CiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKF9jb250ZXh0NC50MC5tZXNzYWdlKTsKCiAgICAgICAgICAgICAgY2FzZSAyMjoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlNCwgbnVsbCwgW1syLCAxNl1dKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgYWRkQ2FyZDogZnVuY3Rpb24gYWRkQ2FyZCh0b2tlblJlc3VsdCwgdmVyZmllZFRva2VuKSB7CiAgICAgIHZhciBfdGhpczQgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTUoKSB7CiAgICAgICAgdmFyIF90b2tlblJlc3VsdCRkZXRhaWxzLCBfdGhpczQkYm9va2luZ0RldGFpbHMsIF90aGlzNCRib29raW5nRGV0YWlsczIsIF90b2tlblJlc3VsdCRkZXRhaWxzMiwgX3Rva2VuUmVzdWx0JGRldGFpbHMzLCBfdG9rZW5SZXN1bHQkZGV0YWlsczQ7CgogICAgICAgIHZhciBjYXJkRGF0YSwgX2FkZENhcmQkZGF0YSwgYWRkQ2FyZCwgX2FkZENhcmQkZGF0YTI7CgogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNSQoX2NvbnRleHQ1KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NS5wcmV2ID0gX2NvbnRleHQ1Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBjYXJkRGF0YSA9IHsKICAgICAgICAgICAgICAgICAgdXNlckRldmljZTogIjIiLAogICAgICAgICAgICAgICAgICBvcmRlclR5cGU6ICIzIiwKICAgICAgICAgICAgICAgICAgZW50cnk6IFt7CiAgICAgICAgICAgICAgICAgICAgbG9jYXRpb25Db2RlOiBfdGhpczQuYm9va2luZ0RldGFpbHMuem9uZS5sb2NhdGlvbkNvZGUsCiAgICAgICAgICAgICAgICAgICAgc3RhcnRBdDogX3RoaXM0LmJvb2tpbmdEZXRhaWxzLmJvb2tpbmcuc3RhcnRBdCwKICAgICAgICAgICAgICAgICAgICBxdWFudGl0eTogIjEiCiAgICAgICAgICAgICAgICAgIH1dLAogICAgICAgICAgICAgICAgICBwYXltZW50VHlwZTogIkFQUExFX1BBWSIsCiAgICAgICAgICAgICAgICAgIGJpbGxpbmdEZXRhaWxzOiB0b2tlblJlc3VsdCA9PT0gbnVsbCB8fCB0b2tlblJlc3VsdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF90b2tlblJlc3VsdCRkZXRhaWxzID0gdG9rZW5SZXN1bHQuZGV0YWlscykgPT09IG51bGwgfHwgX3Rva2VuUmVzdWx0JGRldGFpbHMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90b2tlblJlc3VsdCRkZXRhaWxzLmJpbGxpbmcsCiAgICAgICAgICAgICAgICAgIHZlcmlmaWNhdGlvbl90b2tlbjogdmVyZmllZFRva2VuLAogICAgICAgICAgICAgICAgICBzb3VyY2VfaWQ6IHRva2VuUmVzdWx0LnRva2VuLAogICAgICAgICAgICAgICAgICBwaG9uZU51bWJlcjogIisiICsgKChfdGhpczQkYm9va2luZ0RldGFpbHMgPSBfdGhpczQuYm9va2luZ0RldGFpbHMpID09PSBudWxsIHx8IF90aGlzNCRib29raW5nRGV0YWlscyA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF90aGlzNCRib29raW5nRGV0YWlsczIgPSBfdGhpczQkYm9va2luZ0RldGFpbHMudXNlcikgPT09IG51bGwgfHwgX3RoaXM0JGJvb2tpbmdEZXRhaWxzMiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXM0JGJvb2tpbmdEZXRhaWxzMi5jb250YWN0KSwKICAgICAgICAgICAgICAgICAgZW1haWw6ICh0b2tlblJlc3VsdCA9PT0gbnVsbCB8fCB0b2tlblJlc3VsdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF90b2tlblJlc3VsdCRkZXRhaWxzMiA9IHRva2VuUmVzdWx0LmRldGFpbHMpID09PSBudWxsIHx8IF90b2tlblJlc3VsdCRkZXRhaWxzMiA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF90b2tlblJlc3VsdCRkZXRhaWxzMyA9IF90b2tlblJlc3VsdCRkZXRhaWxzMi5zaGlwcGluZykgPT09IG51bGwgfHwgX3Rva2VuUmVzdWx0JGRldGFpbHMzID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX3Rva2VuUmVzdWx0JGRldGFpbHM0ID0gX3Rva2VuUmVzdWx0JGRldGFpbHMzLmNvbnRhY3QpID09PSBudWxsIHx8IF90b2tlblJlc3VsdCRkZXRhaWxzNCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3Rva2VuUmVzdWx0JGRldGFpbHM0LmVtYWlsKSB8fCAiIgogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIF9jb250ZXh0NS5wcmV2ID0gMTsKICAgICAgICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gNDsKICAgICAgICAgICAgICAgIHJldHVybiBBUElIZWxwZXIoIlBPU1QiLCAiL2FwaS92MS9wYXltZW50L2FkZENhcmQvIiArIF90aGlzNC5ib29raW5nSWQsIGNhcmREYXRhKTsKCiAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgYWRkQ2FyZCA9IF9jb250ZXh0NS5zZW50OwogICAgICAgICAgICAgICAgY29uc29sZS5sb2coYWRkQ2FyZCk7CgogICAgICAgICAgICAgICAgaWYgKCEoKGFkZENhcmQgPT09IG51bGwgfHwgYWRkQ2FyZCA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9hZGRDYXJkJGRhdGEgPSBhZGRDYXJkLmRhdGEpID09PSBudWxsIHx8IF9hZGRDYXJkJGRhdGEgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hZGRDYXJkJGRhdGEuc3RhdHVzKSA9PSBmYWxzZSkpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQ1Lm5leHQgPSAxMjsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX3RoaXM0LmFsZXJ0TXNnID0gKGFkZENhcmQgPT09IG51bGwgfHwgYWRkQ2FyZCA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9hZGRDYXJkJGRhdGEyID0gYWRkQ2FyZC5kYXRhKSA9PT0gbnVsbCB8fCBfYWRkQ2FyZCRkYXRhMiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2FkZENhcmQkZGF0YTIubWVzc2FnZSkgfHwgIkVycm9yIGluIGF1dGhvcml6aW5nIHRoZSBwYXltZW50IjsKICAgICAgICAgICAgICAgIF90aGlzNC5hbGVydEljb24gPSAibWRpLWFsZXJ0LW91dGxpbmUiOwogICAgICAgICAgICAgICAgX3RoaXM0LmFsZXJ0RGlhbG9nID0gdHJ1ZTsKICAgICAgICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gMTQ7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gMTQ7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXM0LmdldEJvb2tpbmdTdGF0ZSgpOwoKICAgICAgICAgICAgICBjYXNlIDE0OgogICAgICAgICAgICAgICAgX2NvbnRleHQ1Lm5leHQgPSAxOTsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDE2OgogICAgICAgICAgICAgICAgX2NvbnRleHQ1LnByZXYgPSAxNjsKICAgICAgICAgICAgICAgIF9jb250ZXh0NS50MCA9IF9jb250ZXh0NVsiY2F0Y2giXSgxKTsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKF9jb250ZXh0NS50MCk7CgogICAgICAgICAgICAgIGNhc2UgMTk6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDUuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTUsIG51bGwsIFtbMSwgMTZdXSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGdldEJvb2tpbmdTdGF0ZTogZnVuY3Rpb24gZ2V0Qm9va2luZ1N0YXRlKCkgewogICAgICB2YXIgX3RoaXM1ID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU2KCkgewogICAgICAgIHZhciBfYkRldGFpbHMkZGF0YSwgX2JEZXRhaWxzJGRhdGEyLCBfYkRldGFpbHMkZGF0YTIkZGF0YSwgX2JEZXRhaWxzJGRhdGEyJGRhdGEkLCBiRGV0YWlscywgYm9va2luZ1N0YXRlOwoKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTYkKF9jb250ZXh0NikgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDYucHJldiA9IF9jb250ZXh0Ni5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgaWYgKCEoX3RoaXM1LmJvb2tpbmdJZCAhPSBudWxsKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDYubmV4dCA9IDEzOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfY29udGV4dDYucHJldiA9IDE7CiAgICAgICAgICAgICAgICBfY29udGV4dDYubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICByZXR1cm4gQVBJSGVscGVyKCJHRVQiLCAiL2FwaS92MS9ib29raW5nL2NvbmZpZy8iICsgX3RoaXM1LmJvb2tpbmdJZCk7CgogICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgIGJEZXRhaWxzID0gX2NvbnRleHQ2LnNlbnQ7CgogICAgICAgICAgICAgICAgX3RoaXM1LiRzdG9yZS5jb21taXQoIlNFVF9CT09LSU5HX0RFVEFJTFMiLCAoX2JEZXRhaWxzJGRhdGEgPSBiRGV0YWlscy5kYXRhKSAhPT0gbnVsbCAmJiBfYkRldGFpbHMkZGF0YSAhPT0gdm9pZCAwICYmIF9iRGV0YWlscyRkYXRhLmRhdGEgPyBiRGV0YWlscy5kYXRhLmRhdGEgOiBudWxsKTsKCiAgICAgICAgICAgICAgICBib29raW5nU3RhdGUgPSAoX2JEZXRhaWxzJGRhdGEyID0gYkRldGFpbHMuZGF0YSkgIT09IG51bGwgJiYgX2JEZXRhaWxzJGRhdGEyICE9PSB2b2lkIDAgJiYgKF9iRGV0YWlscyRkYXRhMiRkYXRhID0gX2JEZXRhaWxzJGRhdGEyLmRhdGEpICE9PSBudWxsICYmIF9iRGV0YWlscyRkYXRhMiRkYXRhICE9PSB2b2lkIDAgJiYgKF9iRGV0YWlscyRkYXRhMiRkYXRhJCA9IF9iRGV0YWlscyRkYXRhMiRkYXRhLmJvb2tpbmcpICE9PSBudWxsICYmIF9iRGV0YWlscyRkYXRhMiRkYXRhJCAhPT0gdm9pZCAwICYmIF9iRGV0YWlscyRkYXRhMiRkYXRhJC5zdGF0ZSA/IGJEZXRhaWxzLmRhdGEuZGF0YS5ib29raW5nLnN0YXRlIDogbnVsbDsKCiAgICAgICAgICAgICAgICBpZiAoYm9va2luZ1N0YXRlID09IDggfHwgYm9va2luZ1N0YXRlID09IDEwIHx8IGJvb2tpbmdTdGF0ZSA9PSAxMSkgewogICAgICAgICAgICAgICAgICBfdGhpczUuJHJvdXRlci5yZXBsYWNlKHsKICAgICAgICAgICAgICAgICAgICBwYXRoOiAiL2NoZWNrb3V0IgogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoYm9va2luZ1N0YXRlID09IDIpIHsKICAgICAgICAgICAgICAgICAgX3RoaXM1LiRyb3V0ZXIucmVwbGFjZSh7CiAgICAgICAgICAgICAgICAgICAgcGF0aDogIi9jaGVja2VkaW4iCiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF9jb250ZXh0Ni5uZXh0ID0gMTM7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0Ni5wcmV2ID0gMTA7CiAgICAgICAgICAgICAgICBfY29udGV4dDYudDAgPSBfY29udGV4dDZbImNhdGNoIl0oMSk7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhfY29udGV4dDYudDApOwoKICAgICAgICAgICAgICBjYXNlIDEzOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ2LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU2LCBudWxsLCBbWzEsIDEwXV0pOwogICAgICB9KSkoKTsKICAgIH0sCiAgICB2ZXJpZnlCdXllcjogZnVuY3Rpb24gdmVyaWZ5QnV5ZXIocGF5bWVudHMsIHRva2VuUmVzdWx0KSB7CiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU3KCkgewogICAgICAgIHZhciBfdG9rZW5SZXN1bHQkZGV0YWlsczU7CgogICAgICAgIHZhciB2ZXJpZmljYXRpb25EZXRhaWxzLCB2ZXJpZmljYXRpb25SZXN1bHRzOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNyQoX2NvbnRleHQ3KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Ny5wcmV2ID0gX2NvbnRleHQ3Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICB2ZXJpZmljYXRpb25EZXRhaWxzID0gewogICAgICAgICAgICAgICAgICBiaWxsaW5nQ29udGFjdDogdG9rZW5SZXN1bHQgPT09IG51bGwgfHwgdG9rZW5SZXN1bHQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfdG9rZW5SZXN1bHQkZGV0YWlsczUgPSB0b2tlblJlc3VsdC5kZXRhaWxzKSA9PT0gbnVsbCB8fCBfdG9rZW5SZXN1bHQkZGV0YWlsczUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90b2tlblJlc3VsdCRkZXRhaWxzNS5iaWxsaW5nLAogICAgICAgICAgICAgICAgICBhbW91bnQ6ICIxIiwKICAgICAgICAgICAgICAgICAgY3VycmVuY3lDb2RlOiAiVVNEIiwKICAgICAgICAgICAgICAgICAgaW50ZW50OiAiQ0hBUkdFIgogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Ny5uZXh0ID0gMzsKICAgICAgICAgICAgICAgIHJldHVybiBwYXltZW50cy52ZXJpZnlCdXllcih0b2tlblJlc3VsdCA9PT0gbnVsbCB8fCB0b2tlblJlc3VsdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogdG9rZW5SZXN1bHQudG9rZW4sIHZlcmlmaWNhdGlvbkRldGFpbHMpOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICB2ZXJpZmljYXRpb25SZXN1bHRzID0gX2NvbnRleHQ3LnNlbnQ7CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ3LmFicnVwdCgicmV0dXJuIiwgdmVyaWZpY2F0aW9uUmVzdWx0cy50b2tlbik7CgogICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ny5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlNyk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGluaXRpYWxpemVDYXJkOiBmdW5jdGlvbiBpbml0aWFsaXplQ2FyZChwYXltZW50cykgewogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlOCgpIHsKICAgICAgICB2YXIgY2FyZDsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTgkKF9jb250ZXh0OCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDgucHJldiA9IF9jb250ZXh0OC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQ4Lm5leHQgPSAyOwogICAgICAgICAgICAgICAgcmV0dXJuIHBheW1lbnRzLmNhcmQoKTsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgY2FyZCA9IF9jb250ZXh0OC5zZW50OwogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0OC5hYnJ1cHQoInJldHVybiIsIGNhcmQpOwoKICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDguc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTgpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBidWlsZFBheW1lbnRSZXF1ZXN0OiBmdW5jdGlvbiBidWlsZFBheW1lbnRSZXF1ZXN0KHBheW1lbnRzKSB7CiAgICAgIHJldHVybiBwYXltZW50cy5wYXltZW50UmVxdWVzdCh7CiAgICAgICAgY291bnRyeUNvZGU6ICJVUyIsCiAgICAgICAgY3VycmVuY3lDb2RlOiAiVVNEIiwKICAgICAgICByZXF1ZXN0QmlsbGluZ0NvbnRhY3Q6IHRydWUsCiAgICAgICAgcmVxdWVzdFNoaXBwaW5nQ29udGFjdDogdHJ1ZSwKICAgICAgICB0b3RhbDogewogICAgICAgICAgYW1vdW50OiAiMS4wMCIsCiAgICAgICAgICBsYWJlbDogIlRvdGFsIiwKICAgICAgICAgIHBlbmRpbmc6IHRydWUKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIGluaXRpYWxpemVBcHBsZVBheTogZnVuY3Rpb24gaW5pdGlhbGl6ZUFwcGxlUGF5KHBheW1lbnRzKSB7CiAgICAgIHZhciBfdGhpczYgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTkoKSB7CiAgICAgICAgdmFyIHBheW1lbnRSZXF1ZXN0LCBhcHBsZVBheTsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTkkKF9jb250ZXh0OSkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDkucHJldiA9IF9jb250ZXh0OS5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgcGF5bWVudFJlcXVlc3QgPSBfdGhpczYuYnVpbGRQYXltZW50UmVxdWVzdChwYXltZW50cyk7CiAgICAgICAgICAgICAgICBfY29udGV4dDkubmV4dCA9IDM7CiAgICAgICAgICAgICAgICByZXR1cm4gcGF5bWVudHMuYXBwbGVQYXkocGF5bWVudFJlcXVlc3QpOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICBhcHBsZVBheSA9IF9jb250ZXh0OS5zZW50OwogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0OS5hYnJ1cHQoInJldHVybiIsIGFwcGxlUGF5KTsKCiAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ5LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU5KTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgY3JlYXRlUGF5bWVudDogZnVuY3Rpb24gY3JlYXRlUGF5bWVudCh0b2tlbikgewogICAgICB2YXIgX3RoaXM3ID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUxMCgpIHsKICAgICAgICB2YXIgbG9jYXRpb25JZCwgYm9keSwgcGF5bWVudFJlc3BvbnNlLCBlcnJvckJvZHk7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUxMCQoX2NvbnRleHQxMCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDEwLnByZXYgPSBfY29udGV4dDEwLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBsb2NhdGlvbklkID0gX3RoaXM3LmxvY2F0aW9uSWQ7CiAgICAgICAgICAgICAgICBib2R5ID0gSlNPTi5zdHJpbmdpZnkoewogICAgICAgICAgICAgICAgICBsb2NhdGlvbklkOiBsb2NhdGlvbklkLAogICAgICAgICAgICAgICAgICBzb3VyY2VJZDogdG9rZW4KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgX2NvbnRleHQxMC5uZXh0ID0gNDsKICAgICAgICAgICAgICAgIHJldHVybiBmZXRjaCgiL3BheW1lbnQiLCB7CiAgICAgICAgICAgICAgICAgIG1ldGhvZDogIlBPU1QiLAogICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgICAgICAgIkNvbnRlbnQtVHlwZSI6ICJhcHBsaWNhdGlvbi9qc29uIgogICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICBib2R5OiBib2R5CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgcGF5bWVudFJlc3BvbnNlID0gX2NvbnRleHQxMC5zZW50OwoKICAgICAgICAgICAgICAgIGlmICghcGF5bWVudFJlc3BvbnNlLm9rKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0MTAubmV4dCA9IDc7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDEwLmFicnVwdCgicmV0dXJuIiwgcGF5bWVudFJlc3BvbnNlLmpzb24oKSk7CgogICAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICAgIF9jb250ZXh0MTAubmV4dCA9IDk7CiAgICAgICAgICAgICAgICByZXR1cm4gcGF5bWVudFJlc3BvbnNlLnRleHQoKTsKCiAgICAgICAgICAgICAgY2FzZSA5OgogICAgICAgICAgICAgICAgZXJyb3JCb2R5ID0gX2NvbnRleHQxMC5zZW50OwogICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yQm9keSk7CgogICAgICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDEwLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUxMCk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIC8vIENoYW5nZSB0aGUgcGFyYW1ldGVyIHRvICdwYXltZW50TWV0aG9kJwogICAgdG9rZW5pemU6IGZ1bmN0aW9uIHRva2VuaXplKHBheW1lbnRNZXRob2QpIHsKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTExKCkgewogICAgICAgIHZhciB0b2tlblJlc3VsdCwgZXJyb3JNZXNzYWdlOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMTEkKF9jb250ZXh0MTEpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQxMS5wcmV2ID0gX2NvbnRleHQxMS5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQxMS5uZXh0ID0gMjsKICAgICAgICAgICAgICAgIHJldHVybiBwYXltZW50TWV0aG9kLnRva2VuaXplKCk7CgogICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgIHRva2VuUmVzdWx0ID0gX2NvbnRleHQxMS5zZW50OwoKICAgICAgICAgICAgICAgIGlmICghKHRva2VuUmVzdWx0LnN0YXR1cyA9PT0gIk9LIikpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQxMS5uZXh0ID0gNzsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTEuYWJydXB0KCJyZXR1cm4iLCB0b2tlblJlc3VsdCk7CgogICAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICAgIGVycm9yTWVzc2FnZSA9ICJUb2tlbml6YXRpb24gZmFpbGVkIHdpdGggc3RhdHVzOiAiLmNvbmNhdCh0b2tlblJlc3VsdC5zdGF0dXMpOwoKICAgICAgICAgICAgICAgIGlmICh0b2tlblJlc3VsdC5lcnJvcnMpIHsKICAgICAgICAgICAgICAgICAgZXJyb3JNZXNzYWdlICs9ICIgYW5kIGVycm9yczogIi5jb25jYXQoSlNPTi5zdHJpbmdpZnkodG9rZW5SZXN1bHQuZXJyb3JzKSk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yTWVzc2FnZSk7CgogICAgICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDExLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUxMSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIC8vIHN0YXR1cyBpcyBlaXRoZXIgU1VDQ0VTUyBvciBGQUlMVVJFOwogICAgZGlzcGxheVBheW1lbnRSZXN1bHRzOiBmdW5jdGlvbiBkaXNwbGF5UGF5bWVudFJlc3VsdHMoc3RhdHVzKSB7CiAgICAgIGNvbnNvbGUubG9nKCJkaXNwbGF5UGF5bWVudFJlc3VsdHMgPT0+IHN0YXR1cyIsIHN0YXR1cyk7IC8vIGNvbnN0IHN0YXR1c0NvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKAogICAgICAvLyAgICJwYXltZW50LXN0YXR1cy1jb250YWluZXIiCiAgICAgIC8vICk7CiAgICAgIC8vIGlmIChzdGF0dXMgPT09ICJTVUNDRVNTIikgewogICAgICAvLyAgIHN0YXR1c0NvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKCJpcy1mYWlsdXJlIik7CiAgICAgIC8vICAgc3RhdHVzQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoImlzLXN1Y2Nlc3MiKTsKICAgICAgLy8gfSBlbHNlIHsKICAgICAgLy8gICBzdGF0dXNDb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZSgiaXMtc3VjY2VzcyIpOwogICAgICAvLyAgIHN0YXR1c0NvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCJpcy1mYWlsdXJlIik7CiAgICAgIC8vIH0KICAgICAgLy8gc3RhdHVzQ29udGFpbmVyLnN0eWxlLnZpc2liaWxpdHkgPSAidmlzaWJsZSI7CiAgICB9CiAgfQp9Ow=="},null]}