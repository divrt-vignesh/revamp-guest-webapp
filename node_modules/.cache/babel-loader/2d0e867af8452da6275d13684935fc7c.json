{"remainingRequest":"/home/vignesh/DIVRT/guest-webapp/node_modules/babel-loader/lib/index.js!/home/vignesh/DIVRT/guest-webapp/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/vignesh/DIVRT/guest-webapp/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/vignesh/DIVRT/guest-webapp/src/views/makePayment.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/vignesh/DIVRT/guest-webapp/src/views/makePayment.vue","mtime":1687345808892},{"path":"/home/vignesh/DIVRT/guest-webapp/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vignesh/DIVRT/guest-webapp/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/vignesh/DIVRT/guest-webapp/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vignesh/DIVRT/guest-webapp/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9ob21lL3ZpZ25lc2gvRElWUlQvZ3Vlc3Qtd2ViYXBwL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL2hvbWUvdmlnbmVzaC9ESVZSVC9ndWVzdC13ZWJhcHAvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDIiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnNwbGl0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnNlYXJjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmluY2x1ZGVzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLmluY2x1ZGVzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnJlcGxhY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zbGljZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy50cmltLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC50by1zdHJpbmcuanMiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgSGVhcnRsYW5kIGZyb20gIi4uL3BsdWdpbnMvc2VjdXJlc3VibWl0IjsgLy8gaW1wb3J0IGF4aW9zIGZyb20gImF4aW9zIjsKCmltcG9ydCB7IGZvcm1hdCB9IGZyb20gImRhdGUtZm5zIjsgLy8gaW1wb3J0IGxvZ2dlckhlbHBlciBmcm9tICIuLi9sb2dnZXJIZWxwZXIiOwovLyBpbXBvcnQgeyBFdmVudEJ1cyB9IGZyb20gIkAvbGliL0V2ZW50QnVzIjsKCmltcG9ydCBBUElIZWxwZXIgZnJvbSAiLi4vYXBpSGVscGVyIjsKaW1wb3J0IHsgbWFwR2V0dGVycyB9IGZyb20gInZ1ZXgiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkFkZFBheW1lbnQiLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICByZWdleF9VUzogL14oPz0uezIsMTB9JCkoWzAtOV17MSw5fShbLXNdezF9WzAtOV0rKT8pJC8sCiAgICAgIHJlZ2V4X0NBOiAvLipbYS16QS1aXS4qJC8sCiAgICAgIGRlZmF1bHRDcmVkaXRDYXJkQ0I6IGZhbHNlLAogICAgICBhdXRvQ2hlY2tpbkNCOiBmYWxzZSwKICAgICAgb2RTZXNzaW9uTG9hZGluZzogZmFsc2UsCiAgICAgIGhwczogIiIsCiAgICAgIHBvc3RhbENvZGU6ICIiLAogICAgICBlbWFpbDogIiIsCiAgICAgIGFkZFBheW1lbnRMb2FkaW5nOiBmYWxzZSwKICAgICAgc2hvd1BheW1lbnRCdG46IHRydWUsCiAgICAgIGR1cmF0aW9uOiAzMDAsCiAgICAgIG9mZnNldDogMTAwLAogICAgICBlYXNpbmc6ICJlYXNlSW5PdXRDdWJpYyIsCiAgICAgIGVyckRpYWxvZzogZmFsc2UsCiAgICAgIGVyck1zZzogIiIsCiAgICAgIGluZm9EaWFsb2c6IGZhbHNlLAogICAgICBpbmZvTXNnOiAiIgogICAgfTsKICB9LAogIGNvbXB1dGVkOiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIG1hcEdldHRlcnMoewogICAgYm9va2luZ0lkOiAiZ2V0dGVyQm9va2luZ0lkIiwKICAgIGNhc2lub0RldGFpbHM6ICdnZXR0ZXJDYXNpbm9EZXRhaWxzJywKICAgIGJvb2tpbmdEZXRhaWxzOiAiZ2V0dGVyQm9va2luZ0RldGFpbHMiLAogICAgem9uZURldGFpbHM6ICJnZXR0ZXJab25lRGV0YWlscyIsCiAgICB0ZW1wbGF0ZUZsYWdzOiAnZ2V0dGVyVGVtcGxhdGVGbGFncycsCiAgICBvZERldGFpbHM6ICJnZXR0ZXJPZERldGFpbHMiCiAgfSkpLCB7fSwgewogICAgb3B0aW9uczogZnVuY3Rpb24gb3B0aW9ucygpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICBkdXJhdGlvbjogdGhpcy5kdXJhdGlvbiwKICAgICAgICBvZmZzZXQ6IHRoaXMub2Zmc2V0LAogICAgICAgIGVhc2luZzogdGhpcy5lYXNpbmcKICAgICAgfTsKICAgIH0sCiAgICBjaGVja1Bvc3RhbENvZGU6IGZ1bmN0aW9uIGNoZWNrUG9zdGFsQ29kZSgpIHsKICAgICAgcmV0dXJuIC8oXlxkezV9JCl8KF5cZHs1fS1cZHs0fSQpLy50ZXN0KHRoaXMucG9zdGFsQ29kZSkgfHwgL15bQS1aYS16XVxkW0EtWmEtel1bIC1dP1xkW0EtWmEtel1cZCQvLnRlc3QodGhpcy5wb3N0YWxDb2RlKTsKICAgIH0KICB9KSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkge30sCiAgYmVmb3JlUm91dGVFbnRlcjogZnVuY3Rpb24gYmVmb3JlUm91dGVFbnRlcih0bywgZnJvbSwgbmV4dCkgewogICAgbmV4dCggLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgICAgdmFyIF9yZWYgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUodm0pIHsKICAgICAgICB2YXIgc2VhcmNoUGFyYW1zLCBzZWFyY2hQYXJhbUtleSwgc2VhcmNoUGFyYW1WYWx1ZSwgX29kQ0NEZXRhaWxzLCBfb2RDQ0RldGFpbHMyLCBvZENDRGV0YWlsczsKCiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgdm0uJHZ1ZXRpZnkuZ29UbygwKTsKICAgICAgICAgICAgICAgIHNlYXJjaFBhcmFtcyA9IHdpbmRvdy5sb2NhdGlvbi5zZWFyY2guc3BsaXQoIj0iKTsKICAgICAgICAgICAgICAgIHNlYXJjaFBhcmFtS2V5ID0gc2VhcmNoUGFyYW1zLmxlbmd0aCA+IDAgPyBzZWFyY2hQYXJhbXNbMF0gOiAiIjsKICAgICAgICAgICAgICAgIHNlYXJjaFBhcmFtVmFsdWUgPSBzZWFyY2hQYXJhbXMubGVuZ3RoID4gMCA/IHNlYXJjaFBhcmFtc1sxXSA6ICIiOwogICAgICAgICAgICAgICAgX2NvbnRleHQudDAgPSBzZWFyY2hQYXJhbUtleTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSBfY29udGV4dC50MCA9PT0gIj96Y29kZSIgPyA3IDogX2NvbnRleHQudDAgPT09ICI/Z2F0ZWlkIiA/IDkgOiAxMDsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgICB2bS5nZXRab25lRGV0YWlscyhzZWFyY2hQYXJhbUtleSwgc2VhcmNoUGFyYW1WYWx1ZSk7CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJicmVhayIsIDEwKTsKCiAgICAgICAgICAgICAgY2FzZSA5OgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgiYnJlYWsiLCAxMCk7CgogICAgICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgICAgICBpZiAobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ29kQ0NEZXRhaWxzJykpIHsKICAgICAgICAgICAgICAgICAgb2RDQ0RldGFpbHMgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnb2RDQ0RldGFpbHMnKTsKICAgICAgICAgICAgICAgICAgb2RDQ0RldGFpbHMgPSBvZENDRGV0YWlscyA/IEpTT04ucGFyc2Uob2RDQ0RldGFpbHMpIDoge307CiAgICAgICAgICAgICAgICAgIHZtLnBvc3RhbENvZGUgPSAoX29kQ0NEZXRhaWxzID0gb2RDQ0RldGFpbHMpICE9PSBudWxsICYmIF9vZENDRGV0YWlscyAhPT0gdm9pZCAwICYmIF9vZENDRGV0YWlscy5wb3N0YWxDb2RlID8gb2RDQ0RldGFpbHMucG9zdGFsQ29kZSA6IHZtLnBvc3RhbENvZGU7CiAgICAgICAgICAgICAgICAgIHZtLmVtYWlsID0gKF9vZENDRGV0YWlsczIgPSBvZENDRGV0YWlscykgIT09IG51bGwgJiYgX29kQ0NEZXRhaWxzMiAhPT0gdm9pZCAwICYmIF9vZENDRGV0YWlsczIuZW1haWwgPyBvZENDRGV0YWlscy5lbWFpbCA6IHZtLmVtYWlsOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgIH0pKTsKCiAgICAgIHJldHVybiBmdW5jdGlvbiAoX3gpIHsKICAgICAgICByZXR1cm4gX3JlZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9OwogICAgfSgpKTsKICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICBpZiAod2luZG93LmxvY2F0aW9uLmhyZWYuaW5jbHVkZXMoJ3ByZXBhaWRob3N0JykpIHsKICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCJTRVRfVEVNUExBVEVfRkxBR1MiLCAnYXRsYW50aWMtZmxhZycpOwogICAgfSBlbHNlIGlmICh3aW5kb3cubG9jYXRpb24uaHJlZi5pbmNsdWRlcygnb25kZW1hbmQnKSkgewogICAgICB0aGlzLiRzdG9yZS5jb21taXQoIlNFVF9URU1QTEFURV9GTEFHUyIsICdvbmRlbWFuZC1mbGFnJyk7CiAgICB9CgogICAgdGhpcy5pbml0SFBTZm9ybSgpOwogIH0sCiAgbWV0aG9kczogewogICAgY3JlYXRlT0RTZXNzaW9uOiBmdW5jdGlvbiBjcmVhdGVPRFNlc3Npb24oKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgICB2YXIgX3RoaXMkb2REZXRhaWxzLCBfdGhpcyRvZERldGFpbHMkdXNlckQsIF90aGlzJG9kRGV0YWlsczIsIF90aGlzJG9kRGV0YWlsczIkdXNlciwgX3RoaXMkb2REZXRhaWxzMywgX3RoaXMkb2REZXRhaWxzMyR1c2VyLCBfdGhpcyRvZERldGFpbHM0LCBfdGhpcyRvZERldGFpbHM0JHVzZXIsIF90aGlzJG9kRGV0YWlsczUsIF90aGlzJG9kRGV0YWlsczUkY2FyZCwgX3RoaXMkem9uZURldGFpbHMsIF90aGlzJG9kRGV0YWlsczYsIF90aGlzJG9kRGV0YWlsczYkcGF5bSwgX3RoaXMkb2REZXRhaWxzNywgX3RoaXMkb2REZXRhaWxzNyRwYXltLCBfdGhpcyRvZERldGFpbHM4LCBfdGhpcyRvZERldGFpbHM4JHBheW0sIF90aGlzJG9kRGV0YWlsczksIF90aGlzJG9kRGV0YWlsczkkcGF5bSwgX3RoaXMkb2REZXRhaWxzMTAsIF90aGlzJG9kRGV0YWlsczEwJHBheSwgX3RoaXMkb2REZXRhaWxzMTEsIF90aGlzJG9kRGV0YWlsczExJHBheSwgX3RoaXMkb2REZXRhaWxzMTIsIF90aGlzJG9kRGV0YWlsczEyJHBheSwgX3RoaXMkb2REZXRhaWxzMTMsIF90aGlzJG9kRGV0YWlsczEzJHBheSwgX3RoaXMkb2REZXRhaWxzMTQsIF90aGlzJG9kRGV0YWlsczE0JHBheSwgX29kQWRkQ2FyZCRkYXRhLCBfb2RBZGRDYXJkJGRhdGEzLCBleGl0RGF0ZVRpbWUsIGVudHJ5RGF0ZVRpbWUsIHBvc3REYXRhLCBvZEFkZENhcmQsIF9vZEFkZENhcmQkZGF0YTIsIF9vZEFkZENhcmQkZGF0YTIkZGF0YSwgdXJsLCBfb2RBZGRDYXJkJGRhdGE0OwoKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQyLnByZXYgPSAwOwogICAgICAgICAgICAgICAgX3RoaXMub2RTZXNzaW9uTG9hZGluZyA9IHRydWU7CiAgICAgICAgICAgICAgICBleGl0RGF0ZVRpbWUgPSBmb3JtYXQobmV3IERhdGUoKF90aGlzJG9kRGV0YWlscyA9IF90aGlzLm9kRGV0YWlscykgPT09IG51bGwgfHwgX3RoaXMkb2REZXRhaWxzID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX3RoaXMkb2REZXRhaWxzJHVzZXJEID0gX3RoaXMkb2REZXRhaWxzLnVzZXJEZXRhaWwpID09PSBudWxsIHx8IF90aGlzJG9kRGV0YWlscyR1c2VyRCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkb2REZXRhaWxzJHVzZXJELmV4aXRUaW1lLnJlcGxhY2VBbGwoIi0iLCAiLyIpKSwgInl5eXktTU0tZGQgSEg6bW06c3MiKTsKICAgICAgICAgICAgICAgIGVudHJ5RGF0ZVRpbWUgPSBmb3JtYXQobmV3IERhdGUoKF90aGlzJG9kRGV0YWlsczIgPSBfdGhpcy5vZERldGFpbHMpID09PSBudWxsIHx8IF90aGlzJG9kRGV0YWlsczIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfdGhpcyRvZERldGFpbHMyJHVzZXIgPSBfdGhpcyRvZERldGFpbHMyLnVzZXJEZXRhaWwpID09PSBudWxsIHx8IF90aGlzJG9kRGV0YWlsczIkdXNlciA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkb2REZXRhaWxzMiR1c2VyLmVudHJ5VGltZS5yZXBsYWNlQWxsKCItIiwgIi8iKSksICJ5eXl5LU1NLWRkIEhIOm1tOnNzIik7CiAgICAgICAgICAgICAgICBwb3N0RGF0YSA9IHsKICAgICAgICAgICAgICAgICAgdXNlckRldGFpbDogewogICAgICAgICAgICAgICAgICAgIHBsYXRlOiAoX3RoaXMkb2REZXRhaWxzMyA9IF90aGlzLm9kRGV0YWlscykgPT09IG51bGwgfHwgX3RoaXMkb2REZXRhaWxzMyA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF90aGlzJG9kRGV0YWlsczMkdXNlciA9IF90aGlzJG9kRGV0YWlsczMudXNlckRldGFpbCkgPT09IG51bGwgfHwgX3RoaXMkb2REZXRhaWxzMyR1c2VyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyRvZERldGFpbHMzJHVzZXIucGxhdGUsCiAgICAgICAgICAgICAgICAgICAgY29udGFjdDogKF90aGlzJG9kRGV0YWlsczQgPSBfdGhpcy5vZERldGFpbHMpID09PSBudWxsIHx8IF90aGlzJG9kRGV0YWlsczQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfdGhpcyRvZERldGFpbHM0JHVzZXIgPSBfdGhpcyRvZERldGFpbHM0LnVzZXJEZXRhaWwpID09PSBudWxsIHx8IF90aGlzJG9kRGV0YWlsczQkdXNlciA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkb2REZXRhaWxzNCR1c2VyLmNvbnRhY3QsCiAgICAgICAgICAgICAgICAgICAgZXhpdFRpbWU6IGV4aXREYXRlVGltZSwKICAgICAgICAgICAgICAgICAgICBldmVudFR5cGU6ICJPRCIKICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgY2FyZERldGFpbDogewogICAgICAgICAgICAgICAgICAgIGNhcmRUeXBlOiAoX3RoaXMkb2REZXRhaWxzNSA9IF90aGlzLm9kRGV0YWlscykgPT09IG51bGwgfHwgX3RoaXMkb2REZXRhaWxzNSA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF90aGlzJG9kRGV0YWlsczUkY2FyZCA9IF90aGlzJG9kRGV0YWlsczUuY2FyZERldGFpbCkgPT09IG51bGwgfHwgX3RoaXMkb2REZXRhaWxzNSRjYXJkID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyRvZERldGFpbHM1JGNhcmQuY2FyZFR5cGUsCiAgICAgICAgICAgICAgICAgICAgdXNlckRldmljZTogIjIiLAogICAgICAgICAgICAgICAgICAgIG9yZGVyVHlwZTogIjMiLAogICAgICAgICAgICAgICAgICAgIGVudHJ5OiBbewogICAgICAgICAgICAgICAgICAgICAgbG9jYXRpb25Db2RlOiAoX3RoaXMkem9uZURldGFpbHMgPSBfdGhpcy56b25lRGV0YWlscykgPT09IG51bGwgfHwgX3RoaXMkem9uZURldGFpbHMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJHpvbmVEZXRhaWxzLnpjb2RlLAogICAgICAgICAgICAgICAgICAgICAgc3RhcnRBdDogZW50cnlEYXRlVGltZSwKICAgICAgICAgICAgICAgICAgICAgIHF1YW50aXR5OiAiMSIKICAgICAgICAgICAgICAgICAgICB9XSwKICAgICAgICAgICAgICAgICAgICBwYXltZW50OiB7CiAgICAgICAgICAgICAgICAgICAgICBsYXN0Rm91ckRpZ2l0czogKF90aGlzJG9kRGV0YWlsczYgPSBfdGhpcy5vZERldGFpbHMpID09PSBudWxsIHx8IF90aGlzJG9kRGV0YWlsczYgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfdGhpcyRvZERldGFpbHM2JHBheW0gPSBfdGhpcyRvZERldGFpbHM2LnBheW1lbnQpID09PSBudWxsIHx8IF90aGlzJG9kRGV0YWlsczYkcGF5bSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkb2REZXRhaWxzNiRwYXltLmxhc3RGb3VyRGlnaXRzLAogICAgICAgICAgICAgICAgICAgICAgZXhwaXJhdGlvbk1vbnRoOiAoX3RoaXMkb2REZXRhaWxzNyA9IF90aGlzLm9kRGV0YWlscykgPT09IG51bGwgfHwgX3RoaXMkb2REZXRhaWxzNyA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF90aGlzJG9kRGV0YWlsczckcGF5bSA9IF90aGlzJG9kRGV0YWlsczcucGF5bWVudCkgPT09IG51bGwgfHwgX3RoaXMkb2REZXRhaWxzNyRwYXltID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyRvZERldGFpbHM3JHBheW0uZXhwaXJhdGlvbk1vbnRoLAogICAgICAgICAgICAgICAgICAgICAgZXhwaXJhdGlvblllYXI6IChfdGhpcyRvZERldGFpbHM4ID0gX3RoaXMub2REZXRhaWxzKSA9PT0gbnVsbCB8fCBfdGhpcyRvZERldGFpbHM4ID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX3RoaXMkb2REZXRhaWxzOCRwYXltID0gX3RoaXMkb2REZXRhaWxzOC5wYXltZW50KSA9PT0gbnVsbCB8fCBfdGhpcyRvZERldGFpbHM4JHBheW0gPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJG9kRGV0YWlsczgkcGF5bS5leHBpcmF0aW9uWWVhciwKICAgICAgICAgICAgICAgICAgICAgIHBvc3RhbENvZGU6IChfdGhpcyRvZERldGFpbHM5ID0gX3RoaXMub2REZXRhaWxzKSA9PT0gbnVsbCB8fCBfdGhpcyRvZERldGFpbHM5ID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX3RoaXMkb2REZXRhaWxzOSRwYXltID0gX3RoaXMkb2REZXRhaWxzOS5wYXltZW50KSA9PT0gbnVsbCB8fCBfdGhpcyRvZERldGFpbHM5JHBheW0gPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJG9kRGV0YWlsczkkcGF5bS5wb3N0YWxDb2RlLAogICAgICAgICAgICAgICAgICAgICAgYXV0aG9yaXphdGlvblRva2VuOiAoX3RoaXMkb2REZXRhaWxzMTAgPSBfdGhpcy5vZERldGFpbHMpID09PSBudWxsIHx8IF90aGlzJG9kRGV0YWlsczEwID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX3RoaXMkb2REZXRhaWxzMTAkcGF5ID0gX3RoaXMkb2REZXRhaWxzMTAucGF5bWVudCkgPT09IG51bGwgfHwgX3RoaXMkb2REZXRhaWxzMTAkcGF5ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyRvZERldGFpbHMxMCRwYXkuYXV0aG9yaXphdGlvblRva2VuLAogICAgICAgICAgICAgICAgICAgICAgZW1haWw6IChfdGhpcyRvZERldGFpbHMxMSA9IF90aGlzLm9kRGV0YWlscykgPT09IG51bGwgfHwgX3RoaXMkb2REZXRhaWxzMTEgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfdGhpcyRvZERldGFpbHMxMSRwYXkgPSBfdGhpcyRvZERldGFpbHMxMS5wYXltZW50KSA9PT0gbnVsbCB8fCBfdGhpcyRvZERldGFpbHMxMSRwYXkgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJG9kRGV0YWlsczExJHBheS5lbWFpbCwKICAgICAgICAgICAgICAgICAgICAgIHNhdmVDYXJkOiAoX3RoaXMkb2REZXRhaWxzMTIgPSBfdGhpcy5vZERldGFpbHMpID09PSBudWxsIHx8IF90aGlzJG9kRGV0YWlsczEyID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX3RoaXMkb2REZXRhaWxzMTIkcGF5ID0gX3RoaXMkb2REZXRhaWxzMTIucGF5bWVudCkgPT09IG51bGwgfHwgX3RoaXMkb2REZXRhaWxzMTIkcGF5ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyRvZERldGFpbHMxMiRwYXkuc2F2ZUNhcmQsCiAgICAgICAgICAgICAgICAgICAgICBpc0RlZmF1bHQ6IChfdGhpcyRvZERldGFpbHMxMyA9IF90aGlzLm9kRGV0YWlscykgPT09IG51bGwgfHwgX3RoaXMkb2REZXRhaWxzMTMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfdGhpcyRvZERldGFpbHMxMyRwYXkgPSBfdGhpcyRvZERldGFpbHMxMy5wYXltZW50KSA9PT0gbnVsbCB8fCBfdGhpcyRvZERldGFpbHMxMyRwYXkgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJG9kRGV0YWlsczEzJHBheS5pc0RlZmF1bHQsCiAgICAgICAgICAgICAgICAgICAgICBwcmVBdXRob3JpemVkT25seTogKF90aGlzJG9kRGV0YWlsczE0ID0gX3RoaXMub2REZXRhaWxzKSA9PT0gbnVsbCB8fCBfdGhpcyRvZERldGFpbHMxNCA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF90aGlzJG9kRGV0YWlsczE0JHBheSA9IF90aGlzJG9kRGV0YWlsczE0LnBheW1lbnQpID09PSBudWxsIHx8IF90aGlzJG9kRGV0YWlsczE0JHBheSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkb2REZXRhaWxzMTQkcGF5LnByZUF1dGhvcml6ZWRPbmx5CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICBtaWQ6IF90aGlzLnpvbmVEZXRhaWxzLm1pZCwKICAgICAgICAgICAgICAgICAgc291cmNlOiAid2ViIgogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gNzsKICAgICAgICAgICAgICAgIHJldHVybiBBUElIZWxwZXIoIlBPU1QiLCAiL2FwaS92MS9wcmVwYWlkL2FkZENhcmQiLCBwb3N0RGF0YSk7CgogICAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICAgIG9kQWRkQ2FyZCA9IF9jb250ZXh0Mi5zZW50OwoKICAgICAgICAgICAgICAgIGlmICgob2RBZGRDYXJkID09PSBudWxsIHx8IG9kQWRkQ2FyZCA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9vZEFkZENhcmQkZGF0YSA9IG9kQWRkQ2FyZC5kYXRhKSA9PT0gbnVsbCB8fCBfb2RBZGRDYXJkJGRhdGEgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9vZEFkZENhcmQkZGF0YS5zdGF0dXMpID09IHRydWUpIHsKICAgICAgICAgICAgICAgICAgdXJsID0gd2luZG93LmxvY2F0aW9uLm9yaWdpbiArICIvZy8iICsgKG9kQWRkQ2FyZCA9PT0gbnVsbCB8fCBvZEFkZENhcmQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfb2RBZGRDYXJkJGRhdGEyID0gb2RBZGRDYXJkLmRhdGEpID09PSBudWxsIHx8IF9vZEFkZENhcmQkZGF0YTIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfb2RBZGRDYXJkJGRhdGEyJGRhdGEgPSBfb2RBZGRDYXJkJGRhdGEyLmRhdGEpID09PSBudWxsIHx8IF9vZEFkZENhcmQkZGF0YTIkZGF0YSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX29kQWRkQ2FyZCRkYXRhMiRkYXRhLmJpZCk7CiAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZXBsYWNlKHVybCk7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKChvZEFkZENhcmQgPT09IG51bGwgfHwgb2RBZGRDYXJkID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX29kQWRkQ2FyZCRkYXRhMyA9IG9kQWRkQ2FyZC5kYXRhKSA9PT0gbnVsbCB8fCBfb2RBZGRDYXJkJGRhdGEzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfb2RBZGRDYXJkJGRhdGEzLnN0YXR1cykgPT0gZmFsc2UpIHsKICAgICAgICAgICAgICAgICAgX3RoaXMuYWxlcnREaWFsb2cgPSB0cnVlOwogICAgICAgICAgICAgICAgICBfdGhpcy5hbGVydE1zZyA9IG9kQWRkQ2FyZCA9PT0gbnVsbCB8fCBvZEFkZENhcmQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfb2RBZGRDYXJkJGRhdGE0ID0gb2RBZGRDYXJkLmRhdGEpID09PSBudWxsIHx8IF9vZEFkZENhcmQkZGF0YTQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9vZEFkZENhcmQkZGF0YTQubWVzc2FnZTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfdGhpcy5vZFNlc3Npb25Mb2FkaW5nID0gZmFsc2U7IC8vIHRoaXMuJHJvdXRlci5yZXBsYWNlKHsgcGF0aDogJ29kRXh0ZW5zaW9uJyB9KQoKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMTY7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5wcmV2ID0gMTI7CiAgICAgICAgICAgICAgICBfY29udGV4dDIudDAgPSBfY29udGV4dDJbImNhdGNoIl0oMCk7CiAgICAgICAgICAgICAgICBfdGhpcy5vZFNlc3Npb25Mb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhfY29udGV4dDIudDApOwoKICAgICAgICAgICAgICBjYXNlIDE2OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUyLCBudWxsLCBbWzAsIDEyXV0pOwogICAgICB9KSkoKTsKICAgIH0sCiAgICAvL0F0bGFudGljIGZsb3cgY3JlYXRlIHNlc3Npb24KICAgIGNhc2lub1Nlc3Npb246IGZ1bmN0aW9uIGNhc2lub1Nlc3Npb24oKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMoKSB7CiAgICAgICAgdmFyIF90aGlzMiRjYXNpbm9EZXRhaWxzLCBfdGhpczIkY2FzaW5vRGV0YWlscyQsIF90aGlzMiRjYXNpbm9EZXRhaWxzMiwgX3RoaXMyJGNhc2lub0RldGFpbHMzLCBfdGhpczIkY2FzaW5vRGV0YWlsczQsIF90aGlzMiRjYXNpbm9EZXRhaWxzNSwgX3RoaXMyJGNhc2lub0RldGFpbHM2LCBfdGhpczIkY2FzaW5vRGV0YWlsczcsIF90aGlzMiRjYXNpbm9EZXRhaWxzOCwgX3RoaXMyJGNhc2lub0RldGFpbHM5LCBfdGhpczIkem9uZURldGFpbHMsIF90aGlzMiRjYXNpbm9EZXRhaWxzMTAsIF90aGlzMiRjYXNpbm9EZXRhaWxzMTEsIF90aGlzMiRjYXNpbm9EZXRhaWxzMTIsIF90aGlzMiRjYXNpbm9EZXRhaWxzMTMsIF90aGlzMiRjYXNpbm9EZXRhaWxzMTQsIF90aGlzMiRjYXNpbm9EZXRhaWxzMTUsIF90aGlzMiRjYXNpbm9EZXRhaWxzMTYsIF90aGlzMiRjYXNpbm9EZXRhaWxzMTcsIF90aGlzMiRjYXNpbm9EZXRhaWxzMTgsIF90aGlzMiRjYXNpbm9EZXRhaWxzMTksIF90aGlzMiRjYXNpbm9EZXRhaWxzMjAsIF90aGlzMiRjYXNpbm9EZXRhaWxzMjEsIF90aGlzMiRjYXNpbm9EZXRhaWxzMjIsIF90aGlzMiRjYXNpbm9EZXRhaWxzMjMsIF90aGlzMiRjYXNpbm9EZXRhaWxzMjQsIF90aGlzMiRjYXNpbm9EZXRhaWxzMjUsIF90aGlzMiRjYXNpbm9EZXRhaWxzMjYsIF90aGlzMiRjYXNpbm9EZXRhaWxzMjcsIF90aGlzMiRjYXNpbm9EZXRhaWxzMjgsIF90aGlzMiRjYXNpbm9EZXRhaWxzMjksIF9hZGRDYXJkJGRhdGEsIF9hZGRDYXJkJGRhdGEzLCBleGl0RGF0ZVRpbWUsIGVudHJ5RGF0ZVRpbWUsIHBvc3REYXRhLCBhZGRDYXJkLCBfYWRkQ2FyZCRkYXRhMiwgX2FkZENhcmQkZGF0YTIkZGF0YSwgdXJsLCBfYWRkQ2FyZCRkYXRhNDsKCiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzJChfY29udGV4dDMpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQzLnByZXYgPSBfY29udGV4dDMubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0My5wcmV2ID0gMDsKICAgICAgICAgICAgICAgIF90aGlzMi5vZFNlc3Npb25Mb2FkaW5nID0gdHJ1ZTsKICAgICAgICAgICAgICAgIGV4aXREYXRlVGltZSA9IGZvcm1hdChuZXcgRGF0ZSgoX3RoaXMyJGNhc2lub0RldGFpbHMgPSBfdGhpczIuY2FzaW5vRGV0YWlscykgPT09IG51bGwgfHwgX3RoaXMyJGNhc2lub0RldGFpbHMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfdGhpczIkY2FzaW5vRGV0YWlscyQgPSBfdGhpczIkY2FzaW5vRGV0YWlscy51c2VyRGV0YWlsKSA9PT0gbnVsbCB8fCBfdGhpczIkY2FzaW5vRGV0YWlscyQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzMiRjYXNpbm9EZXRhaWxzJC5leGl0VGltZS5yZXBsYWNlQWxsKCItIiwgIi8iKSksICJ5eXl5LU1NLWRkIEhIOm1tOnNzIik7CiAgICAgICAgICAgICAgICBlbnRyeURhdGVUaW1lID0gZm9ybWF0KG5ldyBEYXRlKChfdGhpczIkY2FzaW5vRGV0YWlsczIgPSBfdGhpczIuY2FzaW5vRGV0YWlscykgPT09IG51bGwgfHwgX3RoaXMyJGNhc2lub0RldGFpbHMyID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX3RoaXMyJGNhc2lub0RldGFpbHMzID0gX3RoaXMyJGNhc2lub0RldGFpbHMyLnVzZXJEZXRhaWwpID09PSBudWxsIHx8IF90aGlzMiRjYXNpbm9EZXRhaWxzMyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMyJGNhc2lub0RldGFpbHMzLmVudHJ5VGltZS5yZXBsYWNlQWxsKCItIiwgIi8iKSksICJ5eXl5LU1NLWRkIEhIOm1tOnNzIik7CiAgICAgICAgICAgICAgICBwb3N0RGF0YSA9IHsKICAgICAgICAgICAgICAgICAgbWlkOiBfdGhpczIuem9uZURldGFpbHMubWlkLAogICAgICAgICAgICAgICAgICB1c2VyRGV0YWlsOiB7CiAgICAgICAgICAgICAgICAgICAgcGxhdGU6IChfdGhpczIkY2FzaW5vRGV0YWlsczQgPSBfdGhpczIuY2FzaW5vRGV0YWlscykgPT09IG51bGwgfHwgX3RoaXMyJGNhc2lub0RldGFpbHM0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX3RoaXMyJGNhc2lub0RldGFpbHM1ID0gX3RoaXMyJGNhc2lub0RldGFpbHM0LnVzZXJEZXRhaWwpID09PSBudWxsIHx8IF90aGlzMiRjYXNpbm9EZXRhaWxzNSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMyJGNhc2lub0RldGFpbHM1LnBsYXRlLAogICAgICAgICAgICAgICAgICAgIGNvbnRhY3Q6IChfdGhpczIkY2FzaW5vRGV0YWlsczYgPSBfdGhpczIuY2FzaW5vRGV0YWlscykgPT09IG51bGwgfHwgX3RoaXMyJGNhc2lub0RldGFpbHM2ID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX3RoaXMyJGNhc2lub0RldGFpbHM3ID0gX3RoaXMyJGNhc2lub0RldGFpbHM2LnVzZXJEZXRhaWwpID09PSBudWxsIHx8IF90aGlzMiRjYXNpbm9EZXRhaWxzNyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMyJGNhc2lub0RldGFpbHM3LmNvbnRhY3QsCiAgICAgICAgICAgICAgICAgICAgZXhpdFRpbWU6IGV4aXREYXRlVGltZSwKICAgICAgICAgICAgICAgICAgICBldmVudFR5cGU6ICJQYWlkSG9zdFBhc3MiCiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIGNhcmREZXRhaWw6IHsKICAgICAgICAgICAgICAgICAgICBjYXJkVHlwZTogKF90aGlzMiRjYXNpbm9EZXRhaWxzOCA9IF90aGlzMi5jYXNpbm9EZXRhaWxzKSA9PT0gbnVsbCB8fCBfdGhpczIkY2FzaW5vRGV0YWlsczggPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfdGhpczIkY2FzaW5vRGV0YWlsczkgPSBfdGhpczIkY2FzaW5vRGV0YWlsczguY2FyZERldGFpbCkgPT09IG51bGwgfHwgX3RoaXMyJGNhc2lub0RldGFpbHM5ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpczIkY2FzaW5vRGV0YWlsczkuY2FyZFR5cGUsCiAgICAgICAgICAgICAgICAgICAgdXNlckRldmljZTogIjIiLAogICAgICAgICAgICAgICAgICAgIG9yZGVyVHlwZTogIjMiLAogICAgICAgICAgICAgICAgICAgIGVudHJ5OiBbewogICAgICAgICAgICAgICAgICAgICAgbG9jYXRpb25Db2RlOiAoX3RoaXMyJHpvbmVEZXRhaWxzID0gX3RoaXMyLnpvbmVEZXRhaWxzKSA9PT0gbnVsbCB8fCBfdGhpczIkem9uZURldGFpbHMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzMiR6b25lRGV0YWlscy56Y29kZSwKICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0QXQ6IGVudHJ5RGF0ZVRpbWUsCiAgICAgICAgICAgICAgICAgICAgICBxdWFudGl0eTogIjEiCiAgICAgICAgICAgICAgICAgICAgfV0sCiAgICAgICAgICAgICAgICAgICAgcGF5bWVudDogewogICAgICAgICAgICAgICAgICAgICAgbGFzdEZvdXJEaWdpdHM6IChfdGhpczIkY2FzaW5vRGV0YWlsczEwID0gX3RoaXMyLmNhc2lub0RldGFpbHMpID09PSBudWxsIHx8IF90aGlzMiRjYXNpbm9EZXRhaWxzMTAgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfdGhpczIkY2FzaW5vRGV0YWlsczExID0gX3RoaXMyJGNhc2lub0RldGFpbHMxMC5wYXltZW50KSA9PT0gbnVsbCB8fCBfdGhpczIkY2FzaW5vRGV0YWlsczExID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpczIkY2FzaW5vRGV0YWlsczExLmxhc3RGb3VyRGlnaXRzLAogICAgICAgICAgICAgICAgICAgICAgZXhwaXJhdGlvbk1vbnRoOiAoX3RoaXMyJGNhc2lub0RldGFpbHMxMiA9IF90aGlzMi5jYXNpbm9EZXRhaWxzKSA9PT0gbnVsbCB8fCBfdGhpczIkY2FzaW5vRGV0YWlsczEyID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX3RoaXMyJGNhc2lub0RldGFpbHMxMyA9IF90aGlzMiRjYXNpbm9EZXRhaWxzMTIucGF5bWVudCkgPT09IG51bGwgfHwgX3RoaXMyJGNhc2lub0RldGFpbHMxMyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMyJGNhc2lub0RldGFpbHMxMy5leHBpcmF0aW9uTW9udGgsCiAgICAgICAgICAgICAgICAgICAgICBleHBpcmF0aW9uWWVhcjogKF90aGlzMiRjYXNpbm9EZXRhaWxzMTQgPSBfdGhpczIuY2FzaW5vRGV0YWlscykgPT09IG51bGwgfHwgX3RoaXMyJGNhc2lub0RldGFpbHMxNCA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF90aGlzMiRjYXNpbm9EZXRhaWxzMTUgPSBfdGhpczIkY2FzaW5vRGV0YWlsczE0LnBheW1lbnQpID09PSBudWxsIHx8IF90aGlzMiRjYXNpbm9EZXRhaWxzMTUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzMiRjYXNpbm9EZXRhaWxzMTUuZXhwaXJhdGlvblllYXIsCiAgICAgICAgICAgICAgICAgICAgICBwb3N0YWxDb2RlOiAoX3RoaXMyJGNhc2lub0RldGFpbHMxNiA9IF90aGlzMi5jYXNpbm9EZXRhaWxzKSA9PT0gbnVsbCB8fCBfdGhpczIkY2FzaW5vRGV0YWlsczE2ID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX3RoaXMyJGNhc2lub0RldGFpbHMxNyA9IF90aGlzMiRjYXNpbm9EZXRhaWxzMTYucGF5bWVudCkgPT09IG51bGwgfHwgX3RoaXMyJGNhc2lub0RldGFpbHMxNyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMyJGNhc2lub0RldGFpbHMxNy5wb3N0YWxDb2RlLAogICAgICAgICAgICAgICAgICAgICAgYXV0aG9yaXphdGlvblRva2VuOiAoX3RoaXMyJGNhc2lub0RldGFpbHMxOCA9IF90aGlzMi5jYXNpbm9EZXRhaWxzKSA9PT0gbnVsbCB8fCBfdGhpczIkY2FzaW5vRGV0YWlsczE4ID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX3RoaXMyJGNhc2lub0RldGFpbHMxOSA9IF90aGlzMiRjYXNpbm9EZXRhaWxzMTgucGF5bWVudCkgPT09IG51bGwgfHwgX3RoaXMyJGNhc2lub0RldGFpbHMxOSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMyJGNhc2lub0RldGFpbHMxOS5hdXRob3JpemF0aW9uVG9rZW4sCiAgICAgICAgICAgICAgICAgICAgICBlbWFpbDogKF90aGlzMiRjYXNpbm9EZXRhaWxzMjAgPSBfdGhpczIuY2FzaW5vRGV0YWlscykgPT09IG51bGwgfHwgX3RoaXMyJGNhc2lub0RldGFpbHMyMCA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF90aGlzMiRjYXNpbm9EZXRhaWxzMjEgPSBfdGhpczIkY2FzaW5vRGV0YWlsczIwLnBheW1lbnQpID09PSBudWxsIHx8IF90aGlzMiRjYXNpbm9EZXRhaWxzMjEgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzMiRjYXNpbm9EZXRhaWxzMjEuZW1haWwsCiAgICAgICAgICAgICAgICAgICAgICBzYXZlQ2FyZDogKF90aGlzMiRjYXNpbm9EZXRhaWxzMjIgPSBfdGhpczIuY2FzaW5vRGV0YWlscykgPT09IG51bGwgfHwgX3RoaXMyJGNhc2lub0RldGFpbHMyMiA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF90aGlzMiRjYXNpbm9EZXRhaWxzMjMgPSBfdGhpczIkY2FzaW5vRGV0YWlsczIyLnBheW1lbnQpID09PSBudWxsIHx8IF90aGlzMiRjYXNpbm9EZXRhaWxzMjMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzMiRjYXNpbm9EZXRhaWxzMjMuc2F2ZUNhcmQsCiAgICAgICAgICAgICAgICAgICAgICBpc0RlZmF1bHQ6IChfdGhpczIkY2FzaW5vRGV0YWlsczI0ID0gX3RoaXMyLmNhc2lub0RldGFpbHMpID09PSBudWxsIHx8IF90aGlzMiRjYXNpbm9EZXRhaWxzMjQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfdGhpczIkY2FzaW5vRGV0YWlsczI1ID0gX3RoaXMyJGNhc2lub0RldGFpbHMyNC5wYXltZW50KSA9PT0gbnVsbCB8fCBfdGhpczIkY2FzaW5vRGV0YWlsczI1ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpczIkY2FzaW5vRGV0YWlsczI1LmlzRGVmYXVsdCwKICAgICAgICAgICAgICAgICAgICAgIHByZUF1dGhvcml6ZWRPbmx5OiAoX3RoaXMyJGNhc2lub0RldGFpbHMyNiA9IF90aGlzMi5jYXNpbm9EZXRhaWxzKSA9PT0gbnVsbCB8fCBfdGhpczIkY2FzaW5vRGV0YWlsczI2ID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX3RoaXMyJGNhc2lub0RldGFpbHMyNyA9IF90aGlzMiRjYXNpbm9EZXRhaWxzMjYucGF5bWVudCkgPT09IG51bGwgfHwgX3RoaXMyJGNhc2lub0RldGFpbHMyNyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMyJGNhc2lub0RldGFpbHMyNy5wcmVBdXRob3JpemVkT25seQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgYmlkOiAoX3RoaXMyJGNhc2lub0RldGFpbHMyOCA9IF90aGlzMi5jYXNpbm9EZXRhaWxzKSA9PT0gbnVsbCB8fCBfdGhpczIkY2FzaW5vRGV0YWlsczI4ID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX3RoaXMyJGNhc2lub0RldGFpbHMyOSA9IF90aGlzMiRjYXNpbm9EZXRhaWxzMjgudXNlckRldGFpbCkgPT09IG51bGwgfHwgX3RoaXMyJGNhc2lub0RldGFpbHMyOSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMyJGNhc2lub0RldGFpbHMyOS5iaWQKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDc7CiAgICAgICAgICAgICAgICByZXR1cm4gQVBJSGVscGVyKCJQT1NUIiwgIi9hcGkvdjEvcHJlcGFpZC9hZGRDYXJkIiwgcG9zdERhdGEpOwoKICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgICBhZGRDYXJkID0gX2NvbnRleHQzLnNlbnQ7CgogICAgICAgICAgICAgICAgaWYgKChhZGRDYXJkID09PSBudWxsIHx8IGFkZENhcmQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfYWRkQ2FyZCRkYXRhID0gYWRkQ2FyZC5kYXRhKSA9PT0gbnVsbCB8fCBfYWRkQ2FyZCRkYXRhID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYWRkQ2FyZCRkYXRhLnN0YXR1cykgPT0gdHJ1ZSkgewogICAgICAgICAgICAgICAgICB1cmwgPSB3aW5kb3cubG9jYXRpb24ub3JpZ2luICsgIi9nLyIgKyAoYWRkQ2FyZCA9PT0gbnVsbCB8fCBhZGRDYXJkID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX2FkZENhcmQkZGF0YTIgPSBhZGRDYXJkLmRhdGEpID09PSBudWxsIHx8IF9hZGRDYXJkJGRhdGEyID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX2FkZENhcmQkZGF0YTIkZGF0YSA9IF9hZGRDYXJkJGRhdGEyLmRhdGEpID09PSBudWxsIHx8IF9hZGRDYXJkJGRhdGEyJGRhdGEgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hZGRDYXJkJGRhdGEyJGRhdGEuYmlkKTsKICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlcGxhY2UodXJsKTsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoKGFkZENhcmQgPT09IG51bGwgfHwgYWRkQ2FyZCA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9hZGRDYXJkJGRhdGEzID0gYWRkQ2FyZC5kYXRhKSA9PT0gbnVsbCB8fCBfYWRkQ2FyZCRkYXRhMyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2FkZENhcmQkZGF0YTMuc3RhdHVzKSA9PSBmYWxzZSkgewogICAgICAgICAgICAgICAgICBfdGhpczIuYWxlcnREaWFsb2cgPSB0cnVlOwogICAgICAgICAgICAgICAgICBfdGhpczIuYWxlcnRNc2cgPSBhZGRDYXJkID09PSBudWxsIHx8IGFkZENhcmQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfYWRkQ2FyZCRkYXRhNCA9IGFkZENhcmQuZGF0YSkgPT09IG51bGwgfHwgX2FkZENhcmQkZGF0YTQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hZGRDYXJkJGRhdGE0Lm1lc3NhZ2U7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX3RoaXMyLm9kU2Vzc2lvbkxvYWRpbmcgPSBmYWxzZTsgLy8gdGhpcy4kcm91dGVyLnJlcGxhY2UoeyBwYXRoOiAnb2RFeHRlbnNpb24nIH0pCgogICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAxNjsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICAgICAgX2NvbnRleHQzLnByZXYgPSAxMjsKICAgICAgICAgICAgICAgIF9jb250ZXh0My50MCA9IF9jb250ZXh0M1siY2F0Y2giXSgwKTsKICAgICAgICAgICAgICAgIF90aGlzMi5vZFNlc3Npb25Mb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhfY29udGV4dDMudDApOwoKICAgICAgICAgICAgICBjYXNlIDE2OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUzLCBudWxsLCBbWzAsIDEyXV0pOwogICAgICB9KSkoKTsKICAgIH0sCgogICAgLyoqCiAgICAqIEBtZXRob2QgZ2V0Wm9uZURldGFpbHMgZmV0Y2ggdGhlIHpvbmUgZGV0YWlscyBhbmQgY29tbWl0IFNFVF9aT05FX0RFVEFJTFMgbXV0YXRpb24uCiAgICAqLwogICAgZ2V0Wm9uZURldGFpbHM6IGZ1bmN0aW9uIGdldFpvbmVEZXRhaWxzKHNlYXJjaFBhcmFtS2V5LCBzZWFyY2hQYXJhbVZhbHVlKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTQoKSB7CiAgICAgICAgdmFyIF96b25lRGV0YWlscyRkYXRhLCB6b25lRGV0YWlsczsKCiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU0JChfY29udGV4dDQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ0LnByZXYgPSBfY29udGV4dDQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0NC5wcmV2ID0gMDsKICAgICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gMzsKICAgICAgICAgICAgICAgIHJldHVybiBBUElIZWxwZXIoIkdFVCIsICIvYXBpL3YxL3VzZXIvY29uZmlnIiArIHNlYXJjaFBhcmFtS2V5ICsgIj0iICsgc2VhcmNoUGFyYW1WYWx1ZSk7CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgIHpvbmVEZXRhaWxzID0gX2NvbnRleHQ0LnNlbnQ7CgogICAgICAgICAgICAgICAgX3RoaXMzLiRzdG9yZS5jb21taXQoIlNFVF9aT05FX0RFVEFJTFMiLCAoX3pvbmVEZXRhaWxzJGRhdGEgPSB6b25lRGV0YWlscy5kYXRhKSA9PT0gbnVsbCB8fCBfem9uZURldGFpbHMkZGF0YSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3pvbmVEZXRhaWxzJGRhdGEuem9uZSk7CgogICAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSAxMDsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgICBfY29udGV4dDQucHJldiA9IDc7CiAgICAgICAgICAgICAgICBfY29udGV4dDQudDAgPSBfY29udGV4dDRbImNhdGNoIl0oMCk7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhfY29udGV4dDQudDApOwoKICAgICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU0LCBudWxsLCBbWzAsIDddXSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIG9uRm9ybVN1Ym1pdDogZnVuY3Rpb24gb25Gb3JtU3VibWl0KCkgewogICAgICB2YXIgX3RoaXMkY2FzaW5vRGV0YWlscywgX3RoaXMkY2FzaW5vRGV0YWlscyR1OwoKICAgICAgdGhpcy5hZGRQYXltZW50TG9hZGluZyA9IHRydWU7CiAgICAgIHRoaXMuc2hvd1BheW1lbnRCdG4gPSBmYWxzZTsgLy9jaGVjayBVUyBQb3N0YWwgY29kZSBSZWdleAoKICAgICAgaWYgKChfdGhpcyRjYXNpbm9EZXRhaWxzID0gdGhpcy5jYXNpbm9EZXRhaWxzKSAhPT0gbnVsbCAmJiBfdGhpcyRjYXNpbm9EZXRhaWxzICE9PSB2b2lkIDAgJiYgKF90aGlzJGNhc2lub0RldGFpbHMkdSA9IF90aGlzJGNhc2lub0RldGFpbHMudXNlckRldGFpbHMpICE9PSBudWxsICYmIF90aGlzJGNhc2lub0RldGFpbHMkdSAhPT0gdm9pZCAwICYmIF90aGlzJGNhc2lub0RldGFpbHMkdS5lc3RpbWF0ZSkgewogICAgICAgIHZhciBfdGhpcyRjYXNpbm9EZXRhaWxzMiwgX3RoaXMkY2FzaW5vRGV0YWlsczIkLCBfdGhpcyRjYXNpbm9EZXRhaWxzMywgX3RoaXMkY2FzaW5vRGV0YWlsczMkOwoKICAgICAgICB0aGlzLnBvc3RUb0xvZ2dlckFQSSh7CiAgICAgICAgICBwbGF0ZTogKF90aGlzJGNhc2lub0RldGFpbHMyID0gdGhpcy5jYXNpbm9EZXRhaWxzKSA9PT0gbnVsbCB8fCBfdGhpcyRjYXNpbm9EZXRhaWxzMiA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF90aGlzJGNhc2lub0RldGFpbHMyJCA9IF90aGlzJGNhc2lub0RldGFpbHMyLnVzZXJEZXRhaWwpID09PSBudWxsIHx8IF90aGlzJGNhc2lub0RldGFpbHMyJCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkY2FzaW5vRGV0YWlsczIkLnBsYXRlLAogICAgICAgICAgY29udGFjdDogKF90aGlzJGNhc2lub0RldGFpbHMzID0gdGhpcy5jYXNpbm9EZXRhaWxzKSA9PT0gbnVsbCB8fCBfdGhpcyRjYXNpbm9EZXRhaWxzMyA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF90aGlzJGNhc2lub0RldGFpbHMzJCA9IF90aGlzJGNhc2lub0RldGFpbHMzLnVzZXJEZXRhaWwpID09PSBudWxsIHx8IF90aGlzJGNhc2lub0RldGFpbHMzJCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkY2FzaW5vRGV0YWlsczMkLmNvbnRhY3QsCiAgICAgICAgICBzdGF0dXNUZXh0OiAiUGFya2VyIGNsaWNrZWQgb24gQUREIFBBWU1FTlQgYnRuIHdpdGggcG9zdGFsIGNvZGUtICIgKyB0aGlzLnBvc3RhbENvZGUgKyAiLiBMYXN0IDQgY2hhcmFjdGVycyBvZiBNSUQgLSAiICsgdGhpcy56b25lRGV0YWlscy5NSURzLkhQU19QVUJMSUNfS0VZX1VTLnNsaWNlKC00KQogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIHZhciBfdGhpcyRvZERldGFpbHMxNSwgX3RoaXMkb2REZXRhaWxzMTUkdXNlLCBfdGhpcyRvZERldGFpbHMxNiwgX3RoaXMkb2REZXRhaWxzMTYkdXNlOwoKICAgICAgICB0aGlzLnBvc3RUb0xvZ2dlckFQSSh7CiAgICAgICAgICBwbGF0ZTogKF90aGlzJG9kRGV0YWlsczE1ID0gdGhpcy5vZERldGFpbHMpID09PSBudWxsIHx8IF90aGlzJG9kRGV0YWlsczE1ID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX3RoaXMkb2REZXRhaWxzMTUkdXNlID0gX3RoaXMkb2REZXRhaWxzMTUudXNlckRldGFpbCkgPT09IG51bGwgfHwgX3RoaXMkb2REZXRhaWxzMTUkdXNlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyRvZERldGFpbHMxNSR1c2UucGxhdGUsCiAgICAgICAgICBjb250YWN0OiAoX3RoaXMkb2REZXRhaWxzMTYgPSB0aGlzLm9kRGV0YWlscykgPT09IG51bGwgfHwgX3RoaXMkb2REZXRhaWxzMTYgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfdGhpcyRvZERldGFpbHMxNiR1c2UgPSBfdGhpcyRvZERldGFpbHMxNi51c2VyRGV0YWlsKSA9PT0gbnVsbCB8fCBfdGhpcyRvZERldGFpbHMxNiR1c2UgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJG9kRGV0YWlsczE2JHVzZS5jb250YWN0LAogICAgICAgICAgc3RhdHVzVGV4dDogIlBhcmtlciBjbGlja2VkIG9uIEFERCBQQVlNRU5UIGJ0biB3aXRoIHBvc3RhbCBjb2RlLSAiICsgdGhpcy5wb3N0YWxDb2RlICsgIi4gTGFzdCA0IGNoYXJhY3RlcnMgb2YgTUlEIC0gIiArIHRoaXMuem9uZURldGFpbHMuTUlEcy5IUFNfUFVCTElDX0tFWV9VUy5zbGljZSgtNCkKICAgICAgICB9KTsKICAgICAgfQoKICAgICAgaWYgKHRoaXMucmVnZXhfVVMudGVzdCh0aGlzLnBvc3RhbENvZGUpKSB7CiAgICAgICAgdmFyIF90aGlzJHpvbmVEZXRhaWxzMiwgX3RoaXMkem9uZURldGFpbHMyJE1JLCBfdGhpcyRjYXNpbm9EZXRhaWxzNCwgX3RoaXMkY2FzaW5vRGV0YWlsczQkOwoKICAgICAgICB0aGlzLmhwcy5vcHRpb25zLnB1YmxpY0tleSA9IChfdGhpcyR6b25lRGV0YWlsczIgPSB0aGlzLnpvbmVEZXRhaWxzKSAhPT0gbnVsbCAmJiBfdGhpcyR6b25lRGV0YWlsczIgIT09IHZvaWQgMCAmJiAoX3RoaXMkem9uZURldGFpbHMyJE1JID0gX3RoaXMkem9uZURldGFpbHMyLk1JRHMpICE9PSBudWxsICYmIF90aGlzJHpvbmVEZXRhaWxzMiRNSSAhPT0gdm9pZCAwICYmIF90aGlzJHpvbmVEZXRhaWxzMiRNSS5IUFNfUFVCTElDX0tFWV9VUyA/IHRoaXMuem9uZURldGFpbHMuTUlEcy5IUFNfUFVCTElDX0tFWV9VUyA6ICIiOwoKICAgICAgICBpZiAoKF90aGlzJGNhc2lub0RldGFpbHM0ID0gdGhpcy5jYXNpbm9EZXRhaWxzKSAhPT0gbnVsbCAmJiBfdGhpcyRjYXNpbm9EZXRhaWxzNCAhPT0gdm9pZCAwICYmIChfdGhpcyRjYXNpbm9EZXRhaWxzNCQgPSBfdGhpcyRjYXNpbm9EZXRhaWxzNC51c2VyRGV0YWlscykgIT09IG51bGwgJiYgX3RoaXMkY2FzaW5vRGV0YWlsczQkICE9PSB2b2lkIDAgJiYgX3RoaXMkY2FzaW5vRGV0YWlsczQkLmVzdGltYXRlKSB7CiAgICAgICAgICB2YXIgX3RoaXMkY2FzaW5vRGV0YWlsczUsIF90aGlzJGNhc2lub0RldGFpbHM1JCwgX3RoaXMkY2FzaW5vRGV0YWlsczYsIF90aGlzJGNhc2lub0RldGFpbHM2JDsKCiAgICAgICAgICB0aGlzLnBvc3RUb0xvZ2dlckFQSSh7CiAgICAgICAgICAgIHBsYXRlOiAoX3RoaXMkY2FzaW5vRGV0YWlsczUgPSB0aGlzLmNhc2lub0RldGFpbHMpID09PSBudWxsIHx8IF90aGlzJGNhc2lub0RldGFpbHM1ID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX3RoaXMkY2FzaW5vRGV0YWlsczUkID0gX3RoaXMkY2FzaW5vRGV0YWlsczUudXNlckRldGFpbCkgPT09IG51bGwgfHwgX3RoaXMkY2FzaW5vRGV0YWlsczUkID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyRjYXNpbm9EZXRhaWxzNSQucGxhdGUsCiAgICAgICAgICAgIGNvbnRhY3Q6IChfdGhpcyRjYXNpbm9EZXRhaWxzNiA9IHRoaXMuY2FzaW5vRGV0YWlscykgPT09IG51bGwgfHwgX3RoaXMkY2FzaW5vRGV0YWlsczYgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfdGhpcyRjYXNpbm9EZXRhaWxzNiQgPSBfdGhpcyRjYXNpbm9EZXRhaWxzNi51c2VyRGV0YWlsKSA9PT0gbnVsbCB8fCBfdGhpcyRjYXNpbm9EZXRhaWxzNiQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJGNhc2lub0RldGFpbHM2JC5jb250YWN0LAogICAgICAgICAgICBzdGF0dXNUZXh0OiAiUGFya2VyIGNsaWNrZWQgb24gQUREIFBBWU1FTlQgYnRuIHdpdGggcG9zdGFsIGNvZGUtICIgKyB0aGlzLnBvc3RhbENvZGUgKyAiLiBMYXN0IDQgY2hhcmFjdGVycyBvZiBNSUQgLSAiICsgdGhpcy56b25lRGV0YWlscy5NSURzLkhQU19QVUJMSUNfS0VZX1VTLnNsaWNlKC00KQogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHZhciBfdGhpcyRvZERldGFpbHMxNywgX3RoaXMkb2REZXRhaWxzMTckdXNlLCBfdGhpcyRvZERldGFpbHMxOCwgX3RoaXMkb2REZXRhaWxzMTgkdXNlOwoKICAgICAgICAgIHRoaXMucG9zdFRvTG9nZ2VyQVBJKHsKICAgICAgICAgICAgcGxhdGU6IChfdGhpcyRvZERldGFpbHMxNyA9IHRoaXMub2REZXRhaWxzKSA9PT0gbnVsbCB8fCBfdGhpcyRvZERldGFpbHMxNyA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF90aGlzJG9kRGV0YWlsczE3JHVzZSA9IF90aGlzJG9kRGV0YWlsczE3LnVzZXJEZXRhaWwpID09PSBudWxsIHx8IF90aGlzJG9kRGV0YWlsczE3JHVzZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkb2REZXRhaWxzMTckdXNlLnBsYXRlLAogICAgICAgICAgICBjb250YWN0OiAoX3RoaXMkb2REZXRhaWxzMTggPSB0aGlzLm9kRGV0YWlscykgPT09IG51bGwgfHwgX3RoaXMkb2REZXRhaWxzMTggPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfdGhpcyRvZERldGFpbHMxOCR1c2UgPSBfdGhpcyRvZERldGFpbHMxOC51c2VyRGV0YWlsKSA9PT0gbnVsbCB8fCBfdGhpcyRvZERldGFpbHMxOCR1c2UgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJG9kRGV0YWlsczE4JHVzZS5jb250YWN0LAogICAgICAgICAgICBzdGF0dXNUZXh0OiAiUGFya2VyIGNsaWNrZWQgb24gQUREIFBBWU1FTlQgYnRuIHdpdGggcG9zdGFsIGNvZGUtICIgKyB0aGlzLnBvc3RhbENvZGUgKyAiLiBMYXN0IDQgY2hhcmFjdGVycyBvZiBNSUQgLSAiICsgdGhpcy56b25lRGV0YWlscy5NSURzLkhQU19QVUJMSUNfS0VZX1VTLnNsaWNlKC00KQogICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICBjb25zb2xlLmxvZygiUGFya2VyIGNsaWNrZWQgb24gQUREIFBBWU1FTlQgYnRuIHdpdGggcG9zdGFsIGNvZGUtICIgKyB0aGlzLnBvc3RhbENvZGUpOwogICAgICAgIHRoaXMuaHBzLnRva2VuaXplKCk7CiAgICAgIH0gLy9jaGVjayBDQSBQb3N0YWwgY29kZSBSZWdleAogICAgICBlbHNlIGlmICh0aGlzLnJlZ2V4X0NBLnRlc3QodGhpcy5wb3N0YWxDb2RlKSkgewogICAgICAgICAgdmFyIF90aGlzJHpvbmVEZXRhaWxzMywgX3RoaXMkem9uZURldGFpbHMzJE1JLCBfdGhpcyRvZERldGFpbHMxOSwgX3RoaXMkb2REZXRhaWxzMTkkdXNlLCBfdGhpcyRvZERldGFpbHMyMCwgX3RoaXMkb2REZXRhaWxzMjAkdXNlOwoKICAgICAgICAgIHRoaXMuaHBzLm9wdGlvbnMucHVibGljS2V5ID0gKF90aGlzJHpvbmVEZXRhaWxzMyA9IHRoaXMuem9uZURldGFpbHMpICE9PSBudWxsICYmIF90aGlzJHpvbmVEZXRhaWxzMyAhPT0gdm9pZCAwICYmIChfdGhpcyR6b25lRGV0YWlsczMkTUkgPSBfdGhpcyR6b25lRGV0YWlsczMuTUlEcykgIT09IG51bGwgJiYgX3RoaXMkem9uZURldGFpbHMzJE1JICE9PSB2b2lkIDAgJiYgX3RoaXMkem9uZURldGFpbHMzJE1JLkhQU19QVUJMSUNfS0VZX0NBID8gdGhpcy56b25lRGV0YWlscy5NSURzLkhQU19QVUJMSUNfS0VZX0NBIDogIiI7CiAgICAgICAgICB0aGlzLnBvc3RUb0xvZ2dlckFQSSh7CiAgICAgICAgICAgIHBsYXRlOiAoX3RoaXMkb2REZXRhaWxzMTkgPSB0aGlzLm9kRGV0YWlscykgPT09IG51bGwgfHwgX3RoaXMkb2REZXRhaWxzMTkgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfdGhpcyRvZERldGFpbHMxOSR1c2UgPSBfdGhpcyRvZERldGFpbHMxOS51c2VyRGV0YWlsKSA9PT0gbnVsbCB8fCBfdGhpcyRvZERldGFpbHMxOSR1c2UgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJG9kRGV0YWlsczE5JHVzZS5wbGF0ZSwKICAgICAgICAgICAgY29udGFjdDogKF90aGlzJG9kRGV0YWlsczIwID0gdGhpcy5vZERldGFpbHMpID09PSBudWxsIHx8IF90aGlzJG9kRGV0YWlsczIwID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX3RoaXMkb2REZXRhaWxzMjAkdXNlID0gX3RoaXMkb2REZXRhaWxzMjAudXNlckRldGFpbCkgPT09IG51bGwgfHwgX3RoaXMkb2REZXRhaWxzMjAkdXNlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyRvZERldGFpbHMyMCR1c2UuY29udGFjdCwKICAgICAgICAgICAgc3RhdHVzVGV4dDogIlBhcmtlciBjbGlja2VkIG9uIEFERCBQQVlNRU5UIGJ0biB3aXRoIHBvc3RhbCBjb2RlLSAiICsgdGhpcy5wb3N0YWxDb2RlICsgIi4gTGFzdCA0IGNoYXJhY3RlcnMgb2YgTUlEIC0gIiArIHRoaXMuem9uZURldGFpbHMuTUlEcy5IUFNfUFVCTElDX0tFWV9DQS5zbGljZSgtNCkKICAgICAgICAgIH0pOwogICAgICAgICAgY29uc29sZS5sb2coIlBhcmtlciBjbGlja2VkIG9uIEFERCBQQVlNRU5UIGJ0biB3aXRoIHBvc3RhbCBjb2RlLSAiICsgdGhpcy5wb3N0YWxDb2RlKTsKICAgICAgICAgIHRoaXMuaHBzLnRva2VuaXplKCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuYWRkUGF5bWVudExvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgIHRoaXMuc2hvd1BheW1lbnRCdG4gPSB0cnVlOwogICAgICAgICAgdGhpcy5lcnJEaWFsb2cgPSB0cnVlOwogICAgICAgICAgdGhpcy5lcnJNc2cgPSB0aGlzLnBvc3RhbENvZGUubGVuZ3RoID4gMCA/ICJJbnZhbGlkIHBvc3RhbCBjb2RlIiA6ICJQb3N0YWwgY29kZSBjYW5ub3QgYmUgZW1wdHkiOwogICAgICAgIH0KICAgIH0sCiAgICBpbml0SFBTZm9ybTogZnVuY3Rpb24gaW5pdEhQU2Zvcm0oKSB7CiAgICAgIHZhciBzZWxmID0gdGhpczsKICAgICAgdGhpcy5ocHMgPSBuZXcgSGVhcnRsYW5kLkhQUyh7CiAgICAgICAgdHlwZTogImlmcmFtZSIsCiAgICAgICAgZmllbGRzOiB7CiAgICAgICAgICBjYXJkTnVtYmVyOiB7CiAgICAgICAgICAgIHRhcmdldDogImlmcmFtZXNDYXJkTnVtYmVyIiwKICAgICAgICAgICAgcGxhY2Vob2xkZXI6ICJFbnRlciBDYXJkIE51bWJlciIKICAgICAgICAgIH0sCiAgICAgICAgICBjYXJkRXhwaXJhdGlvbjogewogICAgICAgICAgICB0YXJnZXQ6ICJpZnJhbWVzQ2FyZEV4cGlyYXRpb24iLAogICAgICAgICAgICBwbGFjZWhvbGRlcjogIk1NIC8gWVlZWSIKICAgICAgICAgIH0sCiAgICAgICAgICBjYXJkQ3Z2OiB7CiAgICAgICAgICAgIHRhcmdldDogImlmcmFtZXNDYXJkQ3Z2IiwKICAgICAgICAgICAgcGxhY2Vob2xkZXI6ICJleCAtIDEyMyIKICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIC8vIENvbGxlY3Rpb24gb2YgQ1NTIHRvIGluamVjdCBpbnRvIHRoZSBpZnJhbWVzLgogICAgICAgIC8vIFRoZXNlIHByb3BlcnRpZXMgY2FuIG1hdGNoIHRoZSBzaXRlJ3Mgc3R5bGVzCiAgICAgICAgLy8gdG8gY3JlYXRlIGEgc2VhbWxlc3MgZXhwZXJpZW5jZS4KICAgICAgICBzdHlsZTogewogICAgICAgICAgaW5wdXQ6IHsKICAgICAgICAgICAgYmFja2dyb3VuZDogIiNmZmYiLAogICAgICAgICAgICBib3JkZXI6ICIxcHggc29saWQiLAogICAgICAgICAgICAiYm9yZGVyLWNvbG9yIjogIiNiYmIzYjkgI2M3YzFjNiAjYzdjMWM2IiwKICAgICAgICAgICAgImJveC1zaXppbmciOiAiYm9yZGVyLWJveCIsCiAgICAgICAgICAgICJmb250LWZhbWlseSI6ICJzZXJpZiIsCiAgICAgICAgICAgICJmb250LXNpemUiOiAiMTZweCIsCiAgICAgICAgICAgICJsaW5lLWhlaWdodCI6ICIxIiwKICAgICAgICAgICAgbWFyZ2luOiAiMCAuNWVtIDAgMCIsCiAgICAgICAgICAgICJtYXgtd2lkdGgiOiAiMTAwJSIsCiAgICAgICAgICAgIG91dGxpbmU6ICIwIiwKICAgICAgICAgICAgcGFkZGluZzogIjAuNTI3OGVtIiwKICAgICAgICAgICAgInZlcnRpY2FsLWFsaWduIjogImJhc2VsaW5lIiwKICAgICAgICAgICAgaGVpZ2h0OiAiNTBweCIsCiAgICAgICAgICAgIHdpZHRoOiAiMTAwJSAhaW1wb3J0YW50IgogICAgICAgICAgfSwKICAgICAgICAgICIjaGVhcnRsYW5kLWZpZWxkIjogewogICAgICAgICAgICAiZm9udC1mYW1pbHkiOiAic2Fucy1zZXJpZiIsCiAgICAgICAgICAgICJib3gtc2l6aW5nIjogImJvcmRlci1ib3giLAogICAgICAgICAgICBkaXNwbGF5OiAiYmxvY2siLAogICAgICAgICAgICBoZWlnaHQ6ICI1MHB4IiwKICAgICAgICAgICAgcGFkZGluZzogIjZweCA2cHgiLAogICAgICAgICAgICAiZm9udC1zaXplIjogIjE0cHgiLAogICAgICAgICAgICAibGluZS1oZWlnaHQiOiAiMS40Mjg1NzE0MyIsCiAgICAgICAgICAgIGNvbG9yOiAiIzU1NSIsCiAgICAgICAgICAgICJiYWNrZ3JvdW5kLWNvbG9yIjogIiNmZmYiLAogICAgICAgICAgICAiYm9yZGVyLWJvdHRvbSI6ICIxcHggc29saWQgI2NjYyIsCiAgICAgICAgICAgICJib3JkZXItdG9wIjogIjBweCIsCiAgICAgICAgICAgICJib3JkZXItbGVmdCI6ICIwcHgiLAogICAgICAgICAgICAiYm9yZGVyLXJpZ2h0IjogIjBweCIsCiAgICAgICAgICAgICJib3JkZXItcmFkaXVzIjogIjBweCIsCiAgICAgICAgICAgIC8vICItd2Via2l0LWJveC1zaGFkb3ciOiAiaW5zZXQgMCAxcHggMXB4IHJnYmEoMCwwLDAsLjA3NSkiLAogICAgICAgICAgICAvLyAiYm94LXNoYWRvdyI6ICJpbnNldCAwIDFweCAxcHggcmdiYSgwLDAsMCwuMDc1KSIsCiAgICAgICAgICAgICItd2Via2l0LXRyYW5zaXRpb24iOiAiYm9yZGVyLWNvbG9yIGVhc2UtaW4tb3V0IC4xNXMsLXdlYmtpdC1ib3gtc2hhZG93IGVhc2UtaW4tb3V0IC4xNXMiLAogICAgICAgICAgICAiLW8tdHJhbnNpdGlvbiI6ICJib3JkZXItY29sb3IgZWFzZS1pbi1vdXQgLjE1cyxib3gtc2hhZG93IGVhc2UtaW4tb3V0IC4xNXMiLAogICAgICAgICAgICB0cmFuc2l0aW9uOiAiYm9yZGVyLWNvbG9yIGVhc2UtaW4tb3V0IC4xNXMsYm94LXNoYWRvdyBlYXNlLWluLW91dCAuMTVzIiwKICAgICAgICAgICAgd2lkdGg6ICIxMDAlIgogICAgICAgICAgfSwKICAgICAgICAgICIjaGVhcnRsYW5kLWZpZWxkW25hbWU9c3VibWl0XSI6IHsKICAgICAgICAgICAgImJhY2tncm91bmQtY29sb3IiOiAiI0YxNTU1QyIsCiAgICAgICAgICAgICJmb250LWZhbWlseSI6ICJzYW5zLXNlcmlmIiwKICAgICAgICAgICAgInRleHQtdHJhbnNmb3JtIjogInVwcGVyY2FzZSIsCiAgICAgICAgICAgIGhlaWdodDogIjUwcHgiLAogICAgICAgICAgICBjb2xvcjogIiNmZmZmZmYiLAogICAgICAgICAgICBib3JkZXI6ICIwcHggc29saWQgdHJhbnNwYXJlbnQiLAogICAgICAgICAgICAiYm9yZGVyLXJhZGl1cyI6ICIycHgiLAogICAgICAgICAgICAiZm9udC13ZWlnaHQiOiAiYm9sZGVyIiwKICAgICAgICAgICAgImZvbnQtc2l6ZSI6ICJtZWRpdW0iCiAgICAgICAgICB9LAogICAgICAgICAgIiNoZWFydGxhbmQtZmllbGRbbmFtZT1zdWJtaXRdOmZvY3VzIjogewogICAgICAgICAgICAiYmFja2dyb3VuZC1jb2xvciI6ICIjRjE1NTVDIiwKICAgICAgICAgICAgImZvbnQtZmFtaWx5IjogInNhbnMtc2VyaWYiLAogICAgICAgICAgICAidGV4dC10cmFuc2Zvcm0iOiAidXBwZXJjYXNlIiwKICAgICAgICAgICAgaGVpZ2h0OiAiNTBweCIsCiAgICAgICAgICAgIGNvbG9yOiAiI2ZmZmZmZiIsCiAgICAgICAgICAgIGJvcmRlcjogIjBweCBzb2xpZCB0cmFuc3BhcmVudCAhaW1wb3J0YW50IiwKICAgICAgICAgICAgImJvcmRlci1yYWRpdXMiOiAiMnB4IiwKICAgICAgICAgICAgImZvbnQtd2VpZ2h0IjogImJvbGRlciIsCiAgICAgICAgICAgICJmb250LXNpemUiOiAibWVkaXVtIgogICAgICAgICAgfSwKICAgICAgICAgICIjaGVhcnRsYW5kLWZpZWxkW25hbWU9c3VibWl0XTpob3ZlciI6IHsKICAgICAgICAgICAgImJhY2tncm91bmQtY29sb3IiOiAiI0YxNTU1QyIsCiAgICAgICAgICAgICJmb250LWZhbWlseSI6ICJzYW5zLXNlcmlmIiwKICAgICAgICAgICAgInRleHQtdHJhbnNmb3JtIjogInVwcGVyY2FzZSIsCiAgICAgICAgICAgIGhlaWdodDogIjUwcHgiLAogICAgICAgICAgICBjb2xvcjogIiNmZmZmZmYiLAogICAgICAgICAgICBib3JkZXI6ICIwcHggc29saWQgdHJhbnNwYXJlbnQgIWltcG9ydGFudCIsCiAgICAgICAgICAgICJib3JkZXItcmFkaXVzIjogIjJweCIsCiAgICAgICAgICAgICJmb250LXdlaWdodCI6ICJib2xkZXIiLAogICAgICAgICAgICAiZm9udC1zaXplIjogIm1lZGl1bSIKICAgICAgICAgIH0sCiAgICAgICAgICAiI2hlYXJ0bGFuZC1maWVsZC13cmFwcGVyICNoZWFydGxhbmQtZmllbGQ6Zm9jdXMiOiB7CiAgICAgICAgICAgICJib3JkZXItbGVmdCI6ICIwcHgiLAogICAgICAgICAgICAiYm9yZGVyLXRvcCI6ICIwcHgiLAogICAgICAgICAgICAiYm9yZGVyLXJpZ2h0IjogIjBweCIsCiAgICAgICAgICAgICJib3JkZXItYm90dG9tIjogIjFweCBzb2xpZCAjMzk4OWUzIiwKICAgICAgICAgICAgb3V0bGluZTogIm5vbmUiLAogICAgICAgICAgICAiYm94LXNoYWRvdyI6ICJub25lIiwKICAgICAgICAgICAgaGVpZ2h0OiAiNTBweCIKICAgICAgICAgIH0sCiAgICAgICAgICAiaGVhcnRsYW5kLWZpZWxkLXdyYXBwZXIgI2hlYXJ0bGFuZC1maWVsZCI6IHsKICAgICAgICAgICAgaGVpZ2h0OiAiNTBweCIKICAgICAgICAgIH0sCiAgICAgICAgICAiaW5wdXRbdHlwZT1zdWJtaXRdIjogewogICAgICAgICAgICAiYm94LXNpemluZyI6ICJib3JkZXItYm94IiwKICAgICAgICAgICAgZGlzcGxheTogImlubGluZS1ibG9jayIsCiAgICAgICAgICAgIHBhZGRpbmc6ICI2cHggMTJweCIsCiAgICAgICAgICAgICJtYXJnaW4tYm90dG9tIjogIjAiLAogICAgICAgICAgICAiZm9udC1zaXplIjogIjE0cHgiLAogICAgICAgICAgICAiZm9udC13ZWlnaHQiOiAiNDAwIiwKICAgICAgICAgICAgImxpbmUtaGVpZ2h0IjogIjEuNDI4NTcxNDMiLAogICAgICAgICAgICAidGV4dC1hbGlnbiI6ICJjZW50ZXIiLAogICAgICAgICAgICAid2hpdGUtc3BhY2UiOiAibm93cmFwIiwKICAgICAgICAgICAgInZlcnRpY2FsLWFsaWduIjogIm1pZGRsZSIsCiAgICAgICAgICAgICItbXMtdG91Y2gtYWN0aW9uIjogIm1hbmlwdWxhdGlvbiIsCiAgICAgICAgICAgICJ0b3VjaC1hY3Rpb24iOiAibWFuaXB1bGF0aW9uIiwKICAgICAgICAgICAgY3Vyc29yOiAicG9pbnRlciIsCiAgICAgICAgICAgICItd2Via2l0LXVzZXItc2VsZWN0IjogIm5vbmUiLAogICAgICAgICAgICAiLW1vei11c2VyLXNlbGVjdCI6ICJub25lIiwKICAgICAgICAgICAgIi1tcy11c2VyLXNlbGVjdCI6ICJub25lIiwKICAgICAgICAgICAgInVzZXItc2VsZWN0IjogIm5vbmUiLAogICAgICAgICAgICAiYmFja2dyb3VuZC1pbWFnZSI6ICJub25lIiwKICAgICAgICAgICAgYm9yZGVyOiAiMXB4IHNvbGlkIHRyYW5zcGFyZW50IiwKICAgICAgICAgICAgImJvcmRlci1yYWRpdXMiOiAiNHB4IiwKICAgICAgICAgICAgY29sb3I6ICIjZmZmIiwKICAgICAgICAgICAgImJhY2tncm91bmQtY29sb3IiOiAiIzMzN2FiNyIsCiAgICAgICAgICAgICJib3JkZXItY29sb3IiOiAiIzJlNmRhNCIKICAgICAgICAgIH0sCiAgICAgICAgICAiI2hlYXJ0bGFuZC1maWVsZFtwbGFjZWhvbGRlcl0iOiB7CiAgICAgICAgICAgICJsZXR0ZXItc3BhY2luZyI6ICIxcHgiCiAgICAgICAgICB9LAogICAgICAgICAgIjo6cGxhY2Vob2xkZXIiOiB7CiAgICAgICAgICAgIGNvbG9yOiAiIzhDQTJBRCIKICAgICAgICAgIH0sCiAgICAgICAgICAiI2hlYXJ0bGFuZC1maWVsZFtuYW1lPWNhcmRDdnZdIjogewogICAgICAgICAgICBiYWNrZ3JvdW5kOiAidHJhbnNwYXJlbnQgdXJsKGh0dHBzOi8vZ2l0aHViLmNvbS9ocHMvaGVhcnRsYW5kLXBocC9ibG9iL21hc3Rlci9leGFtcGxlcy9lbmQtdG8tZW5kL2Fzc2V0cy9pbWFnZXMvY3Z2MS5wbmc/cmF3PXRydWUpIG5vLXJlcGVhdCByaWdodCIsCiAgICAgICAgICAgICJiYWNrZ3JvdW5kLXNpemUiOiAiNjNweCA0MHB4IgogICAgICAgICAgfSwKICAgICAgICAgICJpbnB1dCNoZWFydGxhbmQtZmllbGRbbmFtZT1jYXJkTnVtYmVyXSI6IHsKICAgICAgICAgICAgYmFja2dyb3VuZDogInRyYW5zcGFyZW50IHVybChodHRwczovL2dpdGh1Yi5jb20vaHBzL2hlYXJ0bGFuZC1waHAvYmxvYi9tYXN0ZXIvZXhhbXBsZXMvZW5kLXRvLWVuZC9hc3NldHMvaW1hZ2VzL3NzLWlucHV0Y2FyZC1ibGFua0AyeC5wbmc/cmF3PXRydWUpIG5vLXJlcGVhdCByaWdodCIsCiAgICAgICAgICAgICJiYWNrZ3JvdW5kLXNpemUiOiAiNTVweCAzNXB4IgogICAgICAgICAgfSwKICAgICAgICAgICIjaGVhcnRsYW5kLWZpZWxkLmludmFsaWQuY2FyZC10eXBlLXZpc2EiOiB7CiAgICAgICAgICAgIGJhY2tncm91bmQ6ICJ0cmFuc3BhcmVudCB1cmwoaHR0cHM6Ly9naXRodWIuY29tL2hwcy9oZWFydGxhbmQtcGhwL2Jsb2IvbWFzdGVyL2V4YW1wbGVzL2VuZC10by1lbmQvYXNzZXRzL2ltYWdlcy9zcy1zYXZlZC12aXNhQDJ4LnBuZz9yYXc9dHJ1ZSkgbm8tcmVwZWF0IHJpZ2h0IiwKICAgICAgICAgICAgImJhY2tncm91bmQtc2l6ZSI6ICI4M3B4IDg4cHgiLAogICAgICAgICAgICAiYmFja2dyb3VuZC1wb3NpdGlvbi15IjogIi00NHB4IgogICAgICAgICAgfSwKICAgICAgICAgICIjaGVhcnRsYW5kLWZpZWxkLnZhbGlkLmNhcmQtdHlwZS12aXNhIjogewogICAgICAgICAgICBiYWNrZ3JvdW5kOiAidHJhbnNwYXJlbnQgdXJsKGh0dHBzOi8vZ2l0aHViLmNvbS9ocHMvaGVhcnRsYW5kLXBocC9ibG9iL21hc3Rlci9leGFtcGxlcy9lbmQtdG8tZW5kL2Fzc2V0cy9pbWFnZXMvc3Mtc2F2ZWQtdmlzYUAyeC5wbmc/cmF3PXRydWUpIG5vLXJlcGVhdCByaWdodCB0b3AiLAogICAgICAgICAgICAiYmFja2dyb3VuZC1zaXplIjogIjgycHggODZweCIKICAgICAgICAgIH0sCiAgICAgICAgICAiI2hlYXJ0bGFuZC1maWVsZC5pbnZhbGlkLmNhcmQtdHlwZS1kaXNjb3ZlciI6IHsKICAgICAgICAgICAgYmFja2dyb3VuZDogInRyYW5zcGFyZW50IHVybChodHRwczovL2dpdGh1Yi5jb20vaHBzL2hlYXJ0bGFuZC1waHAvYmxvYi9tYXN0ZXIvZXhhbXBsZXMvZW5kLXRvLWVuZC9hc3NldHMvaW1hZ2VzL3NzLXNhdmVkLWRpc2NvdmVyQDJ4LnBuZz9yYXc9dHJ1ZSkgbm8tcmVwZWF0IHJpZ2h0IiwKICAgICAgICAgICAgImJhY2tncm91bmQtc2l6ZSI6ICI4NXB4IDkwcHgiLAogICAgICAgICAgICAiYmFja2dyb3VuZC1wb3NpdGlvbi15IjogIi00NHB4IgogICAgICAgICAgfSwKICAgICAgICAgICIjaGVhcnRsYW5kLWZpZWxkLnZhbGlkLmNhcmQtdHlwZS1kaXNjb3ZlciI6IHsKICAgICAgICAgICAgYmFja2dyb3VuZDogInRyYW5zcGFyZW50IHVybChodHRwczovL2dpdGh1Yi5jb20vaHBzL2hlYXJ0bGFuZC1waHAvYmxvYi9tYXN0ZXIvZXhhbXBsZXMvZW5kLXRvLWVuZC9hc3NldHMvaW1hZ2VzL3NzLXNhdmVkLWRpc2NvdmVyQDJ4LnBuZz9yYXc9dHJ1ZSkgbm8tcmVwZWF0IHJpZ2h0IiwKICAgICAgICAgICAgImJhY2tncm91bmQtc2l6ZSI6ICI4NXB4IDkwcHgiLAogICAgICAgICAgICAiYmFja2dyb3VuZC1wb3NpdGlvbi15IjogIjFweCIKICAgICAgICAgIH0sCiAgICAgICAgICAiI2hlYXJ0bGFuZC1maWVsZC5pbnZhbGlkLmNhcmQtdHlwZS1hbWV4IjogewogICAgICAgICAgICBiYWNrZ3JvdW5kOiAidHJhbnNwYXJlbnQgdXJsKGh0dHBzOi8vZ2l0aHViLmNvbS9ocHMvaGVhcnRsYW5kLXBocC9ibG9iL21hc3Rlci9leGFtcGxlcy9lbmQtdG8tZW5kL2Fzc2V0cy9pbWFnZXMvc3Mtc2F2ZWRjYXJkcy1hbWV4QDJ4LnBuZz9yYXc9dHJ1ZSkgbm8tcmVwZWF0IHJpZ2h0IiwKICAgICAgICAgICAgImJhY2tncm91bmQtc2l6ZSI6ICI1MHB4IDkwcHgiLAogICAgICAgICAgICAiYmFja2dyb3VuZC1wb3NpdGlvbi15IjogIi00NHB4IgogICAgICAgICAgfSwKICAgICAgICAgICIjaGVhcnRsYW5kLWZpZWxkLnZhbGlkLmNhcmQtdHlwZS1hbWV4IjogewogICAgICAgICAgICBiYWNrZ3JvdW5kOiAidHJhbnNwYXJlbnQgdXJsKGh0dHBzOi8vZ2l0aHViLmNvbS9ocHMvaGVhcnRsYW5kLXBocC9ibG9iL21hc3Rlci9leGFtcGxlcy9lbmQtdG8tZW5kL2Fzc2V0cy9pbWFnZXMvc3Mtc2F2ZWRjYXJkcy1hbWV4QDJ4LnBuZz9yYXc9dHJ1ZSkgbm8tcmVwZWF0IHJpZ2h0IHRvcCIsCiAgICAgICAgICAgICJiYWNrZ3JvdW5kLXNpemUiOiAiNTBweCA5MHB4IgogICAgICAgICAgfSwKICAgICAgICAgICIjaGVhcnRsYW5kLWZpZWxkLmludmFsaWQuY2FyZC10eXBlLW1hc3RlcmNhcmQiOiB7CiAgICAgICAgICAgIGJhY2tncm91bmQ6ICJ0cmFuc3BhcmVudCB1cmwoaHR0cHM6Ly9naXRodWIuY29tL2hwcy9oZWFydGxhbmQtcGhwL2Jsb2IvbWFzdGVyL2V4YW1wbGVzL2VuZC10by1lbmQvYXNzZXRzL2ltYWdlcy9zcy1zYXZlZC1tYXN0ZXJjYXJkLnBuZz9yYXc9dHJ1ZSkgbm8tcmVwZWF0IHJpZ2h0IiwKICAgICAgICAgICAgImJhY2tncm91bmQtc2l6ZSI6ICI2MnB4IDEwNXB4IiwKICAgICAgICAgICAgImJhY2tncm91bmQtcG9zaXRpb24teSI6ICItNTJweCIKICAgICAgICAgIH0sCiAgICAgICAgICAiI2hlYXJ0bGFuZC1maWVsZC52YWxpZC5jYXJkLXR5cGUtbWFzdGVyY2FyZCI6IHsKICAgICAgICAgICAgYmFja2dyb3VuZDogInRyYW5zcGFyZW50IHVybChodHRwczovL2dpdGh1Yi5jb20vaHBzL2hlYXJ0bGFuZC1waHAvYmxvYi9tYXN0ZXIvZXhhbXBsZXMvZW5kLXRvLWVuZC9hc3NldHMvaW1hZ2VzL3NzLXNhdmVkLW1hc3RlcmNhcmQucG5nP3Jhdz10cnVlKSBuby1yZXBlYXQgcmlnaHQiLAogICAgICAgICAgICAiYmFja2dyb3VuZC1zaXplIjogIjYycHggMTA1cHgiLAogICAgICAgICAgICAiYmFja2dyb3VuZC1wb3NpdGlvbi15IjogIi0xcHgiCiAgICAgICAgICB9LAogICAgICAgICAgIiNoZWFydGxhbmQtZmllbGQuaW52YWxpZC5jYXJkLXR5cGUtamNiIjogewogICAgICAgICAgICBiYWNrZ3JvdW5kOiAidHJhbnNwYXJlbnQgdXJsKGh0dHBzOi8vZ2l0aHViLmNvbS9ocHMvaGVhcnRsYW5kLXBocC9ibG9iL21hc3Rlci9leGFtcGxlcy9lbmQtdG8tZW5kL2Fzc2V0cy9pbWFnZXMvc3Mtc2F2ZWQtamNiQDJ4LnBuZz9yYXc9dHJ1ZSkgbm8tcmVwZWF0IHJpZ2h0IiwKICAgICAgICAgICAgImJhY2tncm91bmQtc2l6ZSI6ICI1NXB4IDk0cHgiLAogICAgICAgICAgICAiYmFja2dyb3VuZC1wb3NpdGlvbi15IjogIi00NHB4IgogICAgICAgICAgfSwKICAgICAgICAgICIjaGVhcnRsYW5kLWZpZWxkLnZhbGlkLmNhcmQtdHlwZS1qY2IiOiB7CiAgICAgICAgICAgIGJhY2tncm91bmQ6ICJ0cmFuc3BhcmVudCB1cmwoaHR0cHM6Ly9naXRodWIuY29tL2hwcy9oZWFydGxhbmQtcGhwL2Jsb2IvbWFzdGVyL2V4YW1wbGVzL2VuZC10by1lbmQvYXNzZXRzL2ltYWdlcy9zcy1zYXZlZC1qY2JAMngucG5nP3Jhdz10cnVlKSBuby1yZXBlYXQgcmlnaHQgdG9wIiwKICAgICAgICAgICAgImJhY2tncm91bmQtc2l6ZSI6ICI1NXB4IDk0cHgiLAogICAgICAgICAgICAiYmFja2dyb3VuZC1wb3NpdGlvbi15IjogIjJweCIKICAgICAgICAgIH0sCiAgICAgICAgICAiaW5wdXQjaGVhcnRsYW5kLWZpZWxkW25hbWU9Y2FyZE51bWJlcl06Oi1tcy1jbGVhciI6IHsKICAgICAgICAgICAgZGlzcGxheTogIm5vbmUiCiAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICAvLyBDYWxsYmFjayB3aGVuIGEgdG9rZW4gaXMgcmVjZWl2ZWQgZnJvbSB0aGUgc2VydmljZQogICAgICAgIG9uVG9rZW5TdWNjZXNzOiBmdW5jdGlvbiBvblRva2VuU3VjY2VzcyhyZXNwKSB7CiAgICAgICAgICAvLyBzZWxmLnBvc3RUb0xvZ2dlckFQSSh7CiAgICAgICAgICAvLyAgIHBob25lOiBzZWxmLmJvb2tpbmdEZXRhaWxzLnVzZXIuY29udGFjdCwKICAgICAgICAgIC8vICAgcmVmSWQ6IHNlbGYuYm9va2luZ0lkLAogICAgICAgICAgLy8gICBzdGF0dXNUZXh0OiAiSFBTIHRva2VuIGdlbmVyYXRlZCBzdWNjZXNzZnVsbHkiLAogICAgICAgICAgLy8gfSk7CiAgICAgICAgICBzZWxmLm9uU3VibWl0KHJlc3ApOwogICAgICAgIH0sCiAgICAgICAgLy8gQ2FsbGJhY2sgd2hlbiBhbiBlcnJvciBpcyByZWNlaXZlZCBmcm9tIHRoZSBzZXJ2aWNlCiAgICAgICAgb25Ub2tlbkVycm9yOiBmdW5jdGlvbiBvblRva2VuRXJyb3IocmVzcCkgewogICAgICAgICAgc2VsZi5hZGRQYXltZW50TG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgc2VsZi5zaG93UGF5bWVudEJ0biA9IHRydWU7CiAgICAgICAgICBzZWxmLmVyckRpYWxvZyA9IHRydWU7CiAgICAgICAgICBzZWxmLmVyck1zZyA9IHJlc3AuZXJyb3IubWVzc2FnZTsgLy8gc2VsZi5wb3N0VG9Mb2dnZXJBUEkoewogICAgICAgICAgLy8gICBwaG9uZTogc2VsZi5ib29raW5nRGV0YWlscy51c2VyLmNvbnRhY3QsCiAgICAgICAgICAvLyAgIHJlZklkOiBzZWxmLmJvb2tpbmdJZCwKICAgICAgICAgIC8vICAgZXJyb3I6IHJlc3AuZXJyb3IubWVzc2FnZSwKICAgICAgICAgIC8vICAgc3RhdHVzVGV4dDogIkVycm9yIGluIGdlbmVyYXRpbmcgSFBTIHRva2VuLiIsCiAgICAgICAgICAvLyB9KTsKICAgICAgICAgIC8vIGFsZXJ0KCJUaGVyZSB3YXMgYW4gZXJyb3I6ICIgKyByZXNwLmVycm9yLm1lc3NhZ2UpOwogICAgICAgIH0sCiAgICAgICAgLy8gQ2FsbGJhY2sgd2hlbiBhbiBldmVudCBpcyBmaXJlZCB3aXRoaW4gYW4gaUZyYW1lCiAgICAgICAgb25FdmVudDogZnVuY3Rpb24gb25FdmVudCgpIHt9CiAgICAgIH0pOwogICAgfSwKICAgIG5hdmlnYXRlVG9DaGVja0luOiBmdW5jdGlvbiBuYXZpZ2F0ZVRvQ2hlY2tJbigpIHsKICAgICAgaWYgKHRoaXMudGVtcGxhdGVGbGFncyA9PT0gJ29uZGVtYW5kLWZsYWcnKSB7CiAgICAgICAgdGhpcy4kcm91dGVyLnJlcGxhY2UoewogICAgICAgICAgcGF0aDogIi9vbmRlbWFuZCIKICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICB2YXIgX3RoaXMkY2FzaW5vRGV0YWlsczcsIF90aGlzJGNhc2lub0RldGFpbHM3JDsKCiAgICAgICAgLy8gdGhpcy4kcm91dGVyLnJlcGxhY2UoeyBwYXRoOiBgL2NyZWF0ZXNlc3Npb24vP3Bob25lPSR7dGhpcy5jYXNpbm9EZXRhaWxzPy51c2VyRGV0YWlsPy5jb250YWN0fSZiaWQ9JHt0aGlzLmNhc2lub0RldGFpbHM/LnVzZXJEZXRhaWw/LmJpZH0mcGxhdGU9JHt0aGlzLmNhc2lub0RldGFpbHM/LnVzZXJEZXRhaWw/LnBsYXRlfWAgfSkKICAgICAgICBpZiAoISgoX3RoaXMkY2FzaW5vRGV0YWlsczcgPSB0aGlzLmNhc2lub0RldGFpbHMpICE9PSBudWxsICYmIF90aGlzJGNhc2lub0RldGFpbHM3ICE9PSB2b2lkIDAgJiYgKF90aGlzJGNhc2lub0RldGFpbHM3JCA9IF90aGlzJGNhc2lub0RldGFpbHM3LnVzZXJEZXRhaWwpICE9PSBudWxsICYmIF90aGlzJGNhc2lub0RldGFpbHM3JCAhPT0gdm9pZCAwICYmIF90aGlzJGNhc2lub0RldGFpbHM3JC5iaWQpKSB7CiAgICAgICAgICB0aGlzLiRyb3V0ZXIucmVwbGFjZSh7CiAgICAgICAgICAgIHBhdGg6ICIvY3JlYXRlc2Vzc2lvbiIKICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB2YXIgX3RoaXMkem9uZURldGFpbHM0LCBfdGhpcyRjYXNpbm9EZXRhaWxzOCwgX3RoaXMkY2FzaW5vRGV0YWlsczgkOwoKICAgICAgICAgIC8vIGxldCBjb250YWN0ID0gdGhpcy5jYXNpbm9EZXRhaWxzPy51c2VyRGV0YWlsPy5jb250YWN0LnN1YnN0cmluZygxLCB0aGlzLmNhc2lub0RldGFpbHM/LnVzZXJEZXRhaWw/LmNvbnRhY3QubGVuZ3RoKQogICAgICAgICAgLy8gY29uc29sZS5sb2codGhpcy5jYXNpbm9EZXRhaWxzPy51c2VyRGV0YWlsKQogICAgICAgICAgLy8gbGV0IHVybCA9IHdpbmRvdy5sb2NhdGlvbi5vcmlnaW4rYC8/emNvZGU9JHt0aGlzLnpvbmVEZXRhaWxzPy56Y29kZX0jL2NyZWF0ZXNlc3Npb24vP3Bob25lPSR7Y29udGFjdH0mYmlkPSR7dGhpcy5jYXNpbm9EZXRhaWxzPy51c2VyRGV0YWlsPy5iaWR9JnBsYXRlPSR7dGhpcy5jYXNpbm9EZXRhaWxzPy51c2VyRGV0YWlsPy5wbGF0ZX0mZW50cnl0aW1lPSR7bmV3IERhdGUodGhpcy5jYXNpbm9EZXRhaWxzPy51c2VyRGV0YWlsPy5mb3JtYXRFbnRyeXRpbWUpLmdldFRpbWUoKX1gCiAgICAgICAgICAvLyB3aW5kb3cubG9jYXRpb24ucmVwbGFjZSh1cmwpCiAgICAgICAgICAvLyBjb25zb2xlLmxvZyh1cmwpCiAgICAgICAgICB2YXIgdXJsID0gd2luZG93LmxvY2F0aW9uLm9yaWdpbiArICIvP3pjb2RlPSIuY29uY2F0KChfdGhpcyR6b25lRGV0YWlsczQgPSB0aGlzLnpvbmVEZXRhaWxzKSA9PT0gbnVsbCB8fCBfdGhpcyR6b25lRGV0YWlsczQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJHpvbmVEZXRhaWxzNC56Y29kZSwgIiMvY3JlYXRlc2Vzc2lvbiIpICsgKChfdGhpcyRjYXNpbm9EZXRhaWxzOCA9IHRoaXMuY2FzaW5vRGV0YWlscykgPT09IG51bGwgfHwgX3RoaXMkY2FzaW5vRGV0YWlsczggPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfdGhpcyRjYXNpbm9EZXRhaWxzOCQgPSBfdGhpcyRjYXNpbm9EZXRhaWxzOC51c2VyRGV0YWlsKSA9PT0gbnVsbCB8fCBfdGhpcyRjYXNpbm9EZXRhaWxzOCQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJGNhc2lub0RldGFpbHM4JC5lZHRQYXJhbXMpOwogICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlcGxhY2UodXJsKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICBvblN1Ym1pdDogZnVuY3Rpb24gb25TdWJtaXQocmVzcCkgewogICAgICB2YXIgX3RoaXM0ID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU1KCkgewogICAgICAgIHZhciBlbWFpbF92YWx1ZSwgcG9zdGFsQ29kZV92YWx1ZSwgY2FyZERhdGEsIHBheW1lbnREYXRhLCBfcGF5bWVudERhdGE7CgogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNSQoX2NvbnRleHQ1KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NS5wcmV2ID0gX2NvbnRleHQ1Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfdGhpczQuc2hvd1BheW1lbnRCdG4gPSBmYWxzZTsKICAgICAgICAgICAgICAgIGVtYWlsX3ZhbHVlID0gX3RoaXM0LmVtYWlsLnRyaW0oKTsgLy8gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImVtYWlsX2FkZHJlc3MiKS52YWx1ZTsKCiAgICAgICAgICAgICAgICBwb3N0YWxDb2RlX3ZhbHVlID0gX3RoaXM0LnBvc3RhbENvZGUudHJpbSgpOyAvL2RvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJwb3N0YWxfY29kZSIpLnZhbHVlOwoKICAgICAgICAgICAgICAgIGlmICghKF90aGlzNC52YWxpZGF0ZUVtYWlsKGVtYWlsX3ZhbHVlKSAmJiBfdGhpczQudmFsaWRhdGVQb3N0YWxDb2RlKHBvc3RhbENvZGVfdmFsdWUpICYmIF90aGlzNC52YWxpZGF0ZUV4cERhdGUocmVzcC5leHBfbW9udGgsIHJlc3AuZXhwX3llYXIpKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDIxOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZiAoIShyZXNwICE9PSBudWxsICYmIHJlc3AgIT09IHZvaWQgMCAmJiByZXNwLnRva2VuX3ZhbHVlKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDIxOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfdGhpczQuYWRkUGF5bWVudExvYWRpbmcgPSB0cnVlOwogICAgICAgICAgICAgICAgY2FyZERhdGEgPSB7CiAgICAgICAgICAgICAgICAgIGNhcmRUeXBlOiByZXNwLmNhcmRfdHlwZSwKICAgICAgICAgICAgICAgICAgdXNlckRldmljZTogIjIiLAogICAgICAgICAgICAgICAgICBvcmRlclR5cGU6ICIzIiwKICAgICAgICAgICAgICAgICAgZW50cnk6IFt7CiAgICAgICAgICAgICAgICAgICAgbG9jYXRpb25Db2RlOiBfdGhpczQuem9uZURldGFpbHMuemNvZGUsCiAgICAgICAgICAgICAgICAgICAgc3RhcnRBdDogJycsCiAgICAgICAgICAgICAgICAgICAgcXVhbnRpdHk6ICIxIgogICAgICAgICAgICAgICAgICB9XQogICAgICAgICAgICAgICAgfTsgLy8gVGhlIGNvbmRpdGlvbmFsIGZ1bmN0aW9ucyB0byBjaGVjayBmb3IgdGhlIGZsYWdzIG9uZGVtYW5kIG9yIGF0bGFudGljIGZsb3cKCiAgICAgICAgICAgICAgICBfY29udGV4dDUudDAgPSBfdGhpczQudGVtcGxhdGVGbGFnczsKICAgICAgICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gX2NvbnRleHQ1LnQwID09PSAnb25kZW1hbmQtZmxhZycgPyAxMCA6IF9jb250ZXh0NS50MCA9PT0gJ2F0bGFudGljLWZsYWcnID8gMTYgOiAyMTsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAgICAgcGF5bWVudERhdGEgPSB7CiAgICAgICAgICAgICAgICAgIGxhc3RGb3VyRGlnaXRzOiByZXNwLmxhc3RfZm91ciwKICAgICAgICAgICAgICAgICAgZXhwaXJhdGlvbk1vbnRoOiByZXNwLmV4cF9tb250aCwKICAgICAgICAgICAgICAgICAgZXhwaXJhdGlvblllYXI6IHJlc3AuZXhwX3llYXIsCiAgICAgICAgICAgICAgICAgIHBvc3RhbENvZGU6IHBvc3RhbENvZGVfdmFsdWUsCiAgICAgICAgICAgICAgICAgIGF1dGhvcml6YXRpb25Ub2tlbjogcmVzcC50b2tlbl92YWx1ZSwKICAgICAgICAgICAgICAgICAgZW1haWw6IGVtYWlsX3ZhbHVlLAogICAgICAgICAgICAgICAgICBzYXZlQ2FyZDogX3RoaXM0LmRlZmF1bHRDcmVkaXRDYXJkQ0IudG9TdHJpbmcoKSwKICAgICAgICAgICAgICAgICAgaXNEZWZhdWx0OiBfdGhpczQuZGVmYXVsdENyZWRpdENhcmRDQiwKICAgICAgICAgICAgICAgICAgcHJlQXV0aG9yaXplZE9ubHk6IF90aGlzNC5hdXRvQ2hlY2tpbkNCCiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIF90aGlzNC4kc3RvcmUuY29tbWl0KCdTRVRfT05ERU1BTkRfQ0FSRERFVEFJTFMnLCBjYXJkRGF0YSk7CgogICAgICAgICAgICAgICAgX3RoaXM0LiRzdG9yZS5jb21taXQoJ1NFVF9PTkRFTUFORF9QQVlNRU5UJywgcGF5bWVudERhdGEpOwoKICAgICAgICAgICAgICAgIGlmIChfdGhpczQudGVtcGxhdGVGbGFncyA9PT0gJ29uZGVtYW5kLWZsYWcnKSB7CiAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJvZENDRGV0YWlscyIsIEpTT04uc3RyaW5naWZ5KHsKICAgICAgICAgICAgICAgICAgICBlbWFpbDogZW1haWxfdmFsdWUsCiAgICAgICAgICAgICAgICAgICAgcG9zdGFsQ29kZTogcG9zdGFsQ29kZV92YWx1ZQogICAgICAgICAgICAgICAgICB9KSk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX3RoaXM0LmNyZWF0ZU9EU2Vzc2lvbigpOwoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDUuYWJydXB0KCJicmVhayIsIDIxKTsKCiAgICAgICAgICAgICAgY2FzZSAxNjoKICAgICAgICAgICAgICAgIF9wYXltZW50RGF0YSA9IHsKICAgICAgICAgICAgICAgICAgbGFzdEZvdXJEaWdpdHM6IHJlc3AubGFzdF9mb3VyLAogICAgICAgICAgICAgICAgICBleHBpcmF0aW9uTW9udGg6IHJlc3AuZXhwX21vbnRoLAogICAgICAgICAgICAgICAgICBleHBpcmF0aW9uWWVhcjogcmVzcC5leHBfeWVhciwKICAgICAgICAgICAgICAgICAgcG9zdGFsQ29kZTogcG9zdGFsQ29kZV92YWx1ZSwKICAgICAgICAgICAgICAgICAgYXV0aG9yaXphdGlvblRva2VuOiByZXNwLnRva2VuX3ZhbHVlLAogICAgICAgICAgICAgICAgICBlbWFpbDogZW1haWxfdmFsdWUsCiAgICAgICAgICAgICAgICAgIHNhdmVDYXJkOiBfdGhpczQuZGVmYXVsdENyZWRpdENhcmRDQi50b1N0cmluZygpLAogICAgICAgICAgICAgICAgICBpc0RlZmF1bHQ6IF90aGlzNC5kZWZhdWx0Q3JlZGl0Q2FyZENCLAogICAgICAgICAgICAgICAgICBwcmVBdXRob3JpemVkT25seTogX3RoaXM0LmF1dG9DaGVja2luQ0IKICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgX3RoaXM0LiRzdG9yZS5jb21taXQoJ1NFVF9DQVNJTk9fQ0FSRERFVEFJTFMnLCBjYXJkRGF0YSk7CgogICAgICAgICAgICAgICAgX3RoaXM0LiRzdG9yZS5jb21taXQoJ1NFVF9DQVNJTk9fUEFZTUVOVCcsIF9wYXltZW50RGF0YSk7CgogICAgICAgICAgICAgICAgX3RoaXM0LmNhc2lub1Nlc3Npb24oKTsKCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ1LmFicnVwdCgiYnJlYWsiLCAyMSk7CgogICAgICAgICAgICAgIGNhc2UgMjE6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDUuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTUpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICB2YWxpZGF0ZUV4cERhdGU6IGZ1bmN0aW9uIHZhbGlkYXRlRXhwRGF0ZShtb250aCwgeWVhcikgewogICAgICBpZiAobW9udGgubGVuZ3RoID4gMCAmJiB5ZWFyLmxlbmd0aCA+IDApIHsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmVyckRpYWxvZyA9IHRydWU7CiAgICAgICAgdGhpcy5lcnJNc2cgPSAiRXhwaXJhdGlvbiBkYXRlIGNhbm5vdCBiZSBlbXB0eS4iOwogICAgICAgIHRoaXMuYWRkUGF5bWVudExvYWRpbmcgPSBmYWxzZTsKICAgICAgICB0aGlzLnNob3dQYXltZW50QnRuID0gdHJ1ZTsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgIH0sCiAgICB2YWxpZGF0ZUVtYWlsOiBmdW5jdGlvbiB2YWxpZGF0ZUVtYWlsKGVtYWlsKSB7CiAgICAgIHZhciByZSA9IC9eKChbXjw+KClbXF1cXC4sOzpcc0AiXSsoXC5bXjw+KClbXF1cXC4sOzpcc0AiXSspKil8KCIuKyIpKUAoKFxbWzAtOV17MSwzfVwuWzAtOV17MSwzfVwuWzAtOV17MSwzfVwuWzAtOV17MSwzfVxdKXwoKFthLXpBLVpcLTAtOV0rXC4pK1thLXpBLVpdezIsfSkpJC87CgogICAgICBpZiAocmUudGVzdChTdHJpbmcoZW1haWwpLnRvTG93ZXJDYXNlKCkpKSB7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5lcnJEaWFsb2cgPSB0cnVlOwogICAgICAgIHRoaXMuZXJyTXNnID0gZW1haWwubGVuZ3RoID4gMCA/ICJJbnZhbGlkIGVtYWlsIiA6ICJFbWFpbCBjYW5ub3QgYmUgZW1wdHkiOwogICAgICAgIHRoaXMuYWRkUGF5bWVudExvYWRpbmcgPSBmYWxzZTsKICAgICAgICB0aGlzLnNob3dQYXltZW50QnRuID0gdHJ1ZTsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgIH0sCiAgICB2YWxpZGF0ZVBvc3RhbENvZGU6IGZ1bmN0aW9uIHZhbGlkYXRlUG9zdGFsQ29kZShjb2RlKSB7CiAgICAgIGlmICgodGhpcy5yZWdleF9VUy50ZXN0KGNvZGUpIHx8IHRoaXMucmVnZXhfQ0EudGVzdChjb2RlKSkgJiYgU3RyaW5nKGNvZGUpLmxlbmd0aCA8PSAxMCkgewogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuZXJyRGlhbG9nID0gdHJ1ZTsKICAgICAgICB0aGlzLmVyck1zZyA9IGNvZGUubGVuZ3RoID4gMCA/ICJJbnZhbGlkIHBvc3RhbCBjb2RlIiA6ICJQb3N0YWwgY29kZSBjYW5ub3QgYmUgZW1wdHkiOwogICAgICAgIHRoaXMuYWRkUGF5bWVudExvYWRpbmcgPSBmYWxzZTsKICAgICAgICB0aGlzLnNob3dQYXltZW50QnRuID0gdHJ1ZTsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgIH0sCiAgICBvcGVuSW5mb0RpYWxvZzogZnVuY3Rpb24gb3BlbkluZm9EaWFsb2coKSB7CiAgICAgIHRoaXMuaW5mb0RpYWxvZyA9IHRydWU7CiAgICAgIHRoaXMuaW5mb01zZyA9ICJCeSBjaGVja2luZyB0aGlzIGJveCB5b3UgYWdyZWUgdG8gbGV0IHVzIHRvIHNlY3VyZWx5IHNhdmUgeW91ciBjcmVkaXQgY2FyZCBkZXRhaWxzIHNvIHlvdSBkb24ndCBoYXZlIHRvIGVudGVyIHRoZW0gZXZlcnkgdGltZSB5b3UgdmlzaXQuIjsKICAgIH0sCiAgICBvcGVuQXV0b0NoZWNraW5JbmZvRGlhbG9nOiBmdW5jdGlvbiBvcGVuQXV0b0NoZWNraW5JbmZvRGlhbG9nKCkgewogICAgICB0aGlzLmluZm9EaWFsb2cgPSB0cnVlOwogICAgICB0aGlzLmluZm9Nc2cgPSAiQnkgY2hlY2tpbmcgdGhpcyBib3ggeW91IGFncmVlIHRvIGxldCB1cyBzZWN1cmVseSBzYXZlIHlvdXIgbGljZW5zZSBwbGF0ZSBudW1iZXIgYW5kIGF1dG9tYXRpY2FsbHkgbGV0IHlvdSBpbiBhbmQgb3V0IGVhY2ggdGltZSB5b3UgdmlzaXQuIjsKICAgIH0KICB9LAogIGJlZm9yZURlc3Ryb3k6IGZ1bmN0aW9uIGJlZm9yZURlc3Ryb3koKSB7CiAgICB0aGlzLmhwcy5kaXNwb3NlKCk7CiAgfQp9Ow=="},null]}