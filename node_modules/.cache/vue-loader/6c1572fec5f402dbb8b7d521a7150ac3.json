{"remainingRequest":"/home/vignesh/DIVRT/guest-webapp/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/vignesh/DIVRT/guest-webapp/src/views/OdTemplates.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/vignesh/DIVRT/guest-webapp/src/views/OdTemplates.vue","mtime":1687345808892},{"path":"/home/vignesh/DIVRT/guest-webapp/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vignesh/DIVRT/guest-webapp/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/vignesh/DIVRT/guest-webapp/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vignesh/DIVRT/guest-webapp/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCi8vIGltcG9ydCBWdWUgZnJvbSAidnVlIjsKaW1wb3J0IHsgbWFwR2V0dGVycyB9IGZyb20gInZ1ZXgiOwppbXBvcnQgeyBFdmVudEJ1cyB9IGZyb20gIkAvbGliL0V2ZW50QnVzIjsKaW1wb3J0ICJwcmltZXZ1ZS9yZXNvdXJjZXMvdGhlbWVzL3NhZ2EtYmx1ZS90aGVtZS5jc3MiICAgICAgIC8vdGhlbWUKaW1wb3J0ICJwcmltZXZ1ZS9yZXNvdXJjZXMvcHJpbWV2dWUubWluLmNzcyIgICAgICAgICAgICAgICAgIC8vY29yZSBjc3MKaW1wb3J0ICJwcmltZWljb25zL3ByaW1laWNvbnMuY3NzIiAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vaWNvbnMKaW1wb3J0IENhbGVuZGFyIGZyb20gJy4uL3VpQ29tcG9uZW50cy9DYWxlbmRhci9DYWxlbmRhci52dWUnCmltcG9ydCB7IGFkZE1pbnV0ZXMgfSBmcm9tICJkYXRlLWZucyI7CmltcG9ydCB7IGZvcm1hdCwgaXNWYWxpZCB9IGZyb20gImRhdGUtZm5zIjsKaW1wb3J0IHsgZGF0ZVRvVGltZVpvbmVEYXRlIH0gZnJvbSAiQC91dGlscy9mb3JtYXREYXRlVGltZSI7Ci8vIGltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmltcG9ydCBBUElIZWxwZXIgZnJvbSAiLi4vYXBpSGVscGVyIjsKLy8gaW1wb3J0IFZ1ZVRpbWVQaWNrZXIgZnJvbSAnQC91aUNvbXBvbmVudHMvVnVlVGltZVBpY2tlcic7CmltcG9ydCBWdWVQaG9uZU51bWJlcklucHV0IGZyb20gInZ1ZS1waG9uZS1udW1iZXItaW5wdXQiOwppbXBvcnQgInZ1ZS1waG9uZS1udW1iZXItaW5wdXQvZGlzdC92dWUtcGhvbmUtbnVtYmVyLWlucHV0LmNzcyI7Ci8vIGltcG9ydCBtb21lbnQgZnJvbSAibW9tZW50IjsKLy8gVnVlLnVzZShtb21lbnQpOwppbXBvcnQgcnVsZXMgZnJvbSAiQC91dGlscy9ydWxlcyI7CmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhOiAoKSA9PiAoewogICAgYWxlcnREaWFsb2c6IGZhbHNlLAogICAgdGltZVZhbHVlOiBudWxsLAogICAgYWxlcnRNc2c6ICIiLAogICAgc3RvcFRpbWU6ICIiLAogICAgb3BlblRpbWVQaWNrZXI6IGZhbHNlLAogICAgb3BlbkRhdGVQaWNrZXI6IGZhbHNlLAogICAgZGF0ZTogIiIsCiAgICB0aW1lOiAiIiwKICAgIGV4aXRUaW1lU2VsZWN0ZWQ6IHt9LAogICAgdGltZVBpY2tlckhyUmFuZ2U6IG51bGwsCiAgICB0aW1lRXhjZWVkZWQ6IGZhbHNlLAogICAgdGltZVBpY2tlck1pblJhbmdlOiBudWxsLAogICAgbWluRGF0ZTogbnVsbCwKICAgIG1pblRpbWVEYXRlOiBudWxsLAogICAgbWF4RGF0ZTogbnVsbCwKICAgIG1heFRpbWVEYXRlOiBudWxsLAogICAgZGlzYWJsZUFkZFBheW1lbnRCdG46IGZhbHNlLAogICAgbWF4RGF0ZVRpbWU6IG51bGwsCiAgICBnZXRSYXRlQ2FsbDogZmFsc2UsCiAgICBnZXRSYXRlVGV4dDogIiIsCiAgICBUaW1lbWVudTogZmFsc2UsCiAgICBzdGFydERhdGU6ICIiLAogICAgZXN0aW1hdGU6IG51bGwsCiAgICBEYXRlbWVudTogZmFsc2UsCiAgICBleGl0RGF0ZTogbnVsbCwKICAgIGRhdGVGb3JtYXR0ZWQ6IG51bGwsCiAgICBydWxlczogcnVsZXMsCiAgICBpc0NvbnRhY3RWYWxpZDogdHJ1ZSwKICAgIGxpY2VuY2VQbGF0ZTogIiIsCiAgICBjb250YWN0T2JqOiB7fSwKICAgIGxvYWRpbmc6IGZhbHNlLAogICAgY29udGFjdE9wdGlvbnM6IHsKICAgICAgY29sb3I6ICIjMDI4OEQxIiwKICAgICAgdmFsaWRDb2xvcjogIiMwMjg4RDEiLAogICAgICBjb250YWN0Qm9yZGVyUmFkaXVzOiAwLAogICAgICBlcnJvckNvbG9yOiAiI0ZGNTI1MiIsCiAgICAgIGRlZmF1bHRDb3VudHJ5OiAiVVMiLAogICAgICB0cmFuc2xhdGlvbnM6IHsKICAgICAgICBwaG9uZU51bWJlckxhYmVsOiAiQ29udGFjdCBObyIsCiAgICAgIH0sCiAgICB9LAogICAgYWRkUGF5bWVudEJ0bkxvYWRpbmc6IGZhbHNlLAogIH0pLAogIGNvbXBvbmVudHM6IHsKICAgIFZ1ZVBob25lTnVtYmVySW5wdXQsCiAgICBDYWxlbmRhcgogICAgLy8gVnVlVGltZVBpY2tlciwKICB9LAogIGJlZm9yZVJvdXRlRW50ZXIodG8sIGZyb20sIG5leHQpIHsKICAgIG5leHQoYXN5bmMgKHZtKSA9PiB7CiAgICAgIGlmIChmcm9tLnBhdGggPT09ICIvb25kZW1hbmQvbWFrZXBheW1lbnQiKSB7CiAgICAgICAgc3dpdGNoICh2bS50ZW1wbGF0ZUZsYWdzKSB7CiAgICAgICAgICBjYXNlICdvbmRlbWFuZC1mbGFnJzoKICAgICAgICAgICAgewogICAgICAgICAgICAgIHZtLmNvbnRhY3RPYmogPQogICAgICAgICAgICAgICAgdm0ub2REZXRhaWxzICE9IG51bGwgJiYKICAgICAgICAgICAgICAgICAgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwodm0ub2REZXRhaWxzLCAidXNlckRldGFpbCIpICYmCiAgICAgICAgICAgICAgICAgIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKHZtLm9kRGV0YWlscz8udXNlckRldGFpbCwgImNvbnRhY3QiKSAmJgogICAgICAgICAgICAgICAgICB2bS5vZERldGFpbHM/LnVzZXJEZXRhaWw/LmNvbnRhY3QgIT0gdW5kZWZpbmVkICYmCiAgICAgICAgICAgICAgICAgIHZtLm9kRGV0YWlscz8udXNlckRldGFpbD8uY29udGFjdCAhPSBudWxsCiAgICAgICAgICAgICAgICAgID8gT2JqZWN0LmFzc2lnbih2bS5jb250YWN0T2JqLCB7CiAgICAgICAgICAgICAgICAgICAgY291bnRyeUNvZGU6CiAgICAgICAgICAgICAgICAgICAgICB2bS5vZERldGFpbHM/LnVzZXJEZXRhaWw/LmNvbnRhY3Quc2xpY2UoMCwgLTEwKSA9PSAiKzkxIgogICAgICAgICAgICAgICAgICAgICAgICA/ICJJTiIKICAgICAgICAgICAgICAgICAgICAgICAgOiB2bS5vZERldGFpbHM/LnVzZXJEZXRhaWw/LmNvbnRhY3Quc2xpY2UoMCwgLTEwKSA9PSAiKzEiCiAgICAgICAgICAgICAgICAgICAgICAgICAgPyAiVVMiCiAgICAgICAgICAgICAgICAgICAgICAgICAgOiAiIiwKICAgICAgICAgICAgICAgICAgICBwaG9uZU51bWJlcjogdm0ub2REZXRhaWxzPy51c2VyRGV0YWlsPy5jb250YWN0LAogICAgICAgICAgICAgICAgICAgIGZvcm1hdHRlZE51bWJlcjogIisiICsgdm0ub2REZXRhaWxzLnVzZXJEZXRhaWwuY29udGFjdCwKICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgOiB7fTsKICAgICAgICAgICAgICB2bS5saWNlbmNlUGxhdGUgPSB2bS5vZERldGFpbHM/LnVzZXJEZXRhaWwucGxhdGUKICAgICAgICAgICAgICAgID8gdm0ub2REZXRhaWxzPy51c2VyRGV0YWlsLnBsYXRlCiAgICAgICAgICAgICAgICA6ICIiOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CgogICAgICAgIH0KCiAgICAgIH0KICAgICAgaWYgKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdvZERldGFpbHMnKSkgewogICAgICAgIGxldCBvZERldGFpbHMgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnb2REZXRhaWxzJyk7CiAgICAgICAgb2REZXRhaWxzID0gb2REZXRhaWxzID8gSlNPTi5wYXJzZShvZERldGFpbHMpIDoge307CiAgICAgICAgdm0uY29udGFjdE9iaiA9IG9kRGV0YWlscz8uY29udGFjdCA/IE9iamVjdC5hc3NpZ24oe30sIG9kRGV0YWlscy5jb250YWN0KSA6IHZtLmNvbnRhY3RPYmo7CiAgICAgICAgdm0ubGljZW5jZVBsYXRlID0gb2REZXRhaWxzPy5saWNlbmNlUGxhdGUgPyBvZERldGFpbHMubGljZW5jZVBsYXRlIDogdm0ubGljZW5jZVBsYXRlOwogICAgICB9CiAgICAgIGxldCBzZWFyY2hQYXJhbXMgPSB3aW5kb3cubG9jYXRpb24uc2VhcmNoLnNwbGl0KCI9Iik7CiAgICAgIGxldCBzZWFyY2hQYXJhbUtleSA9IHNlYXJjaFBhcmFtcy5sZW5ndGggPiAwID8gc2VhcmNoUGFyYW1zWzBdIDogIiI7CiAgICAgIGxldCBzZWFyY2hQYXJhbVZhbHVlID0gc2VhcmNoUGFyYW1zLmxlbmd0aCA+IDAgPyBzZWFyY2hQYXJhbXNbMV0gOiAiIjsKICAgICAgaWYgKHdpbmRvdy5sb2NhdGlvbi5ocmVmLmluY2x1ZGVzKCJvbmRlbWFuZCIpKSB7CiAgICAgICAgdm0uJHN0b3JlLmNvbW1pdCgnU0VUX1RFTVBMQVRFX0ZMQUdTJywgJ29uZGVtYW5kLWZsYWcnKQogICAgICB9CiAgICAgIHN3aXRjaCAoc2VhcmNoUGFyYW1LZXkpIHsKICAgICAgICBjYXNlICI/emNvZGUiOgogICAgICAgICAgYXdhaXQgdm0uZ2V0Wm9uZURldGFpbHMoc2VhcmNoUGFyYW1LZXksIHNlYXJjaFBhcmFtVmFsdWUpOwogICAgICAgICAgYXdhaXQgdm0uZ2V0T25EZW1hbmRab25lRGV0YWlscyhzZWFyY2hQYXJhbVZhbHVlKTsKICAgICAgICAgIHZtLnNldERlZmF1bHREYXRlKCk7CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlICI/Z2F0ZWlkIjoKICAgICAgICAgIC8vYXdhaXQgc2VsZi5nZXRab25lRGV0YWlscyhzZWFyY2hQYXJhbUtleSwgc2VhcmNoUGFyYW1WYWx1ZSk7CiAgICAgICAgICBicmVhazsKICAgICAgfQogICAgfSk7CiAgfSwKICB3YXRjaDogewogICAgLy8gZXhpdERhdGUobmV3VmFsLCBvbGRWYWwpIHsKICAgIC8vICAgbGV0IGRhdGUgPSBmb3JtYXQoCiAgICAvLyAgICAgYWRkTWludXRlcyhuZXcgRGF0ZSh0aGlzLmV4aXREYXRlKSwgMTUpLAogICAgLy8gICAgICJ5eXl5LU1NLWRkIgogICAgLy8gICApCiAgICAvLyAgIHRoaXMuZGF0ZUZvcm1hdHRlZCA9IHRoaXMuZm9ybWF0RGF0ZShkYXRlKTsKICAgIC8vICAgaWYgKG9sZFZhbCAhPSBuZXdWYWwgJiYgdGhpcy5leGl0RGF0ZSA9PSBmb3JtYXQoCiAgICAvLyAgICAgZGF0ZVRvVGltZVpvbmVEYXRlKGFkZE1pbnV0ZXMobmV3IERhdGUoKSwgMTUpLAogICAgLy8gICAgICAgdGhpcy5vbkRlbWFuZFpvbmVEZXRhaWxzLnRpbWVab25lCiAgICAvLyAgICAgKSwKICAgIC8vICAgICAieXl5eS1NTS1kZCIKICAgIC8vICAgKSkgewogICAgLy8gICAgIHRoaXMuZ2V0UmF0ZUNhbGwgPSB0cnVlOwogICAgLy8gICAgIHRoaXMuc2V0RGVmYXVsdERhdGUoKTsKICAgIC8vICAgfQogICAgLy8gICBlbHNlIHsKICAgIC8vICAgICB0aGlzLmdldFJhdGVDYWxsID0gZmFsc2UKICAgIC8vICAgfQogICAgLy8gfSwKICAgIHRpbWUobmV3VmFsLCBvbGRWYWwpIHsKICAgICAgaWYgKG9sZFZhbCAhPSBudWxsICYmIG5ld1ZhbCAhPSBudWxsICYmIG9sZFZhbCAhPSBuZXdWYWwgJiYgb2xkVmFsICE9ICIiICYmIG5ld1ZhbCAhPSAiIiAmJiAoaXNWYWxpZChuZXdWYWwpKSkgewogICAgICAgIHRoaXMucm91bmQobmV3VmFsKTsKICAgICAgfQogICAgICAvLyB0aGlzLnNldFRpbWVQaWNrZXIobmV3VmFsKTsKICAgIH0sCiAgfSwKICBtb3VudGVkKCkgewogICAgdGhpcy5zZXREZWZhdWx0RGF0ZSgpOwogICAgLy8gdGhpcy5zZXREYXRlUGlja2VyKCkKICAgIEV2ZW50QnVzLiRvbignU0VUX1RJTUUnLCAoKSA9PiB7CiAgICAgIHRoaXMub25UaW1lUGlja2VyQ2hhbmdlKCk7CiAgICB9KQogICAgLy8gdGhpcy5zZXRUaW1lUGlja2VyKCk7IC8vbW9tZW50KG5ldyBEYXRlKCkpLmZvcm1hdCgiWVlZWS1NTS1ERCBoaDptbSBhIikudG9TdHJpbmcoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIHNldERlZmF1bHREYXRlKCkgewogICAgICB0aGlzLmRhdGVGb3JtYXR0ZWQgPSB0aGlzLnpvbmVEZXRhaWxzLnRpbWV6b25lCiAgICAgICAgPyBmb3JtYXQoCiAgICAgICAgICBkYXRlVG9UaW1lWm9uZURhdGUoYWRkTWludXRlcyhuZXcgRGF0ZSgpLCAxNSksCiAgICAgICAgICAgIHRoaXMuem9uZURldGFpbHMudGltZXpvbmUKICAgICAgICAgICksCiAgICAgICAgICAiTU0vZGQveXl5eSIKICAgICAgICApCiAgICAgICAgOiBmb3JtYXQoYWRkTWludXRlcyhuZXcgRGF0ZSgpLCAxNSksICJNTS9kZC95eXl5Iik7CiAgICAgIHRoaXMudGltZSA9IHRoaXMuem9uZURldGFpbHMudGltZXpvbmUKICAgICAgICA/CiAgICAgICAgZGF0ZVRvVGltZVpvbmVEYXRlKAogICAgICAgICAgYWRkTWludXRlcyhuZXcgRGF0ZSgpLCAxNSksCiAgICAgICAgICB0aGlzLnpvbmVEZXRhaWxzLnRpbWV6b25lCiAgICAgICAgKQogICAgICAgIDogYWRkTWludXRlcyhuZXcgRGF0ZSgpLCAxNSk7CiAgICAgIC8vIHRoaXMudGltZSA9IGFkZE1pbnV0ZXMobmV3IERhdGUoKSwgMTUpCgogICAgICBsZXQgZmlmdGVlblRpbWUgPSB0aGlzLnRpbWU7CiAgICAgIHRoaXMudGltZSA9IGZvcm1hdCh0aGlzLnRpbWUsICdtbScpID09PSAnMTUnIHx8IGZvcm1hdCh0aGlzLnRpbWUsICdtbScpID09PSAnMzAnIHx8IGZvcm1hdCh0aGlzLnRpbWUsICdtbScpID09PSAnNDUnIHx8IGZvcm1hdCh0aGlzLnRpbWUsICdtbScpID09PSAnMDAnID8gZmlmdGVlblRpbWUgOiB0aGlzLnJvdW5kKHRoaXMudGltZSk7CiAgICAgIHRoaXMuem9uZURldGFpbHM/LnRpbWVQaWNrZXJDb25maWd1cmF0aW9uID09ICcwJyA/IHRoaXMuZGF0ZVRpbWVDaGFuZ2UoKSA6ICIiCiAgICB9LAogICAgcm91bmQodGltZSkgewogICAgICBsZXQgZXhpdGRhdGUgPSB0aW1lICE9PSBudWxsICYmIHRpbWUgIT09ICcnID8gZm9ybWF0KHRpbWUsICd5eXl5L01NL2RkJykgOiBuZXcgRGF0ZSgpOwoKICAgICAgbGV0IHNlbGVjdGVkTWlucyA9IHRpbWUgIT09IG51bGwgJiYgdGltZSAhPT0gJycgPyBmb3JtYXQodGltZSwgJ21tJykgOiBuZXcgRGF0ZSgpOwogICAgICBsZXQgc2VsZWN0ZWRIb3VycyA9IHRpbWUgIT09IG51bGwgJiYgdGltZSAhPT0gJycgPyBmb3JtYXQodGltZSwgJ2hoJykgOiBuZXcgRGF0ZSgpOwogICAgICBsZXQgc2VsZWN0ZWRBTVBNID0gdGltZSAhPT0gbnVsbCAmJiB0aW1lICE9PSAnJyA/IGZvcm1hdCh0aW1lLCAnYWFhJykgOiBuZXcgRGF0ZSgpOwogICAgICBpZiAoZXhpdGRhdGUgIT0gbnVsbCAmJiBzZWxlY3RlZE1pbnMgIT0gJzE1JyAmJiBzZWxlY3RlZE1pbnMgIT0gJzMwJyAmJiBzZWxlY3RlZE1pbnMgIT0gJzQ1JyAmJiBzZWxlY3RlZE1pbnMgIT0gJzAwJyAmJiBzZWxlY3RlZE1pbnMgIT0gbnVsbCAmJiBzZWxlY3RlZE1pbnMgIT0gIiIgJiYgc2VsZWN0ZWRIb3VycyAhPSBudWxsICYmIHNlbGVjdGVkSG91cnMgIT0gIiIgJiYgc2VsZWN0ZWRBTVBNICE9IG51bGwgJiYgc2VsZWN0ZWRBTVBNICE9ICIiKSB7CiAgICAgICAgbGV0IGludGVydmFsTWlsbGlzZWNvbmRzID0gOTAwMDAwCiAgICAgICAgbGV0IGRhdGV0aW1lID0gbmV3IERhdGUoZXhpdGRhdGUgKyAiICIgKyBzZWxlY3RlZEhvdXJzICsgIjoiICsgc2VsZWN0ZWRNaW5zICsgIiAiICsgc2VsZWN0ZWRBTVBNKQogICAgICAgIGxldCBpbnRlcnZhbCA9IGRhdGV0aW1lLmdldFRpbWUoKSAlIGludGVydmFsTWlsbGlzZWNvbmRzOwogICAgICAgIGxldCBkZWx0YSA9IGludGVydmFsID09PSAwID8gMCA6IGRhdGV0aW1lLmdldFRpbWUoKSAtIGludGVydmFsOwogICAgICAgIGRlbHRhICs9IGludGVydmFsTWlsbGlzZWNvbmRzOwogICAgICAgIC8vIHRoaXMuZXhpdFRpbWVTZWxlY3RlZCA9IE9iamVjdC5hc3NpZ24odGhpcy5leGl0VGltZVNlbGVjdGVkLCB7IGhoOiBmb3JtYXQobmV3IERhdGUoZGVsdGEpLCAnaGgnKSwgbW06IGZvcm1hdChuZXcgRGF0ZShkZWx0YSksICdtbScpLCBhOiBmb3JtYXQobmV3IERhdGUoZGVsdGEpLCAnYScpLCB9KQogICAgICAgIHJldHVybiBpbnRlcnZhbCAhPT0gMCA/IG5ldyBEYXRlKGRlbHRhKSA6IGRhdGV0aW1lOwogICAgICB9CiAgICB9LAogICAgLy8gb3BlblRpbWVQaWNrZXIoKSB7CiAgICAvLyAgIHRoaXMuc2V0VGltZVBpY2tlcih0aGlzLmV4aXRUaW1lU2VsZWN0ZWQpOwogICAgLy8gfSwKICAgIG9uVGltZVBpY2tlckNoYW5nZSgpIHsKICAgICAgbGV0IGV4aXRkYXRlID0gdGhpcy50aW1lICE9PSBudWxsICYmIHRoaXMudGltZSAhPT0gdW5kZWZpbmVkICYmIHRoaXMudGltZSAhPT0gIiIgPyBmb3JtYXQodGhpcy50aW1lLCAneXl5eS9NTS9kZCcpIDogIiI7CiAgICAgIGxldCBzZWxlY3RlZE1pbnMgPSB0aGlzLnRpbWUgIT09IG51bGwgJiYgdGhpcy50aW1lICE9PSB1bmRlZmluZWQgJiYgdGhpcy50aW1lICE9PSAiIiA/IGZvcm1hdCh0aGlzLnRpbWUsICdtbScpIDogIiI7CiAgICAgIGxldCBzZWxlY3RlZEhvdXJzID0gdGhpcy50aW1lICE9PSBudWxsICYmIHRoaXMudGltZSAhPT0gdW5kZWZpbmVkICYmIHRoaXMudGltZSAhPT0gIiIgPyBmb3JtYXQodGhpcy50aW1lLCAnaGgnKSA6ICIiOwogICAgICBsZXQgc2VsZWN0ZWRBTVBNID0gdGhpcy50aW1lICE9PSBudWxsICYmIHRoaXMudGltZSAhPT0gdW5kZWZpbmVkICYmIHRoaXMudGltZSAhPT0gIiIgPyBmb3JtYXQodGhpcy50aW1lLCAnYScpIDogIiI7CiAgICAgIGlmIChzZWxlY3RlZEFNUE0gPT0gIlBNIiAmJiBOdW1iZXIoc2VsZWN0ZWRIb3VycykgPCAxMikgewogICAgICAgIHNlbGVjdGVkSG91cnMgPSAoTnVtYmVyKHNlbGVjdGVkSG91cnMpICsgMTIpLnRvU3RyaW5nKCk7CiAgICAgICAgc2VsZWN0ZWRIb3VycyA9IHNlbGVjdGVkSG91cnMgPT09ICcwJyA/IHNlbGVjdGVkSG91cnMgPSAnMDAnIDogc2VsZWN0ZWRIb3VyczsKCiAgICAgIH0KICAgICAgaWYgKHNlbGVjdGVkQU1QTSA9PSAiQU0iICYmIE51bWJlcihzZWxlY3RlZEhvdXJzKSA9PSAxMikgewogICAgICAgIHNlbGVjdGVkSG91cnMgPSAoTnVtYmVyKHNlbGVjdGVkSG91cnMpIC0gMTIpLnRvU3RyaW5nKCkKICAgICAgICBzZWxlY3RlZEhvdXJzID0gc2VsZWN0ZWRIb3VycyA9PT0gJzAnID8gc2VsZWN0ZWRIb3VycyA9ICcwMCcgOiBzZWxlY3RlZEhvdXJzOwogICAgICB9CiAgICAgIHRoaXMuc3RvcFRpbWUgPSBzZWxlY3RlZE1pbnMgIT0gbnVsbCAmJiBzZWxlY3RlZE1pbnMgIT0gIiIgJiYgc2VsZWN0ZWRIb3VycyAhPSBudWxsICYmIHNlbGVjdGVkSG91cnMgIT0gIiIgJiYgc2VsZWN0ZWRBTVBNICE9IG51bGwgJiYgc2VsZWN0ZWRBTVBNICE9ICIiID8gc2VsZWN0ZWRIb3VycyArICI6IiArIHNlbGVjdGVkTWlucyArICI6IiArICIwMCIgOiAiIjsKICAgICAgbGV0IGN1cnJlblRpbWUgPSB0aGlzLnpvbmVEZXRhaWxzLnRpbWV6b25lCiAgICAgICAgPyBmb3JtYXQoCiAgICAgICAgICBkYXRlVG9UaW1lWm9uZURhdGUobmV3IERhdGUoKSwKICAgICAgICAgICAgdGhpcy56b25lRGV0YWlscy50aW1lem9uZQogICAgICAgICAgKSwKICAgICAgICAgICJ5eXl5LU1NLWRkIEhIOm1tOnNzIgogICAgICAgICkKICAgICAgICA6IGZvcm1hdChuZXcgRGF0ZSgpLCAieXl5eS1NTS1kZCAgSEg6bW06c3MiKTsKICAgICAgaWYgKAogICAgICAgIHNlbGVjdGVkTWlucyAhPSBudWxsICYmIHNlbGVjdGVkTWlucyAhPSAiIiAmJiBzZWxlY3RlZEhvdXJzICE9IG51bGwgJiYgc2VsZWN0ZWRIb3VycyAhPSAiIiAmJiBzZWxlY3RlZEFNUE0gIT0gbnVsbCAmJiBzZWxlY3RlZEFNUE0gIT0gIiIgJiYKICAgICAgICBuZXcgRGF0ZShleGl0ZGF0ZSArICIgIiArIHRoaXMuc3RvcFRpbWUpLmdldFRpbWUoKSA+CiAgICAgICAgbmV3IERhdGUoY3VycmVuVGltZSkuZ2V0VGltZSgpCiAgICAgICkgewogICAgICAgIHRoaXMuZGF0ZVRpbWVDaGFuZ2UoKTsKICAgICAgfQogICAgfSwKICAgIHNldERhdGVQaWNrZXIoKSB7CiAgICAgIC8vc2V0IHRoZSBtaW5pbXVtIGRhdGUgdG8gdG9kYXkgZGF0ZSh6b25lIHRpbWUgem9uZSBkYXRlKQogICAgICB0aGlzLm1pblRpbWVEYXRlID0gdGhpcy56b25lRGV0YWlscy50aW1lem9uZSA/IHRoaXMucm91bmQodGhpcy56b25lRGV0YWlscy50aW1lem9uZQogICAgICAgID8KICAgICAgICBkYXRlVG9UaW1lWm9uZURhdGUoYWRkTWludXRlcyhuZXcgRGF0ZSgpLCAxNSksCiAgICAgICAgICB0aGlzLnpvbmVEZXRhaWxzLnRpbWV6b25lCiAgICAgICAgKQogICAgICAgIDogYWRkTWludXRlcyhuZXcgRGF0ZSgpLCAxNSkpIDogdGhpcy56b25lRGV0YWlscy50aW1lem9uZQogICAgICAgID8KICAgICAgICBkYXRlVG9UaW1lWm9uZURhdGUoYWRkTWludXRlcyhuZXcgRGF0ZSgpLCAxNSksCiAgICAgICAgICB0aGlzLnpvbmVEZXRhaWxzLnRpbWV6b25lCiAgICAgICAgKQogICAgICAgIDogYWRkTWludXRlcyhuZXcgRGF0ZSgpLCAxNSk7CiAgICAgIC8vY2FsY3VsYXRlIG1heCBwYXJraWduIHRpbWUgaW4gc2Vjb25kcwogICAgICBsZXQgbWF4UGFya2luZ1RpbWUgPQogICAgICAgIHRoaXMuem9uZURldGFpbHMgIT0gbnVsbAogICAgICAgICAgPyBOdW1iZXIodGhpcy56b25lRGV0YWlscz8ubWF4UGFya2luZ1RpbWU/LmRheXMpICoKICAgICAgICAgIDI0ICoKICAgICAgICAgIDYwICoKICAgICAgICAgIDYwICsKICAgICAgICAgIE51bWJlcih0aGlzLnpvbmVEZXRhaWxzPy5tYXhQYXJraW5nVGltZT8uaG91cnMpICogNjAgKiA2MCArCiAgICAgICAgICBOdW1iZXIodGhpcy56b25lRGV0YWlscz8ubWF4UGFya2luZ1RpbWU/Lm1pbnV0ZXMpICogNjAKICAgICAgICAgIDogbnVsbDsKICAgICAgbGV0IGN1cnJlbnREYXRlVGltZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpOwoKICAgICAgLy9nZXQgbWF4IGRhdGUgaW4gc2Vjb25kcyBiYXNlZCBvbiBtYXggcGFya2luZyB0aW1lCiAgICAgIGxldCBtYXhab25lRGF0ZSA9CiAgICAgICAgbWF4UGFya2luZ1RpbWUgIT0gbnVsbCA/IGN1cnJlbnREYXRlVGltZSArIG1heFBhcmtpbmdUaW1lICogMTAwMCA6IG51bGw7CiAgICAgIHRoaXMubWF4VGltZURhdGUgPSB0aGlzLnpvbmVEZXRhaWxzLnRpbWV6b25lCiAgICAgICAgPwogICAgICAgIGRhdGVUb1RpbWVab25lRGF0ZSgKICAgICAgICAgIG5ldyBEYXRlKG1heFpvbmVEYXRlKSwKICAgICAgICAgIHRoaXMuem9uZURldGFpbHMudGltZXpvbmUKICAgICAgICApCiAgICAgICAgOiBuZXcgRGF0ZShtYXhab25lRGF0ZSk7CiAgICAgIC8vZ2V0IG1heCBkYXRlIHdpdGggdGltZSBhbmQgc2V0IGl0IHRvIG1heERhdGVUaW1lCiAgICAgIHRoaXMubWF4RGF0ZVRpbWUgPSB0aGlzLnpvbmVEZXRhaWxzLnRpbWV6b25lCiAgICAgICAgPyBmb3JtYXQoCiAgICAgICAgICBkYXRlVG9UaW1lWm9uZURhdGUoCiAgICAgICAgICAgIG5ldyBEYXRlKG1heFpvbmVEYXRlKSwKICAgICAgICAgICAgdGhpcy56b25lRGV0YWlscy50aW1lem9uZQogICAgICAgICAgKSwKICAgICAgICAgICJ5eXl5LU1NLWRkIGhoOm1tIGFhYWFhIgogICAgICAgICkKICAgICAgICA6IGZvcm1hdChuZXcgRGF0ZSgpLCAieXl5eS1NTS1kZCBoaDptbSBhYWFhYSIpOwogICAgfSwKICAgIC8vIHNldFRpbWVQaWNrZXIodmFsKSB7CiAgICAvLyAgIC8vIGxldCBjdXJyZW50VGltZU1lcmlkaWFuID0gdGhpcy5vbkRlbWFuZFpvbmVEZXRhaWxzLnRpbWVab25lCiAgICAvLyAgIC8vICAgPyBmb3JtYXQoCiAgICAvLyAgIC8vICAgICAgIGRhdGVUb1RpbWVab25lRGF0ZSgKICAgIC8vICAgLy8gICAgICAgICBhZGRNaW51dGVzKG5ldyBEYXRlKCksIDE1KSwKICAgIC8vICAgLy8gICAgICAgICB0aGlzLm9uRGVtYW5kWm9uZURldGFpbHMudGltZVpvbmUKICAgIC8vICAgLy8gICAgICAgKSwKICAgIC8vICAgLy8gICAgICAgImFhYSIKICAgIC8vICAgLy8gICAgICkKICAgIC8vICAgLy8gICA6IGZvcm1hdChuZXcgRGF0ZSgpLCAiYWFhIik7CiAgICAvLyAgIC8vIGxldCBjdXJyZW50SHIgPSB0aGlzLm9uRGVtYW5kWm9uZURldGFpbHMudGltZVpvbmUKICAgIC8vICAgLy8gICA/IGZvcm1hdCgKICAgIC8vICAgLy8gICAgICAgZGF0ZVRvVGltZVpvbmVEYXRlKAogICAgLy8gICAvLyAgICAgICAgIGFkZE1pbnV0ZXMobmV3IERhdGUoKSwgMTUpLAogICAgLy8gICAvLyAgICAgICAgIHRoaXMub25EZW1hbmRab25lRGV0YWlscy50aW1lWm9uZQogICAgLy8gICAvLyAgICAgICApLAogICAgLy8gICAvLyAgICAgICAiaCIKICAgIC8vICAgLy8gICAgICkKICAgIC8vICAgLy8gICA6IGZvcm1hdChuZXcgRGF0ZSgpLCAiaCIpOwogICAgLy8gICAvLyBjb25zb2xlLmxvZyhjdXJyZW50SHIpCgogICAgLy8gICAvL2dldCB0aGUgdG9kYXlzIGN1cnJlbnQgem9uZSB0aW1lCgogICAgLy8gICBsZXQgY3VycmVudFRpbWUgPSB0aGlzLm9uRGVtYW5kWm9uZURldGFpbHMudGltZVpvbmUKICAgIC8vICAgICA/IGZvcm1hdCgKICAgIC8vICAgICAgIGRhdGVUb1RpbWVab25lRGF0ZSgKICAgIC8vICAgICAgICAgYWRkTWludXRlcyhuZXcgRGF0ZSgpLCAxNSksCiAgICAvLyAgICAgICAgIHRoaXMub25EZW1hbmRab25lRGV0YWlscy50aW1lWm9uZQogICAgLy8gICAgICAgKSwgImhhYWFhYSIKICAgIC8vICAgICApCiAgICAvLyAgICAgOiBmb3JtYXQoYWRkTWludXRlcyhuZXcgRGF0ZSgpLCAxNSksICJoYWFhYWEiKTsKICAgIC8vICAgLy9zZXQgdGhlIGhyIHJhbmdlCiAgICAvLyAgIGlmICgKICAgIC8vICAgICB0aGlzLmV4aXREYXRlID09CiAgICAvLyAgICAgZm9ybWF0KAogICAgLy8gICAgICAgZGF0ZVRvVGltZVpvbmVEYXRlKAogICAgLy8gICAgICAgICBhZGRNaW51dGVzKG5ldyBEYXRlKCksIDE1KSwKICAgIC8vICAgICAgICAgdGhpcy5vbkRlbWFuZFpvbmVEZXRhaWxzLnRpbWVab25lCiAgICAvLyAgICAgICApLAogICAgLy8gICAgICAgInl5eXktTU0tZGQiCiAgICAvLyAgICAgKQogICAgLy8gICApIHsKICAgIC8vICAgICB0aGlzLnRpbWVQaWNrZXJIclJhbmdlID0gWwogICAgLy8gICAgICAgW2N1cnJlbnRUaW1lID09ICIxMmEiID8gIjBhIiA6IGN1cnJlbnRUaW1lLCAiMTFwIl0sCiAgICAvLyAgICAgXTsKICAgIC8vICAgfQogICAgLy8gICAvLyBpZiBtYXhkYXRlID09IGV4aXQgZGF0ZQogICAgLy8gICBlbHNlIGlmICgKICAgIC8vICAgICB0aGlzLm1heERhdGVUaW1lICE9IG51bGwgJiYKICAgIC8vICAgICB0aGlzLm1heERhdGVUaW1lLnNwbGl0KCIgIilbMF0gPT0gdGhpcy5leGl0RGF0ZQogICAgLy8gICApIHsKICAgIC8vICAgICBsZXQgdGltZSA9IHRoaXMubWF4RGF0ZVRpbWUuc3BsaXQoIiAiKVsxXTsKICAgIC8vICAgICBsZXQgaHIgPSB0aW1lLnNwbGl0KCI6IilbMF0gKyB0aGlzLm1heERhdGVUaW1lLnNwbGl0KCIgIilbMl07CiAgICAvLyAgICAgaHIgPT0gIjEyYSIKICAgIC8vICAgICAgID8gIjBhIgogICAgLy8gICAgICAgOiB0aW1lLnNwbGl0KCI6IilbMF0gKyB0aGlzLm1heERhdGVUaW1lLnNwbGl0KCIgIilbMl07CiAgICAvLyAgICAgdGhpcy50aW1lUGlja2VySHJSYW5nZSA9IFtbIjBhIiwgaHJdXTsKICAgIC8vICAgfSBlbHNlIHsKICAgIC8vICAgICB0aGlzLnRpbWVQaWNrZXJIclJhbmdlID0gbnVsbDsKICAgIC8vICAgfQoKICAgIC8vICAgbGV0IGhySW5QTSA9IHRoaXMub25EZW1hbmRab25lRGV0YWlscy50aW1lWm9uZQogICAgLy8gICAgID8gZm9ybWF0KAogICAgLy8gICAgICAgZGF0ZVRvVGltZVpvbmVEYXRlKAogICAgLy8gICAgICAgICBhZGRNaW51dGVzKG5ldyBEYXRlKCksIDE1KSwKICAgIC8vICAgICAgICAgdGhpcy5vbkRlbWFuZFpvbmVEZXRhaWxzLnRpbWVab25lCiAgICAvLyAgICAgICApLAogICAgLy8gICAgICAgImhoYWFhIgogICAgLy8gICAgICkKICAgIC8vICAgICA6IGZvcm1hdChuZXcgRGF0ZSgpLCAiaGhhYWEiKTsKICAgIC8vICAgLy9zZXQgdGhlIG1pbiByYW5nZQogICAgLy8gICBpZiAoCiAgICAvLyAgICAgdGhpcy5leGl0RGF0ZSA9PQogICAgLy8gICAgIGZvcm1hdCgKICAgIC8vICAgICAgIGRhdGVUb1RpbWVab25lRGF0ZSgKICAgIC8vICAgICAgICAgYWRkTWludXRlcyhuZXcgRGF0ZSgpLCAxNSksCiAgICAvLyAgICAgICAgIHRoaXMub25EZW1hbmRab25lRGV0YWlscy50aW1lWm9uZQogICAgLy8gICAgICAgKSwKICAgIC8vICAgICAgICJ5eXl5LU1NLWRkIgogICAgLy8gICAgICkgJiYKICAgIC8vICAgICB2YWwgIT0gbnVsbCAmJgogICAgLy8gICAgIGhySW5QTSA9PSB2YWw/LmhoICsgdmFsLmEKICAgIC8vICAgKSB7CiAgICAvLyAgICAgdGhpcy50aW1lUGlja2VyTWluUmFuZ2UgPSBbCiAgICAvLyAgICAgICBbCiAgICAvLyAgICAgICAgIHRoaXMub25EZW1hbmRab25lRGV0YWlscy50aW1lWm9uZQogICAgLy8gICAgICAgICAgID8gTnVtYmVyKAogICAgLy8gICAgICAgICAgICAgZm9ybWF0KAogICAgLy8gICAgICAgICAgICAgICBkYXRlVG9UaW1lWm9uZURhdGUoCiAgICAvLyAgICAgICAgICAgICAgICAgYWRkTWludXRlcyhuZXcgRGF0ZSgpLCAxNSksCiAgICAvLyAgICAgICAgICAgICAgICAgdGhpcy5vbkRlbWFuZFpvbmVEZXRhaWxzLnRpbWVab25lCiAgICAvLyAgICAgICAgICAgICAgICksCiAgICAvLyAgICAgICAgICAgICAgICJtbSIKICAgIC8vICAgICAgICAgICAgICkKICAgIC8vICAgICAgICAgICApCiAgICAvLyAgICAgICAgICAgOiBOdW1iZXIoZm9ybWF0KGFkZE1pbnV0ZXMobmV3IERhdGUoKSwgMTUpLCAibW0iKSksCiAgICAvLyAgICAgICAgIDU5LAogICAgLy8gICAgICAgXSwKICAgIC8vICAgICBdOwogICAgLy8gICB9IGVsc2UgaWYgKAogICAgLy8gICAgIHRoaXMubWF4RGF0ZVRpbWUgIT0gbnVsbCAmJgogICAgLy8gICAgIHRoaXMubWF4RGF0ZVRpbWUuc3BsaXQoIiAiKVswXSA9PSB0aGlzLmV4aXREYXRlCiAgICAvLyAgICkgewogICAgLy8gICAgIGxldCB0aW1lID0gdGhpcy5tYXhEYXRlVGltZS5zcGxpdCgiICIpWzFdOwogICAgLy8gICAgIGxldCBociA9IHRpbWUuc3BsaXQoIjoiKVswXSArIHRoaXMubWF4RGF0ZVRpbWUuc3BsaXQoIiAiKVsyXTsKICAgIC8vICAgICBpZiAodmFsICE9IG51bGwgJiYgaHIgPT0gdmFsPy5oaCArIHZhbC5hWzBdKSB7CiAgICAvLyAgICAgICBsZXQgbWluID0gdGltZS5zcGxpdCgiOiIpWzFdOwogICAgLy8gICAgICAgdGhpcy50aW1lUGlja2VyTWluUmFuZ2UgPSBbWzAsIG1pbl1dOwogICAgLy8gICAgIH0gZWxzZSB7CiAgICAvLyAgICAgICB0aGlzLnRpbWVQaWNrZXJNaW5SYW5nZSA9IFtbMCwgNTldXTsKICAgIC8vICAgICB9CiAgICAvLyAgIH0gZWxzZSB7CiAgICAvLyAgICAgdGhpcy50aW1lUGlja2VyTWluUmFuZ2UgPSBbWzAsIDU5XV07CiAgICAvLyAgIH0KICAgIC8vICAgaWYgKAogICAgLy8gICAgIHRoaXMuZXhpdFRpbWVTZWxlY3RlZCA9PSBudWxsICYmCiAgICAvLyAgICAgdGhpcy5vbkRlbWFuZFpvbmVEZXRhaWxzPy50aW1lWm9uZSAhPSB1bmRlZmluZWQKICAgIC8vICAgKSB7CiAgICAvLyAgICAgdGhpcy50aW1lUGlja2VySHJSYW5nZSA9IFtdOwogICAgLy8gICAgIHRoaXMudGltZVBpY2tlck1pblJhbmdlID0gW107CiAgICAvLyAgICAgcmV0dXJuOwogICAgLy8gICB9IGVsc2UgaWYgKHRoaXMuZXhpdFRpbWVTZWxlY3RlZD8uaGggPT0gIiIpIHsKICAgIC8vICAgICB0aGlzLnRpbWVQaWNrZXJNaW5SYW5nZSA9IFtdOwogICAgLy8gICB9CiAgICAvLyB9LAogICAgLyoqIEBtZXRob2RzIHRvIGZpbmQgdGhlIGVzdGltYXRlIHJhdGUgCiAgICAgQHBhcmFtcyBzdGFydERhdGUgLCBzdG9wRGF0ZSx6Y29kZSwgdHlwZSAsIGVudl9vdmVyUmlkZQogICAgICovCgogICAgYXN5bmMgZGF0ZVRpbWVDaGFuZ2UoKSB7CiAgICAgIHRyeSB7CiAgICAgICAgLy9mb3JtYXQobmV3IERhdGUodGhpcy5jaGVja2luRGF0ZSksICJ5eXl5LU1NLWRkJ1QnSEg6bW06c3MiKTsKICAgICAgICAvLyB0aGlzLnNldFRpbWVQaWNrZXIoKTsKICAgICAgICBpZiAodGhpcy5zdG9wVGltZSAhPSBudWxsICYmIHRoaXMuc3RvcFRpbWUgIT0gIiIpIHsKICAgICAgICAgIHRoaXMuc3RhcnREYXRlID0gdGhpcy56b25lRGV0YWlscy50aW1lem9uZQogICAgICAgICAgICA/IGZvcm1hdCgKICAgICAgICAgICAgICBkYXRlVG9UaW1lWm9uZURhdGUoCiAgICAgICAgICAgICAgICBuZXcgRGF0ZSgpLAogICAgICAgICAgICAgICAgdGhpcy56b25lRGV0YWlscy50aW1lem9uZQogICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgInl5eXktTU0tZGQnVCdISDptbTpzcyIKICAgICAgICAgICAgKQogICAgICAgICAgICA6IGZvcm1hdChuZXcgRGF0ZSgpLCAieXl5eS1NTS1kZCdUJ0hIOm1tOnNzIik7CiAgICAgICAgICBsZXQgc3RvcFRpbWUgPSBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbCh0aGlzLnpvbmVEZXRhaWxzLCAndGltZVBpY2tlckNvbmZpZ3VyYXRpb24nKSAmJiB0aGlzLnpvbmVEZXRhaWxzLnRpbWVQaWNrZXJDb25maWd1cmF0aW9uID09ICcwJyA/ICcyMzo1OTowMCcgOiB0aGlzLnN0b3BUaW1lOyAvLz8uaGgrIjoiK3RoaXMuZXhpdFRpbWVTZWxlY3RlZC5tbSsiOjAwIi8vZm9ybWF0KHRoaXMuY2hlY2tvdXREYXRlLCAieXl5eS1NTS1kZCdUJ0hIOm1tOnNzIikKICAgICAgICAgIGxldCBleGl0ZGF0ZSA9IHRoaXMudGltZSAhPT0gbnVsbCAmJiB0aGlzLnRpbWUgIT09IHVuZGVmaW5lZCAmJiB0aGlzLnRpbWUgIT09ICIiID8gZm9ybWF0KHRoaXMudGltZSwgJ3l5eXktTU0tZGQnKSA6ICIiOwogICAgICAgICAgbGV0IHN0b3BEYXRlID0gZXhpdGRhdGUgKyAnVCcgKyBzdG9wVGltZTsKICAgICAgICAgIGxldCBkYXRhID0gewogICAgICAgICAgICBzdGFydEF0OiB0aGlzLnN0YXJ0RGF0ZSwKICAgICAgICAgICAgc3RvcEF0OiBzdG9wRGF0ZSwKICAgICAgICAgICAgemNvZGU6IHRoaXMuem9uZURldGFpbHMuemNvZGUsCiAgICAgICAgICB9OwogICAgICAgICAgdGhpcy5hZGRQYXltZW50QnRuTG9hZGluZyA9IHRydWU7CiAgICAgICAgICB2YXIgZ2V0UmF0ZSA9IGF3YWl0IEFQSUhlbHBlcigiUE9TVCIsICIvYXBpL3YyL2dldFJhdGUiLCBkYXRhKTsKICAgICAgICAgIC8vY29uZGl0aW9uIHRvIGNoZWNrIGlmIHRoZSBkYXRlIHRpbWUgc2VsZWN0ZWQgaXMgbGVzc2VyIHRoYW4gY3VycmVudCB0aW1lCiAgICAgICAgICBpZiAoIWdldFJhdGU/LmRhdGE/LnN0YXR1cykgewogICAgICAgICAgICB0aGlzLmRpc2FibGVBZGRQYXltZW50QnRuID0gdHJ1ZTsKICAgICAgICAgICAgdGhpcy5hbGVydERpYWxvZyA9IHRydWU7CiAgICAgICAgICAgIHRoaXMuYWxlcnRNc2cgPSBnZXRSYXRlPy5kYXRhPy5tZXNzYWdlIHx8ICJFcnJvciBpbiBnZXR0aW5nIHJhdGUgZGV0YWlscyI7CiAgICAgICAgICAgIEV2ZW50QnVzLiRlbWl0KCdkYXRldGltZS1zZXQnKTsKCiAgICAgICAgICB9CiAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgdGhpcy5kaXNhYmxlQWRkUGF5bWVudEJ0biA9IGZhbHNlOwogICAgICAgICAgICB0aGlzLm9wZW5EYXRlUGlja2VyID0gZmFsc2U7CiAgICAgICAgICAgIHRoaXMub3BlblRpbWVQaWNrZXIgPSBmYWxzZTsKICAgICAgICAgICAgRXZlbnRCdXMuJGVtaXQoJ2RhdGV0aW1lLXNldCcpOwogICAgICAgICAgfQogICAgICAgICAgdGhpcy5lc3RpbWF0ZSA9IE9iamVjdC5hc3NpZ24oe30sIGdldFJhdGU/LmRhdGE/LmRhdGEpOwogICAgICAgICAgLy8gZXN0aW1hdGVkVmFsICE9ICIiICYmCiAgICAgICAgICAvLyBlc3RpbWF0ZWRWYWwgIT0gbnVsbCAmJgogICAgICAgICAgLy8gZXN0aW1hdGVkVmFsICE9IHVuZGVmaW5lZAogICAgICAgICAgLy8gICA/IE51bWJlcihlc3RpbWF0ZWRWYWwpLnRvRml4ZWQoMikKICAgICAgICAgIC8vICAgOiBlc3RpbWF0ZWRWYWw7CiAgICAgICAgICB0aGlzLmFkZFBheW1lbnRCdG5Mb2FkaW5nID0gZmFsc2U7CiAgICAgICAgfQogICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIHRoaXMuYWRkUGF5bWVudEJ0bkxvYWRpbmcgPSBmYWxzZTsKICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7CiAgICAgIH0KICAgIH0sCiAgICBmb3JtYXREYXRlKGRhdGUpIHsKICAgICAgbGV0IHN0cmluZ2RhdGUgPSBkYXRlLnRvU3RyaW5nKCk7CiAgICAgIGlmICghZGF0ZSkgcmV0dXJuIG51bGw7CgogICAgICBjb25zdCBbeWVhciwgbW9udGgsIGRheV0gPSBzdHJpbmdkYXRlLnNwbGl0KCItIik7CiAgICAgIHJldHVybiBgJHttb250aH0vJHtkYXl9LyR7eWVhcn1gOwogICAgfSwKICAgIHBhcnNlRGF0ZShkYXRlKSB7CiAgICAgIGlmICghZGF0ZSkgcmV0dXJuIG51bGw7CgogICAgICBjb25zdCBbbW9udGgsIGRheSwgeWVhcl0gPSBkYXRlLnNwbGl0KCIvIik7CiAgICAgIHJldHVybiBgJHt5ZWFyfS0ke21vbnRoLnBhZFN0YXJ0KDIsICIwIil9LSR7ZGF5LnBhZFN0YXJ0KDIsICIwIil9YDsKICAgIH0sCiAgICBhc3luYyBhZGRQYXltZW50KCkgewogICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgib2REZXRhaWxzIiwgSlNPTi5zdHJpbmdpZnkoeyBjb250YWN0OiB0aGlzLmNvbnRhY3RPYmosIGxpY2VuY2VQbGF0ZTogdGhpcy5saWNlbmNlUGxhdGUgfSkpOwogICAgICBsZXQgZXhpdERhdGVUaW1lID0gdGhpcy50aW1lICE9IG51bGwgfHwgdGhpcy50aW1lICE9PSB1bmRlZmluZWQgfHwgdGhpcy50aW1lICE9ICIiID8KICAgICAgICBmb3JtYXQodGhpcy50aW1lLCAneXl5eS1NTS1kZCcpCiAgICAgICAgKwogICAgICAgICIgIiArCiAgICAgICAgKHRoaXMuem9uZURldGFpbHM/LnRpbWVQaWNrZXJDb25maWd1cmF0aW9uID09ICcwJyA/ICcxMTo1OSBQTScgOiBmb3JtYXQodGhpcy50aW1lLCAnaGg6bW0gYScpKSA6ICIiCiAgICAgIGxldCBlbnRyeURhdGVUaW1lID0gdGhpcy56b25lRGV0YWlscy50aW1lem9uZQogICAgICAgID8gZm9ybWF0KAogICAgICAgICAgZGF0ZVRvVGltZVpvbmVEYXRlKG5ldyBEYXRlKCksCiAgICAgICAgICAgIHRoaXMuem9uZURldGFpbHMudGltZXpvbmUKICAgICAgICAgICksCiAgICAgICAgICAieXl5eS1NTS1kZCBoaDptbSBhIgogICAgICAgICkKICAgICAgICA6IGZvcm1hdChuZXcgRGF0ZSgpLCAieXl5eS1NTS1kZCdUJ0hIOm1tIGEiKTsKICAgICAgbGV0IGNvbW1pdERhdGEgPSB7CiAgICAgICAgcGxhdGU6IHRoaXMubGljZW5jZVBsYXRlLAogICAgICAgIGNvbnRhY3Q6IHRoaXMuY29udGFjdE9iai5mb3JtYXR0ZWROdW1iZXIsCiAgICAgICAgZW50cnlUaW1lOiBlbnRyeURhdGVUaW1lLAogICAgICAgIGV4aXRUaW1lOiBleGl0RGF0ZVRpbWUsCiAgICAgICAgZXN0aW1hdGU6IHRoaXMuZXN0aW1hdGUsCiAgICAgIH07CiAgICAgIHN3aXRjaCAodGhpcy50ZW1wbGF0ZUZsYWdzKSB7CiAgICAgICAgY2FzZSAnb25kZW1hbmQtZmxhZyc6IHsKICAgICAgICAgIGxldCBkZXRhaWxzID0gYXdhaXQgQVBJSGVscGVyKCJQT1NUIiwgIi9hcGkvdjEvcHJlcGFpZC9vcGVuVHJhbnNhY3Rpb24iLCB7CiAgICAgICAgICAgIHZlaGljbGVObzogdGhpcy5saWNlbmNlUGxhdGUsCiAgICAgICAgICAgIGNvbnRhY3Q6IHRoaXMuY29udGFjdE9iai5mb3JtYXR0ZWROdW1iZXIsCiAgICAgICAgICAgIGVudHJ5VGltZTogZW50cnlEYXRlVGltZSwKICAgICAgICAgICAgZXhpdFRpbWU6IGV4aXREYXRlVGltZSwKICAgICAgICAgICAgemNvZGU6IHRoaXMuem9uZURldGFpbHM/Lnpjb2RlLAogICAgICAgICAgfSk7CiAgICAgICAgICBpZiAoZGV0YWlscz8uZGF0YT8uc3RhdHVzKSB7CiAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgiU0VUX09OREVNQU5EX1VTRVJERVRBSUxTIiwgY29tbWl0RGF0YSk7CiAgICAgICAgICAgIHRoaXMuJHJvdXRlci5yZXBsYWNlKHsgcGF0aDogIi9vbmRlbWFuZC9tYWtlcGF5bWVudCIgfSk7CiAgICAgICAgICB9CiAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgdGhpcy5hbGVydE1zZyA9IGRldGFpbHM/LmRhdGE/Lm1lc3NhZ2UgPyBkZXRhaWxzPy5kYXRhPy5tZXNzYWdlIDogIiI7CiAgICAgICAgICAgIHRoaXMuYWxlcnREaWFsb2cgPSB0cnVlOwogICAgICAgICAgfQogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICAgIGNhc2UgJ2F0bGFudGljLWZsYWcnOiB7CiAgICAgICAgICBsZXQgZGV0YWlscyA9IGF3YWl0IEFQSUhlbHBlcigiUE9TVCIsICIvYXBpL3YxL3ByZXBhaWQvb3BlblRyYW5zYWN0aW9uIiwgewogICAgICAgICAgICB2ZWhpY2xlTm86IHRoaXMubGljZW5jZVBsYXRlLAogICAgICAgICAgICBjb250YWN0OiB0aGlzLmNvbnRhY3RPYmouZm9ybWF0dGVkTnVtYmVyLAogICAgICAgICAgICBlbnRyeVRpbWU6IGVudHJ5RGF0ZVRpbWUsCiAgICAgICAgICAgIGV4aXRUaW1lOiBleGl0RGF0ZVRpbWUsCiAgICAgICAgICAgIHpjb2RlOiB0aGlzLnpvbmVEZXRhaWxzPy56Y29kZSwKICAgICAgICAgICAgbWlkOiB0aGlzLnpvbmVEZXRhaWxzPy5taWQsCiAgICAgICAgICAgIGV2ZW50VHlwZTogJ1BhaWRIb3N0UGFzcycKICAgICAgICAgIH0pOwoKICAgICAgICAgIGlmIChkZXRhaWxzPy5kYXRhPy5zdGF0dXMpIHsKICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCJTRVRfQ0FTSU5PX1VTRVJERVRBSUxTIiwgY29tbWl0RGF0YSk7CiAgICAgICAgICAgIHRoaXMuJHJvdXRlci5yZXBsYWNlKHsgcGF0aDogIi9wcmVwYWlkaG9zdC9tYWtlcGF5bWVudCIgfSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBpZiAoZGV0YWlscz8uZGF0YT8ubWVzc2FnZSA9PSAiQm9va2luZyBBbHJlYWR5IEV4aXN0cyIpIHsKICAgICAgICAgICAgICBsZXQgdXJsID0gd2luZG93LmxvY2F0aW9uLm9yaWdpbiArICIvZy8iICsgZGV0YWlscz8uZGF0YT8uZGF0YT8uYmlkOwogICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZXBsYWNlKHVybCkKICAgICAgICAgICAgfQogICAgICAgICAgICB0aGlzLmFsZXJ0TXNnID0gZGV0YWlscz8uZGF0YT8ubWVzc2FnZSA/IGRldGFpbHM/LmRhdGE/Lm1lc3NhZ2UgOiAiIjsKCiAgICAgICAgICAgIHRoaXMuYWxlcnREaWFsb2cgPSB0cnVlOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQoKICAgIH0sCgogICAgdXBwZXJjYXNlKCkgewogICAgICBpZiAocnVsZXMuYWxwaGFOdW1lcmljKHRoaXMubGljZW5jZVBsYXRlKSA9PT0gIk11c3QgYmUgYWxwaGFudW1lcmljIikgewogICAgICAgIHRoaXMubGljZW5jZVBsYXRlID0gdGhpcy5saWNlbmNlUGxhdGUucmVwbGFjZSgvW15cd1xzXS9naSwgJycpCiAgICAgIH0KICAgICAgdGhpcy5saWNlbmNlUGxhdGUgPSB0aGlzLmxpY2VuY2VQbGF0ZS50cmltKCkKICAgICAgdGhpcy5saWNlbmNlUGxhdGUgPSB0aGlzLmxpY2VuY2VQbGF0ZS50b1VwcGVyQ2FzZSgpOwogICAgfSwKICAgIC8qKgogICAgICogQG1ldGhvZCBnZXRab25lRGV0YWlscyBmZXRjaCB0aGUgem9uZSBkZXRhaWxzIGFuZCBjb21taXQgU0VUX1pPTkVfREVUQUlMUyBtdXRhdGlvbi4KICAgICAqLwogICAgYXN5bmMgZ2V0Wm9uZURldGFpbHMoc2VhcmNoUGFyYW1LZXksIHNlYXJjaFBhcmFtVmFsdWUpIHsKICAgICAgdHJ5IHsKICAgICAgICB2YXIgem9uZURldGFpbHMgPSBhd2FpdCBBUElIZWxwZXIoCiAgICAgICAgICAiR0VUIiwKICAgICAgICAgICIvYXBpL3YxL3VzZXIvY29uZmlnIiArIHNlYXJjaFBhcmFtS2V5ICsgIj0iICsgc2VhcmNoUGFyYW1WYWx1ZQogICAgICAgICk7CiAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCJTRVRfWk9ORV9ERVRBSUxTIiwgem9uZURldGFpbHMuZGF0YT8uem9uZSk7CiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgY29uc29sZS5sb2coZXJyb3IpOwogICAgICB9CiAgICB9LAogICAgLyoqCiAgICAgKiBAbWV0aG9kIGdldE9uRGVtYW5kWm9uZURldGFpbHMgZmV0Y2ggdGhlIG9uZGVtYW5kIHpvbmUgZGV0YWlscyBmcm9tIFBjb20gYW5kIGNvbW1pdCBTRVRfWk9ORV9ERVRBSUxTIG11dGF0aW9uLgogICAgICovCiAgICBhc3luYyBnZXRPbkRlbWFuZFpvbmVEZXRhaWxzKHNlYXJjaFBhcmFtVmFsdWUpIHsKICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZTsKICAgICAgdHJ5IHsKICAgICAgICB2YXIgem9uZURldGFpbHMgPSBhd2FpdCBBUElIZWxwZXIoCiAgICAgICAgICAiR0VUIiwKICAgICAgICAgICIvYXBpL3YxL2dldE9uRGVtYW5kLyIgKyBzZWFyY2hQYXJhbVZhbHVlCiAgICAgICAgKTsKICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgICBpZiAoem9uZURldGFpbHMuZGF0YT8ubG90KSB7CiAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoCiAgICAgICAgICAgICJTRVRfT05fREVNQU5EX1pPTkVfREVUQUlMUyIsCiAgICAgICAgICAgIHpvbmVEZXRhaWxzLmRhdGE/LmxvdAogICAgICAgICAgKTsKICAgICAgICAgIHRoaXMuc2V0RGF0ZVBpY2tlcigpOwogICAgICAgICAgdGhpcy5zZXREZWZhdWx0RGF0ZSgpOwogICAgICAgICAgLy8gdGhpcy5zZXRUaW1lUGlja2VyKCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuYWxlcnRNc2cgPQogICAgICAgICAgICB6b25lRGV0YWlscz8uZGF0YT8ubWVzc2FnZSB8fCAiRXJyb3IgaW4gbG9hZGluZyBsb2NhdGlvbiBkZXRhaWxzLiI7CiAgICAgICAgICB0aGlzLmFsZXJ0RGlhbG9nID0gdHJ1ZTsKICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgY29uc29sZS5sb2coZXJyb3IpOwogICAgICB9CiAgICB9LAogICAgb25Db250YWN0SW5wdXQoY29udGFjdERldGFpbHMpIHsKICAgICAgdGhpcy5pc0NvbnRhY3RWYWxpZCA9IGNvbnRhY3REZXRhaWxzPy5pc1ZhbGlkOwogICAgICB0aGlzLmNvbnRhY3RPYmogPSBPYmplY3QuYXNzaWduKHt9LCBjb250YWN0RGV0YWlscyk7CiAgICB9LAogIH0sCgogIGNvbXB1dGVkOiB7CiAgICBmb3JtYXR0ZWREYXRlVGltZSgpIHsKICAgICAgcmV0dXJuIHRoaXMudGltZSAhPT0gbnVsbCAmJiB0aGlzLnRpbWUgIT09IHVuZGVmaW5lZCAmJiB0aGlzLnRpbWUgIT09ICIiID8gZm9ybWF0KHRoaXMudGltZSwgJ2lpaSwgTExMIGRkJykgOiAiIgogICAgfSwKICAgIGZvcm1hdHRlZFllYXIoKSB7CiAgICAgIHJldHVybiB0aGlzLnRpbWUgIT09IG51bGwgJiYgdGhpcy50aW1lICE9PSB1bmRlZmluZWQgJiYgdGhpcy50aW1lICE9PSAiIiA/IGZvcm1hdCh0aGlzLnRpbWUsICd5eXl5JykgOiAiIgogICAgfSwKICAgIC4uLm1hcEdldHRlcnMoewogICAgICBvZERldGFpbHM6ICJnZXR0ZXJPZERldGFpbHMiLAogICAgICBjYXNpbm9EZXRhaWxzOiAnZ2V0dGVyQ2FzaW5vRGV0YWlscycsCiAgICAgIHpvbmVEZXRhaWxzOiAiZ2V0dGVyWm9uZURldGFpbHMiLAogICAgICBvbkRlbWFuZFpvbmVEZXRhaWxzOiAiZ2V0dGVyT25EZW1hbmRab25lRGV0YWlscyIsCiAgICAgIHRlbXBsYXRlRmxhZ3M6ICdnZXR0ZXJUZW1wbGF0ZUZsYWdzJwogICAgfSksCiAgICBmb3JtYXR0ZWRUaW1lKCkgewogICAgICByZXR1cm4gdGhpcy50aW1lICE9PSBudWxsICYmIHRoaXMudGltZSAhPT0gdW5kZWZpbmVkICYmIHRoaXMudGltZSAhPT0gIiIgPyBmb3JtYXQodGhpcy50aW1lLCAnaGg6bW0gYWEnKSA6ICIiCiAgICB9LAogICAgaW5mb0ZsYWcoKSB7CiAgICAgIHJldHVybiB0aGlzLmNvbnRhY3RPYmogPT0gbnVsbCB8fAogICAgICAgICF0aGlzLmNvbnRhY3RPYmouaXNWYWxpZCB8fAogICAgICAgIHRoaXMuY29udGFjdE9iai5waG9uZU51bWJlciA9PSAiIiB8fAogICAgICAgIHRoaXMuY29udGFjdE9iai5waG9uZU51bWJlciA9PSBudWxsIHx8CiAgICAgICAgdGhpcy5saWNlbmNlUGxhdGUgPT09ICIiIHx8CiAgICAgICAgdGhpcy5saWNlbmNlUGxhdGUgPT09IG51bGwgPyBmYWxzZSA6IHRydWUKICAgIH0sCiAgICB0aW1lRmxhZygpIHsKICAgICAgcmV0dXJuIHRoaXMudGltZSA9PT0gbnVsbCB8fCB0aGlzLmRpc2FibGVBZGRQYXltZW50QnRuIHx8IHRoaXMuZXN0aW1hdGUgPT09IG51bGwgfHwgdGhpcy5lc3RpbWF0ZSA9PT0gJycgfHwKICAgICAgICB0aGlzLnRpbWUgPT09ICIiIHx8IHRoaXMudGltZSA9PT0gdW5kZWZpbmVkID8gZmFsc2UgOiB0cnVlOwogICAgfSwKICAgIHBheW1lbnRGbGFnKCkgewogICAgICByZXR1cm4gdGhpcy5lc3RpbWF0ZSA9PT0gbnVsbCB8fCB0aGlzLmVzdGltYXRlID09PSAnJyB8fCB0aGlzLmVzdGltYXRlLmhhc093blByb3BlcnR5LmNhbGwoJ2dyYW5kVG90YWwnKSB8fCB0aGlzLmVzdGltYXRlLmhhc093blByb3BlcnR5LmNhbGwoJ3RvdGFsUHJpY2UnKSB8fCB0aGlzLmVzdGltYXRlLmhhc093blByb3BlcnR5LmNhbGwoJ3RvdGFsRmVlJykgfHwgdGhpcy5lc3RpbWF0ZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKCd0b3RhbFRheCcpID8gZmFsc2UgOiB0cnVlCiAgICB9LAogICAgZGF0ZVRleHRGb3JtYXQoKSB7CiAgICAgIHZhciBldmVudCA9IG5ldyBEYXRlKHRoaXMuZXhpdERhdGUpOwogICAgICByZXR1cm4gZXZlbnQudG9Mb2NhbGVEYXRlU3RyaW5nKCJlbi1VUyIsIHsKICAgICAgICB5ZWFyOiAibnVtZXJpYyIsCiAgICAgICAgbW9udGg6ICJzaG9ydCIsCiAgICAgICAgZGF5OiAibnVtZXJpYyIsCiAgICAgIH0pOwogICAgfSwKICAgIGNvbXB1dGVkRGF0ZUZvcm1hdHRlZCgpIHsKICAgICAgcmV0dXJuIHRoaXMudGltZSAhPSBudWxsICYmIHRoaXMudGltZSAhPSAiIiAmJiB0aGlzLnRpbWUgIT0gdW5kZWZpbmVkID8gZm9ybWF0KHRoaXMudGltZSwgJ01NL2RkL3l5eXknKSA6ICIiCiAgICB9LAogICAgZGlzYWJsZVN1Ym1pdEJ0bigpIHsKICAgICAgbGV0IGRpc2FibGVkID0KICAgICAgICB0aGlzLmNvbnRhY3RPYmogPT0gbnVsbCB8fAogICAgICAgICF0aGlzLmNvbnRhY3RPYmouaXNWYWxpZCB8fAogICAgICAgIHRoaXMuY29udGFjdE9iai5waG9uZU51bWJlciA9PSAiIiB8fAogICAgICAgIHRoaXMuY29udGFjdE9iai5waG9uZU51bWJlciA9PSBudWxsIHx8CiAgICAgICAgdGhpcy5saWNlbmNlUGxhdGUgPT09ICIiIHx8CiAgICAgICAgdGhpcy5saWNlbmNlUGxhdGUgPT09IG51bGwgfHwKICAgICAgICB0aGlzLnRpbWUgPT09IG51bGwgfHwgdGhpcy5kaXNhYmxlQWRkUGF5bWVudEJ0biB8fCB0aGlzLmVzdGltYXRlID09PSBudWxsIHx8IHRoaXMuZXN0aW1hdGUgPT09ICcnCiAgICAgIHRoaXMudGltZSA9PT0gIiIgfHwgdGhpcy50aW1lID09IHVuZGVmaW5lZDsKICAgICAgZGlzYWJsZWQgPQogICAgICAgIHRoaXMubGljZW5jZVBsYXRlICE9ICIiICYmIHRoaXMubGljZW5jZVBsYXRlICE9IG51bGwKICAgICAgICAgID8gZGlzYWJsZWQgfHwgL15bYS16MC05XSskL2kudGVzdCh0aGlzLmxpY2VuY2VQbGF0ZSkgPT09IGZhbHNlCiAgICAgICAgICA6IGRpc2FibGVkOwogICAgICBsZXQgc2VsZWN0ZWRNaW5zID0gdGhpcy50aW1lICE9PSBudWxsICYmIHRoaXMudGltZSAhPT0gdW5kZWZpbmVkICYmIHRoaXMudGltZSAhPT0gIiIgPyBmb3JtYXQodGhpcy50aW1lLCAnbW0nKSA6IG5ldyBEYXRlKCk7CiAgICAgIGxldCBzZWxlY3RlZEhvdXJzID0gdGhpcy50aW1lICE9PSBudWxsICYmIHRoaXMudGltZSAhPT0gdW5kZWZpbmVkICYmIHRoaXMudGltZSAhPT0gIiIgPyBmb3JtYXQodGhpcy50aW1lLCAnaGgnKSA6IG5ldyBEYXRlKCk7CiAgICAgIGxldCBzZWxlY3RlZEFNUE0gPSB0aGlzLnRpbWUgIT09IG51bGwgJiYgdGhpcy50aW1lICE9PSB1bmRlZmluZWQgJiYgdGhpcy50aW1lICE9PSAiIiA/IGZvcm1hdCh0aGlzLnRpbWUsICdhYWEnKSA6IG5ldyBEYXRlKCk7CiAgICAgIGRpc2FibGVkID0KICAgICAgICBkaXNhYmxlZCB8fAogICAgICAgIHNlbGVjdGVkTWlucyA9PSBudWxsIHx8CiAgICAgICAgc2VsZWN0ZWRNaW5zID09PSAiIiB8fAogICAgICAgIHNlbGVjdGVkTWlucyA9PSB1bmRlZmluZWQgfHwKICAgICAgICBzZWxlY3RlZEhvdXJzID09IG51bGwgfHwKICAgICAgICBzZWxlY3RlZEhvdXJzID09PSAiIiB8fAogICAgICAgIHNlbGVjdGVkSG91cnMgPT0gdW5kZWZpbmVkIHx8IHNlbGVjdGVkQU1QTSA9PSBudWxsIHx8CiAgICAgICAgc2VsZWN0ZWRBTVBNID09PSAiIiB8fAogICAgICAgIHNlbGVjdGVkQU1QTSA9PSB1bmRlZmluZWQgfHwgdGhpcy50aW1lID09PSBudWxsIHx8IHRoaXMudGltZSA9PT0gIiIgfHwgdGhpcy50aW1lID09PSB1bmRlZmluZWQKICAgICAgcmV0dXJuIGRpc2FibGVkOwogICAgfSwKICB9LAp9Owo="},null]}