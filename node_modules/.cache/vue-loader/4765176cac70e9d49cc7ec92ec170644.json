{"remainingRequest":"/home/vignesh/DIVRT/revamp-guest-webapp/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/vignesh/DIVRT/revamp-guest-webapp/src/views/session/AddPayment.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/vignesh/DIVRT/revamp-guest-webapp/src/views/session/AddPayment.vue","mtime":1688632306088},{"path":"/home/vignesh/DIVRT/revamp-guest-webapp/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vignesh/DIVRT/revamp-guest-webapp/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/vignesh/DIVRT/revamp-guest-webapp/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vignesh/DIVRT/revamp-guest-webapp/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBIZWFydGxhbmQgZnJvbSAiQC9wbHVnaW5zL3NlY3VyZXN1Ym1pdCI7Ci8vIGltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmltcG9ydCB7IGZvcm1hdCB9IGZyb20gImRhdGUtZm5zIjsKCmltcG9ydCBBUEkgZnJvbSAnQC9hcGknOwovLyBpbXBvcnQgbG9nZ2VySGVscGVyIGZyb20gIi4uL2xvZ2dlckhlbHBlciI7CmltcG9ydCB7IG1hcEdldHRlcnMgfSBmcm9tICJ2dWV4IjsKZXhwb3J0IGRlZmF1bHQgewogICAgbmFtZTogIkFkZFBheW1lbnQiLAogICAgZGF0YTogKCkgPT4gKHsKICAgICAgICByZWdleF9VUzogL14oPz0uezIsMTB9JCkoWzAtOV17MSw5fShbLXNdezF9WzAtOV0rKT8pJC8sCiAgICAgICAgcmVnZXhfQ0E6IC8uKlthLXpBLVpdLiokLywKICAgICAgICBkZWZhdWx0Q3JlZGl0Q2FyZENCOiBmYWxzZSwKICAgICAgICBhdXRvQ2hlY2tpbkNCOiBmYWxzZSwKICAgICAgICBocHM6ICIiLAogICAgICAgIHBvc3RhbENvZGU6ICIiLAogICAgICAgIGVtYWlsOiAiIiwKICAgICAgICBhZGRQYXltZW50TG9hZGluZzogZmFsc2UsCiAgICAgICAgc2hvd1BheW1lbnRCdG46IHRydWUsCiAgICAgICAgZHVyYXRpb246IDMwMCwKICAgICAgICBvZmZzZXQ6IDEwMCwKICAgICAgICBlYXNpbmc6ICJlYXNlSW5PdXRDdWJpYyIsCiAgICAgICAgZXJyRGlhbG9nOiBmYWxzZSwKICAgICAgICBlcnJNc2c6ICIiLAogICAgICAgIGluZm9EaWFsb2c6IGZhbHNlLAogICAgICAgIGluZm9Nc2c6ICIiLAogICAgfSksCiAgICBjb21wdXRlZDogewogICAgICAgIC4uLm1hcEdldHRlcnMoewogICAgICAgICAgICBib29raW5nSWQ6ICJnZXR0ZXJCb29raW5nSWQiLAogICAgICAgICAgICBjYXNpbm9EZXRhaWxzOiAnZ2V0dGVyQ2FzaW5vRGV0YWlscycsCiAgICAgICAgICAgIGJvb2tpbmdEZXRhaWxzOiAiZ2V0dGVyQm9va2luZ0RldGFpbHMiLAogICAgICAgICAgICB6b25lRGV0YWlsczogImdldHRlclpvbmVEZXRhaWxzIiwKICAgICAgICAgICAgdGVtcGxhdGVGbGFnczogJ2dldHRlclRlbXBsYXRlRmxhZ3MnLAogICAgICAgICAgICBvZERldGFpbHM6ICJnZXR0ZXJPZERldGFpbHMiLAogICAgICAgIH0pLAogICAgICAgIG9wdGlvbnMoKSB7CiAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICBkdXJhdGlvbjogdGhpcy5kdXJhdGlvbiwKICAgICAgICAgICAgICAgIG9mZnNldDogdGhpcy5vZmZzZXQsCiAgICAgICAgICAgICAgICBlYXNpbmc6IHRoaXMuZWFzaW5nLAogICAgICAgICAgICB9OwogICAgICAgIH0sCiAgICAgICAgY2hlY2tQb3N0YWxDb2RlKCkgewogICAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICAgICAgLyheXGR7NX0kKXwoXlxkezV9LVxkezR9JCkvLnRlc3QodGhpcy5wb3N0YWxDb2RlKSB8fAogICAgICAgICAgICAgICAgL15bQS1aYS16XVxkW0EtWmEtel1bIC1dP1xkW0EtWmEtel1cZCQvLnRlc3QodGhpcy5wb3N0YWxDb2RlKQogICAgICAgICAgICApOwogICAgICAgIH0sCiAgICB9LAogICAgY3JlYXRlZCgpIHsgfSwKICAgIGJlZm9yZVJvdXRlRW50ZXIodG8sIGZyb20sIG5leHQpIHsKICAgICAgICBuZXh0KGFzeW5jICh2bSkgPT4gewogICAgICAgICAgICB2bS4kdnVldGlmeS5nb1RvKDApOwogICAgICAgIH0pOwogICAgfSwKICAgIG1vdW50ZWQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICB0aGlzLmluaXRIUFNmb3JtKCk7CiAgICB9LAogICAgbWV0aG9kczogewogICAgICAgIG9uRm9ybVN1Ym1pdCgpIHsKICAgICAgICAgICAgdGhpcy5hZGRQYXltZW50TG9hZGluZyA9IHRydWU7CiAgICAgICAgICAgIHRoaXMuc2hvd1BheW1lbnRCdG4gPSBmYWxzZTsKICAgICAgICAgICAgLy9jaGVjayBVUyBQb3N0YWwgY29kZSBSZWdleAogICAgICAgICAgICBjb25zdCBwYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHdpbmRvdy5sb2NhdGlvbi5zZWFyY2gpOwogICAgICAgICAgICBpZiAoKHBhcmFtcy5nZXQoJ3Nlc3Npb250eXBlJykgPT0gJ2NpY28nICYmIHRoaXMuem9uZURldGFpbHM/LmlzUFFSRW5kUmVzZXJ2YXRpb24gPT0gJzEnKSB8fCBwYXJhbXMuZ2V0KCdzZXNzaW9udHlwZScpID09ICdvbmRlbWFuZCcpIHsKICAgICAgICAgICAgICAgIGlmICh0aGlzLmNhc2lub0RldGFpbHM/LnVzZXJEZXRhaWxzPy5lc3RpbWF0ZSkgewogICAgICAgICAgICAgICAgICAgIHRoaXMucG9zdFRvTG9nZ2VyQVBJKHsKICAgICAgICAgICAgICAgICAgICAgICAgcGxhdGU6IHRoaXMuY2FzaW5vRGV0YWlscz8udXNlckRldGFpbD8ucGxhdGUsCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRhY3Q6IHRoaXMuY2FzaW5vRGV0YWlscz8udXNlckRldGFpbD8uY29udGFjdCwKICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzVGV4dDogIlBhcmtlciBjbGlja2VkIG9uIEFERCBQQVlNRU5UIGJ0biB3aXRoIHBvc3RhbCBjb2RlLSAiICsgdGhpcy5wb3N0YWxDb2RlICsgIi4gTGFzdCA0IGNoYXJhY3RlcnMgb2YgTUlEIC0gIiArIHRoaXMuem9uZURldGFpbHMuTUlEcy5IUFNfUFVCTElDX0tFWV9VUy5zbGljZSgtNCksCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLnBvc3RUb0xvZ2dlckFQSSh7CiAgICAgICAgICAgICAgICAgICAgICAgIHBsYXRlOiB0aGlzLm9kRGV0YWlscz8udXNlckRldGFpbD8ucGxhdGUsCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRhY3Q6IHRoaXMub2REZXRhaWxzPy51c2VyRGV0YWlsPy5jb250YWN0LAogICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXNUZXh0OiAiUGFya2VyIGNsaWNrZWQgb24gQUREIFBBWU1FTlQgYnRuIHdpdGggcG9zdGFsIGNvZGUtICIgKyB0aGlzLnBvc3RhbENvZGUgKyAiLiBMYXN0IDQgY2hhcmFjdGVycyBvZiBNSUQgLSAiICsgdGhpcy56b25lRGV0YWlscy5NSURzLkhQU19QVUJMSUNfS0VZX1VTLnNsaWNlKC00KSwKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmICh0aGlzLnJlZ2V4X1VTLnRlc3QodGhpcy5wb3N0YWxDb2RlKSkgewogICAgICAgICAgICAgICAgICAgIHRoaXMuaHBzLm9wdGlvbnMucHVibGljS2V5ID0gdGhpcy56b25lRGV0YWlscz8uTUlEcwogICAgICAgICAgICAgICAgICAgICAgICA/LkhQU19QVUJMSUNfS0VZX1VTCiAgICAgICAgICAgICAgICAgICAgICAgID8gdGhpcy56b25lRGV0YWlscy5NSURzLkhQU19QVUJMSUNfS0VZX1VTCiAgICAgICAgICAgICAgICAgICAgICAgIDogIiI7CiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuY2FzaW5vRGV0YWlscz8udXNlckRldGFpbHM/LmVzdGltYXRlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucG9zdFRvTG9nZ2VyQVBJKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYXRlOiB0aGlzLmNhc2lub0RldGFpbHM/LnVzZXJEZXRhaWw/LnBsYXRlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGFjdDogdGhpcy5jYXNpbm9EZXRhaWxzPy51c2VyRGV0YWlsPy5jb250YWN0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzVGV4dDogIlBhcmtlciBjbGlja2VkIG9uIEFERCBQQVlNRU5UIGJ0biB3aXRoIHBvc3RhbCBjb2RlLSAiICsgdGhpcy5wb3N0YWxDb2RlICsgIi4gTGFzdCA0IGNoYXJhY3RlcnMgb2YgTUlEIC0gIiArIHRoaXMuem9uZURldGFpbHMuTUlEcy5IUFNfUFVCTElDX0tFWV9VUy5zbGljZSgtNCksCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wb3N0VG9Mb2dnZXJBUEkoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhdGU6IHRoaXMub2REZXRhaWxzPy51c2VyRGV0YWlsPy5wbGF0ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRhY3Q6IHRoaXMub2REZXRhaWxzPy51c2VyRGV0YWlsPy5jb250YWN0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzVGV4dDogIlBhcmtlciBjbGlja2VkIG9uIEFERCBQQVlNRU5UIGJ0biB3aXRoIHBvc3RhbCBjb2RlLSAiICsgdGhpcy5wb3N0YWxDb2RlICsgIi4gTGFzdCA0IGNoYXJhY3RlcnMgb2YgTUlEIC0gIiArIHRoaXMuem9uZURldGFpbHMuTUlEcy5IUFNfUFVCTElDX0tFWV9VUy5zbGljZSgtNCksCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygiUGFya2VyIGNsaWNrZWQgb24gQUREIFBBWU1FTlQgYnRuIHdpdGggcG9zdGFsIGNvZGUtICIgKyB0aGlzLnBvc3RhbENvZGUpCiAgICAgICAgICAgICAgICAgICAgdGhpcy5ocHMudG9rZW5pemUoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIC8vY2hlY2sgQ0EgUG9zdGFsIGNvZGUgUmVnZXgKICAgICAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMucmVnZXhfQ0EudGVzdCh0aGlzLnBvc3RhbENvZGUpKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5ocHMub3B0aW9ucy5wdWJsaWNLZXkgPSB0aGlzLnpvbmVEZXRhaWxzPy5NSURzCiAgICAgICAgICAgICAgICAgICAgICAgID8uSFBTX1BVQkxJQ19LRVlfQ0EKICAgICAgICAgICAgICAgICAgICAgICAgPyB0aGlzLnpvbmVEZXRhaWxzLk1JRHMuSFBTX1BVQkxJQ19LRVlfQ0EKICAgICAgICAgICAgICAgICAgICAgICAgOiAiIjsKICAgICAgICAgICAgICAgICAgICB0aGlzLnBvc3RUb0xvZ2dlckFQSSh7CiAgICAgICAgICAgICAgICAgICAgICAgIHBsYXRlOiB0aGlzLm9kRGV0YWlscz8udXNlckRldGFpbD8ucGxhdGUsCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRhY3Q6IHRoaXMub2REZXRhaWxzPy51c2VyRGV0YWlsPy5jb250YWN0LAogICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXNUZXh0OiAiUGFya2VyIGNsaWNrZWQgb24gQUREIFBBWU1FTlQgYnRuIHdpdGggcG9zdGFsIGNvZGUtICIgKyB0aGlzLnBvc3RhbENvZGUgKyAiLiBMYXN0IDQgY2hhcmFjdGVycyBvZiBNSUQgLSAiICsgdGhpcy56b25lRGV0YWlscy5NSURzLkhQU19QVUJMSUNfS0VZX0NBLnNsaWNlKC00KSwKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygiUGFya2VyIGNsaWNrZWQgb24gQUREIFBBWU1FTlQgYnRuIHdpdGggcG9zdGFsIGNvZGUtICIgKyB0aGlzLnBvc3RhbENvZGUpCiAgICAgICAgICAgICAgICAgICAgdGhpcy5ocHMudG9rZW5pemUoKTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRQYXltZW50TG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd1BheW1lbnRCdG4gPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIHRoaXMuZXJyRGlhbG9nID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICB0aGlzLmVyck1zZyA9CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucG9zdGFsQ29kZS5sZW5ndGggPiAwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/ICJJbnZhbGlkIHBvc3RhbCBjb2RlIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgOiAiUG9zdGFsIGNvZGUgY2Fubm90IGJlIGVtcHR5IjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIGlmICh0aGlzLnJlZ2V4X1VTLnRlc3QodGhpcy5wb3N0YWxDb2RlKSkgewogICAgICAgICAgICAgICAgICAgIHRoaXMuaHBzLm9wdGlvbnMucHVibGljS2V5ID0gdGhpcy5ib29raW5nRGV0YWlscz8uYm9va2luZz8uTUlEcwogICAgICAgICAgICAgICAgICAgICAgICA/LkhQU19QVUJMSUNfS0VZX1VTCiAgICAgICAgICAgICAgICAgICAgICAgID8gdGhpcy5ib29raW5nRGV0YWlscy5ib29raW5nLk1JRHMuSFBTX1BVQkxJQ19LRVlfVVMKICAgICAgICAgICAgICAgICAgICAgICAgOiAiIjsKICAgICAgICAgICAgICAgICAgICB0aGlzLnBvc3RUb0xvZ2dlckFQSSh7CiAgICAgICAgICAgICAgICAgICAgICAgIHBob25lOiB0aGlzLmJvb2tpbmdEZXRhaWxzLnVzZXIuY29udGFjdCwKICAgICAgICAgICAgICAgICAgICAgICAgcmVmSWQ6IHRoaXMuYm9va2luZ0lkLAogICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXNUZXh0OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgIlBhcmtlciBjbGlja2VkIG9uIEFERCBQQVlNRU5UIGJ0biB3aXRoIHBvc3RhbCBjb2RlLSAiICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucG9zdGFsQ29kZSArICIuIExhc3QgNCBjaGFyYWN0ZXJzIG9mIE1JRCAtICIgKyB0aGlzLmJvb2tpbmdEZXRhaWxzLmJvb2tpbmcuTUlEcy5IUFNfUFVCTElDX0tFWV9VUy5zbGljZSgtNCksCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5ocHMudG9rZW5pemUoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIC8vY2hlY2sgQ0EgUG9zdGFsIGNvZGUgUmVnZXgKICAgICAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMucmVnZXhfQ0EudGVzdCh0aGlzLnBvc3RhbENvZGUpKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5ocHMub3B0aW9ucy5wdWJsaWNLZXkgPSB0aGlzLmJvb2tpbmdEZXRhaWxzPy5ib29raW5nPy5NSURzCiAgICAgICAgICAgICAgICAgICAgICAgID8uSFBTX1BVQkxJQ19LRVlfQ0EKICAgICAgICAgICAgICAgICAgICAgICAgPyB0aGlzLmJvb2tpbmdEZXRhaWxzLmJvb2tpbmcuTUlEcy5IUFNfUFVCTElDX0tFWV9DQQogICAgICAgICAgICAgICAgICAgICAgICA6ICIiOwogICAgICAgICAgICAgICAgICAgIHRoaXMucG9zdFRvTG9nZ2VyQVBJKHsKICAgICAgICAgICAgICAgICAgICAgICAgcGhvbmU6IHRoaXMuYm9va2luZ0RldGFpbHMudXNlci5jb250YWN0LAogICAgICAgICAgICAgICAgICAgICAgICByZWZJZDogdGhpcy5ib29raW5nSWQsCiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1c1RleHQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAiUGFya2VyIGNsaWNrZWQgb24gQUREIFBBWU1FTlQgYnRuIHdpdGggcG9zdGFsIGNvZGUtICIgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wb3N0YWxDb2RlICsgIi4gTGFzdCA0IGNoYXJhY3RlcnMgb2YgTUlEIC0gIiArIHRoaXMuYm9va2luZ0RldGFpbHMuYm9va2luZy5NSURzLkhQU19QVUJMSUNfS0VZX0NBLnNsaWNlKC00KSwKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB0aGlzLmhwcy50b2tlbml6ZSgpOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZFBheW1lbnRMb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93UGF5bWVudEJ0biA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5lcnJEaWFsb2cgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIHRoaXMuZXJyTXNnID0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wb3N0YWxDb2RlLmxlbmd0aCA+IDAKICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gIkludmFsaWQgcG9zdGFsIGNvZGUiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6ICJQb3N0YWwgY29kZSBjYW5ub3QgYmUgZW1wdHkiOwogICAgICAgICAgICAgICAgICAgIHRoaXMucG9zdFRvTG9nZ2VyQVBJKHsKICAgICAgICAgICAgICAgICAgICAgICAgcGhvbmU6IHRoaXMuYm9va2luZ0RldGFpbHMudXNlci5jb250YWN0LAogICAgICAgICAgICAgICAgICAgICAgICByZWZJZDogdGhpcy5ib29raW5nSWQsCiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yOiB0aGlzLmVyck1zZywKICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzVGV4dDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICJQYXJrZXIgY2xpY2tlZCBvbiBBREQgUEFZTUVOVCBidG4gd2l0aCBpbnZhbGlkIHBvc3RhbCBjb2RlIC0iICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucG9zdGFsQ29kZSwKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgaW5pdEhQU2Zvcm0oKSB7CiAgICAgICAgICAgIHZhciBzZWxmID0gdGhpczsKICAgICAgICAgICAgdGhpcy5ocHMgPSBuZXcgSGVhcnRsYW5kLkhQUyh7CiAgICAgICAgICAgICAgICB0eXBlOiAiaWZyYW1lIiwKICAgICAgICAgICAgICAgIGZpZWxkczogewogICAgICAgICAgICAgICAgICAgIGNhcmROdW1iZXI6IHsKICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0OiAiaWZyYW1lc0NhcmROdW1iZXIiLAogICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcjogIkVudGVyIENhcmQgTnVtYmVyIiwKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGNhcmRFeHBpcmF0aW9uOiB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldDogImlmcmFtZXNDYXJkRXhwaXJhdGlvbiIsCiAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyOiAiTU0gLyBZWVlZIiwKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGNhcmRDdnY6IHsKICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0OiAiaWZyYW1lc0NhcmRDdnYiLAogICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcjogImV4IC0gMTIzIiwKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIC8vIENvbGxlY3Rpb24gb2YgQ1NTIHRvIGluamVjdCBpbnRvIHRoZSBpZnJhbWVzLgogICAgICAgICAgICAgICAgLy8gVGhlc2UgcHJvcGVydGllcyBjYW4gbWF0Y2ggdGhlIHNpdGUncyBzdHlsZXMKICAgICAgICAgICAgICAgIC8vIHRvIGNyZWF0ZSBhIHNlYW1sZXNzIGV4cGVyaWVuY2UuCiAgICAgICAgICAgICAgICBzdHlsZTogewogICAgICAgICAgICAgICAgICAgIGlucHV0OiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6ICIjZmZmIiwKICAgICAgICAgICAgICAgICAgICAgICAgYm9yZGVyOiAiMXB4IHNvbGlkIiwKICAgICAgICAgICAgICAgICAgICAgICAgImJvcmRlci1jb2xvciI6ICIjYmJiM2I5ICNjN2MxYzYgI2M3YzFjNiIsCiAgICAgICAgICAgICAgICAgICAgICAgICJib3gtc2l6aW5nIjogImJvcmRlci1ib3giLAogICAgICAgICAgICAgICAgICAgICAgICAiZm9udC1mYW1pbHkiOiAic2VyaWYiLAogICAgICAgICAgICAgICAgICAgICAgICAiZm9udC1zaXplIjogIjE2cHgiLAogICAgICAgICAgICAgICAgICAgICAgICAibGluZS1oZWlnaHQiOiAiMSIsCiAgICAgICAgICAgICAgICAgICAgICAgIG1hcmdpbjogIjAgLjVlbSAwIDAiLAogICAgICAgICAgICAgICAgICAgICAgICAibWF4LXdpZHRoIjogIjEwMCUiLAogICAgICAgICAgICAgICAgICAgICAgICBvdXRsaW5lOiAiMCIsCiAgICAgICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6ICIwLjUyNzhlbSIsCiAgICAgICAgICAgICAgICAgICAgICAgICJ2ZXJ0aWNhbC1hbGlnbiI6ICJiYXNlbGluZSIsCiAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogIjUwcHgiLAogICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogIjEwMCUgIWltcG9ydGFudCIsCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAiI2hlYXJ0bGFuZC1maWVsZCI6IHsKICAgICAgICAgICAgICAgICAgICAgICAgImZvbnQtZmFtaWx5IjogInNhbnMtc2VyaWYiLAogICAgICAgICAgICAgICAgICAgICAgICAiYm94LXNpemluZyI6ICJib3JkZXItYm94IiwKICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogImJsb2NrIiwKICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAiNTBweCIsCiAgICAgICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6ICI2cHggNnB4IiwKICAgICAgICAgICAgICAgICAgICAgICAgImZvbnQtc2l6ZSI6ICIxNHB4IiwKICAgICAgICAgICAgICAgICAgICAgICAgImxpbmUtaGVpZ2h0IjogIjEuNDI4NTcxNDMiLAogICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogIiM1NTUiLAogICAgICAgICAgICAgICAgICAgICAgICAiYmFja2dyb3VuZC1jb2xvciI6ICIjZmZmIiwKICAgICAgICAgICAgICAgICAgICAgICAgImJvcmRlci1ib3R0b20iOiAiMXB4IHNvbGlkICNjY2MiLAogICAgICAgICAgICAgICAgICAgICAgICAiYm9yZGVyLXRvcCI6ICIwcHgiLAogICAgICAgICAgICAgICAgICAgICAgICAiYm9yZGVyLWxlZnQiOiAiMHB4IiwKICAgICAgICAgICAgICAgICAgICAgICAgImJvcmRlci1yaWdodCI6ICIwcHgiLAogICAgICAgICAgICAgICAgICAgICAgICAiYm9yZGVyLXJhZGl1cyI6ICIwcHgiLAogICAgICAgICAgICAgICAgICAgICAgICAvLyAiLXdlYmtpdC1ib3gtc2hhZG93IjogImluc2V0IDAgMXB4IDFweCByZ2JhKDAsMCwwLC4wNzUpIiwKICAgICAgICAgICAgICAgICAgICAgICAgLy8gImJveC1zaGFkb3ciOiAiaW5zZXQgMCAxcHggMXB4IHJnYmEoMCwwLDAsLjA3NSkiLAogICAgICAgICAgICAgICAgICAgICAgICAiLXdlYmtpdC10cmFuc2l0aW9uIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICJib3JkZXItY29sb3IgZWFzZS1pbi1vdXQgLjE1cywtd2Via2l0LWJveC1zaGFkb3cgZWFzZS1pbi1vdXQgLjE1cyIsCiAgICAgICAgICAgICAgICAgICAgICAgICItby10cmFuc2l0aW9uIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICJib3JkZXItY29sb3IgZWFzZS1pbi1vdXQgLjE1cyxib3gtc2hhZG93IGVhc2UtaW4tb3V0IC4xNXMiLAogICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2l0aW9uOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgImJvcmRlci1jb2xvciBlYXNlLWluLW91dCAuMTVzLGJveC1zaGFkb3cgZWFzZS1pbi1vdXQgLjE1cyIsCiAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiAiMTAwJSIsCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAiI2hlYXJ0bGFuZC1maWVsZFtuYW1lPXN1Ym1pdF0iOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICJiYWNrZ3JvdW5kLWNvbG9yIjogIiNGMTU1NUMiLAogICAgICAgICAgICAgICAgICAgICAgICAiZm9udC1mYW1pbHkiOiAic2Fucy1zZXJpZiIsCiAgICAgICAgICAgICAgICAgICAgICAgICJ0ZXh0LXRyYW5zZm9ybSI6ICJ1cHBlcmNhc2UiLAogICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6ICI1MHB4IiwKICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6ICIjZmZmZmZmIiwKICAgICAgICAgICAgICAgICAgICAgICAgYm9yZGVyOiAiMHB4IHNvbGlkIHRyYW5zcGFyZW50IiwKICAgICAgICAgICAgICAgICAgICAgICAgImJvcmRlci1yYWRpdXMiOiAiMnB4IiwKICAgICAgICAgICAgICAgICAgICAgICAgImZvbnQtd2VpZ2h0IjogImJvbGRlciIsCiAgICAgICAgICAgICAgICAgICAgICAgICJmb250LXNpemUiOiAibWVkaXVtIiwKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICIjaGVhcnRsYW5kLWZpZWxkW25hbWU9c3VibWl0XTpmb2N1cyI6IHsKICAgICAgICAgICAgICAgICAgICAgICAgImJhY2tncm91bmQtY29sb3IiOiAiI0YxNTU1QyIsCiAgICAgICAgICAgICAgICAgICAgICAgICJmb250LWZhbWlseSI6ICJzYW5zLXNlcmlmIiwKICAgICAgICAgICAgICAgICAgICAgICAgInRleHQtdHJhbnNmb3JtIjogInVwcGVyY2FzZSIsCiAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogIjUwcHgiLAogICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogIiNmZmZmZmYiLAogICAgICAgICAgICAgICAgICAgICAgICBib3JkZXI6ICIwcHggc29saWQgdHJhbnNwYXJlbnQgIWltcG9ydGFudCIsCiAgICAgICAgICAgICAgICAgICAgICAgICJib3JkZXItcmFkaXVzIjogIjJweCIsCiAgICAgICAgICAgICAgICAgICAgICAgICJmb250LXdlaWdodCI6ICJib2xkZXIiLAogICAgICAgICAgICAgICAgICAgICAgICAiZm9udC1zaXplIjogIm1lZGl1bSIsCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAiI2hlYXJ0bGFuZC1maWVsZFtuYW1lPXN1Ym1pdF06aG92ZXIiOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICJiYWNrZ3JvdW5kLWNvbG9yIjogIiNGMTU1NUMiLAogICAgICAgICAgICAgICAgICAgICAgICAiZm9udC1mYW1pbHkiOiAic2Fucy1zZXJpZiIsCiAgICAgICAgICAgICAgICAgICAgICAgICJ0ZXh0LXRyYW5zZm9ybSI6ICJ1cHBlcmNhc2UiLAogICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6ICI1MHB4IiwKICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6ICIjZmZmZmZmIiwKICAgICAgICAgICAgICAgICAgICAgICAgYm9yZGVyOiAiMHB4IHNvbGlkIHRyYW5zcGFyZW50ICFpbXBvcnRhbnQiLAogICAgICAgICAgICAgICAgICAgICAgICAiYm9yZGVyLXJhZGl1cyI6ICIycHgiLAogICAgICAgICAgICAgICAgICAgICAgICAiZm9udC13ZWlnaHQiOiAiYm9sZGVyIiwKICAgICAgICAgICAgICAgICAgICAgICAgImZvbnQtc2l6ZSI6ICJtZWRpdW0iLAogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgIiNoZWFydGxhbmQtZmllbGQtd3JhcHBlciAjaGVhcnRsYW5kLWZpZWxkOmZvY3VzIjogewogICAgICAgICAgICAgICAgICAgICAgICAiYm9yZGVyLWxlZnQiOiAiMHB4IiwKICAgICAgICAgICAgICAgICAgICAgICAgImJvcmRlci10b3AiOiAiMHB4IiwKICAgICAgICAgICAgICAgICAgICAgICAgImJvcmRlci1yaWdodCI6ICIwcHgiLAogICAgICAgICAgICAgICAgICAgICAgICAiYm9yZGVyLWJvdHRvbSI6ICIxcHggc29saWQgIzM5ODllMyIsCiAgICAgICAgICAgICAgICAgICAgICAgIG91dGxpbmU6ICJub25lIiwKICAgICAgICAgICAgICAgICAgICAgICAgImJveC1zaGFkb3ciOiAibm9uZSIsCiAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogIjUwcHgiLAogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgImhlYXJ0bGFuZC1maWVsZC13cmFwcGVyICNoZWFydGxhbmQtZmllbGQiOiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogIjUwcHgiLAogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgImlucHV0W3R5cGU9c3VibWl0XSI6IHsKICAgICAgICAgICAgICAgICAgICAgICAgImJveC1zaXppbmciOiAiYm9yZGVyLWJveCIsCiAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6ICJpbmxpbmUtYmxvY2siLAogICAgICAgICAgICAgICAgICAgICAgICBwYWRkaW5nOiAiNnB4IDEycHgiLAogICAgICAgICAgICAgICAgICAgICAgICAibWFyZ2luLWJvdHRvbSI6ICIwIiwKICAgICAgICAgICAgICAgICAgICAgICAgImZvbnQtc2l6ZSI6ICIxNHB4IiwKICAgICAgICAgICAgICAgICAgICAgICAgImZvbnQtd2VpZ2h0IjogIjQwMCIsCiAgICAgICAgICAgICAgICAgICAgICAgICJsaW5lLWhlaWdodCI6ICIxLjQyODU3MTQzIiwKICAgICAgICAgICAgICAgICAgICAgICAgInRleHQtYWxpZ24iOiAiY2VudGVyIiwKICAgICAgICAgICAgICAgICAgICAgICAgIndoaXRlLXNwYWNlIjogIm5vd3JhcCIsCiAgICAgICAgICAgICAgICAgICAgICAgICJ2ZXJ0aWNhbC1hbGlnbiI6ICJtaWRkbGUiLAogICAgICAgICAgICAgICAgICAgICAgICAiLW1zLXRvdWNoLWFjdGlvbiI6ICJtYW5pcHVsYXRpb24iLAogICAgICAgICAgICAgICAgICAgICAgICAidG91Y2gtYWN0aW9uIjogIm1hbmlwdWxhdGlvbiIsCiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnNvcjogInBvaW50ZXIiLAogICAgICAgICAgICAgICAgICAgICAgICAiLXdlYmtpdC11c2VyLXNlbGVjdCI6ICJub25lIiwKICAgICAgICAgICAgICAgICAgICAgICAgIi1tb3otdXNlci1zZWxlY3QiOiAibm9uZSIsCiAgICAgICAgICAgICAgICAgICAgICAgICItbXMtdXNlci1zZWxlY3QiOiAibm9uZSIsCiAgICAgICAgICAgICAgICAgICAgICAgICJ1c2VyLXNlbGVjdCI6ICJub25lIiwKICAgICAgICAgICAgICAgICAgICAgICAgImJhY2tncm91bmQtaW1hZ2UiOiAibm9uZSIsCiAgICAgICAgICAgICAgICAgICAgICAgIGJvcmRlcjogIjFweCBzb2xpZCB0cmFuc3BhcmVudCIsCiAgICAgICAgICAgICAgICAgICAgICAgICJib3JkZXItcmFkaXVzIjogIjRweCIsCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiAiI2ZmZiIsCiAgICAgICAgICAgICAgICAgICAgICAgICJiYWNrZ3JvdW5kLWNvbG9yIjogIiMzMzdhYjciLAogICAgICAgICAgICAgICAgICAgICAgICAiYm9yZGVyLWNvbG9yIjogIiMyZTZkYTQiLAogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgIiNoZWFydGxhbmQtZmllbGRbcGxhY2Vob2xkZXJdIjogewogICAgICAgICAgICAgICAgICAgICAgICAibGV0dGVyLXNwYWNpbmciOiAiMXB4IiwKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICI6OnBsYWNlaG9sZGVyIjogewogICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogIiM4Q0EyQUQiLAogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgIiNoZWFydGxhbmQtZmllbGRbbmFtZT1jYXJkQ3Z2XSI6IHsKICAgICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICJ0cmFuc3BhcmVudCB1cmwoaHR0cHM6Ly9naXRodWIuY29tL2hwcy9oZWFydGxhbmQtcGhwL2Jsb2IvbWFzdGVyL2V4YW1wbGVzL2VuZC10by1lbmQvYXNzZXRzL2ltYWdlcy9jdnYxLnBuZz9yYXc9dHJ1ZSkgbm8tcmVwZWF0IHJpZ2h0IiwKICAgICAgICAgICAgICAgICAgICAgICAgImJhY2tncm91bmQtc2l6ZSI6ICI2M3B4IDQwcHgiLAogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgImlucHV0I2hlYXJ0bGFuZC1maWVsZFtuYW1lPWNhcmROdW1iZXJdIjogewogICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgInRyYW5zcGFyZW50IHVybChodHRwczovL2dpdGh1Yi5jb20vaHBzL2hlYXJ0bGFuZC1waHAvYmxvYi9tYXN0ZXIvZXhhbXBsZXMvZW5kLXRvLWVuZC9hc3NldHMvaW1hZ2VzL3NzLWlucHV0Y2FyZC1ibGFua0AyeC5wbmc/cmF3PXRydWUpIG5vLXJlcGVhdCByaWdodCIsCiAgICAgICAgICAgICAgICAgICAgICAgICJiYWNrZ3JvdW5kLXNpemUiOiAiNTVweCAzNXB4IiwKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICIjaGVhcnRsYW5kLWZpZWxkLmludmFsaWQuY2FyZC10eXBlLXZpc2EiOiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAidHJhbnNwYXJlbnQgdXJsKGh0dHBzOi8vZ2l0aHViLmNvbS9ocHMvaGVhcnRsYW5kLXBocC9ibG9iL21hc3Rlci9leGFtcGxlcy9lbmQtdG8tZW5kL2Fzc2V0cy9pbWFnZXMvc3Mtc2F2ZWQtdmlzYUAyeC5wbmc/cmF3PXRydWUpIG5vLXJlcGVhdCByaWdodCIsCiAgICAgICAgICAgICAgICAgICAgICAgICJiYWNrZ3JvdW5kLXNpemUiOiAiODNweCA4OHB4IiwKICAgICAgICAgICAgICAgICAgICAgICAgImJhY2tncm91bmQtcG9zaXRpb24teSI6ICItNDRweCIsCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAiI2hlYXJ0bGFuZC1maWVsZC52YWxpZC5jYXJkLXR5cGUtdmlzYSI6IHsKICAgICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICJ0cmFuc3BhcmVudCB1cmwoaHR0cHM6Ly9naXRodWIuY29tL2hwcy9oZWFydGxhbmQtcGhwL2Jsb2IvbWFzdGVyL2V4YW1wbGVzL2VuZC10by1lbmQvYXNzZXRzL2ltYWdlcy9zcy1zYXZlZC12aXNhQDJ4LnBuZz9yYXc9dHJ1ZSkgbm8tcmVwZWF0IHJpZ2h0IHRvcCIsCiAgICAgICAgICAgICAgICAgICAgICAgICJiYWNrZ3JvdW5kLXNpemUiOiAiODJweCA4NnB4IiwKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICIjaGVhcnRsYW5kLWZpZWxkLmludmFsaWQuY2FyZC10eXBlLWRpc2NvdmVyIjogewogICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgInRyYW5zcGFyZW50IHVybChodHRwczovL2dpdGh1Yi5jb20vaHBzL2hlYXJ0bGFuZC1waHAvYmxvYi9tYXN0ZXIvZXhhbXBsZXMvZW5kLXRvLWVuZC9hc3NldHMvaW1hZ2VzL3NzLXNhdmVkLWRpc2NvdmVyQDJ4LnBuZz9yYXc9dHJ1ZSkgbm8tcmVwZWF0IHJpZ2h0IiwKICAgICAgICAgICAgICAgICAgICAgICAgImJhY2tncm91bmQtc2l6ZSI6ICI4NXB4IDkwcHgiLAogICAgICAgICAgICAgICAgICAgICAgICAiYmFja2dyb3VuZC1wb3NpdGlvbi15IjogIi00NHB4IiwKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICIjaGVhcnRsYW5kLWZpZWxkLnZhbGlkLmNhcmQtdHlwZS1kaXNjb3ZlciI6IHsKICAgICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICJ0cmFuc3BhcmVudCB1cmwoaHR0cHM6Ly9naXRodWIuY29tL2hwcy9oZWFydGxhbmQtcGhwL2Jsb2IvbWFzdGVyL2V4YW1wbGVzL2VuZC10by1lbmQvYXNzZXRzL2ltYWdlcy9zcy1zYXZlZC1kaXNjb3ZlckAyeC5wbmc/cmF3PXRydWUpIG5vLXJlcGVhdCByaWdodCIsCiAgICAgICAgICAgICAgICAgICAgICAgICJiYWNrZ3JvdW5kLXNpemUiOiAiODVweCA5MHB4IiwKICAgICAgICAgICAgICAgICAgICAgICAgImJhY2tncm91bmQtcG9zaXRpb24teSI6ICIxcHgiLAogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgIiNoZWFydGxhbmQtZmllbGQuaW52YWxpZC5jYXJkLXR5cGUtYW1leCI6IHsKICAgICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICJ0cmFuc3BhcmVudCB1cmwoaHR0cHM6Ly9naXRodWIuY29tL2hwcy9oZWFydGxhbmQtcGhwL2Jsb2IvbWFzdGVyL2V4YW1wbGVzL2VuZC10by1lbmQvYXNzZXRzL2ltYWdlcy9zcy1zYXZlZGNhcmRzLWFtZXhAMngucG5nP3Jhdz10cnVlKSBuby1yZXBlYXQgcmlnaHQiLAogICAgICAgICAgICAgICAgICAgICAgICAiYmFja2dyb3VuZC1zaXplIjogIjUwcHggOTBweCIsCiAgICAgICAgICAgICAgICAgICAgICAgICJiYWNrZ3JvdW5kLXBvc2l0aW9uLXkiOiAiLTQ0cHgiLAogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgIiNoZWFydGxhbmQtZmllbGQudmFsaWQuY2FyZC10eXBlLWFtZXgiOiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAidHJhbnNwYXJlbnQgdXJsKGh0dHBzOi8vZ2l0aHViLmNvbS9ocHMvaGVhcnRsYW5kLXBocC9ibG9iL21hc3Rlci9leGFtcGxlcy9lbmQtdG8tZW5kL2Fzc2V0cy9pbWFnZXMvc3Mtc2F2ZWRjYXJkcy1hbWV4QDJ4LnBuZz9yYXc9dHJ1ZSkgbm8tcmVwZWF0IHJpZ2h0IHRvcCIsCiAgICAgICAgICAgICAgICAgICAgICAgICJiYWNrZ3JvdW5kLXNpemUiOiAiNTBweCA5MHB4IiwKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICIjaGVhcnRsYW5kLWZpZWxkLmludmFsaWQuY2FyZC10eXBlLW1hc3RlcmNhcmQiOiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAidHJhbnNwYXJlbnQgdXJsKGh0dHBzOi8vZ2l0aHViLmNvbS9ocHMvaGVhcnRsYW5kLXBocC9ibG9iL21hc3Rlci9leGFtcGxlcy9lbmQtdG8tZW5kL2Fzc2V0cy9pbWFnZXMvc3Mtc2F2ZWQtbWFzdGVyY2FyZC5wbmc/cmF3PXRydWUpIG5vLXJlcGVhdCByaWdodCIsCiAgICAgICAgICAgICAgICAgICAgICAgICJiYWNrZ3JvdW5kLXNpemUiOiAiNjJweCAxMDVweCIsCiAgICAgICAgICAgICAgICAgICAgICAgICJiYWNrZ3JvdW5kLXBvc2l0aW9uLXkiOiAiLTUycHgiLAogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgIiNoZWFydGxhbmQtZmllbGQudmFsaWQuY2FyZC10eXBlLW1hc3RlcmNhcmQiOiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAidHJhbnNwYXJlbnQgdXJsKGh0dHBzOi8vZ2l0aHViLmNvbS9ocHMvaGVhcnRsYW5kLXBocC9ibG9iL21hc3Rlci9leGFtcGxlcy9lbmQtdG8tZW5kL2Fzc2V0cy9pbWFnZXMvc3Mtc2F2ZWQtbWFzdGVyY2FyZC5wbmc/cmF3PXRydWUpIG5vLXJlcGVhdCByaWdodCIsCiAgICAgICAgICAgICAgICAgICAgICAgICJiYWNrZ3JvdW5kLXNpemUiOiAiNjJweCAxMDVweCIsCiAgICAgICAgICAgICAgICAgICAgICAgICJiYWNrZ3JvdW5kLXBvc2l0aW9uLXkiOiAiLTFweCIsCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAiI2hlYXJ0bGFuZC1maWVsZC5pbnZhbGlkLmNhcmQtdHlwZS1qY2IiOiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAidHJhbnNwYXJlbnQgdXJsKGh0dHBzOi8vZ2l0aHViLmNvbS9ocHMvaGVhcnRsYW5kLXBocC9ibG9iL21hc3Rlci9leGFtcGxlcy9lbmQtdG8tZW5kL2Fzc2V0cy9pbWFnZXMvc3Mtc2F2ZWQtamNiQDJ4LnBuZz9yYXc9dHJ1ZSkgbm8tcmVwZWF0IHJpZ2h0IiwKICAgICAgICAgICAgICAgICAgICAgICAgImJhY2tncm91bmQtc2l6ZSI6ICI1NXB4IDk0cHgiLAogICAgICAgICAgICAgICAgICAgICAgICAiYmFja2dyb3VuZC1wb3NpdGlvbi15IjogIi00NHB4IiwKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICIjaGVhcnRsYW5kLWZpZWxkLnZhbGlkLmNhcmQtdHlwZS1qY2IiOiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAidHJhbnNwYXJlbnQgdXJsKGh0dHBzOi8vZ2l0aHViLmNvbS9ocHMvaGVhcnRsYW5kLXBocC9ibG9iL21hc3Rlci9leGFtcGxlcy9lbmQtdG8tZW5kL2Fzc2V0cy9pbWFnZXMvc3Mtc2F2ZWQtamNiQDJ4LnBuZz9yYXc9dHJ1ZSkgbm8tcmVwZWF0IHJpZ2h0IHRvcCIsCiAgICAgICAgICAgICAgICAgICAgICAgICJiYWNrZ3JvdW5kLXNpemUiOiAiNTVweCA5NHB4IiwKICAgICAgICAgICAgICAgICAgICAgICAgImJhY2tncm91bmQtcG9zaXRpb24teSI6ICIycHgiLAogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgImlucHV0I2hlYXJ0bGFuZC1maWVsZFtuYW1lPWNhcmROdW1iZXJdOjotbXMtY2xlYXIiOiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6ICJub25lIiwKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIC8vIENhbGxiYWNrIHdoZW4gYSB0b2tlbiBpcyByZWNlaXZlZCBmcm9tIHRoZSBzZXJ2aWNlCiAgICAgICAgICAgICAgICBvblRva2VuU3VjY2VzczogZnVuY3Rpb24gKHJlc3ApIHsKICAgICAgICAgICAgICAgICAgICAvLyBzZWxmLnBvc3RUb0xvZ2dlckFQSSh7CiAgICAgICAgICAgICAgICAgICAgLy8gICAgIHBob25lOiBzZWxmLmJvb2tpbmdEZXRhaWxzLnVzZXIuY29udGFjdCwKICAgICAgICAgICAgICAgICAgICAvLyAgICAgcmVmSWQ6IHNlbGYuYm9va2luZ0lkLAogICAgICAgICAgICAgICAgICAgIC8vICAgICBzdGF0dXNUZXh0OiAiSFBTIHRva2VuIGdlbmVyYXRlZCBzdWNjZXNzZnVsbHkiLAogICAgICAgICAgICAgICAgICAgIC8vIH0pOwogICAgICAgICAgICAgICAgICAgIHNlbGYub25TdWJtaXQocmVzcCk7CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgLy8gQ2FsbGJhY2sgd2hlbiBhbiBlcnJvciBpcyByZWNlaXZlZCBmcm9tIHRoZSBzZXJ2aWNlCiAgICAgICAgICAgICAgICBvblRva2VuRXJyb3I6IGZ1bmN0aW9uIChyZXNwKSB7CiAgICAgICAgICAgICAgICAgICAgc2VsZi5hZGRQYXltZW50TG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIHNlbGYuc2hvd1BheW1lbnRCdG4gPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIHNlbGYuZXJyRGlhbG9nID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICBzZWxmLmVyck1zZyA9IHJlc3AuZXJyb3IubWVzc2FnZTsKICAgICAgICAgICAgICAgICAgICBzZWxmLnBvc3RUb0xvZ2dlckFQSSh7CiAgICAgICAgICAgICAgICAgICAgICAgIHBob25lOiBzZWxmLmJvb2tpbmdEZXRhaWxzLnVzZXIuY29udGFjdCwKICAgICAgICAgICAgICAgICAgICAgICAgcmVmSWQ6IHNlbGYuYm9va2luZ0lkLAogICAgICAgICAgICAgICAgICAgICAgICBlcnJvcjogcmVzcC5lcnJvci5tZXNzYWdlLAogICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXNUZXh0OiAiRXJyb3IgaW4gZ2VuZXJhdGluZyBIUFMgdG9rZW4uIiwKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAvLyBhbGVydCgiVGhlcmUgd2FzIGFuIGVycm9yOiAiICsgcmVzcC5lcnJvci5tZXNzYWdlKTsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAvLyBDYWxsYmFjayB3aGVuIGFuIGV2ZW50IGlzIGZpcmVkIHdpdGhpbiBhbiBpRnJhbWUKICAgICAgICAgICAgICAgIG9uRXZlbnQ6IGZ1bmN0aW9uICgpIHsgfSwKICAgICAgICAgICAgfSk7CiAgICAgICAgfSwKICAgICAgICBuYXZpZ2F0ZVRvQ2hlY2tJbigpIHsKICAgICAgICAgICAgaWYgKHRoaXMuYm9va2luZ0RldGFpbHMuYm9va2luZy50eXBlID09PSAiMTQiKSB7CiAgICAgICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7IG5hbWU6ICdwcm9taXNldG9wYXknLCBxdWVyeTogeyBiaWQ6IHRoaXMuYm9va2luZ0lkLCBzdGF0ZTogJ2NoZWNrb3V0JyB9IH0pOwogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsgbmFtZTogJ2NoZWNrZWRpbicsIHF1ZXJ5OiB7IGJpZDogdGhpcy5ib29raW5nSWQsIHNlc3Npb250eXBlOiAncHJvbWlzZXRvcGF5JyB9IH0pOwogICAgICAgIH0sCiAgICAgICAgYXN5bmMgb25TdWJtaXQocmVzcCkgewogICAgICAgICAgICB0aGlzLmFkZFBheW1lbnRMb2FkaW5nID0gdHJ1ZTsKICAgICAgICAgICAgdGhpcy5zaG93UGF5bWVudEJ0biA9IGZhbHNlOwogICAgICAgICAgICBsZXQgZW1haWxfdmFsdWUgPSB0aGlzLmVtYWlsLnRyaW0oKTsgLy8gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImVtYWlsX2FkZHJlc3MiKS52YWx1ZTsKICAgICAgICAgICAgbGV0IHBvc3RhbENvZGVfdmFsdWUgPSB0aGlzLnBvc3RhbENvZGUudHJpbSgpOyAvL2RvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJwb3N0YWxfY29kZSIpLnZhbHVlOwogICAgICAgICAgICBpZiAoCiAgICAgICAgICAgICAgICB0aGlzLnZhbGlkYXRlRW1haWwoZW1haWxfdmFsdWUpICYmCiAgICAgICAgICAgICAgICB0aGlzLnZhbGlkYXRlUG9zdGFsQ29kZShwb3N0YWxDb2RlX3ZhbHVlKSAmJgogICAgICAgICAgICAgICAgdGhpcy52YWxpZGF0ZUV4cERhdGUocmVzcC5leHBfbW9udGgsIHJlc3AuZXhwX3llYXIpCiAgICAgICAgICAgICkgewogICAgICAgICAgICAgICAgaWYgKHJlc3A/LnRva2VuX3ZhbHVlKSB7CiAgICAgICAgICAgICAgICAgICAgbGV0IGNhcmREYXRhID0ge307CiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuem9uZURldGFpbHM/LmlzUFFSRW5kUmVzZXJ2YXRpb24gIT0gJzEnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhcmREYXRhID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FyZFR5cGU6IHJlc3AuY2FyZF90eXBlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlckRldmljZTogIjIiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgb3JkZXJUeXBlOiAiMyIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbnRyeTogWwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYXRpb25Db2RlOiB0aGlzLmJvb2tpbmdEZXRhaWxzLnpvbmUubG9jYXRpb25Db2RlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFydEF0OiB0aGlzLmJvb2tpbmdEZXRhaWxzLmJvb2tpbmcuc3RhcnRBdCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVhbnRpdHk6ICIxIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBheW1lbnQ6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXN0Rm91ckRpZ2l0czogcmVzcC5sYXN0X2ZvdXIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhwaXJhdGlvbk1vbnRoOiByZXNwLmV4cF9tb250aCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHBpcmF0aW9uWWVhcjogcmVzcC5leHBfeWVhciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3N0YWxDb2RlOiBwb3N0YWxDb2RlX3ZhbHVlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF1dGhvcml6YXRpb25Ub2tlbjogcmVzcC50b2tlbl92YWx1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbWFpbDogZW1haWxfdmFsdWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2F2ZUNhcmQ6IHRoaXMuZGVmYXVsdENyZWRpdENhcmRDQi50b1N0cmluZygpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzRGVmYXVsdDogdGhpcy5kZWZhdWx0Q3JlZGl0Q2FyZENCLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZUF1dGhvcml6ZWRPbmx5OiB0aGlzLmF1dG9DaGVja2luQ0IsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZFBheW1lbnRMb2FkaW5nID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgY2FyZERhdGEgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXJkVHlwZTogcmVzcC5jYXJkX3R5cGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VyRGV2aWNlOiAiMiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcmRlclR5cGU6ICIzIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVudHJ5OiBbCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbkNvZGU6IHRoaXMuem9uZURldGFpbHMuemNvZGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0QXQ6ICcnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBxdWFudGl0eTogIjEiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBjb25zdCBwYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHdpbmRvdy5sb2NhdGlvbi5zZWFyY2gpOwogICAgICAgICAgICAgICAgICAgIGlmIChwYXJhbXMuZ2V0KCdzZXNzaW9udHlwZScpID09ICdvbmRlbWFuZCcpIHsKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHBheW1lbnREYXRhID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFzdEZvdXJEaWdpdHM6IHJlc3AubGFzdF9mb3VyLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhwaXJhdGlvbk1vbnRoOiByZXNwLmV4cF9tb250aCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4cGlyYXRpb25ZZWFyOiByZXNwLmV4cF95ZWFyLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zdGFsQ29kZTogcG9zdGFsQ29kZV92YWx1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF1dGhvcml6YXRpb25Ub2tlbjogcmVzcC50b2tlbl92YWx1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVtYWlsOiBlbWFpbF92YWx1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNhdmVDYXJkOiB0aGlzLmRlZmF1bHRDcmVkaXRDYXJkQ0IudG9TdHJpbmcoKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzRGVmYXVsdDogdGhpcy5kZWZhdWx0Q3JlZGl0Q2FyZENCLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJlQXV0aG9yaXplZE9ubHk6IHRoaXMuYXV0b0NoZWNraW5DQgogICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ1NFVF9PTkRFTUFORF9DQVJEREVUQUlMUycsIGNhcmREYXRhKQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ1NFVF9PTkRFTUFORF9QQVlNRU5UJywgcGF5bWVudERhdGEpOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy50ZW1wbGF0ZUZsYWdzID09PSAnb25kZW1hbmQtZmxhZycpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJvZENDRGV0YWlscyIsIEpTT04uc3RyaW5naWZ5KHsgZW1haWw6IGVtYWlsX3ZhbHVlLCBwb3N0YWxDb2RlOiBwb3N0YWxDb2RlX3ZhbHVlIH0pKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNyZWF0ZU9EU2Vzc2lvbigpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChwYXJhbXMuZ2V0KCdzZXNzaW9udHlwZScpID09ICdjaWNvJykgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy56b25lRGV0YWlscz8uaXNQUVJFbmRSZXNlcnZhdGlvbiA9PSAnMScpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBwYXltZW50RGF0YSA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXN0Rm91ckRpZ2l0czogcmVzcC5sYXN0X2ZvdXIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhwaXJhdGlvbk1vbnRoOiByZXNwLmV4cF9tb250aCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHBpcmF0aW9uWWVhcjogcmVzcC5leHBfeWVhciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3N0YWxDb2RlOiBwb3N0YWxDb2RlX3ZhbHVlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF1dGhvcml6YXRpb25Ub2tlbjogcmVzcC50b2tlbl92YWx1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbWFpbDogZW1haWxfdmFsdWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2F2ZUNhcmQ6IHRoaXMuZGVmYXVsdENyZWRpdENhcmRDQi50b1N0cmluZygpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzRGVmYXVsdDogdGhpcy5kZWZhdWx0Q3JlZGl0Q2FyZENCLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZUF1dGhvcml6ZWRPbmx5OiB0aGlzLmF1dG9DaGVja2luQ0IKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ1NFVF9DQVNJTk9fQ0FSRERFVEFJTFMnLCBjYXJkRGF0YSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnU0VUX0NBU0lOT19QQVlNRU5UJywgcGF5bWVudERhdGEpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNhc2lub1Nlc3Npb24oKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYWRkQ2FyZCA9IGF3YWl0IEFQSS5hZGRDYXJkKGNhcmREYXRhLCB0aGlzLmJvb2tpbmdJZCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGRDYXJkPy5kYXRhPy5zdGF0dXMgJiYKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ib29raW5nRGV0YWlscy5ib29raW5nLnR5cGUgPT09ICIxNCIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goeyBuYW1lOiAnY2hlY2tvdXQnLCBxdWVyeTogeyBiaWQ6IHRoaXMuYm9va2luZ0lkLCBzdGF0ZTogJ2NoZWNrb3V0JyB9IH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhZGRDYXJkPy5kYXRhPy5zdGF0dXMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5nZXRCb29raW5nU3RhdGUodGhpcy5ib29raW5nSWQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZFBheW1lbnRMb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsgbmFtZTogJ2NoZWNrZWRpbicsIHF1ZXJ5OiB7IGJpZDogdGhpcy5ib29raW5nSWQsIHN0YXRlOiAnY2hlY2tlZGluJyB9IH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dQYXltZW50QnRuID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wb3N0VG9Mb2dnZXJBUEkoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGhvbmU6IHRoaXMuYm9va2luZ0RldGFpbHMudXNlci5jb250YWN0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmSWQ6IHRoaXMuYm9va2luZ0lkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvbjogImNyZWRpdF9zY29yZSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXNUZXh0OiAiQ2FyZCBhZGRlZCBzdWNjZXNzZnVsbHkuIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRQYXltZW50TG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dQYXltZW50QnRuID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lcnJEaWFsb2cgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVyck1zZyA9IGFkZENhcmQ/LmRhdGE/Lm1lc3NhZ2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gYWRkQ2FyZC5kYXRhLm1lc3NhZ2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogIlBsZWFzZSB0cnkgYWdhaW4iOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBvc3RUb0xvZ2dlckFQSSh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwaG9uZTogdGhpcy5ib29raW5nRGV0YWlscy51c2VyLmNvbnRhY3QsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWZJZDogdGhpcy5ib29raW5nSWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvcjogdGhpcy5lcnJNc2csCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpY29uOiAiY3JlZGl0X3Njb3JlIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1c1RleHQ6ICJFcnJvciBpbiBhZGRpbmcgdGhlIGNyZWRpdCBjYXJkLiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lcnJEaWFsb2cgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZXJyTXNnID0gIlBsZWFzZSB0cnkgYWdhaW4uIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBvc3RUb0xvZ2dlckFQSSh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBob25lOiB0aGlzLmJvb2tpbmdEZXRhaWxzLnVzZXIuY29udGFjdCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmSWQ6IHRoaXMuYm9va2luZ0lkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvcjogZXJyb3IsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb246ICJjcmVkaXRfc2NvcmUiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXNUZXh0OiAiRXJyb3IgaW4gYWRkaW5nIHRoZSBjcmVkaXQgY2FyZC4iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkUGF5bWVudExvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dQYXltZW50QnRuID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgLy9BdGxhbnRpYyBmbG93IGNyZWF0ZSBzZXNzaW9uCgogICAgICAgIGFzeW5jIGNhc2lub1Nlc3Npb24oKSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMuY2FzaW5vRGV0YWlscz8udXNlckRldGFpbC5leGl0VGltZSkKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIHRoaXMuYWRkUGF5bWVudExvYWRpbmcgPSB0cnVlOwogICAgICAgICAgICAgICAgbGV0IGV4aXREYXRlVGltZSA9IGZvcm1hdCgKICAgICAgICAgICAgICAgICAgICBuZXcgRGF0ZSgKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jYXNpbm9EZXRhaWxzPy51c2VyRGV0YWlsPy5leGl0VGltZS5yZXBsYWNlQWxsKCItIiwgIi8iKQogICAgICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICAgICAgInl5eXktTU0tZGQgSEg6bW06c3MiCiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgbGV0IGVudHJ5RGF0ZVRpbWUgPSBmb3JtYXQoCiAgICAgICAgICAgICAgICAgICAgbmV3IERhdGUoCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2FzaW5vRGV0YWlscz8udXNlckRldGFpbD8uZW50cnlUaW1lLnJlcGxhY2VBbGwoIi0iLCAiLyIpCiAgICAgICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgICAgICAieXl5eS1NTS1kZCBISDptbTpzcyIKICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICBsZXQgcG9zdERhdGEgPSB7CiAgICAgICAgICAgICAgICAgICAgbWlkOiB0aGlzLnpvbmVEZXRhaWxzLm1pZCwKICAgICAgICAgICAgICAgICAgICB1c2VyRGV0YWlsOiB7CiAgICAgICAgICAgICAgICAgICAgICAgIHBsYXRlOiB0aGlzLmNhc2lub0RldGFpbHM/LnVzZXJEZXRhaWw/LnBsYXRlLAogICAgICAgICAgICAgICAgICAgICAgICBjb250YWN0OiB0aGlzLmNhc2lub0RldGFpbHM/LnVzZXJEZXRhaWw/LmNvbnRhY3QsCiAgICAgICAgICAgICAgICAgICAgICAgIGV4aXRUaW1lOiBleGl0RGF0ZVRpbWUsCiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50VHlwZTogIlBhaWRIb3N0UGFzcyIsCiAgICAgICAgICAgICAgICAgICAgfSwKCiAgICAgICAgICAgICAgICAgICAgY2FyZERldGFpbDogewogICAgICAgICAgICAgICAgICAgICAgICBjYXJkVHlwZTogdGhpcy5jYXNpbm9EZXRhaWxzPy5jYXJkRGV0YWlsPy5jYXJkVHlwZSwKICAgICAgICAgICAgICAgICAgICAgICAgdXNlckRldmljZTogIjIiLAogICAgICAgICAgICAgICAgICAgICAgICBvcmRlclR5cGU6ICIzIiwKICAgICAgICAgICAgICAgICAgICAgICAgZW50cnk6IFsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbkNvZGU6IHRoaXMuem9uZURldGFpbHM/Lnpjb2RlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0QXQ6IGVudHJ5RGF0ZVRpbWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVhbnRpdHk6ICIxIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgICAgICAgICAgIHBheW1lbnQ6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RGb3VyRGlnaXRzOiB0aGlzLmNhc2lub0RldGFpbHM/LnBheW1lbnQ/Lmxhc3RGb3VyRGlnaXRzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhwaXJhdGlvbk1vbnRoOiB0aGlzLmNhc2lub0RldGFpbHM/LnBheW1lbnQ/LmV4cGlyYXRpb25Nb250aCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4cGlyYXRpb25ZZWFyOiB0aGlzLmNhc2lub0RldGFpbHM/LnBheW1lbnQ/LmV4cGlyYXRpb25ZZWFyLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zdGFsQ29kZTogdGhpcy5jYXNpbm9EZXRhaWxzPy5wYXltZW50Py5wb3N0YWxDb2RlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgYXV0aG9yaXphdGlvblRva2VuOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2FzaW5vRGV0YWlscz8ucGF5bWVudD8uYXV0aG9yaXphdGlvblRva2VuLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW1haWw6IHRoaXMuY2FzaW5vRGV0YWlscz8ucGF5bWVudD8uZW1haWwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzYXZlQ2FyZDogdGhpcy5jYXNpbm9EZXRhaWxzPy5wYXltZW50Py5zYXZlQ2FyZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzRGVmYXVsdDogdGhpcy5jYXNpbm9EZXRhaWxzPy5wYXltZW50Py5pc0RlZmF1bHQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmVBdXRob3JpemVkT25seTogdGhpcy5jYXNpbm9EZXRhaWxzPy5wYXltZW50Py5wcmVBdXRob3JpemVkT25seSwKICAgICAgICAgICAgICAgICAgICAgICAgfSwKCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBiaWQ6IHRoaXMuY2FzaW5vRGV0YWlscz8udXNlckRldGFpbD8uYmlkLAogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIHZhciBhZGRDYXJkID0gYXdhaXQgQVBJLnByZXBhaWRBZGRDYXJkKHBvc3REYXRhKQogICAgICAgICAgICAgICAgaWYgKGFkZENhcmQ/LmRhdGE/LnN0YXR1cyA9PSB0cnVlKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goeyBxdWVyeTogeyBiaWQ6IGFkZENhcmQ/LmRhdGE/LmRhdGE/LmJpZCB9IH0pOwogICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTsKCiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGFkZENhcmQ/LmRhdGE/LnN0YXR1cyA9PSBmYWxzZSkgewogICAgICAgICAgICAgICAgICAgIHRoaXMuYWxlcnREaWFsb2cgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIHRoaXMuYWxlcnRNc2cgPSBhZGRDYXJkPy5kYXRhPy5tZXNzYWdlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdGhpcy5hZGRQYXltZW50TG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICAgICAgLy8gdGhpcy4kcm91dGVyLnJlcGxhY2UoeyBwYXRoOiAnb2RFeHRlbnNpb24nIH0pCiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgICAgICAgICB0aGlzLmFkZFBheW1lbnRMb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7CiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIGFzeW5jIGNyZWF0ZU9EU2Vzc2lvbigpIHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIHRoaXMuYWRkUGF5bWVudExvYWRpbmcgPSB0cnVlOwogICAgICAgICAgICAgICAgbGV0IGV4aXREYXRlVGltZSA9IGZvcm1hdCgKICAgICAgICAgICAgICAgICAgICBuZXcgRGF0ZSh0aGlzLm9kRGV0YWlscz8udXNlckRldGFpbD8uZXhpdFRpbWUucmVwbGFjZUFsbCgiLSIsICIvIikpLAogICAgICAgICAgICAgICAgICAgICJ5eXl5LU1NLWRkIEhIOm1tOnNzIgogICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgIGxldCBlbnRyeURhdGVUaW1lID0gZm9ybWF0KAogICAgICAgICAgICAgICAgICAgIG5ldyBEYXRlKHRoaXMub2REZXRhaWxzPy51c2VyRGV0YWlsPy5lbnRyeVRpbWUucmVwbGFjZUFsbCgiLSIsICIvIikpLAogICAgICAgICAgICAgICAgICAgICJ5eXl5LU1NLWRkIEhIOm1tOnNzIgogICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdocmUnKQogICAgICAgICAgICAgICAgbGV0IHBvc3REYXRhID0gewogICAgICAgICAgICAgICAgICAgIHVzZXJEZXRhaWw6IHsKICAgICAgICAgICAgICAgICAgICAgICAgcGxhdGU6IHRoaXMub2REZXRhaWxzPy51c2VyRGV0YWlsPy5wbGF0ZSwKICAgICAgICAgICAgICAgICAgICAgICAgY29udGFjdDogdGhpcy5vZERldGFpbHM/LnVzZXJEZXRhaWw/LmNvbnRhY3QsCiAgICAgICAgICAgICAgICAgICAgICAgIGV4aXRUaW1lOiBleGl0RGF0ZVRpbWUsCiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50VHlwZTogIk9EIiwKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGNhcmREZXRhaWw6IHsKICAgICAgICAgICAgICAgICAgICAgICAgY2FyZFR5cGU6IHRoaXMub2REZXRhaWxzPy5jYXJkRGV0YWlsPy5jYXJkVHlwZSwKICAgICAgICAgICAgICAgICAgICAgICAgdXNlckRldmljZTogIjIiLAogICAgICAgICAgICAgICAgICAgICAgICBvcmRlclR5cGU6ICIzIiwKICAgICAgICAgICAgICAgICAgICAgICAgZW50cnk6IFsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbkNvZGU6IHRoaXMuem9uZURldGFpbHM/Lnpjb2RlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0QXQ6IGVudHJ5RGF0ZVRpbWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVhbnRpdHk6ICIxIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgICAgICAgICAgIHBheW1lbnQ6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RGb3VyRGlnaXRzOiB0aGlzLm9kRGV0YWlscz8ucGF5bWVudD8ubGFzdEZvdXJEaWdpdHMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHBpcmF0aW9uTW9udGg6IHRoaXMub2REZXRhaWxzPy5wYXltZW50Py5leHBpcmF0aW9uTW9udGgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHBpcmF0aW9uWWVhcjogdGhpcy5vZERldGFpbHM/LnBheW1lbnQ/LmV4cGlyYXRpb25ZZWFyLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zdGFsQ29kZTogdGhpcy5vZERldGFpbHM/LnBheW1lbnQ/LnBvc3RhbENvZGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdXRob3JpemF0aW9uVG9rZW46IHRoaXMub2REZXRhaWxzPy5wYXltZW50Py5hdXRob3JpemF0aW9uVG9rZW4sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbWFpbDogdGhpcy5vZERldGFpbHM/LnBheW1lbnQ/LmVtYWlsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2F2ZUNhcmQ6IHRoaXMub2REZXRhaWxzPy5wYXltZW50Py5zYXZlQ2FyZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzRGVmYXVsdDogdGhpcy5vZERldGFpbHM/LnBheW1lbnQ/LmlzRGVmYXVsdCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZUF1dGhvcml6ZWRPbmx5OiB0aGlzLm9kRGV0YWlscz8ucGF5bWVudD8ucHJlQXV0aG9yaXplZE9ubHksCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBtaWQ6IHRoaXMuem9uZURldGFpbHMubWlkLAogICAgICAgICAgICAgICAgICAgIHNvdXJjZTogIndlYiIKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB2YXIgb2RBZGRDYXJkID0gYXdhaXQgQVBJLnByZXBhaWRBZGRDYXJkKHBvc3REYXRhKQogICAgICAgICAgICAgICAgaWYgKG9kQWRkQ2FyZD8uZGF0YT8uc3RhdHVzID09IHRydWUpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLiRyb3V0ZXIucmVwbGFjZSh7IHF1ZXJ5OiB7IGJpZDogb2RBZGRDYXJkPy5kYXRhPy5kYXRhPy5iaWQgfSB9KTsKCiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG9kQWRkQ2FyZD8uZGF0YT8uc3RhdHVzID09IGZhbHNlKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5hbGVydERpYWxvZyA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5hbGVydE1zZyA9IG9kQWRkQ2FyZD8uZGF0YT8ubWVzc2FnZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHRoaXMuYWRkUGF5bWVudExvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgICAgIC8vIHRoaXMuJHJvdXRlci5yZXBsYWNlKHsgcGF0aDogJ29kRXh0ZW5zaW9uJyB9KQogICAgICAgICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgICAgICAgICAgdGhpcy5hZGRQYXltZW50TG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpOwogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICB2YWxpZGF0ZUV4cERhdGUobW9udGgsIHllYXIpIHsKICAgICAgICAgICAgaWYgKG1vbnRoLmxlbmd0aCA+IDAgJiYgeWVhci5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHRoaXMuZXJyRGlhbG9nID0gdHJ1ZTsKICAgICAgICAgICAgICAgIHRoaXMuZXJyTXNnID0gIkV4cGlyYXRpb24gZGF0ZSBjYW5ub3QgYmUgZW1wdHkuIjsKICAgICAgICAgICAgICAgIHRoaXMuYWRkUGF5bWVudExvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgICAgIHRoaXMuc2hvd1BheW1lbnRCdG4gPSB0cnVlOwogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICB2YWxpZGF0ZUVtYWlsKGVtYWlsKSB7CiAgICAgICAgICAgIGNvbnN0IHJlID0KICAgICAgICAgICAgICAgIC9eKChbXjw+KClbXF1cXC4sOzpcc0AiXSsoXC5bXjw+KClbXF1cXC4sOzpcc0AiXSspKil8KCIuKyIpKUAoKFxbWzAtOV17MSwzfVwuWzAtOV17MSwzfVwuWzAtOV17MSwzfVwuWzAtOV17MSwzfVxdKXwoKFthLXpBLVpcLTAtOV0rXC4pK1thLXpBLVpdezIsfSkpJC87CiAgICAgICAgICAgIGlmIChyZS50ZXN0KFN0cmluZyhlbWFpbCkudG9Mb3dlckNhc2UoKSkpIHsKICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgdGhpcy5lcnJEaWFsb2cgPSB0cnVlOwogICAgICAgICAgICAgICAgdGhpcy5lcnJNc2cgPQogICAgICAgICAgICAgICAgICAgIGVtYWlsLmxlbmd0aCA+IDAgPyAiSW52YWxpZCBlbWFpbCIgOiAiRW1haWwgY2Fubm90IGJlIGVtcHR5IjsKICAgICAgICAgICAgICAgIHRoaXMuYWRkUGF5bWVudExvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgICAgIHRoaXMuc2hvd1BheW1lbnRCdG4gPSB0cnVlOwogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICB2YWxpZGF0ZVBvc3RhbENvZGUoY29kZSkgewogICAgICAgICAgICBpZiAoKHRoaXMucmVnZXhfVVMudGVzdChjb2RlKSB8fCB0aGlzLnJlZ2V4X0NBLnRlc3QoY29kZSkpICYmIFN0cmluZyhjb2RlKS5sZW5ndGggPD0gMTApIHsKICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgdGhpcy5lcnJEaWFsb2cgPSB0cnVlOwogICAgICAgICAgICAgICAgdGhpcy5lcnJNc2cgPQogICAgICAgICAgICAgICAgICAgIGNvZGUubGVuZ3RoID4gMAogICAgICAgICAgICAgICAgICAgICAgICA/ICJJbnZhbGlkIHBvc3RhbCBjb2RlIgogICAgICAgICAgICAgICAgICAgICAgICA6ICJQb3N0YWwgY29kZSBjYW5ub3QgYmUgZW1wdHkiOwogICAgICAgICAgICAgICAgdGhpcy5hZGRQYXltZW50TG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICAgICAgdGhpcy5zaG93UGF5bWVudEJ0biA9IHRydWU7CiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIGFzeW5jIGdldEJvb2tpbmdTdGF0ZShib29raW5nSWQpIHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIHZhciBib29raW5nRGV0YWlscyA9IGF3YWl0IEFQSS5nZXRCb29raW5nU3RhdGUoYm9va2luZ0lkKQogICAgICAgICAgICAgICAgLy8gYm9va2luZ0RldGFpbHMuZGF0YS5zZXJ2ZXJOYW1lID09ICdkZXYnID8gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignbWV0YVtuYW1lPSJ0aGVtZS1jb2xvciJdJykuc2V0QXR0cmlidXRlKCJjb250ZW50IiwgIiM0M0EwNDciKSA6ICIiOwogICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KAogICAgICAgICAgICAgICAgICAgICJTRVRfQk9PS0lOR19ERVRBSUxTIiwKICAgICAgICAgICAgICAgICAgICBib29raW5nRGV0YWlscy5kYXRhPy5kYXRhID8gYm9va2luZ0RldGFpbHMuZGF0YS5kYXRhIDogbnVsbAogICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgIHJldHVybiBib29raW5nRGV0YWlscy5kYXRhPy5kYXRhPy5ib29raW5nPy5zdGF0ZQogICAgICAgICAgICAgICAgICAgID8gYm9va2luZ0RldGFpbHMuZGF0YS5kYXRhLmJvb2tpbmcuc3RhdGUKICAgICAgICAgICAgICAgICAgICA6IG51bGw7CiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7CiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIG9wZW5JbmZvRGlhbG9nKCkgewogICAgICAgICAgICB0aGlzLmluZm9EaWFsb2cgPSB0cnVlOwogICAgICAgICAgICB0aGlzLmluZm9Nc2cgPQogICAgICAgICAgICAgICAgIkJ5IGNoZWNraW5nIHRoaXMgYm94IHlvdSBhZ3JlZSB0byBsZXQgdXMgdG8gc2VjdXJlbHkgc2F2ZSB5b3VyIGNyZWRpdCBjYXJkIGRldGFpbHMgc28geW91IGRvbid0IGhhdmUgdG8gZW50ZXIgdGhlbSBldmVyeSB0aW1lIHlvdSB2aXNpdC4iOwogICAgICAgIH0sCiAgICAgICAgb3BlbkF1dG9DaGVja2luSW5mb0RpYWxvZygpIHsKICAgICAgICAgICAgdGhpcy5pbmZvRGlhbG9nID0gdHJ1ZTsKICAgICAgICAgICAgdGhpcy5pbmZvTXNnID0KICAgICAgICAgICAgICAgICJCeSBjaGVja2luZyB0aGlzIGJveCB5b3UgYWdyZWUgdG8gbGV0IHVzIHNlY3VyZWx5IHNhdmUgeW91ciBsaWNlbnNlIHBsYXRlIG51bWJlciBhbmQgYXV0b21hdGljYWxseSBsZXQgeW91IGluIGFuZCBvdXQgZWFjaCB0aW1lIHlvdSB2aXNpdC4iOwogICAgICAgIH0sCiAgICB9LAogICAgYmVmb3JlRGVzdHJveTogZnVuY3Rpb24gKCkgewogICAgICAgIHRoaXMuaHBzLmRpc3Bvc2UoKTsKICAgIH0sCn07Cg=="},{"version":3,"sources":["AddPayment.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmKA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"AddPayment.vue","sourceRoot":"src/views/session","sourcesContent":["<template>\n    <v-container class=\"pa-0 fill-height\" fluid>\n        <v-card elevation=\"0\" class=\"pa-0 fill-height fit-width\">\n            <v-card-title class=\"justify-center add_payment_title\">\n                <v-spacer></v-spacer>\n                <span>Add Payment</span>\n                <v-spacer></v-spacer>\n                <v-icon @click=\"navigateToCheckIn\">mdi-close</v-icon>\n            </v-card-title>\n            <v-divider style=\"background-color: #a0c5d8\"></v-divider>\n            <v-card-text class=\"pa-2\">\n                <v-dialog v-model=\"addPaymentLoading\" persistent>\n                    <v-card class=\"pa-4\">\n                        <v-progress-circular indeterminate color=\"red\"></v-progress-circular>\n                        <span class=\"ml-4\" style=\"font-size: 14px\">Please wait...</span>\n                    </v-card>\n                </v-dialog>\n\n                <div class=\"form-wrapper\">\n                    <form id=\"iframes\" action method=\"GET\">\n                        <v-container class=\"pa-2\" fluid>\n                            <v-row no-gutters>\n                                <v-col cols=\"12\" class=\"pa-0\">\n                                    <label for=\"iframesCardNumber\">CREDIT CARD*</label>\n                                    <div id=\"iframesCardNumber\" style=\"width: 100%\"></div>\n                                </v-col>\n                                <v-col cols=\"6\" class=\"pa-0\">\n                                    <label for=\"iframesCardExpiration\">EXP DATE*</label>\n                                    <div id=\"iframesCardExpiration\"></div>\n                                </v-col>\n                                <v-divider vertical class=\"mx-2 my-4\"></v-divider>\n                                <v-col class=\"pa-0\">\n                                    <label for=\"iframesCardCvv\">CVV*</label>\n                                    <div id=\"iframesCardCvv\"></div>\n                                </v-col>\n                                <v-col cols=\"12\" class=\"pa-0 mb-2\">\n                                    <label class=\"hps_label\" for=\"postalCode\">POSTAL CODE*</label>\n                                    <div>\n                                        <input ref=\"postalCodeInput\" v-model=\"postalCode\" class=\"hps_input\" type=\"text\"\n                                            id=\"postal_code\" maxlength=\"10\" placeholder=\"Enter Postal Code\"\n                                            name=\"postalCode\" @focus=\"$vuetify.goTo($refs.postalCodeInput, options)\"\n                                            @mouseup=\"$vuetify.goTo($refs.postalCodeInput, options)\" />\n                                    </div>\n                                </v-col>\n                                <!-- <v-col cols=\"12\" v-show=\"!checkPostalCode\">\n                      <p\n                        style=\"\n                          color: #d3838d;\n                          font-weight: bolder;\n                          font-size: smaller;\n                        \"\n                      >\n                        *This payment method applies for [US | CANADIAN] locations\n                        only.\n                      </p>\n                    </v-col> -->\n                                <v-col cols=\"12\" class=\"pa-0\">\n                                    <label class=\"hps_label\" for=\"email\">EMAIL*</label>\n                                    <div>\n                                        <input ref=\"emailInput\" v-model=\"email\" class=\"hps_input\" id=\"email_address\"\n                                            placeholder=\"Enter Email\" name=\"email\" v-on:keyup.enter=\"onFormSubmit()\"\n                                            @focus=\"$vuetify.goTo($refs.emailInput, options)\"\n                                            @mouseup=\"$vuetify.goTo($refs.emailInput, options)\" />\n                                    </div>\n                                </v-col>\n                                <v-col cols=\"10\" class=\"pa-0\" v-show=\"bookingDetails.hasOwnProperty('booking') &&\n                                    bookingDetails.booking.hasOwnProperty('accountType') &&\n                                    (bookingDetails.booking.accountType == '2' ||\n                                        bookingDetails.booking.accountType == '1' ||\n                                        bookingDetails.booking.accountType == '0') &&\n                                    bookingDetails.booking.guestSaveCard == '1'\n                                    \">\n                                    <v-checkbox v-model=\"defaultCreditCardCB\"\n                                        label=\"Save my card for faster checkout next time\" hide-details=\"auto\"></v-checkbox>\n                                </v-col>\n                                <v-col cols=\"2\" class=\"pa-0 text-left pl-10 align-self-end\" v-show=\"bookingDetails.hasOwnProperty('booking') &&\n                                    bookingDetails.booking.hasOwnProperty('accountType') &&\n                                    (bookingDetails.booking.accountType == '2' ||\n                                        bookingDetails.booking.accountType == '1' ||\n                                        bookingDetails.booking.accountType == '0') &&\n                                    bookingDetails.booking.guestSaveCard == '1'\n                                    \">\n                                    <v-icon @click=\"openInfoDialog()\" color=\"primary\">mdi-information</v-icon>\n                                </v-col>\n                                <v-col cols=\"10\" class=\"pa-0\" v-show=\"defaultCreditCardCB == true &&\n                                    bookingDetails.booking.isLPRAutocheckInEnabled == '1'\n                                    \">\n                                    <v-checkbox v-model=\"autoCheckinCB\" hide-details=\"auto\"\n                                        label=\"Save my license plate and automatically let me in next time\"></v-checkbox>\n                                </v-col>\n                                <v-col cols=\"2\" class=\"pa-0 text-left align-self-center pl-10\" v-show=\"defaultCreditCardCB == true &&\n                                    bookingDetails.booking.isLPRAutocheckInEnabled == '1'\n                                    \">\n                                    <v-icon @click=\"openAutoCheckinInfoDialog()\" color=\"primary\">mdi-information</v-icon>\n                                </v-col>\n                                <p v-show=\"defaultCreditCardCB == true &&\n                                    bookingDetails.booking.isLPRAutocheckInEnabled == '1'\n                                    \" class=\"px-8 font-weight-bold text-decoration-underline\" style=\"font-size: 11px;\">\n                                    (Do not check this\n                                    box for a car you don't own, like a rental)\n                                </p>\n\n                                <v-col cols=\"12\" class=\"mt-10 text-center\" v-show=\"showPaymentBtn\">\n                                    <v-btn ref=\"submitBtn\" rounded block elevation=\"20\" class=\"white--text exit_dialog_btn\"\n                                        @click=\"onFormSubmit()\">Submit</v-btn>\n                                </v-col>\n                                <!-- <v-col cols=\"12\" class=\"mt-10 text-center\">\n                      <div id=\"iframesSubmit\" v-show=\"showPaymentBtn\"></div>\n                    </v-col>-->\n                            </v-row>\n                        </v-container>\n                    </form>\n                </div>\n            </v-card-text>\n        </v-card>\n        <v-dialog v-model=\"errDialog\" max-width=\"fit-content\">\n            <v-card class=\"pa-0\">\n                <v-card-title class=\"justify-center\">\n                    <v-icon x-large color=\"red accent-2\">mdi-alert-outline</v-icon>\n                </v-card-title>\n                <v-card-text class=\"text-center mt-5\">\n                    <span style=\"font-size: 20px\">\n                        {{ errMsg }}\n                    </span>\n                </v-card-text>\n                <v-card-actions class=\"text-center pb-6\">\n                    <v-container pa-0 fluid>\n                        <v-row no-gutters>\n                            <v-col cols=\"12\">\n                                <v-btn rounded block elevation=\"0\" class=\"white--text exit_dialog_btn\"\n                                    @click=\"errDialog = false\">OK</v-btn>\n                            </v-col>\n                        </v-row>\n                    </v-container>\n                </v-card-actions>\n            </v-card>\n        </v-dialog>\n        <v-dialog v-model=\"infoDialog\" max-width=\"fit-content\">\n            <v-card class=\"pa-0\">\n                <v-card-title class=\"justify-center\">\n                    <v-icon x-large color=\"red accent-2\">mdi-information</v-icon>\n                </v-card-title>\n                <v-card-text class=\"text-center mt-5\">\n                    <span style=\"font-size: 20px\">\n                        {{ infoMsg }}\n                    </span>\n                </v-card-text>\n                <v-card-actions class=\"text-center pb-6\">\n                    <v-container pa-0 fluid>\n                        <v-row no-gutters>\n                            <v-col cols=\"12\">\n                                <v-btn rounded block elevation=\"0\" class=\"white--text exit_dialog_btn\"\n                                    @click=\"infoDialog = false\">OK</v-btn>\n                            </v-col>\n                        </v-row>\n                    </v-container>\n                </v-card-actions>\n            </v-card>\n        </v-dialog>\n    </v-container>\n</template>\n  \n<script>\nimport Heartland from \"@/plugins/securesubmit\";\n// import axios from \"axios\";\nimport { format } from \"date-fns\";\n\nimport API from '@/api';\n// import loggerHelper from \"../loggerHelper\";\nimport { mapGetters } from \"vuex\";\nexport default {\n    name: \"AddPayment\",\n    data: () => ({\n        regex_US: /^(?=.{2,10}$)([0-9]{1,9}([-s]{1}[0-9]+)?)$/,\n        regex_CA: /.*[a-zA-Z].*$/,\n        defaultCreditCardCB: false,\n        autoCheckinCB: false,\n        hps: \"\",\n        postalCode: \"\",\n        email: \"\",\n        addPaymentLoading: false,\n        showPaymentBtn: true,\n        duration: 300,\n        offset: 100,\n        easing: \"easeInOutCubic\",\n        errDialog: false,\n        errMsg: \"\",\n        infoDialog: false,\n        infoMsg: \"\",\n    }),\n    computed: {\n        ...mapGetters({\n            bookingId: \"getterBookingId\",\n            casinoDetails: 'getterCasinoDetails',\n            bookingDetails: \"getterBookingDetails\",\n            zoneDetails: \"getterZoneDetails\",\n            templateFlags: 'getterTemplateFlags',\n            odDetails: \"getterOdDetails\",\n        }),\n        options() {\n            return {\n                duration: this.duration,\n                offset: this.offset,\n                easing: this.easing,\n            };\n        },\n        checkPostalCode() {\n            return (\n                /(^\\d{5}$)|(^\\d{5}-\\d{4}$)/.test(this.postalCode) ||\n                /^[A-Za-z]\\d[A-Za-z][ -]?\\d[A-Za-z]\\d$/.test(this.postalCode)\n            );\n        },\n    },\n    created() { },\n    beforeRouteEnter(to, from, next) {\n        next(async (vm) => {\n            vm.$vuetify.goTo(0);\n        });\n    },\n    mounted: function () {\n        this.initHPSform();\n    },\n    methods: {\n        onFormSubmit() {\n            this.addPaymentLoading = true;\n            this.showPaymentBtn = false;\n            //check US Postal code Regex\n            const params = new URLSearchParams(window.location.search);\n            if ((params.get('sessiontype') == 'cico' && this.zoneDetails?.isPQREndReservation == '1') || params.get('sessiontype') == 'ondemand') {\n                if (this.casinoDetails?.userDetails?.estimate) {\n                    this.postToLoggerAPI({\n                        plate: this.casinoDetails?.userDetail?.plate,\n                        contact: this.casinoDetails?.userDetail?.contact,\n                        statusText: \"Parker clicked on ADD PAYMENT btn with postal code- \" + this.postalCode + \". Last 4 characters of MID - \" + this.zoneDetails.MIDs.HPS_PUBLIC_KEY_US.slice(-4),\n                    });\n                }\n                else {\n                    this.postToLoggerAPI({\n                        plate: this.odDetails?.userDetail?.plate,\n                        contact: this.odDetails?.userDetail?.contact,\n                        statusText: \"Parker clicked on ADD PAYMENT btn with postal code- \" + this.postalCode + \". Last 4 characters of MID - \" + this.zoneDetails.MIDs.HPS_PUBLIC_KEY_US.slice(-4),\n                    });\n                }\n                if (this.regex_US.test(this.postalCode)) {\n                    this.hps.options.publicKey = this.zoneDetails?.MIDs\n                        ?.HPS_PUBLIC_KEY_US\n                        ? this.zoneDetails.MIDs.HPS_PUBLIC_KEY_US\n                        : \"\";\n                    if (this.casinoDetails?.userDetails?.estimate) {\n                        this.postToLoggerAPI({\n                            plate: this.casinoDetails?.userDetail?.plate,\n                            contact: this.casinoDetails?.userDetail?.contact,\n                            statusText: \"Parker clicked on ADD PAYMENT btn with postal code- \" + this.postalCode + \". Last 4 characters of MID - \" + this.zoneDetails.MIDs.HPS_PUBLIC_KEY_US.slice(-4),\n                        });\n                    }\n                    else {\n                        this.postToLoggerAPI({\n                            plate: this.odDetails?.userDetail?.plate,\n                            contact: this.odDetails?.userDetail?.contact,\n                            statusText: \"Parker clicked on ADD PAYMENT btn with postal code- \" + this.postalCode + \". Last 4 characters of MID - \" + this.zoneDetails.MIDs.HPS_PUBLIC_KEY_US.slice(-4),\n                        });\n                    }\n                    console.log(\"Parker clicked on ADD PAYMENT btn with postal code- \" + this.postalCode)\n                    this.hps.tokenize();\n                }\n                //check CA Postal code Regex\n                else if (this.regex_CA.test(this.postalCode)) {\n                    this.hps.options.publicKey = this.zoneDetails?.MIDs\n                        ?.HPS_PUBLIC_KEY_CA\n                        ? this.zoneDetails.MIDs.HPS_PUBLIC_KEY_CA\n                        : \"\";\n                    this.postToLoggerAPI({\n                        plate: this.odDetails?.userDetail?.plate,\n                        contact: this.odDetails?.userDetail?.contact,\n                        statusText: \"Parker clicked on ADD PAYMENT btn with postal code- \" + this.postalCode + \". Last 4 characters of MID - \" + this.zoneDetails.MIDs.HPS_PUBLIC_KEY_CA.slice(-4),\n                    });\n                    console.log(\"Parker clicked on ADD PAYMENT btn with postal code- \" + this.postalCode)\n                    this.hps.tokenize();\n                } else {\n                    this.addPaymentLoading = false;\n                    this.showPaymentBtn = true;\n                    this.errDialog = true;\n                    this.errMsg =\n                        this.postalCode.length > 0\n                            ? \"Invalid postal code\"\n                            : \"Postal code cannot be empty\";\n                }\n            }\n            else {\n                if (this.regex_US.test(this.postalCode)) {\n                    this.hps.options.publicKey = this.bookingDetails?.booking?.MIDs\n                        ?.HPS_PUBLIC_KEY_US\n                        ? this.bookingDetails.booking.MIDs.HPS_PUBLIC_KEY_US\n                        : \"\";\n                    this.postToLoggerAPI({\n                        phone: this.bookingDetails.user.contact,\n                        refId: this.bookingId,\n                        statusText:\n                            \"Parker clicked on ADD PAYMENT btn with postal code- \" +\n                            this.postalCode + \". Last 4 characters of MID - \" + this.bookingDetails.booking.MIDs.HPS_PUBLIC_KEY_US.slice(-4),\n                    });\n                    this.hps.tokenize();\n                }\n                //check CA Postal code Regex\n                else if (this.regex_CA.test(this.postalCode)) {\n                    this.hps.options.publicKey = this.bookingDetails?.booking?.MIDs\n                        ?.HPS_PUBLIC_KEY_CA\n                        ? this.bookingDetails.booking.MIDs.HPS_PUBLIC_KEY_CA\n                        : \"\";\n                    this.postToLoggerAPI({\n                        phone: this.bookingDetails.user.contact,\n                        refId: this.bookingId,\n                        statusText:\n                            \"Parker clicked on ADD PAYMENT btn with postal code- \" +\n                            this.postalCode + \". Last 4 characters of MID - \" + this.bookingDetails.booking.MIDs.HPS_PUBLIC_KEY_CA.slice(-4),\n                    });\n                    this.hps.tokenize();\n                } else {\n                    this.addPaymentLoading = false;\n                    this.showPaymentBtn = true;\n                    this.errDialog = true;\n                    this.errMsg =\n                        this.postalCode.length > 0\n                            ? \"Invalid postal code\"\n                            : \"Postal code cannot be empty\";\n                    this.postToLoggerAPI({\n                        phone: this.bookingDetails.user.contact,\n                        refId: this.bookingId,\n                        error: this.errMsg,\n                        statusText:\n                            \"Parker clicked on ADD PAYMENT btn with invalid postal code -\" +\n                            this.postalCode,\n                    });\n                }\n            }\n        },\n        initHPSform() {\n            var self = this;\n            this.hps = new Heartland.HPS({\n                type: \"iframe\",\n                fields: {\n                    cardNumber: {\n                        target: \"iframesCardNumber\",\n                        placeholder: \"Enter Card Number\",\n                    },\n                    cardExpiration: {\n                        target: \"iframesCardExpiration\",\n                        placeholder: \"MM / YYYY\",\n                    },\n                    cardCvv: {\n                        target: \"iframesCardCvv\",\n                        placeholder: \"ex - 123\",\n                    },\n                },\n                // Collection of CSS to inject into the iframes.\n                // These properties can match the site's styles\n                // to create a seamless experience.\n                style: {\n                    input: {\n                        background: \"#fff\",\n                        border: \"1px solid\",\n                        \"border-color\": \"#bbb3b9 #c7c1c6 #c7c1c6\",\n                        \"box-sizing\": \"border-box\",\n                        \"font-family\": \"serif\",\n                        \"font-size\": \"16px\",\n                        \"line-height\": \"1\",\n                        margin: \"0 .5em 0 0\",\n                        \"max-width\": \"100%\",\n                        outline: \"0\",\n                        padding: \"0.5278em\",\n                        \"vertical-align\": \"baseline\",\n                        height: \"50px\",\n                        width: \"100% !important\",\n                    },\n                    \"#heartland-field\": {\n                        \"font-family\": \"sans-serif\",\n                        \"box-sizing\": \"border-box\",\n                        display: \"block\",\n                        height: \"50px\",\n                        padding: \"6px 6px\",\n                        \"font-size\": \"14px\",\n                        \"line-height\": \"1.42857143\",\n                        color: \"#555\",\n                        \"background-color\": \"#fff\",\n                        \"border-bottom\": \"1px solid #ccc\",\n                        \"border-top\": \"0px\",\n                        \"border-left\": \"0px\",\n                        \"border-right\": \"0px\",\n                        \"border-radius\": \"0px\",\n                        // \"-webkit-box-shadow\": \"inset 0 1px 1px rgba(0,0,0,.075)\",\n                        // \"box-shadow\": \"inset 0 1px 1px rgba(0,0,0,.075)\",\n                        \"-webkit-transition\":\n                            \"border-color ease-in-out .15s,-webkit-box-shadow ease-in-out .15s\",\n                        \"-o-transition\":\n                            \"border-color ease-in-out .15s,box-shadow ease-in-out .15s\",\n                        transition:\n                            \"border-color ease-in-out .15s,box-shadow ease-in-out .15s\",\n                        width: \"100%\",\n                    },\n                    \"#heartland-field[name=submit]\": {\n                        \"background-color\": \"#F1555C\",\n                        \"font-family\": \"sans-serif\",\n                        \"text-transform\": \"uppercase\",\n                        height: \"50px\",\n                        color: \"#ffffff\",\n                        border: \"0px solid transparent\",\n                        \"border-radius\": \"2px\",\n                        \"font-weight\": \"bolder\",\n                        \"font-size\": \"medium\",\n                    },\n                    \"#heartland-field[name=submit]:focus\": {\n                        \"background-color\": \"#F1555C\",\n                        \"font-family\": \"sans-serif\",\n                        \"text-transform\": \"uppercase\",\n                        height: \"50px\",\n                        color: \"#ffffff\",\n                        border: \"0px solid transparent !important\",\n                        \"border-radius\": \"2px\",\n                        \"font-weight\": \"bolder\",\n                        \"font-size\": \"medium\",\n                    },\n                    \"#heartland-field[name=submit]:hover\": {\n                        \"background-color\": \"#F1555C\",\n                        \"font-family\": \"sans-serif\",\n                        \"text-transform\": \"uppercase\",\n                        height: \"50px\",\n                        color: \"#ffffff\",\n                        border: \"0px solid transparent !important\",\n                        \"border-radius\": \"2px\",\n                        \"font-weight\": \"bolder\",\n                        \"font-size\": \"medium\",\n                    },\n                    \"#heartland-field-wrapper #heartland-field:focus\": {\n                        \"border-left\": \"0px\",\n                        \"border-top\": \"0px\",\n                        \"border-right\": \"0px\",\n                        \"border-bottom\": \"1px solid #3989e3\",\n                        outline: \"none\",\n                        \"box-shadow\": \"none\",\n                        height: \"50px\",\n                    },\n                    \"heartland-field-wrapper #heartland-field\": {\n                        height: \"50px\",\n                    },\n                    \"input[type=submit]\": {\n                        \"box-sizing\": \"border-box\",\n                        display: \"inline-block\",\n                        padding: \"6px 12px\",\n                        \"margin-bottom\": \"0\",\n                        \"font-size\": \"14px\",\n                        \"font-weight\": \"400\",\n                        \"line-height\": \"1.42857143\",\n                        \"text-align\": \"center\",\n                        \"white-space\": \"nowrap\",\n                        \"vertical-align\": \"middle\",\n                        \"-ms-touch-action\": \"manipulation\",\n                        \"touch-action\": \"manipulation\",\n                        cursor: \"pointer\",\n                        \"-webkit-user-select\": \"none\",\n                        \"-moz-user-select\": \"none\",\n                        \"-ms-user-select\": \"none\",\n                        \"user-select\": \"none\",\n                        \"background-image\": \"none\",\n                        border: \"1px solid transparent\",\n                        \"border-radius\": \"4px\",\n                        color: \"#fff\",\n                        \"background-color\": \"#337ab7\",\n                        \"border-color\": \"#2e6da4\",\n                    },\n                    \"#heartland-field[placeholder]\": {\n                        \"letter-spacing\": \"1px\",\n                    },\n                    \"::placeholder\": {\n                        color: \"#8CA2AD\",\n                    },\n                    \"#heartland-field[name=cardCvv]\": {\n                        background:\n                            \"transparent url(https://github.com/hps/heartland-php/blob/master/examples/end-to-end/assets/images/cvv1.png?raw=true) no-repeat right\",\n                        \"background-size\": \"63px 40px\",\n                    },\n                    \"input#heartland-field[name=cardNumber]\": {\n                        background:\n                            \"transparent url(https://github.com/hps/heartland-php/blob/master/examples/end-to-end/assets/images/ss-inputcard-blank@2x.png?raw=true) no-repeat right\",\n                        \"background-size\": \"55px 35px\",\n                    },\n                    \"#heartland-field.invalid.card-type-visa\": {\n                        background:\n                            \"transparent url(https://github.com/hps/heartland-php/blob/master/examples/end-to-end/assets/images/ss-saved-visa@2x.png?raw=true) no-repeat right\",\n                        \"background-size\": \"83px 88px\",\n                        \"background-position-y\": \"-44px\",\n                    },\n                    \"#heartland-field.valid.card-type-visa\": {\n                        background:\n                            \"transparent url(https://github.com/hps/heartland-php/blob/master/examples/end-to-end/assets/images/ss-saved-visa@2x.png?raw=true) no-repeat right top\",\n                        \"background-size\": \"82px 86px\",\n                    },\n                    \"#heartland-field.invalid.card-type-discover\": {\n                        background:\n                            \"transparent url(https://github.com/hps/heartland-php/blob/master/examples/end-to-end/assets/images/ss-saved-discover@2x.png?raw=true) no-repeat right\",\n                        \"background-size\": \"85px 90px\",\n                        \"background-position-y\": \"-44px\",\n                    },\n                    \"#heartland-field.valid.card-type-discover\": {\n                        background:\n                            \"transparent url(https://github.com/hps/heartland-php/blob/master/examples/end-to-end/assets/images/ss-saved-discover@2x.png?raw=true) no-repeat right\",\n                        \"background-size\": \"85px 90px\",\n                        \"background-position-y\": \"1px\",\n                    },\n                    \"#heartland-field.invalid.card-type-amex\": {\n                        background:\n                            \"transparent url(https://github.com/hps/heartland-php/blob/master/examples/end-to-end/assets/images/ss-savedcards-amex@2x.png?raw=true) no-repeat right\",\n                        \"background-size\": \"50px 90px\",\n                        \"background-position-y\": \"-44px\",\n                    },\n                    \"#heartland-field.valid.card-type-amex\": {\n                        background:\n                            \"transparent url(https://github.com/hps/heartland-php/blob/master/examples/end-to-end/assets/images/ss-savedcards-amex@2x.png?raw=true) no-repeat right top\",\n                        \"background-size\": \"50px 90px\",\n                    },\n                    \"#heartland-field.invalid.card-type-mastercard\": {\n                        background:\n                            \"transparent url(https://github.com/hps/heartland-php/blob/master/examples/end-to-end/assets/images/ss-saved-mastercard.png?raw=true) no-repeat right\",\n                        \"background-size\": \"62px 105px\",\n                        \"background-position-y\": \"-52px\",\n                    },\n                    \"#heartland-field.valid.card-type-mastercard\": {\n                        background:\n                            \"transparent url(https://github.com/hps/heartland-php/blob/master/examples/end-to-end/assets/images/ss-saved-mastercard.png?raw=true) no-repeat right\",\n                        \"background-size\": \"62px 105px\",\n                        \"background-position-y\": \"-1px\",\n                    },\n                    \"#heartland-field.invalid.card-type-jcb\": {\n                        background:\n                            \"transparent url(https://github.com/hps/heartland-php/blob/master/examples/end-to-end/assets/images/ss-saved-jcb@2x.png?raw=true) no-repeat right\",\n                        \"background-size\": \"55px 94px\",\n                        \"background-position-y\": \"-44px\",\n                    },\n                    \"#heartland-field.valid.card-type-jcb\": {\n                        background:\n                            \"transparent url(https://github.com/hps/heartland-php/blob/master/examples/end-to-end/assets/images/ss-saved-jcb@2x.png?raw=true) no-repeat right top\",\n                        \"background-size\": \"55px 94px\",\n                        \"background-position-y\": \"2px\",\n                    },\n                    \"input#heartland-field[name=cardNumber]::-ms-clear\": {\n                        display: \"none\",\n                    },\n                },\n                // Callback when a token is received from the service\n                onTokenSuccess: function (resp) {\n                    // self.postToLoggerAPI({\n                    //     phone: self.bookingDetails.user.contact,\n                    //     refId: self.bookingId,\n                    //     statusText: \"HPS token generated successfully\",\n                    // });\n                    self.onSubmit(resp);\n                },\n                // Callback when an error is received from the service\n                onTokenError: function (resp) {\n                    self.addPaymentLoading = false;\n                    self.showPaymentBtn = true;\n                    self.errDialog = true;\n                    self.errMsg = resp.error.message;\n                    self.postToLoggerAPI({\n                        phone: self.bookingDetails.user.contact,\n                        refId: self.bookingId,\n                        error: resp.error.message,\n                        statusText: \"Error in generating HPS token.\",\n                    });\n                    // alert(\"There was an error: \" + resp.error.message);\n                },\n                // Callback when an event is fired within an iFrame\n                onEvent: function () { },\n            });\n        },\n        navigateToCheckIn() {\n            if (this.bookingDetails.booking.type === \"14\") {\n                this.$router.push({ name: 'promisetopay', query: { bid: this.bookingId, state: 'checkout' } });\n                return;\n            }\n            this.$router.push({ name: 'checkedin', query: { bid: this.bookingId, sessiontype: 'promisetopay' } });\n        },\n        async onSubmit(resp) {\n            this.addPaymentLoading = true;\n            this.showPaymentBtn = false;\n            let email_value = this.email.trim(); // document.getElementById(\"email_address\").value;\n            let postalCode_value = this.postalCode.trim(); //document.getElementById(\"postal_code\").value;\n            if (\n                this.validateEmail(email_value) &&\n                this.validatePostalCode(postalCode_value) &&\n                this.validateExpDate(resp.exp_month, resp.exp_year)\n            ) {\n                if (resp?.token_value) {\n                    let cardData = {};\n                    if (this.zoneDetails?.isPQREndReservation != '1') {\n                        cardData = {\n                            cardType: resp.card_type,\n                            userDevice: \"2\",\n                            orderType: \"3\",\n                            entry: [\n                                {\n                                    locationCode: this.bookingDetails.zone.locationCode,\n                                    startAt: this.bookingDetails.booking.startAt,\n                                    quantity: \"1\",\n                                },\n                            ],\n                            payment: {\n                                lastFourDigits: resp.last_four,\n                                expirationMonth: resp.exp_month,\n                                expirationYear: resp.exp_year,\n                                postalCode: postalCode_value,\n                                authorizationToken: resp.token_value,\n                                email: email_value,\n                                saveCard: this.defaultCreditCardCB.toString(),\n                                isDefault: this.defaultCreditCardCB,\n                                preAuthorizedOnly: this.autoCheckinCB,\n                            },\n                        }\n                    }\n                    else {\n                        this.addPaymentLoading = true;\n                        cardData = {\n                            cardType: resp.card_type,\n                            userDevice: \"2\",\n                            orderType: \"3\",\n                            entry: [\n                                {\n                                    locationCode: this.zoneDetails.zcode,\n                                    startAt: '',\n                                    quantity: \"1\",\n                                },\n                            ],\n                        };\n                    }\n                    const params = new URLSearchParams(window.location.search);\n                    if (params.get('sessiontype') == 'ondemand') {\n                        let paymentData = {\n                            lastFourDigits: resp.last_four,\n                            expirationMonth: resp.exp_month,\n                            expirationYear: resp.exp_year,\n                            postalCode: postalCode_value,\n                            authorizationToken: resp.token_value,\n                            email: email_value,\n                            saveCard: this.defaultCreditCardCB.toString(),\n                            isDefault: this.defaultCreditCardCB,\n                            preAuthorizedOnly: this.autoCheckinCB\n                        };\n                        this.$store.commit('SET_ONDEMAND_CARDDETAILS', cardData)\n                        this.$store.commit('SET_ONDEMAND_PAYMENT', paymentData);\n                        if (this.templateFlags === 'ondemand-flag') {\n                            localStorage.setItem(\"odCCDetails\", JSON.stringify({ email: email_value, postalCode: postalCode_value }));\n                        }\n                        this.createODSession();\n                    }\n                    else if (params.get('sessiontype') == 'cico') {\n                        if (this.zoneDetails?.isPQREndReservation == '1') {\n                            let paymentData = {\n                                lastFourDigits: resp.last_four,\n                                expirationMonth: resp.exp_month,\n                                expirationYear: resp.exp_year,\n                                postalCode: postalCode_value,\n                                authorizationToken: resp.token_value,\n                                email: email_value,\n                                saveCard: this.defaultCreditCardCB.toString(),\n                                isDefault: this.defaultCreditCardCB,\n                                preAuthorizedOnly: this.autoCheckinCB\n                            };\n                            this.$store.commit('SET_CASINO_CARDDETAILS', cardData)\n                            this.$store.commit('SET_CASINO_PAYMENT', paymentData)\n                            this.casinoSession()\n                        }\n                        else {\n                            try {\n                                var addCard = await API.addCard(cardData, this.bookingId);\n                                if (\n                                    addCard?.data?.status &&\n                                    this.bookingDetails.booking.type === \"14\"\n                                ) {\n                                    this.$router.push({ name: 'checkout', query: { bid: this.bookingId, state: 'checkout' } });\n                                    return;\n                                }\n                                if (addCard?.data?.status) {\n                                    await this.getBookingState(this.bookingId);\n                                    this.addPaymentLoading = false;\n                                    this.$router.push({ name: 'checkedin', query: { bid: this.bookingId, state: 'checkedin' } });\n                                    this.showPaymentBtn = true;\n                                    this.postToLoggerAPI({\n                                        phone: this.bookingDetails.user.contact,\n                                        refId: this.bookingId,\n                                        icon: \"credit_score\",\n                                        statusText: \"Card added successfully.\",\n                                    });\n                                } else {\n                                    this.addPaymentLoading = false;\n                                    this.showPaymentBtn = true;\n                                    this.errDialog = true;\n                                    this.errMsg = addCard?.data?.message\n                                        ? addCard.data.message\n                                        : \"Please try again\";\n                                    this.postToLoggerAPI({\n                                        phone: this.bookingDetails.user.contact,\n                                        refId: this.bookingId,\n                                        error: this.errMsg,\n                                        icon: \"credit_score\",\n                                        statusText: \"Error in adding the credit card.\",\n                                    });\n                                }\n                            } catch (error) {\n                                this.errDialog = true;\n                                this.errMsg = \"Please try again.\";\n                                this.postToLoggerAPI({\n                                    phone: this.bookingDetails.user.contact,\n                                    refId: this.bookingId,\n                                    error: error,\n                                    icon: \"credit_score\",\n                                    statusText: \"Error in adding the credit card.\",\n                                });\n                                this.addPaymentLoading = false;\n                                this.showPaymentBtn = true;\n                            }\n                        }\n                    }\n                }\n            }\n        },\n        //Atlantic flow create session\n\n        async casinoSession() {\n            console.log(this.casinoDetails?.userDetail.exitTime)\n            try {\n                this.addPaymentLoading = true;\n                let exitDateTime = format(\n                    new Date(\n                        this.casinoDetails?.userDetail?.exitTime.replaceAll(\"-\", \"/\")\n                    ),\n                    \"yyyy-MM-dd HH:mm:ss\"\n                );\n                let entryDateTime = format(\n                    new Date(\n                        this.casinoDetails?.userDetail?.entryTime.replaceAll(\"-\", \"/\")\n                    ),\n                    \"yyyy-MM-dd HH:mm:ss\"\n                );\n                let postData = {\n                    mid: this.zoneDetails.mid,\n                    userDetail: {\n                        plate: this.casinoDetails?.userDetail?.plate,\n                        contact: this.casinoDetails?.userDetail?.contact,\n                        exitTime: exitDateTime,\n                        eventType: \"PaidHostPass\",\n                    },\n\n                    cardDetail: {\n                        cardType: this.casinoDetails?.cardDetail?.cardType,\n                        userDevice: \"2\",\n                        orderType: \"3\",\n                        entry: [\n                            {\n                                locationCode: this.zoneDetails?.zcode,\n                                startAt: entryDateTime,\n                                quantity: \"1\",\n                            },\n                        ],\n                        payment: {\n                            lastFourDigits: this.casinoDetails?.payment?.lastFourDigits,\n                            expirationMonth: this.casinoDetails?.payment?.expirationMonth,\n                            expirationYear: this.casinoDetails?.payment?.expirationYear,\n                            postalCode: this.casinoDetails?.payment?.postalCode,\n                            authorizationToken:\n                                this.casinoDetails?.payment?.authorizationToken,\n                            email: this.casinoDetails?.payment?.email,\n                            saveCard: this.casinoDetails?.payment?.saveCard,\n                            isDefault: this.casinoDetails?.payment?.isDefault,\n                            preAuthorizedOnly: this.casinoDetails?.payment?.preAuthorizedOnly,\n                        },\n\n                    },\n                    bid: this.casinoDetails?.userDetail?.bid,\n                };\n                var addCard = await API.prepaidAddCard(postData)\n                if (addCard?.data?.status == true) {\n                    this.$router.push({ query: { bid: addCard?.data?.data?.bid } });\n                    window.location.reload();\n\n                } else if (addCard?.data?.status == false) {\n                    this.alertDialog = true;\n                    this.alertMsg = addCard?.data?.message;\n                }\n                this.addPaymentLoading = false;\n                // this.$router.replace({ path: 'odExtension' })\n            } catch (error) {\n                this.addPaymentLoading = false;\n                console.log(error);\n            }\n        },\n        async createODSession() {\n            try {\n                this.addPaymentLoading = true;\n                let exitDateTime = format(\n                    new Date(this.odDetails?.userDetail?.exitTime.replaceAll(\"-\", \"/\")),\n                    \"yyyy-MM-dd HH:mm:ss\"\n                );\n                let entryDateTime = format(\n                    new Date(this.odDetails?.userDetail?.entryTime.replaceAll(\"-\", \"/\")),\n                    \"yyyy-MM-dd HH:mm:ss\"\n                );\n                console.log('hre')\n                let postData = {\n                    userDetail: {\n                        plate: this.odDetails?.userDetail?.plate,\n                        contact: this.odDetails?.userDetail?.contact,\n                        exitTime: exitDateTime,\n                        eventType: \"OD\",\n                    },\n                    cardDetail: {\n                        cardType: this.odDetails?.cardDetail?.cardType,\n                        userDevice: \"2\",\n                        orderType: \"3\",\n                        entry: [\n                            {\n                                locationCode: this.zoneDetails?.zcode,\n                                startAt: entryDateTime,\n                                quantity: \"1\",\n                            },\n                        ],\n                        payment: {\n                            lastFourDigits: this.odDetails?.payment?.lastFourDigits,\n                            expirationMonth: this.odDetails?.payment?.expirationMonth,\n                            expirationYear: this.odDetails?.payment?.expirationYear,\n                            postalCode: this.odDetails?.payment?.postalCode,\n                            authorizationToken: this.odDetails?.payment?.authorizationToken,\n                            email: this.odDetails?.payment?.email,\n                            saveCard: this.odDetails?.payment?.saveCard,\n                            isDefault: this.odDetails?.payment?.isDefault,\n                            preAuthorizedOnly: this.odDetails?.payment?.preAuthorizedOnly,\n                        },\n                    },\n                    mid: this.zoneDetails.mid,\n                    source: \"web\"\n                };\n                var odAddCard = await API.prepaidAddCard(postData)\n                if (odAddCard?.data?.status == true) {\n                    this.$router.replace({ query: { bid: odAddCard?.data?.data?.bid } });\n\n                } else if (odAddCard?.data?.status == false) {\n                    this.alertDialog = true;\n                    this.alertMsg = odAddCard?.data?.message;\n                }\n                this.addPaymentLoading = false;\n                // this.$router.replace({ path: 'odExtension' })\n            } catch (error) {\n                this.addPaymentLoading = false;\n                console.log(error);\n            }\n        },\n        validateExpDate(month, year) {\n            if (month.length > 0 && year.length > 0) {\n                return true;\n            } else {\n                this.errDialog = true;\n                this.errMsg = \"Expiration date cannot be empty.\";\n                this.addPaymentLoading = false;\n                this.showPaymentBtn = true;\n                return false;\n            }\n        },\n        validateEmail(email) {\n            const re =\n                /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n            if (re.test(String(email).toLowerCase())) {\n                return true;\n            } else {\n                this.errDialog = true;\n                this.errMsg =\n                    email.length > 0 ? \"Invalid email\" : \"Email cannot be empty\";\n                this.addPaymentLoading = false;\n                this.showPaymentBtn = true;\n                return false;\n            }\n        },\n        validatePostalCode(code) {\n            if ((this.regex_US.test(code) || this.regex_CA.test(code)) && String(code).length <= 10) {\n                return true;\n            } else {\n                this.errDialog = true;\n                this.errMsg =\n                    code.length > 0\n                        ? \"Invalid postal code\"\n                        : \"Postal code cannot be empty\";\n                this.addPaymentLoading = false;\n                this.showPaymentBtn = true;\n                return false;\n            }\n        },\n        async getBookingState(bookingId) {\n            try {\n                var bookingDetails = await API.getBookingState(bookingId)\n                // bookingDetails.data.serverName == 'dev' ? document.querySelector('meta[name=\"theme-color\"]').setAttribute(\"content\", \"#43A047\") : \"\";\n                this.$store.commit(\n                    \"SET_BOOKING_DETAILS\",\n                    bookingDetails.data?.data ? bookingDetails.data.data : null\n                );\n                return bookingDetails.data?.data?.booking?.state\n                    ? bookingDetails.data.data.booking.state\n                    : null;\n            } catch (error) {\n                console.log(error);\n            }\n        },\n        openInfoDialog() {\n            this.infoDialog = true;\n            this.infoMsg =\n                \"By checking this box you agree to let us to securely save your credit card details so you don't have to enter them every time you visit.\";\n        },\n        openAutoCheckinInfoDialog() {\n            this.infoDialog = true;\n            this.infoMsg =\n                \"By checking this box you agree to let us securely save your license plate number and automatically let you in and out each time you visit.\";\n        },\n    },\n    beforeDestroy: function () {\n        this.hps.dispose();\n    },\n};\n</script>\n<style lang=\"less\">\ninput {\n    background: \"#fff\";\n    border: \"1px solid\";\n    border-color: \"#bbb3b9 #c7c1c6 #c7c1c6\";\n    box-sizing: \"border-box\";\n    font-family: \"serif\";\n    font-size: \"16px\";\n    line-height: \"1\";\n    margin: \"0 .5em 0 0\";\n    max-width: \"100%\";\n    outline: \"0\";\n    padding: \"0.5278em\";\n    vertical-align: \"baseline\";\n    height: \"50px\";\n    width: \"100% !important\";\n}\n\n#heartland-frame-cardNumber {\n    width: 100% !important;\n}\n\n#heartland-frame-cardExpiration,\n#heartland-frame-cardCvv {\n    width: 100% !important;\n}\n\nbody {\n    font-family: sans-serif;\n}\n\nlabel[for=\"iframesCardNumber\"],\nlabel[for=\"iframesCardExpiration\"],\nlabel[for=\"iframesCardCvv\"],\nlabel[for=\"postalCode\"] {\n    text-transform: uppercase;\n    font-weight: bold;\n    font-size: 13px;\n    color: #8ca2ad;\n    line-height: 1.5;\n}\n\nuser agent stylesheet div {\n    display: block;\n}\n\n.form-row {\n    margin-top: 10px;\n}\n\n.form-wrapper {\n    display: block;\n    width: 100%;\n    margin: 10px auto;\n}\n\n.hps_input {\n    font-family: sans-serif;\n    box-sizing: border-box;\n    display: block;\n    height: 50px;\n    padding: 6px 6px;\n    font-size: 14px;\n    line-height: 1.42857143;\n    color: #555;\n    background-color: #fff;\n    border-bottom: 1px solid #ccc;\n    border-top: 0px;\n    border-left: 0px;\n    border-right: 0px;\n    border-radius: 0px;\n    -webkit-transition: border-color ease-in-out 0.15s,\n        -webkit-box-shadow ease-in-out 0.15s;\n    -o-transition: border-color ease-in-out 0.15s, box-shadow ease-in-out 0.15s;\n    transition: border-color ease-in-out 0.15s, box-shadow ease-in-out 0.15s;\n    width: 100%;\n}\n\n.add_payment_title {\n    background-color: #f7f9fa;\n\n    span {\n        font-weight: 600;\n        color: #44515a;\n    }\n}\n\n.v-label {\n    font-size: 10px;\n}\n\n.hps_label {\n    text-transform: uppercase;\n    font-weight: bold;\n    font-size: 13px;\n    color: #8ca2ad;\n    line-height: 1.5;\n}\n\n.hps_input[placeholder] {\n    letter-spacing: 1px;\n}\n\n.hps_input:focus {\n    border-top: 0px;\n    border-left: 0px;\n    border-right: 0px;\n    border-bottom: 1px solid #3989e3;\n    outline: none;\n    box-shadow: none;\n    height: 50px;\n}\n\n#heartland-frame-submit {\n    border-radius: 40px;\n    height: 50px !important;\n    width: 100%;\n}\n\n::placeholder {\n    color: #8ca2ad;\n}\n\n:-ms-input-placeholder {\n    /* Internet Explorer 10-11 */\n    color: #8ca2ad;\n}\n\n::-ms-input-placeholder {\n    /* Microsoft Edge */\n    color: #8ca2ad;\n}\n</style>"]}]}