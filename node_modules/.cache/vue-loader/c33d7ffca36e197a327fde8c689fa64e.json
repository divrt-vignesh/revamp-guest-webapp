{"remainingRequest":"/home/vignesh/DIVRT/guest-webapp/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/vignesh/DIVRT/guest-webapp/src/views/Receipt.vue?vue&type=style&index=0&lang=less&","dependencies":[{"path":"/home/vignesh/DIVRT/guest-webapp/src/views/Receipt.vue","mtime":1686579831898},{"path":"/home/vignesh/DIVRT/guest-webapp/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vignesh/DIVRT/guest-webapp/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/home/vignesh/DIVRT/guest-webapp/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/home/vignesh/DIVRT/guest-webapp/node_modules/less-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vignesh/DIVRT/guest-webapp/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vignesh/DIVRT/guest-webapp/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5jbG9zZV9yZWNlaXB0X2J0biB7CiAgYmFja2dyb3VuZC1jb2xvcjogI2YyNTU1YyAhaW1wb3J0YW50OwogIHdpZHRoOiAxMDAlOwogIGZvbnQtc2l6ZTogMThweCAhaW1wb3J0YW50OwogIGZvbnQtd2VpZ2h0OiA3MDAgIWltcG9ydGFudDsKICBoZWlnaHQ6IDUwcHggIWltcG9ydGFudDsKICBsZXR0ZXItc3BhY2luZzogbm9ybWFsICFpbXBvcnRhbnQ7Cn0KCi5yZWNlaXB0LWNvbnRlbnQgewogIGZvbnQtc2l6ZTogMTRweDsKfQo="},{"version":3,"sources":["Receipt.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8UA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"Receipt.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <v-container class=\"pa-0 fill-height\" fluid>\n    <v-card elevation=\"0\" class=\"pa-5 fill-height\" style=\"width: 100%\">\n      <v-card-text class=\"pa-0 fill-height\">\n        <v-row no-gutters class=\"fill-height flex-wrap flex-column\">\n          <v-col cols=\"auto\" class=\"grow\">\n            <v-row no-gutters>\n              <v-spacer></v-spacer>\n              <v-icon v-if=\"getMobileOperatingSystem() == 'iOS'\" @click=\"openShareOptions()\">mdi-export-variant</v-icon>\n              <v-icon v-if=\"getMobileOperatingSystem() == 'Android'\"\n                @click=\"openShareOptions()\">mdi-share-variant</v-icon>\n            </v-row>\n            <v-row no-gutters class=\"text-center pa-0\">\n              <v-col cols=\"12\" class=\"pa-0\">\n                <v-img id=\"parkingimg\" alt=\"PARKING.COM\" class=\"my-3\" height=\"42\" contain\n                  src=\"../assets/logo_huge_drk.png\" />\n              </v-col>\n            </v-row>\n            <v-row class=\"mt-8\" no-gutters id=\"receipt\">\n              <v-col>\n                <v-row class=\"receipt-content  font-weight-bold\" no-gutters>\n                  <v-col cols=\"7\" class=\"pa-0 text-left\">TOTAL PARKING CHARGES <sup>*</sup></v-col>\n                  <v-col class=\"pa-0 text-right\">$\n                    {{\n                      bookingDetails.hasOwnProperty(\"booking\")\n                      ? bookingDetails.transactionHistory.top[\"TOTAL PARKING CHARGES\"]\n                      : \"\"\n                    }}</v-col>\n                </v-row>\n                <v-row class=\"receipt-content \" no-gutters>\n                  <v-col class=\"pa-0 text-left pb-3\" style=\"font-size:12px\">\n                    {{\n                      bookingDetails.hasOwnProperty(\"booking\")\n                      ? 'Includes state and local taxes of ' +\" $ \"+bookingDetails.booking.totalTax\n                      : \"\"\n                    }}</v-col>\n                </v-row>\n                <v-row class=\"receipt-content py-1\" no-gutters>\n                  <v-col cols=\"7\" class=\"pa-0 text-left grey--text text--darken-3\">ENTERED AT</v-col>\n                  <v-col class=\"pa-0 text-right grey--text text--darken-3\">{{\n                    bookingDetails.hasOwnProperty(\"booking\") &&\n                    bookingDetails.booking.hasOwnProperty(\"entrytime\")\n                    ? formatDateTime(bookingDetails.booking.entrytime)\n                    : \"\"\n                  }}</v-col>\n                </v-row>\n                <v-row class=\"receipt-content py-1\" no-gutters>\n                  <v-col cols=\"7\" class=\"pa-0 text-left grey--text text--darken-3\">EXITED AT</v-col>\n                  <v-col class=\"pa-0 text-right grey--text text--darken-3\">{{\n                    bookingDetails.hasOwnProperty(\"booking\") &&\n                    bookingDetails.booking.hasOwnProperty(\"exittime\")\n                    ? formatDateTime(bookingDetails.booking.exittime)\n                    : \"\"\n                  }}</v-col>\n                </v-row>\n                <v-row class=\"receipt-content py-1\" no-gutters>\n                  <v-col cols=\"7\" class=\"pa-0 text-left grey--text text--darken-3\">STAY DURATION</v-col>\n                  <v-col class=\"pa-0 text-right grey--text text--darken-3\">{{\n                    bookingDetails.hasOwnProperty(\"booking\")\n                    ? bookingDetails.transactionHistory.top[\"STAY DURATION\"]\n                    : \"\"\n                  }}</v-col>\n                </v-row>\n                <v-row class=\"receipt-content py-1\" no-gutters>\n                  <v-col cols=\"7\" class=\"pa-0 text-left grey--text text--darken-3\">GARAGE NAME</v-col>\n                  <v-col class=\"pa-0 text-right grey--text text--darken-3\">{{\n                    bookingDetails.hasOwnProperty(\"zone\")\n                    ? bookingDetails.zone.zoneName\n                    : \"\"\n                  }}</v-col>\n                </v-row>\n                <v-row class=\"receipt-content py-1\" no-gutters>\n                  <v-col cols=\"7\" class=\"pa-0 text-left grey--text text--darken-3\">LOCATION</v-col>\n                  <v-col class=\"pa-0 text-right grey--text text--darken-3\">{{\n                    bookingDetails.hasOwnProperty(\"booking\")\n                    ? bookingDetails.transactionHistory.top[\"LOCATION\"] \n                    : \"\"\n                  }}</v-col>\n                </v-row>\n                <v-row class=\"receipt-content py-1 \" no-gutters>\n                  <v-col class=\"pa-0 text-left grey--text text--darken-3\">{{\n                    bookingDetails.hasOwnProperty(\"booking\")\n                    ?   bookingDetails.transactionHistory.top['PARKING INSTRUCTIONS']\n                    : \"\"\n                  }}</v-col>\n                </v-row>\n              </v-col>\n            </v-row>\n            <v-divider class=\"mx-8 my-2\"></v-divider>\n            <v-row class=\"my-2\" no-gutters>\n              <v-col>\n                <v-row class=\"receipt-content py-1\" no-gutters>\n                  <v-col cols=\"7\" class=\"pa-0 text-left grey--text text--darken-3\">ORDER NUMBER</v-col>\n                  <v-col class=\"pa-0 text-right grey--text text--darken-3\">{{\n                    bookingDetails.hasOwnProperty(\"booking\")\n                    ? bookingDetails.transactionHistory.middle[\n                    \"BOOKING REFERENCE\"\n                    ]\n                    : \"\"\n                  }}</v-col>\n                </v-row>\n                <!-- <v-row class=\"receipt-content py-1\">\n            <v-col cols=\"7\" class=\"pa-0 text-left grey--text text--darken-3\">TRANSACTION ID</v-col>\n            <v-col class=\"pa-0 text-right grey--text text--darken-3\">{{bookingDetails.hasOwnProperty(\"booking\") ? bookingDetails.transactionHistory.middle[\"TRANSACTION ID\"] : \"\"}}</v-col>\n                </v-row>-->\n                <v-row class=\"receipt-content py-1\" no-gutters>\n                  <v-col cols=\"7\" class=\"pa-0 text-left grey--text text--darken-3\">PAYMENT MODE</v-col>\n                  <!-- <v-col class=\"pa-0 text-right grey--text text--darken-3\" v-if=\"bookingDetails.booking.paymentType!='APPLE_PAY'\">{{\n                    bookingDetails.hasOwnProperty(\"booking\")\n                      ? bookingDetails.transactionHistory.middle[\"PAYMENT MODE\"]\n                      : \"\"\n                  }}</v-col> -->\n                  <v-col class=\"pa-0 text-right grey--text text--darken-3\"\n                    v-if=\"Object.hasOwnProperty.call(bookingDetails, 'booking') && Object.hasOwnProperty.call(bookingDetails.booking, 'paymentType')\">\n                    {{ getPaymentType(bookingDetails.booking.paymentType) }}\n                  </v-col>\n                </v-row>\n                <v-row class=\"receipt-content py-1\" no-gutters>\n                  <v-col cols=\"7\" class=\"pa-0 text-left grey--text text--darken-3\">CREDIT CARD NUMBER</v-col>\n                  <v-col class=\"pa-0 text-right grey--text text--darken-3\">{{\n                    bookingDetails.hasOwnProperty(\"booking\")\n                    ? bookingDetails.transactionHistory.middle[\n                    \"CREDIT CARD NUMBER\"\n                    ]\n                    : \"\"\n                  }}</v-col>\n                </v-row>\n                <!-- <v-row class=\"receipt-content py-1\">\n            <v-col cols=\"7\" class=\"pa-0 text-left grey--text text--darken-3\">AUTHORIZATION CODE</v-col>\n            <v-col class=\"pa-0 text-right grey--text text--darken-3\">{{bookingDetails.hasOwnProperty(\"booking\") ? bookingDetails.transactionHistory.middle[\"AUTHORIZATION CODE\"] : \"\"}}</v-col>\n                </v-row>-->\n              </v-col>\n            </v-row>\n            <v-divider class=\"mx-8 my-2\"></v-divider>\n            <v-row class=\"my-2\" no-gutters>\n              <v-col>\n                <v-row class=\"receipt-content py-1\" no-gutters>\n                  <v-col cols=\"7\" class=\"pa-0 text-left grey--text text--darken-3\">PHONE NUMBER</v-col>\n                  <v-col class=\"pa-0 text-right\">{{\n                    bookingDetails.hasOwnProperty(\"booking\")\n                    ? bookingDetails.transactionHistory.bottom[\"PHONE NUMBER\"]\n                    : \"\"\n                  }}</v-col>\n                </v-row>\n                <v-row class=\"receipt-content py-1\" no-gutters>\n                  <v-col cols=\"7\" class=\"pa-0 text-left grey--text text--darken-3\">DATE</v-col>\n                  <v-col class=\"pa-0 text-right grey--text text--darken-3\">{{\n                    bookingDetails.hasOwnProperty(\"booking\")\n                    ? bookingDetails.transactionHistory.bottom[\"DATE\"]\n                    : \"\"\n                  }}</v-col>\n                </v-row>\n              </v-col>\n            </v-row>\n          </v-col>\n          <v-col cols=\"auto\" class=\"flex-shrink-1 flex-grow-1\">\n            <v-btn rounded class=\"close_receipt_btn\" elevation=\"20\" dark @click=\"closeReceipt\">CLOSE</v-btn>\n          </v-col>\n        </v-row>\n      </v-card-text>\n      <!-- <v-card-actions class=\"grow\">\n        <v-btn rounded class=\"close_receipt_btn\" elevation=\"0\" dark @click=\"closeReceipt\">CLOSE</v-btn>\n      </v-card-actions>-->\n    </v-card>\n  </v-container>\n</template>\n\n<script>\nimport { mapGetters } from \"vuex\";\nimport APIHelper from \"../apiHelper\";\n// import loggerHelper from \"../loggerHelper\";\nexport default {\n  name: \"Receipt\",\n  data: () => ({}),\n  computed: {\n    ...mapGetters({\n      bookingId: \"getterBookingId\",\n      bookingDetails: \"getterBookingDetails\",\n    }),\n  },\n  beforeRouteEnter(to, from, next) {\n    next(async (vm) => {\n      vm.$vuetify.goTo(0);\n      if (vm.bookingId != null) {\n        try {\n          var bookingDetails = await APIHelper(\n            \"GET\",\n            \"/api/v1/booking/config/\" + vm.bookingId\n          );\n          vm.$store.commit(\n            \"SET_BOOKING_DETAILS\",\n            bookingDetails.data?.data ? bookingDetails.data.data : null\n          );\n        } catch (error) {\n          console.log(error);\n        }\n      }\n    });\n  },\n  methods: {\n    getPaymentType(type) {\n      switch (type) {\n        case \"APPLE_PAY\": {\n          return 'Paid with Apple Pay'\n        }\n        case \"GOOGLE_PAY\": {\n          return \"Paid with Google Pay\"\n        }\n        case \"Card\": {\n          return `VISA **** ${this.bookingDetails.hasOwnProperty.call(\"booking\") &&\n            this.bookingDetails.booking.hasOwnProperty.call(\"cardNo\")\n            ? this.bookingDetails.booking.cardNo\n            : \"\"}`\n        }\n      }\n    },\n    closeReceipt() {\n      // window.close();\n      this.$router.push({ path: \"/checkout\" });\n    },\n    formatDateTime(time) {\n      // Jan 15, 01:21 AM\n      let utcDate = new Date(time * 1000).toUTCString(); //\"Wed, 27 Jan 2021 13:59:04 GMT\"\n      let month = utcDate.split(\",\")[1].split(\" \")[2]; // Jan\n      let date = utcDate.split(\",\")[1].split(\" \")[1]; // 27\n      let hr = utcDate.split(\",\")[1].split(\" \")[4].split(\":\")[0]; // 13\n      let min = utcDate.split(\",\")[1].split(\" \")[4].split(\":\")[1]; //59\n      let formatHr = Number(hr) > 12 ? Number(hr) - 12 : Number(hr); // 1\n      formatHr = Number(formatHr) >= 10 ? Number(formatHr) : \"0\" + formatHr; //01\n      let amOrpm = Number(hr) >= 12 ? \"PM\" : \"AM\"; //PM\n      return month + \" \" + date + \", \" + formatHr + \":\" + min + \" \" + amOrpm; //Jan 27, 01:59 PM\n    },\n    /**\n     * Determine the mobile operating system.\n     * This function returns one of 'iOS', 'Android', 'Windows Phone', or 'unknown'.\n     *\n     * @returns {String}\n     */\n    getMobileOperatingSystem() {\n      var userAgent = navigator.userAgent || navigator.vendor || window.opera;\n\n      // Windows Phone must come first because its UA also contains \"Android\"\n      if (/windows phone/i.test(userAgent)) {\n        return \"Windows Phone\";\n      }\n\n      if (/android/i.test(userAgent)) {\n        return \"Android\";\n      }\n\n      // iOS detection from: http://stackoverflow.com/a/9039885/177710\n      if (/iPad|iPhone|iPod/.test(userAgent) && !window.MSStream) {\n        return \"iOS\";\n      }\n      return \"unknown\";\n    },\n    dataURItoBlob(dataURI) {\n      // convert base64 to raw binary data held in a string\n      // doesn't handle URLEncoded DataURIs - see SO answer #6850276 for code that does this\n      var byteString = atob(dataURI.split(\",\")[1]);\n\n      // separate out the mime component\n      var mimeString = dataURI.split(\",\")[0].split(\":\")[1].split(\";\")[0];\n\n      // write the bytes of the string to an ArrayBuffer\n      var ab = new ArrayBuffer(byteString.length);\n      var ia = new Uint8Array(ab);\n      for (var i = 0; i < byteString.length; i++) {\n        ia[i] = byteString.charCodeAt(i);\n      }\n\n      //Old Code\n      //write the ArrayBuffer to a blob, and you're done\n      //var bb = new BlobBuilder();\n      //bb.append(ab);\n      //return bb.getBlob(mimeString);\n\n      //New Code\n      return new Blob([ab], { type: mimeString });\n    },\n    openShareOptions() {\n      this.postToLoggerAPI({\n        phone: this.bookingDetails.user.contact,\n        refId: this.bookingId,\n        statusText: \"Parker clicked on receipt share option.\",\n      })\n      var self = this;\n      if (navigator.canShare) {\n        navigator\n          .share({\n            url: window.location.href,\n            title: \"Parking.com - Guest Parking\",\n            text:\n              \"Here is the receipt for your parking at \" +\n              this.bookingDetails.zone.zoneName +\n              \" on \" +\n              this.bookingDetails.transactionHistory.bottom[\"DATE\"] +\n              \" from\" +\n              this.bookingDetails.booking.jsonArr[\"Entered At\"].split(\",\")[1] +\n              \" to\" +\n              this.bookingDetails.booking.jsonArr[\"Exited At\"].split(\",\")[1] +\n              \". \",\n          })\n          .then(() => {\n            console.log(\"Share was successful.\");\n            this.postToLoggerAPI({\n              phone: self.bookingDetails.user.contact,\n              refId: self.bookingId,\n              statusText: \"Shared receipt successfully\",\n            })\n          })\n          .catch((error) => {\n            console.log(\"Sharing failed\", error);\n            this.postToLoggerAPI({\n              phone: self.bookingDetails.user.contact,\n              refId: self.bookingId,\n              error: error,\n              statusText: \"Error in sharing the receipt\",\n            })\n          });\n      } else {\n        this.postToLoggerAPI({\n          phone: self.bookingDetails.user.contact,\n          refId: self.bookingId,\n          statusText: \"Parker system does not support sharing files\",\n        })\n        console.log(\"Your system does not support sharing files.\");\n      }\n      // });\n    },\n  },\n};\n</script>\n<style lang=\"less\">\n.close_receipt_btn {\n  background-color: #f2555c !important;\n  width: 100%;\n  font-size: 18px !important;\n  font-weight: 700 !important;\n  height: 50px !important;\n  letter-spacing: normal !important;\n}\n\n.receipt-content {\n  font-size: 14px;\n}\n</style>\n"]}]}