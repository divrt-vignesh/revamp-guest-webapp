{"remainingRequest":"/home/vignesh/DIVRT/guest-webapp/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/vignesh/DIVRT/guest-webapp/src/views/SuccessValidateBooking.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/vignesh/DIVRT/guest-webapp/src/views/SuccessValidateBooking.vue","mtime":1688452269882},{"path":"/home/vignesh/DIVRT/guest-webapp/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vignesh/DIVRT/guest-webapp/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/vignesh/DIVRT/guest-webapp/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vignesh/DIVRT/guest-webapp/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcEdldHRlcnMgfSBmcm9tICJ2dWV4IjsKaW1wb3J0IEFQSUhlbHBlciBmcm9tICIuLi9hcGlIZWxwZXIiOwovLyBpbXBvcnQgbG9nZ2VySGVscGVyIGZyb20gIi4uL2xvZ2dlckhlbHBlciI7CmltcG9ydCB7IGRhdGVUb1RpbWVab25lRGF0ZSB9IGZyb20gIkAvdXRpbHMvZm9ybWF0RGF0ZVRpbWUiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIlN1Y2Nlc3NWYWxpZGF0aW9uQm9va2luZyIsCiAgZGF0YTogKCkgPT4gKHt9KSwKICBjb21wdXRlZDogewogICAgLi4ubWFwR2V0dGVycyh7CiAgICAgIGJvb2tpbmdJZDogImdldHRlckJvb2tpbmdJZCIsCiAgICAgIGJvb2tpbmdEZXRhaWxzOiAiZ2V0dGVyQm9va2luZ0RldGFpbHMiLAogICAgICB2YWxpZGF0ZWRNZXJjaGFudDogImdldHRlclZhbGlkYXRlZE1lcmNoYW50IiwKICAgIH0pLAogIH0sCiAgbW91bnRlZCgpIHsKICAgIHNldFRpbWVvdXQoYXN5bmMgKCkgPT4gewogICAgICBhd2FpdCB0aGlzLmdldEJvb2tpbmdTdGF0ZSgpOwogICAgfSwgNDAwMCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBhc3luYyBnZXRCb29raW5nU3RhdGUoKSB7CiAgICAgIGlmICh0aGlzLmJvb2tpbmdJZCAhPSBudWxsKSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIHZhciBiRGV0YWlscyA9IGF3YWl0IEFQSUhlbHBlcigKICAgICAgICAgICAgIkdFVCIsCiAgICAgICAgICAgICIvYXBpL3YxL2Jvb2tpbmcvY29uZmlnLyIgKyB0aGlzLmJvb2tpbmdJZAogICAgICAgICAgKTsKICAgICAgICAgIGxldCBib29raW5nU3RhdGUgPSBiRGV0YWlscy5kYXRhPy5kYXRhPy5ib29raW5nPy5zdGF0ZQogICAgICAgICAgICA/IGJEZXRhaWxzLmRhdGEuZGF0YS5ib29raW5nLnN0YXRlCiAgICAgICAgICAgIDogbnVsbDsKICAgICAgICAgIGlmIChib29raW5nU3RhdGUgPT0gOCB8fCBib29raW5nU3RhdGUgPT0gMTApIHsKICAgICAgICAgICAgaWYgKGJEZXRhaWxzPy5kYXRhPy5kYXRhPy5ib29raW5nPy5UeXBlT2ZCb29raW5nID09ICdTZWxmIHJlc2VydmF0aW9uJyAmJiBkYXRlVG9UaW1lWm9uZURhdGUobmV3IERhdGUoYkRldGFpbHM/LmRhdGE/LmRhdGE/LmJvb2tpbmc/LnJldkVuZCksIGJEZXRhaWxzPy5kYXRhPy5kYXRhPy56b25lPy50aW1lem9uZSkgPiBkYXRlVG9UaW1lWm9uZURhdGUobmV3IERhdGUoKSksIGJEZXRhaWxzPy5kYXRhPy5kYXRhPy56b25lPy50aW1lem9uZSkgewogICAgICAgICAgICAgIHRoaXMuJHJvdXRlci5yZXBsYWNlKHtwYXRoOiAnL2NoZWNraW4nfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLnJlcGxhY2UoeyBwYXRoOiAiL2NoZWNrb3V0IiB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgfSBlbHNlIGlmIChib29raW5nU3RhdGUgPT0gMikgewogICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoCiAgICAgICAgICAgICAgIlNFVF9CT09LSU5HX0RFVEFJTFMiLAogICAgICAgICAgICAgIGJEZXRhaWxzLmRhdGE/LmRhdGEgPyBiRGV0YWlscy5kYXRhLmRhdGEgOiBudWxsCiAgICAgICAgICAgICk7CiAgICAgICAgICAgIGlmIChiRGV0YWlscy5kYXRhPy5kYXRhPy5ib29raW5nPy5lbnRyeU1vZGUgPT0gIk9EIikgewogICAgICAgICAgICAgIHRoaXMuJHJvdXRlci5yZXBsYWNlKHsgcGF0aDogIi9vZEV4dGVuc2lvbiIgfSk7CiAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHRoaXMuJHJvdXRlci5yZXBsYWNlKHsgcGF0aDogIi9jaGVja2VkaW4iIH0pOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgc2V0VGltZW91dChhc3luYyAoKSA9PiB7CiAgICAgICAgICAgICAgYXdhaXQgdGhpcy5nZXRCb29raW5nU3RhdGUoKTsKICAgICAgICAgICAgfSwgNDAwMCk7CiAgICAgICAgICB9CiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgfSwKfTsK"},{"version":3,"sources":["SuccessValidateBooking.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"SuccessValidateBooking.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <v-container class=\"pa-0 text-center fill-height\" fluid>\n    <v-row class=\"white fill-height\" align-content=\"center\" justify=\"center\" no-gutters>\n      <v-col cols=\"12\">\n        <v-img alt=\"Success\" contain height=\"175\" src=\"../assets/success_check.gif\" />\n      </v-col>\n      <v-col cols=\"12\" class=\"mt-2\">\n        <v-row no-gutters>\n          <v-col cols=\"12\">\n            <p class=\"font-weight-bold mb-1\" style=\"color: #3d3f3c\">\n              Validated by {{ validatedMerchant }}\n            </p>\n            <!-- <p class=\"font-weight-bold mb-0\" style=\"color: #3d3f3c\">\n              by\n            </p> -->\n          </v-col>\n          <!-- <v-col cols=\"12\">\n            <p class=\"font-weight-bold text-h4\" style=\"color: #3d3f3c\">\n              {{ validatedMerchant }}\n            </p>\n          </v-col> -->\n        </v-row>\n      </v-col>\n      <!-- <v-col cols=\"12\" v-else>\n        <p class=\"font-weight-bold\" style=\"color: #3d3f3c\">\n          Validation successful\n        </p>\n      </v-col> -->\n    </v-row>\n  </v-container>\n</template>\n\n<script>\nimport { mapGetters } from \"vuex\";\nimport APIHelper from \"../apiHelper\";\n// import loggerHelper from \"../loggerHelper\";\nimport { dateToTimeZoneDate } from \"@/utils/formatDateTime\";\nexport default {\n  name: \"SuccessValidationBooking\",\n  data: () => ({}),\n  computed: {\n    ...mapGetters({\n      bookingId: \"getterBookingId\",\n      bookingDetails: \"getterBookingDetails\",\n      validatedMerchant: \"getterValidatedMerchant\",\n    }),\n  },\n  mounted() {\n    setTimeout(async () => {\n      await this.getBookingState();\n    }, 4000);\n  },\n  methods: {\n    async getBookingState() {\n      if (this.bookingId != null) {\n        try {\n          var bDetails = await APIHelper(\n            \"GET\",\n            \"/api/v1/booking/config/\" + this.bookingId\n          );\n          let bookingState = bDetails.data?.data?.booking?.state\n            ? bDetails.data.data.booking.state\n            : null;\n          if (bookingState == 8 || bookingState == 10) {\n            if (bDetails?.data?.data?.booking?.TypeOfBooking == 'Self reservation' && dateToTimeZoneDate(new Date(bDetails?.data?.data?.booking?.revEnd), bDetails?.data?.data?.zone?.timezone) > dateToTimeZoneDate(new Date()), bDetails?.data?.data?.zone?.timezone) {\n              this.$router.replace({path: '/checkin'});\n            }\n            else {\n              this.$router.replace({ path: \"/checkout\" });\n            }\n          } else if (bookingState == 2) {\n            this.$store.commit(\n              \"SET_BOOKING_DETAILS\",\n              bDetails.data?.data ? bDetails.data.data : null\n            );\n            if (bDetails.data?.data?.booking?.entryMode == \"OD\") {\n              this.$router.replace({ path: \"/odExtension\" });\n              return;\n            }\n            this.$router.replace({ path: \"/checkedin\" });\n          } else {\n            setTimeout(async () => {\n              await this.getBookingState();\n            }, 4000);\n          }\n        } catch (error) {\n          console.log(error);\n        }\n      }\n    },\n  },\n};\n</script>\n<style lang=\"less\"></style>\n"]}]}