{"remainingRequest":"/home/vignesh/DIVRT/guest-webapp/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/vignesh/DIVRT/guest-webapp/src/views/CheckedIn.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/vignesh/DIVRT/guest-webapp/src/views/CheckedIn.vue","mtime":1685436583750},{"path":"/home/vignesh/DIVRT/guest-webapp/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vignesh/DIVRT/guest-webapp/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/vignesh/DIVRT/guest-webapp/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vignesh/DIVRT/guest-webapp/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBBUElIZWxwZXIgZnJvbSAiLi4vYXBpSGVscGVyIjsKaW1wb3J0IEdvb2dsZVBheSBmcm9tICIuL0dvb2dsZVBheS52dWUiOwovLyBpbXBvcnQgbG9nZ2VySGVscGVyIGZyb20gIi4uL2xvZ2dlckhlbHBlciI7CmltcG9ydCB7IG1hcEdldHRlcnMgfSBmcm9tICJ2dWV4IjsKLy8gaW1wb3J0IHsgUXJjb2RlU3RyZWFtIH0gZnJvbSAidnVlLXFyY29kZS1yZWFkZXIiOwppbXBvcnQgUXJDb2RlU2Nhbm5lciBmcm9tICJAL3ZpZXdzL1FyQ29kZVNjYW5uZXIudnVlIjsKaW1wb3J0IFZhbGlkYXRpb25RckNvZGVTY2FubmVyIGZyb20gIkAvdmlld3MvVmFsaWRhdGlvblFyQ29kZVNjYW5uZXIudnVlIjsKaW1wb3J0IEFwcGxlUGF5IGZyb20gIkAvdmlld3MvQXBwbGVQYXkudnVlIjsKaW1wb3J0IHsgZm9ybWF0RGF0ZVRpbWUgfSBmcm9tICJAL3V0aWxzL2Zvcm1hdERhdGVUaW1lIjsKaW1wb3J0IHsgRXZlbnRCdXMgfSBmcm9tICJAL2xpYi9FdmVudEJ1cyI7CmltcG9ydCBWdWVUaW1lUGlja2VyIGZyb20gIkAvdWlDb21wb25lbnRzL1Z1ZVRpbWVQaWNrZXIiOwppbXBvcnQgeyBzZWNvbmRzVG9IbXMgfSBmcm9tICJAL3V0aWxzL2Zvcm1hdERhdGVUaW1lIjsKaW1wb3J0IHsgYWRkTWludXRlcywgYWRkRGF5cywgYWRkSG91cnMgfSBmcm9tICJkYXRlLWZucyI7CmltcG9ydCB7IGZvcm1hdCB9IGZyb20gImRhdGUtZm5zIjsKaW1wb3J0IHsgZGF0ZVRvVGltZVpvbmVEYXRlIH0gZnJvbSAiQC91dGlscy9mb3JtYXREYXRlVGltZSI7Ci8vIGltcG9ydCBRclNjYW5uZXIgZnJvbSAncXItc2Nhbm5lcic7CmV4cG9ydCBkZWZhdWx0IHsKICAgIG5hbWU6ICJDaGVja0luIiwKICAgIGNvbXBvbmVudHM6IHsgUXJDb2RlU2Nhbm5lciwgVmFsaWRhdGlvblFyQ29kZVNjYW5uZXIsIEFwcGxlUGF5LCBWdWVUaW1lUGlja2VyLCBHb29nbGVQYXkgfSwKICAgIGRhdGE6ICgpID0+ICh7CiAgICAgICAgLy8gcnVsZXM6IHsKICAgICAgICAvLyAgIGNvdW50ZXI6IHZhbHVlID0+IHZhbHVlLmxlbmd0aCA8PSA2IHx8ICJNYXggNiBjaGFyYWN0ZXJzIgogICAgICAgIC8vIH0sCiAgICAgICAgbG95YWx0eTI0a251bTogIiIsCiAgICAgICAgYWxlcnRJY29uOiAibWRpLWNoZWNrLWNpcmNsZSIsCiAgICAgICAgYWxlcnREaWFsb2c6IGZhbHNlLAogICAgICAgIGFsZXJ0TXNnOiAiIiwKICAgICAgICBsb3lhbHR5OiBmYWxzZSwKICAgICAgICBleHREYXRlQW5kVGltZTogbnVsbCwKICAgICAgICBleHRlbmRCdG5Mb2FkaW5nOiBmYWxzZSwKICAgICAgICBsb2FkaW5nOiBmYWxzZSwKICAgICAgICBleHRlbnNpb25EaWFsb2c6IGZhbHNlLAogICAgICAgIHN0b3BUaW1lOiAiIiwKICAgICAgICBleGl0VGltZVNlbGVjdGVkOiB7fSwKICAgICAgICB0aW1lUGlja2VySHJSYW5nZTogbnVsbCwKICAgICAgICB0aW1lRXhjZWVkZWQ6IGZhbHNlLAogICAgICAgIHRpbWVQaWNrZXJNaW5SYW5nZTogbnVsbCwKICAgICAgICBtaW5EYXRlOiBudWxsLAogICAgICAgIG1heERhdGU6IG51bGwsCiAgICAgICAgVGltZW1lbnU6IGZhbHNlLAogICAgICAgIHN0YXJ0RGF0ZTogIiIsCiAgICAgICAgbWF4RGF0ZVRpbWU6IG51bGwsCiAgICAgICAgZXN0aW1hdGU6IG51bGwsCiAgICAgICAgRGF0ZW1lbnU6IGZhbHNlLAogICAgICAgIGV4aXREYXRlOiBudWxsLAogICAgICAgIGRhdGVGb3JtYXR0ZWQ6IG51bGwsCiAgICAgICAgZXhpdERhdGVUaW1lOiAwLAogICAgICAgIGV4aXRUaW1lSW50ZXJ2YWw6IG51bGwsCiAgICAgICAgaW9zRGV2aWNlOiBmYWxzZSwKICAgICAgICBpbnZhbGlkVmFsaWRhdGlvblFSRGlhbG9nOiBmYWxzZSwKICAgICAgICBjYW1lcmFTdGF0dXM6IGZhbHNlLAogICAgICAgIHZhbGlkYXRpb25DYW1lcmFTdGF0dXM6IGZhbHNlLAogICAgICAgIHZhbGlkYXRlZERhdGVUaW1lOiAwLAogICAgICAgIGdyYWNlUGVyaW9kVGltZTogMCwKICAgICAgICB2YWxpZGF0ZWRJbnRlcnZhbDogIiIsCiAgICAgICAgZHVyYXRpb246IDMwMCwKICAgICAgICBvZmZzZXQ6IDAsCiAgICAgICAgcGVkZXN0cmlhbkFjY2Vzc0RpYWxvZzogZmFsc2UsCiAgICAgICAgcGVkZXN0cmlhbkFjY2Vzc1RleHQ6ICIiLAogICAgICAgIGVhc2luZzogImVhc2VJbk91dEN1YmljIiwKICAgICAgICBwYWdlSGVpZ2h0OiB3aW5kb3cub3V0ZXJIZWlnaHQsCiAgICAgICAgcXJDb2RlRGlhbG9nOiBmYWxzZSwKICAgICAgICBjb3VudFVwVGltZTogIiIsCiAgICAgICAgaW50ZXJ2YWw6ICIiLAogICAgICAgIGlzVmFsaWQ6IHVuZGVmaW5lZCwKICAgICAgICBjYW1lcmE6ICJhdXRvIiwKICAgICAgICBzbXNUZXh0OiAiIiwKICAgICAgICBzbXNEaWFsb2c6IGZhbHNlLAogICAgICAgIGRpYWxlckRpYWxvZzogZmFsc2UsCiAgICAgICAgaW52YWxpZFFSTXNnOiAiIiwKICAgICAgICBpbnZhbGlkVmFsaWRhdGlvblFSTXNnOiAiIiwKICAgICAgICBpbnZhbGlkUVJEaWFsb2c6IGZhbHNlLAogICAgICAgIGludmFsaWRTTVNNc2c6ICIiLAoKICAgICAgICBpbnZhbGlkU01TRGlhbG9nOiBmYWxzZSwKICAgICAgICBzbXNQZW5kaW5nOiBmYWxzZSwKICAgICAgICB2YWxpZGF0ZUJvb2tpbmdQZW5kaW5nOiBmYWxzZSwKICAgICAgICB2YWxpZGF0ZUJvb2tpbmdEaWFsb2c6IGZhbHNlLAogICAgICAgIHZhbGlkYXRlQm9va2luZ1R4dDogIiIsCiAgICAgICAgdmFsaWRhdGVRUkNvZGVQZW5kaW5nOiBmYWxzZSwKICAgICAgICB2YWxpZGF0ZVFSQ29kZURpYWxvZzogZmFsc2UsCiAgICB9KSwKICAgIGNvbXB1dGVkOiB7CiAgICAgICAgLi4ubWFwR2V0dGVycyh7CiAgICAgICAgICAgIGJvb2tpbmdJZDogImdldHRlckJvb2tpbmdJZCIsCiAgICAgICAgICAgIGJvb2tpbmdEZXRhaWxzOiAiZ2V0dGVyQm9va2luZ0RldGFpbHMiLAogICAgICAgICAgICB6b25lRGV0YWlsczogImdldHRlclpvbmVEZXRhaWxzIiwKICAgICAgICAgICAgZW50cnlUaW1lOiAiZ2V0dGVyRW50cnlUaW1lIiwKICAgICAgICAgICAgZXhpdEdhdGVDb2RlczogImdldHRlckV4aXRHYXRlQ29kZXMiLAogICAgICAgICAgICBpc1BRUkVuZFJlc2VydmF0aW9uOiAiZ2V0dGVyWm9uZUlzUFFSRW5kUmVzZXJ2YXRpb24iLAoKICAgICAgICB9KSwKCiAgICAgICAgZGlzYWJsZUxveWFsdHkoKSB7CiAgICAgICAgICAgIGxldCBkaXNhYmxlZCA9IHRoaXMubG95YWx0eTI0a251bSA9PT0gdW5kZWZpbmVkIHx8IHRoaXMubG95YWx0eTI0a251bSA9PT0gbnVsbCB8fCB0aGlzLmxveWFsdHkyNGtudW0gPT0gIiIKICAgICAgICAgICAgcmV0dXJuIGRpc2FibGVkCiAgICAgICAgfSwKICAgICAgICBkaXNhYmxlRXh0ZW5kKCkgewogICAgICAgICAgICBsZXQgZGlzYWJsZWQgPSAoCiAgICAgICAgICAgICAgICB0aGlzLnRpbWUgPT09IG51bGwgfHwgdGhpcy50aW1lID09PSAiIiB8fCB0aGlzLnRpbWUgPT09IHVuZGVmaW5lZCB8fCB0aGlzLmVzdGltYXRlID09PSBudWxsIHx8IHRoaXMuZXN0aW1hdGUgPT09IHVuZGVmaW5lZCB8fCBPYmplY3Qua2V5cyh0aGlzLmVzdGltYXRlKS5sZW5ndGggPT09IDApCiAgICAgICAgICAgIHJldHVybiBkaXNhYmxlZDsKICAgICAgICB9LAogICAgICAgIGNvdW50RG93bkV4aXRUaW1lKCkgewogICAgICAgICAgICBpZiAodGhpcy5leGl0RGF0ZVRpbWUgPCAwKSB7CiAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoIlNFVF9WQUxJREFURURfVElNRV9TVEFUVVMiLCB0cnVlKTsKICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5leGl0VGltZUludGVydmFsKTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gc2Vjb25kc1RvSG1zKHRoaXMuZXhpdERhdGVUaW1lIC8gMTAwMCArIDU5KTsKICAgICAgICB9LAogICAgICAgIGNvdW50RG93bkVzdGltYXRlVGltZSgpIHsKICAgICAgICAgICAgaWYgKHRoaXMuZXhpdERhdGVUaW1lIDwgMCkgewogICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCJTRVRfVkFMSURBVEVEX1RJTUVfU1RBVFVTIiwgdHJ1ZSk7CiAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKHRoaXMuZXhpdFRpbWVJbnRlcnZhbCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIHNlY29uZHNUb0htcyh0aGlzLmV4aXREYXRlVGltZSAvIDEwMDAgKyA1OSk7CiAgICAgICAgfSwKICAgICAgICBpc0V4dHJhKCkgewogICAgICAgICAgICByZXR1cm4gd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lLmluY2x1ZGVzKCIvZ3gvIik7CiAgICAgICAgfSwKICAgICAgICBvcHRpb25zKCkgewogICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgZHVyYXRpb246IHRoaXMuZHVyYXRpb24sCiAgICAgICAgICAgICAgICBvZmZzZXQ6IHRoaXMub2Zmc2V0LAogICAgICAgICAgICAgICAgZWFzaW5nOiB0aGlzLmVhc2luZywKICAgICAgICAgICAgfTsKICAgICAgICB9LAogICAgICAgIHNob3dQYXltZW50Q2FyZEFkZGVkOiBmdW5jdGlvbiBnZXRDYXJkU3RhdHVzKCkgewogICAgICAgICAgICB2YXIgY2FyZE9uRmlsZSA9IHRoaXMuYm9va2luZ0RldGFpbHM/LmJvb2tpbmc/LmNhcmRPbmZpbGUKICAgICAgICAgICAgICAgID8gdGhpcy5ib29raW5nRGV0YWlscy5ib29raW5nLmNhcmRPbmZpbGUKICAgICAgICAgICAgICAgIDogbnVsbDsKICAgICAgICAgICAgdmFyIHZhbGlkYXRlZFN0YXRlID0gdGhpcy5ib29raW5nRGV0YWlscz8uYm9va2luZz8udmFsaWRhdGVkCiAgICAgICAgICAgICAgICA/IHRoaXMuYm9va2luZ0RldGFpbHMuYm9va2luZy52YWxpZGF0ZWQKICAgICAgICAgICAgICAgIDogbnVsbDsKICAgICAgICAgICAgdmFyIHN0YXRlID0KICAgICAgICAgICAgICAgIGNhcmRPbkZpbGUgPT0gIjEiCiAgICAgICAgICAgICAgICAgICAgPyB0cnVlCiAgICAgICAgICAgICAgICAgICAgOiBjYXJkT25GaWxlID09ICIyIiAmJgogICAgICAgICAgICAgICAgICAgIHZhbGlkYXRlZFN0YXRlID09ICIxIiAmJgogICAgICAgICAgICAgICAgICAgIHRoaXMudmFsaWRhdGVkRGF0ZVRpbWUgPiAwOwogICAgICAgICAgICByZXR1cm4gc3RhdGU7CiAgICAgICAgfSwKICAgICAgICB0aW1lQWdvOiBmdW5jdGlvbiBnZXRUaW1lQWdvKCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy5jb3VudFVwVGltZTsKICAgICAgICB9LAogICAgICAgIHZhbGlkYXRpb25QZW5kaW5nOiBmdW5jdGlvbiBxclZhbGlkYXRpb24oKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPT09IHVuZGVmaW5lZCAmJiB0aGlzLmNhbWVyYSA9PT0gIm9mZiI7CiAgICAgICAgfSwKICAgICAgICBib29raW5nX2NvbnRlbnQoKSB7CiAgICAgICAgICAgIGxldCBkYXRlVGltZSA9IGZvcm1hdERhdGVUaW1lKAogICAgICAgICAgICAgICAgTnVtYmVyKHRoaXMuYm9va2luZ0RldGFpbHMuYm9va2luZy5lbnRyeXRpbWUpCiAgICAgICAgICAgICk7CiAgICAgICAgICAgIHJldHVybiBkYXRlVGltZVswXSArICIgb24gIiArIGRhdGVUaW1lWzFdICsgIiAiICsgZGF0ZVRpbWVbMl07CiAgICAgICAgfSwKICAgICAgICB2YWxpZGF0ZWRfY29udGVudCgpIHsKICAgICAgICAgICAgaWYgKHRoaXMuYm9va2luZ0RldGFpbHM/LnpvbmU/LnRpbWV6b25lb2Zmc2V0KSB7CiAgICAgICAgICAgICAgICBsZXQgZGF0ZVRpbWUgPSB0aGlzLmJvb2tpbmdEZXRhaWxzLmJvb2tpbmcudHlwZSA9PSAiMTMiID8gZm9ybWF0RGF0ZVRpbWUoCiAgICAgICAgICAgICAgICAgICAgTnVtYmVyKHRoaXMuYm9va2luZ0RldGFpbHMuYm9va2luZy5yZXZTdGFydCkgKwogICAgICAgICAgICAgICAgICAgIE51bWJlcih0aGlzLmJvb2tpbmdEZXRhaWxzLmJvb2tpbmcuY291cG9uVmFsaWRUaW1lKQogICAgICAgICAgICAgICAgKSA6IGZvcm1hdERhdGVUaW1lKAogICAgICAgICAgICAgICAgICAgIE51bWJlcih0aGlzLmJvb2tpbmdEZXRhaWxzLmJvb2tpbmcuZW50cnl0aW1lKSArCiAgICAgICAgICAgICAgICAgICAgTnVtYmVyKHRoaXMuYm9va2luZ0RldGFpbHMuYm9va2luZy5jb3Vwb25WYWxpZFRpbWUpCiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgcmV0dXJuIGRhdGVUaW1lWzBdICsgIiwgIiArIGRhdGVUaW1lWzFdICsgIiAiICsgZGF0ZVRpbWVbMl07CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuICIiOwogICAgICAgIH0sCiAgICAgICAgY291bnREb3duVmFsaWRhdGVkVGltZSgpIHsKICAgICAgICAgICAgaWYgKHRoaXMudmFsaWRhdGVkRGF0ZVRpbWUgPCAwKSB7CiAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoIlNFVF9WQUxJREFURURfVElNRV9TVEFUVVMiLCB0cnVlKTsKICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy52YWxpZGF0ZWRJbnRlcnZhbCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2Vjb25kc1RvSG1zKHRoaXMudmFsaWRhdGVkRGF0ZVRpbWUgLyAxMDAwICsgNTkpOwogICAgICAgIH0sCiAgICAgICAgY291bnREb3duR3JhY2VQZXJpb2RUaW1lKCkgewogICAgICAgICAgICBpZiAodGhpcy5ncmFjZVBlcmlvZFRpbWUgPCAwKSB7CiAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoIlNFVF9HUkFDRV9QRVJJT0RfVElNRV9TVEFUVVMiLCB0cnVlKTsKICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5ncmFjZVBlcmlvZEludGVydmFsKTsKICAgICAgICAgICAgfQogICAgICAgICAgICAvL2FkZCA1OSBzZWMgdG8gZ3JhY2VwZXJpb2QgdGltZSB0byBza2lwIDAgbWluLgogICAgICAgICAgICByZXR1cm4gdGhpcy5zZWNvbmRzVG9IbXModGhpcy5ncmFjZVBlcmlvZFRpbWUgLyAxMDAwICsgNTkpOwogICAgICAgIH0sCiAgICAgICAgLy8gZ3JhY2VQZXJpb2RDb3VudERvd25UaW1lLAogICAgICAgIC8vIGNvdW50RG93blZhbGlkYXRpb250aW1lKCl7CiAgICAgICAgLy8gICByZXR1cm4KICAgICAgICAvLyB9CiAgICB9LAogICAgd2F0Y2g6IHsKICAgICAgICBjdXJyZW50RGF0ZShuZXdWYWwpIHsKICAgICAgICAgICAgY29uc29sZS5sb2cobmV3VmFsKTsKICAgICAgICB9LAogICAgICAgIGV4aXREYXRlKG5ld1ZhbCwgb2xkVmFsKSB7CiAgICAgICAgICAgIGxldCBleGl0ZGF0ZXRpbWUgPSB0aGlzLmZvcm1hdEV4aXREYXRlVGltZSh0aGlzLmJvb2tpbmdEZXRhaWxzPy5ib29raW5nPy5yZXZFbmQsICdkYXRlJyk7CiAgICAgICAgICAgIHRoaXMuZGF0ZUZvcm1hdHRlZCA9IHRoaXMuZm9ybWF0RGF0ZSh0aGlzLmV4aXREYXRlKQogICAgICAgICAgICBpZiAob2xkVmFsICE9IG5ld1ZhbCAmJiB0aGlzLmV4aXREYXRlID09IGZvcm1hdCgKICAgICAgICAgICAgICAgIG5ldyBEYXRlKGV4aXRkYXRldGltZSksCiAgICAgICAgICAgICAgICAieXl5eS1NTS1kZCIKICAgICAgICAgICAgKSkgewogICAgICAgICAgICAgICAgbGV0IHNlbGVjdGVkSG91cnMgPQogICAgICAgICAgICAgICAgICAgIGZvcm1hdCgKICAgICAgICAgICAgICAgICAgICAgICAgbmV3IERhdGUoZXhpdGRhdGV0aW1lKSwKICAgICAgICAgICAgICAgICAgICAgICAgImhoIgogICAgICAgICAgICAgICAgICAgICkKCiAgICAgICAgICAgICAgICBsZXQgc2VsZWN0ZWRNaW5zID0KICAgICAgICAgICAgICAgICAgICBmb3JtYXQoCiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBEYXRlKGV4aXRkYXRldGltZSkKICAgICAgICAgICAgICAgICAgICAgICAgLAogICAgICAgICAgICAgICAgICAgICAgICAibW0iCiAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgbGV0IHNlbGVjdGVkQU1QTSA9CiAgICAgICAgICAgICAgICAgICAgZm9ybWF0KAogICAgICAgICAgICAgICAgICAgICAgICBuZXcgRGF0ZShleGl0ZGF0ZXRpbWUpLAogICAgICAgICAgICAgICAgICAgICAgICAiYWFhIgogICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIHRoaXMuZXhpdFRpbWVTZWxlY3RlZCA9IE9iamVjdC5hc3NpZ24oe30sIHsKICAgICAgICAgICAgICAgICAgICBoaDogc2VsZWN0ZWRIb3VycywKICAgICAgICAgICAgICAgICAgICBtbTogc2VsZWN0ZWRNaW5zLAogICAgICAgICAgICAgICAgICAgIGE6IHNlbGVjdGVkQU1QTQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB0aGlzLmdldFJhdGVDYWxsID0gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIHRoaXMuZ2V0UmF0ZUNhbGwgPSBmYWxzZQogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBleGl0VGltZVNlbGVjdGVkKG5ld1ZhbCwgb2xkVmFsKSB7CiAgICAgICAgICAgIGlmIChvbGRWYWwgIT0gbnVsbCAmJiBuZXdWYWwgIT0gbnVsbCAmJiBvbGRWYWw/LmEgIT0gbmV3VmFsPy5hKSB7CiAgICAgICAgICAgICAgICB0aGlzLmV4aXRUaW1lU2VsZWN0ZWQgPSBPYmplY3QuYXNzaWduKHRoaXMuZXhpdFRpbWVTZWxlY3RlZCwgewogICAgICAgICAgICAgICAgICAgIGhoOiAiIiwKICAgICAgICAgICAgICAgICAgICBtbTogIiIsCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAob2xkVmFsICE9IG51bGwgJiYgbmV3VmFsICE9IG51bGwgJiYgb2xkVmFsPy5oaCAhPSBuZXdWYWw/LmhoKSB7CiAgICAgICAgICAgICAgICB0aGlzLmV4aXRUaW1lU2VsZWN0ZWQgPSBPYmplY3QuYXNzaWduKHRoaXMuZXhpdFRpbWVTZWxlY3RlZCwgewogICAgICAgICAgICAgICAgICAgIG1tOiAiIiwKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CgogICAgICAgICAgICB0aGlzLnNldFRpbWVQaWNrZXIobmV3VmFsKTsKICAgICAgICB9LAogICAgfSwKICAgIGNyZWF0ZWQoKSB7IH0sCiAgICBtb3VudGVkOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgdGhpcy5leGl0RGF0ZVRpbWUgPSB0aGlzLmNhbGN1bGF0ZUV4aXREYXRlVGltZSgpOwogICAgICAgIHRoaXMuZXhpdFRpbWVJbnRlcnZhbCA9IHNldEludGVydmFsKCgpID0+IHsKICAgICAgICAgICAgaWYgKAogICAgICAgICAgICAgICAgdGhpcy5ib29raW5nRGV0YWlscz8uem9uZT8udGltZXpvbmUKCiAgICAgICAgICAgICkgewogICAgICAgICAgICAgICAgdGhpcy5leGl0RGF0ZVRpbWUgPSB0aGlzLmNhbGN1bGF0ZUV4aXREYXRlVGltZSgpOwogICAgICAgICAgICB9CiAgICAgICAgfSwgMTAwMCk7CiAgICAgICAgaWYgKAogICAgICAgICAgICB0aGlzLmVudHJ5VGltZSAhPSBudWxsICYmCiAgICAgICAgICAgICF0aGlzLmJvb2tpbmdEZXRhaWxzPy5ib29raW5nPy5leGl0dGltZSAmJgogICAgICAgICAgICB0aGlzLmJvb2tpbmdEZXRhaWxzPy56b25lPy50aW1lem9uZSAmJgogICAgICAgICAgICB0aGlzLmJvb2tpbmdEZXRhaWxzPy5ib29raW5nPy5ncmFjZVBlcmlvZAogICAgICAgICkgewogICAgICAgICAgICB0aGlzLmNvdW50VXBUaW1lID0gdGhpcy5jYWxjdWxhdGVQYXJraW5nVGltZSgKICAgICAgICAgICAgICAgIHRoaXMuZW50cnlUaW1lLAogICAgICAgICAgICAgICAgdGhpcy5ib29raW5nRGV0YWlscy5ib29raW5nLmdyYWNlUGVyaW9kLAogICAgICAgICAgICAgICAgdGhpcy5ib29raW5nRGV0YWlscy56b25lLnRpbWV6b25lCiAgICAgICAgICAgICk7CiAgICAgICAgfQogICAgICAgIHRoaXMuaW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCgoKSA9PiB7CiAgICAgICAgICAgIGlmICgKICAgICAgICAgICAgICAgIHRoaXMuZW50cnlUaW1lICE9IG51bGwgJiYKICAgICAgICAgICAgICAgICF0aGlzLmJvb2tpbmdEZXRhaWxzPy5ib29raW5nPy5leGl0dGltZSAmJgogICAgICAgICAgICAgICAgdGhpcy5ib29raW5nRGV0YWlscz8uem9uZT8udGltZXpvbmUgJiYKICAgICAgICAgICAgICAgIHRoaXMuYm9va2luZ0RldGFpbHM/LmJvb2tpbmc/LmdyYWNlUGVyaW9kCiAgICAgICAgICAgICkgewogICAgICAgICAgICAgICAgdGhpcy5jb3VudFVwVGltZSA9IHRoaXMuY2FsY3VsYXRlUGFya2luZ1RpbWUoCiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbnRyeVRpbWUsCiAgICAgICAgICAgICAgICAgICAgdGhpcy5ib29raW5nRGV0YWlscy5ib29raW5nLmdyYWNlUGVyaW9kLAogICAgICAgICAgICAgICAgICAgIHRoaXMuYm9va2luZ0RldGFpbHMuem9uZS50aW1lem9uZQogICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgfQogICAgICAgIH0sIDEwMDApOwogICAgICAgIGlmICgKICAgICAgICAgICAgdGhpcy5ib29raW5nRGV0YWlscz8uYm9va2luZz8uZXhpdHRpbWUgJiYKICAgICAgICAgICAgdGhpcy5ib29raW5nRGV0YWlscy5ib29raW5nLmV4aXR0aW1lICE9IG51bGwgJiYKICAgICAgICAgICAgdGhpcy5ib29raW5nRGV0YWlscy5ib29raW5nLmV4aXR0aW1lICE9ICIiCiAgICAgICAgKSB7CiAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5pbnRlcnZhbCk7CiAgICAgICAgfQogICAgICAgIGlmICgKICAgICAgICAgICAgdGhpcy5ib29raW5nRGV0YWlscz8uYm9va2luZz8udmFsaWRhdGVkICYmCiAgICAgICAgICAgIHRoaXMuYm9va2luZ0RldGFpbHMuYm9va2luZy52YWxpZGF0ZWQgPT0gIjEiICYmCiAgICAgICAgICAgIHRoaXMuYm9va2luZ0RldGFpbHM/LmJvb2tpbmc/LnZhbGlkYXRpb25UeXBlICYmCiAgICAgICAgICAgIHRoaXMuYm9va2luZ0RldGFpbHMuYm9va2luZy52YWxpZGF0aW9uVHlwZSA9PSAiRElWUlQiCiAgICAgICAgKSB7CiAgICAgICAgICAgIHRoaXMudmFsaWRhdGVkRGF0ZVRpbWUgPSB0aGlzLmNhbGN1bGF0ZVZhbGlkYXRlZFRpbWUoKTsKICAgICAgICB9CgogICAgICAgIHRoaXMudmFsaWRhdGVkSW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCgoKSA9PiB7CiAgICAgICAgICAgIGlmICgKICAgICAgICAgICAgICAgIHRoaXMuYm9va2luZ0RldGFpbHM/LnpvbmU/LnRpbWV6b25lICYmCiAgICAgICAgICAgICAgICB0aGlzLmJvb2tpbmdEZXRhaWxzPy5ib29raW5nPy52YWxpZGF0ZWQgJiYKICAgICAgICAgICAgICAgIHRoaXMuYm9va2luZ0RldGFpbHMuYm9va2luZy52YWxpZGF0ZWQgPT0gIjEiICYmCiAgICAgICAgICAgICAgICB0aGlzLmJvb2tpbmdEZXRhaWxzPy5ib29raW5nPy52YWxpZGF0aW9uVHlwZSAmJgogICAgICAgICAgICAgICAgdGhpcy5ib29raW5nRGV0YWlscy5ib29raW5nLnZhbGlkYXRpb25UeXBlID09ICJESVZSVCIKICAgICAgICAgICAgKSB7CiAgICAgICAgICAgICAgICB0aGlzLnZhbGlkYXRlZERhdGVUaW1lID0gdGhpcy5jYWxjdWxhdGVWYWxpZGF0ZWRUaW1lKCk7CiAgICAgICAgICAgIH0KICAgICAgICB9LCAxMDAwKTsKICAgICAgICBpZiAoCiAgICAgICAgICAgIHRoaXMuYm9va2luZ0RldGFpbHM/LmJvb2tpbmc/LnZhbGlkYXRlZCAmJgogICAgICAgICAgICB0aGlzLmJvb2tpbmdEZXRhaWxzLmJvb2tpbmcudmFsaWRhdGVkID09ICIxIiAmJgogICAgICAgICAgICB0aGlzLmJvb2tpbmdEZXRhaWxzPy5ib29raW5nPy52YWxpZGF0aW9uVHlwZSAmJgogICAgICAgICAgICB0aGlzLmJvb2tpbmdEZXRhaWxzLmJvb2tpbmcudmFsaWRhdGlvblR5cGUgPT0gIkRJVlJUIgogICAgICAgICkgewogICAgICAgICAgICBpZiAodGhpcy52YWxpZGF0ZWREYXRlVGltZSA8IDApIHsKICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgiU0VUX1ZBTElEQVRFRF9USU1FX1NUQVRVUyIsIHRydWUpOwogICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLnZhbGlkYXRlZEludGVydmFsKTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgaWYgKHRoaXMuYm9va2luZ0RldGFpbHM/LmJvb2tpbmc/LmdyYWNlUGVyaW9kID4gMCkgewogICAgICAgICAgICB0aGlzLmdyYWNlUGVyaW9kVGltZSA9IHRoaXMuY2FsY3VsYXRlR3JhY2VQZXJpb2RUaW1lKCk7CiAgICAgICAgfQoKICAgICAgICB0aGlzLmdyYWNlUGVyaW9kSW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCgoKSA9PiB7CiAgICAgICAgICAgIGlmICh0aGlzLmJvb2tpbmdEZXRhaWxzPy56b25lPy50aW1lem9uZSkgewogICAgICAgICAgICAgICAgdGhpcy5ncmFjZVBlcmlvZFRpbWUgPSB0aGlzLmNhbGN1bGF0ZUdyYWNlUGVyaW9kVGltZSgpOwogICAgICAgICAgICB9CiAgICAgICAgfSwgMTAwMCk7CiAgICAgICAgaWYgKHRoaXMuYm9va2luZ0RldGFpbHM/LmJvb2tpbmc/LmdyYWNlUGVyaW9kID4gMCkgewogICAgICAgICAgICBpZiAodGhpcy5ncmFjZVBlcmlvZFRpbWUgPCAwKSB7CiAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoIlNFVF9HUkFDRV9QRVJJT0RfVElNRV9TVEFUVVMiLCB0cnVlKTsKICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5ncmFjZVBlcmlvZEludGVydmFsKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBFdmVudEJ1cy4kb24oInNtcy1xci1yZXN1bHQiLCAocmVzdWx0KSA9PiB7CiAgICAgICAgICAgIHRoaXMub25EZWNvZGUocmVzdWx0KTsKICAgICAgICB9KTsKICAgICAgICBFdmVudEJ1cy4kb24oInZhbGlkYXRpb24tcXItcmVzdWx0IiwgKHJlc3VsdCkgPT4gewogICAgICAgICAgICB0aGlzLm9uVmFsaWRhdGVRUkNvZGUocmVzdWx0KTsKICAgICAgICB9KTsKCiAgICAgICAgLy8gaWYodGhpcy5ib29raW5nRGV0YWlscz8uem9uZT8uaXNQZWRlc3RyaWFuPT0nMScpewogICAgICAgIC8vICAgdGhpcy5wZWRlc3RyaWFuQWNjZXNzPXRydWUKICAgICAgICAvLyB9CiAgICB9LAogICAgZGVzdHJveWVkKCkgewogICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5pbnRlcnZhbCk7CiAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLnZhbGlkYXRlZEludGVydmFsKTsKICAgICAgICBjbGVhckludGVydmFsKHRoaXMuZ3JhY2VQZXJpb2RJbnRlcnZhbCk7CiAgICB9LAogICAgYmVmb3JlUm91dGVFbnRlcih0bywgZnJvbSwgbmV4dCkgewogICAgICAgIG5leHQoYXN5bmMgKHZtKSA9PiB7CiAgICAgICAgICAgIHZtLmdldE1vYmlsZU9wZXJhdGluZ1N5c3RlbSgpID09PSAnaU9TJyA/IHZtLmlvc0RldmljZSA9IHRydWUgOiB2bS5pb3NEZXZpY2UgPSBmYWxzZTsKICAgICAgICAgICAgaWYgKAogICAgICAgICAgICAgICAgdm0uYm9va2luZ0RldGFpbHM/LmJvb2tpbmc/LmV4aXR0aW1lICYmCiAgICAgICAgICAgICAgICB2bS5ib29raW5nRGV0YWlscy5ib29raW5nLmV4aXR0aW1lICE9IG51bGwgJiYKICAgICAgICAgICAgICAgIHZtLmJvb2tpbmdEZXRhaWxzLmJvb2tpbmcuZXhpdHRpbWUgIT0gIiIKICAgICAgICAgICAgKSB7CiAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKHZtLmludGVydmFsKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAodm0uYm9va2luZ0RldGFpbHM/LmJvb2tpbmc/LnZhbGlkYXRlZCA9PSAiMCIpIHsKICAgICAgICAgICAgICAgIGlmICh2bS52YWxpZGF0ZWREYXRlVGltZSA8IDApIHsKICAgICAgICAgICAgICAgICAgICB2bS4kc3RvcmUuY29tbWl0KCJTRVRfVkFMSURBVEVEX1RJTUVfU1RBVFVTIiwgdHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh2bS52YWxpZGF0ZWRJbnRlcnZhbCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9KTsKICAgIH0sCiAgICBtZXRob2RzOiB7CiAgICAgICAgbG95YWx0eVZhbGlkKCkgewogICAgICAgICAgICBpZiAoISgvXlthLXowLTldKyQvaSkudGVzdCh0aGlzLmxveWFsdHkyNGtudW0pKSB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnaGVyZScpCiAgICAgICAgICAgICAgICB0aGlzLmxveWFsdHkyNGtudW0gPSB0aGlzLmxveWFsdHkyNGtudW0ucmVwbGFjZSgvW15cd1xzXS9naSwgJycpCiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIGFzeW5jIHN1Ym1pdExveWFsdHkoY29kZSkgewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgdGhpcy52YWxpZGF0ZUJvb2tpbmdQZW5kaW5nID0gdHJ1ZTsKICAgICAgICAgICAgICAgIGxldCByZXN1bHQgPSBhd2FpdCB0aGlzLnZhbGlkYXRlQm9va2luZyhjb2RlKTsKICAgICAgICAgICAgICAgIGlmICghcmVzdWx0LmRhdGEuc3RhdHVzKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbnZhbGlkU01TTXNnID0gcmVzdWx0Py5kYXRhPy5tZXNzYWdlCiAgICAgICAgICAgICAgICAgICAgICAgID8gcmVzdWx0LmRhdGEubWVzc2FnZQogICAgICAgICAgICAgICAgICAgICAgICA6ICJWYWxpZGF0aW9uIG5vdCByZWNvZ25pemVkLiBQbGVhc2UgdHJ5IGFnYWluIjsKICAgICAgICAgICAgICAgICAgICB0aGlzLmludmFsaWRTTVNEaWFsb2cgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIHRoaXMudmFsaWRhdGVCb29raW5nUGVuZGluZyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIHRoaXMucG9zdFRvTG9nZ2VyQVBJKHsKICAgICAgICAgICAgICAgICAgICAgICAgcGhvbmU6IHRoaXMuYm9va2luZ0RldGFpbHMudXNlci5jb250YWN0LAogICAgICAgICAgICAgICAgICAgICAgICByZWZJZDogdGhpcy5ib29raW5nSWQsCiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yOiB0aGlzLmludmFsaWRTTVNNc2csCiAgICAgICAgICAgICAgICAgICAgICAgIGljb246ICJyZWRlZW0iLAogICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXNUZXh0OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgIkVycm9yIGluIHZhbGlkYXRpbmcgdGhlIHNlc3Npb24gb24gZW50ZXJpbmcgdmFsaWRhdGlvbiBjb2RlIC0gIiArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnZhbGlkYXRlQm9va2luZ1R4dCwKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5wb3N0VG9Mb2dnZXJBUEkoewogICAgICAgICAgICAgICAgICAgICAgICBwaG9uZTogdGhpcy5ib29raW5nRGV0YWlscy51c2VyLmNvbnRhY3QsCiAgICAgICAgICAgICAgICAgICAgICAgIHJlZklkOiB0aGlzLmJvb2tpbmdJZCwKICAgICAgICAgICAgICAgICAgICAgICAgaWNvbjogInJlZGVlbSIsCiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1c1RleHQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAiUGFya2VyIHZhbGlkYXRlZCB0aGUgc2Vzc2lvbiBzdWNjZXNzZnVsbHkgYnkgZW50ZXJpbmcgdmFsaWRhdGlvbiBjb2RlIC0gIiArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnZhbGlkYXRlQm9va2luZ1R4dCwKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB0aGlzLnZhbGlkYXRlQm9va2luZ1BlbmRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICB0aGlzLnZhbGlkYXRlQm9va2luZ0RpYWxvZyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgKICAgICAgICAgICAgICAgICAgICAgICAgIlNFVF9WQUxJREFURURfTUVSQ0hBTlQiLAogICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQ/LmRhdGE/Lm1lcmNoYW50TmFtZQogICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLnJlcGxhY2UoeyBwYXRoOiAiL3ZhbGlkYXRlc3VjY2VzcyIgfSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7CiAgICAgICAgICAgICAgICB0aGlzLnZhbGlkYXRlQm9va2luZ1BlbmRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgY2xvc2VBbGVydERpYWxvZygpIHsKICAgICAgICAgICAgdGhpcy5hbGVydERpYWxvZyA9IGZhbHNlOwoKICAgICAgICB9LAogICAgICAgIGdldFBheW1lbnRUeXBlKHR5cGUpIHsKICAgICAgICAgICAgc3dpdGNoICh0eXBlKSB7CiAgICAgICAgICAgICAgICBjYXNlICdBUFBMRV9QQVknOiB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdBcHBsZSBQYXknOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2FzZSAnR09PR0xFX1BBWSc6IHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ0dvb2dsZSBQYXknCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjYXNlICdDYXJkJzogewogICAgICAgICAgICAgICAgICAgIHJldHVybiAnQ2FyZCcKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0sCgogICAgICAgIC8qKiBAbWV0aG9kcyB0byBmaW5kIHRoZSB0aGUgVVRDIGRhdGUgCiAgICBAcGFyYW1zIHRoZSBib29raW5ncyBkYXRlIHZhbHVlICwgdHlwZSAnZXhpdCAoMjAyMy0xMi0wMiknIG9yICdmb3JtYXRkYXRlICgxMi8wMi8yMDIzKScKICAgICovCiAgICAgICAgZm9ybWF0VVRDRGVmYXVsdERhdGUoZGVmYXVsdERhdGUsIHR5cGUpIHsKICAgICAgICAgICAgbGV0IHV0Y0RhdGUgPSBuZXcgRGF0ZShkZWZhdWx0RGF0ZSAqIDEwMDApLnRvVVRDU3RyaW5nKCk7CiAgICAgICAgICAgIGxldCBtb250aCA9IHV0Y0RhdGUuc3BsaXQoIiwiKVsxXS5zcGxpdCgiICIpWzJdOyAvLyBKYW4KICAgICAgICAgICAgbGV0IGRhdGUgPSB1dGNEYXRlLnNwbGl0KCIsIilbMV0uc3BsaXQoIiAiKVsxXTsgLy8gMjcKICAgICAgICAgICAgbGV0IHllYXIgPSB1dGNEYXRlLnNwbGl0KCIsIilbMV0uc3BsaXQoIiAiKVszXTsgLy8yMDIzCiAgICAgICAgICAgIGxldCBleGl0Zm9ybWF0ID0gZm9ybWF0KG5ldyBEYXRlKG1vbnRoICsgIiAiICsgZGF0ZSArICIgIiArIHllYXIpLCAneXl5eS1NTS1kZCcpOwogICAgICAgICAgICBsZXQgZGF0ZWZvcm1hdCA9IGZvcm1hdChuZXcgRGF0ZShtb250aCArICIgIiArIGRhdGUgKyAiICIgKyB5ZWFyKSwgIk1NL2RkL3l5eXkiKTsKICAgICAgICAgICAgcmV0dXJuIHR5cGUgPT09ICJleGl0IiA/IGV4aXRmb3JtYXQgOiBkYXRlZm9ybWF0OwoKICAgICAgICB9LAogICAgICAgIGZvcm1hdEV4aXREYXRlVGltZSh0aW1lLCB2YWwpIHsKICAgICAgICAgICAgaWYgKHRpbWUgIT09IG51bGwgJiYgdGltZSAhPT0gdW5kZWZpbmVkICYmIHRpbWUgIT0gJycpIHsKICAgICAgICAgICAgICAgIGxldCB1dGNEYXRlID0gbmV3IERhdGUodGltZSAqIDEwMDApLnRvVVRDU3RyaW5nKCk7IC8vIldlZCwgMjcgSmFuIDIwMjEgMTM6NTk6MDQgR01UIgogICAgICAgICAgICAgICAgbGV0IG1vbnRoID0gdXRjRGF0ZS5zcGxpdCgiLCIpWzFdLnNwbGl0KCIgIilbMl07IC8vIEphbgogICAgICAgICAgICAgICAgbGV0IGRhdGUgPSB1dGNEYXRlLnNwbGl0KCIsIilbMV0uc3BsaXQoIiAiKVsxXTsgLy8gMjcKICAgICAgICAgICAgICAgIGxldCB5ZWFyID0gdXRjRGF0ZS5zcGxpdCgiLCIpWzFdLnNwbGl0KCIgIilbM107CiAgICAgICAgICAgICAgICBsZXQgaHIgPSB1dGNEYXRlLnNwbGl0KCIsIilbMV0uc3BsaXQoIiAiKVs0XS5zcGxpdCgiOiIpWzBdOyAvLyAxMwogICAgICAgICAgICAgICAgbGV0IG1pbiA9IHV0Y0RhdGUuc3BsaXQoIiwiKVsxXS5zcGxpdCgiICIpWzRdLnNwbGl0KCI6IilbMV07IC8vNTkKICAgICAgICAgICAgICAgIGxldCBmb3JtYXRIciA9IE51bWJlcihocikgPiAxMiA/IE51bWJlcihocikgLSAxMiA6IE51bWJlcihocik7IC8vIDEKICAgICAgICAgICAgICAgIGZvcm1hdEhyID0gTnVtYmVyKGZvcm1hdEhyKSA+PSAxMCA/IE51bWJlcihmb3JtYXRIcikgOiBmb3JtYXRIcjsgLy8wMQogICAgICAgICAgICAgICAgbGV0IGFtT3JwbSA9IE51bWJlcihocikgPj0gMTIgPyAicCIgOiAiYSI7IC8vUE0KICAgICAgICAgICAgICAgIGxldCBhbXBtID0gTnVtYmVyKGhyKSA+PSAxMiA/ICJQTSIgOiAiQU0iOwogICAgICAgICAgICAgICAgc3dpdGNoICh2YWwpIHsKICAgICAgICAgICAgICAgICAgICBjYXNlICdob3VyJzogewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZm9ybWF0SHIgKyBhbU9ycG07CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGNhc2UgJ21pbnMnOiB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBtaW4KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgY2FzZSAnZGF0ZSc6IHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1vbnRoICsgIiAiICsgZGF0ZSArICIsICIgKyB5ZWFyICsgIiAiICsgZm9ybWF0SHIgKyAiOiIgKyBtaW4gKyAiICIgKyBhbXBtOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICAvL0phbiAyNywgMDE6NTkgUE0KICAgICAgICB9LAogICAgICAgIGFzeW5jIGV4dGVuZEVEVCgpIHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIC8vZm9ybWF0KG5ldyBEYXRlKHRoaXMuY2hlY2tpbkRhdGUpLCAieXl5eS1NTS1kZCdUJ0hIOm1tOnNzIik7CiAgICAgICAgICAgICAgICB0aGlzLmV4dGVuZEJ0bkxvYWRpbmcgPSB0cnVlOwogICAgICAgICAgICAgICAgbGV0IGV4aXREYXRlVGltZSA9IHRoaXMuZXh0RGF0ZUFuZFRpbWUgIT0gbnVsbCB8fCB0aGlzLmV4dERhdGVBbmRUaW1lICE9PSB1bmRlZmluZWQgfHwgdGhpcy5leHREYXRlQW5kVGltZSAhPSAiIiA/CiAgICAgICAgICAgICAgICAgICAgZm9ybWF0KG5ldyBEYXRlKHRoaXMuZXh0RGF0ZUFuZFRpbWUpLCAneXl5eS9NTS9kZCcpCiAgICAgICAgICAgICAgICAgICAgKwogICAgICAgICAgICAgICAgICAgICIgIiArCiAgICAgICAgICAgICAgICAgICAgZm9ybWF0KG5ldyBEYXRlKHRoaXMuZXh0RGF0ZUFuZFRpbWUpLCAnaGg6bW0gYScpIDogIiI7CiAgICAgICAgICAgICAgICBsZXQgZGF0YSA9IHsKICAgICAgICAgICAgICAgICAgICBiaWQ6IHRoaXMuYm9va2luZ0RldGFpbHM/LmJvb2tpbmc/LmJpZCwKICAgICAgICAgICAgICAgICAgICBleHRlbmRlZFRpbWU6IGZvcm1hdChuZXcgRGF0ZShleGl0RGF0ZVRpbWUpLCAieXl5eS1NTS1kZCBISDptbTpzcyIpLy8iMjAyMi0xMi0yOVQwMjoyNjowMC4wMDAiLAogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIHZhciBleHRlbmRTZXNzaW9uUmVzID0gYXdhaXQgQVBJSGVscGVyKAogICAgICAgICAgICAgICAgICAgICJQT1NUIiwKICAgICAgICAgICAgICAgICAgICAiL2FwaS92MS9wcmVwYWlkL2V4dGVuZFJlc2VydmF0aW9uIiwgZGF0YQogICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgIGlmIChleHRlbmRTZXNzaW9uUmVzPy5kYXRhPy5tZXNzYWdlID09ICJTdWNjZXNzZnVsbHkgdXBkYXRlZCEhIikgewogICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuZ2V0Qm9va2luZ0RldGFpbHMoKTsKICAgICAgICAgICAgICAgICAgICB0aGlzLmV4dGVuZEJ0bkxvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICB0aGlzLmV4dGVuc2lvbkRpYWxvZyA9IGZhbHNlOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLmFsZXJ0RGlhbG9nID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICB0aGlzLmFsZXJ0TXNnID0gZXh0ZW5kU2Vzc2lvblJlcz8uZGF0YT8ubWVzc2FnZSB8fCAiRXJyb3IgaW4gZXh0ZW5kaW5nIHRoZSBzZXNzaW9uIgogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICAgICAgICAgIHRoaXMuZXh0ZW5kQnRuTG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpOwogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBmb3JtYXREYXRlKGRhdGUpIHsKICAgICAgICAgICAgbGV0IHN0cmluZ2RhdGUgPSBkYXRlLnRvU3RyaW5nKCk7CiAgICAgICAgICAgIGlmICghZGF0ZSkgcmV0dXJuIG51bGw7CgogICAgICAgICAgICBjb25zdCBbeWVhciwgbW9udGgsIGRheV0gPSBzdHJpbmdkYXRlLnNwbGl0KCItIik7CiAgICAgICAgICAgIHJldHVybiBgJHttb250aH0vJHtkYXl9LyR7eWVhcn1gOwogICAgICAgIH0sCiAgICAgICAgcGFyc2VEYXRlKGRhdGUpIHsKICAgICAgICAgICAgaWYgKCFkYXRlKSByZXR1cm4gbnVsbDsKCiAgICAgICAgICAgIGNvbnN0IFttb250aCwgZGF5LCB5ZWFyXSA9IGRhdGUuc3BsaXQoIi8iKTsKICAgICAgICAgICAgcmV0dXJuIGAke3llYXJ9LSR7bW9udGgucGFkU3RhcnQoMiwgIjAiKX0tJHtkYXkucGFkU3RhcnQoMiwgIjAiKX1gOwogICAgICAgIH0sCiAgICAgICAgYXN5bmMgb3BlbkV4dERpYWxvZygpIHsKCiAgICAgICAgICAgIC8vIGF3YWl0IGF4aW9zLmdldCgKICAgICAgICAgICAgLy8gICBwcm9jZXNzLmVudi5WVUVfQVBQX09OX0RFTUFORF9VUkwgKyAiLyIgKyAiMzI4OTkiKyAiLmpzb24iCiAgICAgICAgICAgIC8vICk7CiAgICAgICAgICAgIHRoaXMuc2V0RGVmYXVsdERhdGUoKTsKICAgICAgICAgICAgdGhpcy5zZXREYXRlUGlja2VyKCk7CiAgICAgICAgICAgIC8vIHRoaXMuc2V0VGltZVBpY2tlcigpOwogICAgICAgICAgICB0aGlzLmV4dGVuc2lvbkRpYWxvZyA9IHRydWU7CiAgICAgICAgICAgIHRoaXMuZXh0ZW5kQnRuTG9hZGluZyA9IGZhbHNlOwogICAgICAgIH0sCgogICAgICAgIHNldERlZmF1bHREYXRlKCkgewogICAgICAgICAgICB0aGlzLmV4aXREYXRlID0gdGhpcy5ib29raW5nRGV0YWlscz8uYm9va2luZz8ucmV2RW5kID8gdGhpcy5mb3JtYXRVVENEZWZhdWx0RGF0ZSh0aGlzLmJvb2tpbmdEZXRhaWxzPy5ib29raW5nPy5yZXZFbmQKICAgICAgICAgICAgICAgICwgJ2V4aXQnKSA6ICIiOwogICAgICAgICAgICAvL2Zvcm1hdHRlZCBleGl0IGRhdGUgdmFsdWUgdG8gZGlzcGxheQogICAgICAgICAgICB0aGlzLmRhdGVGb3JtYXR0ZWQgPQogICAgICAgICAgICAgICAgdGhpcy5ib29raW5nRGV0YWlscz8uYm9va2luZz8ucmV2RW5kID8gdGhpcy5mb3JtYXRVVENEZWZhdWx0RGF0ZSh0aGlzLmJvb2tpbmdEZXRhaWxzPy5ib29raW5nPy5yZXZFbmQKICAgICAgICAgICAgICAgICAgICAsICdmb3JtYXQnKSA6ICIiOwoKICAgICAgICAgICAgbGV0IHNlbGVjdGVkSG91cnMgPSBmb3JtYXQoCiAgICAgICAgICAgICAgICBuZXcgRGF0ZSh0aGlzLmZvcm1hdEV4aXREYXRlVGltZSh0aGlzLmJvb2tpbmdEZXRhaWxzPy5ib29raW5nPy5yZXZFbmQsICdkYXRlJykpLAogICAgICAgICAgICAgICAgImhoIgogICAgICAgICAgICApCiAgICAgICAgICAgIGxldCBzZWxlY3RlZE1pbnMgPSBmb3JtYXQoCiAgICAgICAgICAgICAgICBuZXcgRGF0ZSh0aGlzLmZvcm1hdEV4aXREYXRlVGltZSh0aGlzLmJvb2tpbmdEZXRhaWxzPy5ib29raW5nPy5yZXZFbmQsICdkYXRlJykpLAogICAgICAgICAgICAgICAgIm1tIgogICAgICAgICAgICApCiAgICAgICAgICAgIGxldCBzZWxlY3RlZEFNUE0gPSBmb3JtYXQoCiAgICAgICAgICAgICAgICBuZXcgRGF0ZSh0aGlzLmZvcm1hdEV4aXREYXRlVGltZSh0aGlzLmJvb2tpbmdEZXRhaWxzPy5ib29raW5nPy5yZXZFbmQsICdkYXRlJykpLAogICAgICAgICAgICAgICAgImFhYSIKICAgICAgICAgICAgKQogICAgICAgICAgICB0aGlzLmV4aXRUaW1lU2VsZWN0ZWQgPSBPYmplY3QuYXNzaWduKHRoaXMuZXhpdFRpbWVTZWxlY3RlZCwgewogICAgICAgICAgICAgICAgaGg6IHNlbGVjdGVkSG91cnMsCiAgICAgICAgICAgICAgICBtbTogc2VsZWN0ZWRNaW5zLAogICAgICAgICAgICAgICAgYTogc2VsZWN0ZWRBTVBNLAogICAgICAgICAgICB9KTsKICAgICAgICAgICAgdGhpcy5kYXRlVGltZUNoYW5nZSgpOwogICAgICAgIH0sCiAgICAgICAgb25UaW1lUGlja2VyQ2hhbmdlKGV2ZW50KSB7CiAgICAgICAgICAgIHRoaXMuc3RvcFRpbWUgPQogICAgICAgICAgICAgICAgZXZlbnQuZGF0YS5ISCAhPSAiIiAmJiBldmVudC5kYXRhLm1tICE9ICIiICYmIGV2ZW50LmRhdGEuQSAhPSAiIgogICAgICAgICAgICAgICAgICAgID8gZXZlbnQuZGF0YS5ISCArICI6IiArIGV2ZW50LmRhdGEubW0gKyAiOjAwIgogICAgICAgICAgICAgICAgICAgIDogIiI7CiAgICAgICAgICAgIGxldCBjdXJyZW5UaW1lID0gdGhpcy5ib29raW5nRGV0YWlscz8uem9uZT8udGltZXpvbmUKICAgICAgICAgICAgICAgID8gZm9ybWF0KAogICAgICAgICAgICAgICAgICAgIGRhdGVUb1RpbWVab25lRGF0ZShuZXcgRGF0ZSgpLCB0aGlzLmJvb2tpbmdEZXRhaWxzPy56b25lPy50aW1lem9uZSksCiAgICAgICAgICAgICAgICAgICAgInl5eXktTU0tZGQgSEg6bW06c3MiCiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICA6IGZvcm1hdChuZXcgRGF0ZSgpLCAieXl5eS1NTS1kZCAgSEg6bW06c3MiKTsKICAgICAgICAgICAgaWYgKAogICAgICAgICAgICAgICAgZXZlbnQuZGF0YS5ISCAhPSAiaGgiICYmCiAgICAgICAgICAgICAgICBldmVudC5kYXRhLm1tICE9ICJtbSIgJiYKICAgICAgICAgICAgICAgIHRoaXMuc3RvcFRpbWUgIT0gIiIgJiYKICAgICAgICAgICAgICAgIG5ldyBEYXRlKHRoaXMuZXhpdERhdGUgKyAiICIgKyB0aGlzLnN0b3BUaW1lKS5nZXRUaW1lKCkgPgogICAgICAgICAgICAgICAgbmV3IERhdGUoY3VycmVuVGltZSkuZ2V0VGltZSgpCiAgICAgICAgICAgICkgewoKICAgICAgICAgICAgICAgIHRoaXMuZGF0ZVRpbWVDaGFuZ2UoKTsKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgc2V0RGF0ZVBpY2tlcigpIHsKICAgICAgICAgICAgLy9zZXQgdGhlIG1pbmltdW0gZGF0ZSB0byB0b2RheSBkYXRlKHpvbmUgdGltZSB6b25lIGRhdGUpCiAgICAgICAgICAgIHRoaXMubWluRGF0ZSA9IHRoaXMuYm9va2luZ0RldGFpbHMuem9uZS50aW1lem9uZQogICAgICAgICAgICAgICAgPwogICAgICAgICAgICAgICAgZm9ybWF0KG5ldyBEYXRlKHRoaXMuZm9ybWF0RXhpdERhdGVUaW1lKHRoaXMuYm9va2luZ0RldGFpbHM/LmJvb2tpbmc/LnJldkVuZCwgJ2RhdGUnKSksICd5eXl5LU1NLWRkJykKICAgICAgICAgICAgICAgIDoKICAgICAgICAgICAgICAgIGZvcm1hdChkYXRlVG9UaW1lWm9uZURhdGUoCiAgICAgICAgICAgICAgICAgICAgbmV3IERhdGUoTnVtYmVyKHRoaXMuYm9va2luZ0RldGFpbHM/LmJvb2tpbmc/LnJldkVuZCkgKiAxMDAwIC0gTnVtYmVyKHRoaXMuYm9va2luZ0RldGFpbHMuem9uZS50aW1lem9uZW9mZnNldCkgKiAxMDAwKQogICAgICAgICAgICAgICAgICAgICwgdGhpcy5ib29raW5nRGV0YWlscy56b25lLnRpbWV6b25lCiAgICAgICAgICAgICAgICApLCAneXl5eS1NTS1kZCcpOwogICAgICAgICAgICAvL2NhbGN1bGF0ZSBtYXggcGFya2lnbiB0aW1lIGluIHNlY29uZHMKICAgICAgICAgICAgbGV0IG1heFBhcmsgPSB0aGlzLmJvb2tpbmdEZXRhaWxzICE9IG51bGwgPyB0aGlzLmJvb2tpbmdEZXRhaWxzLnpvbmUubWF4UGFya2luZ1RpbWUgOiBudWxsOwoKICAgICAgICAgICAgbGV0IGFkZGVkZGF5cyA9IGFkZERheXMobmV3IERhdGUoKSwgbWF4UGFyay5kYXlzKTsKICAgICAgICAgICAgbGV0IGFkZGVkaG91cnMgPSBhZGRIb3VycyhhZGRlZGRheXMsIG1heFBhcmsuaG91cnMpOwogICAgICAgICAgICBsZXQgYWRkZWRtaW5zID0gYWRkTWludXRlcyhhZGRlZGhvdXJzLCBtYXhQYXJrLm1pbnV0ZXMpOwogICAgICAgICAgICAvL2dldCBtYXggZGF0ZSBpbiBzZWNvbmRzIGJhc2VkIG9uIG1heCBwYXJraW5nIHRpbWUKICAgICAgICAgICAgbGV0IG1heFpvbmVEYXRlID0gYWRkZWRtaW5zOwogICAgICAgICAgICB0aGlzLm1heERhdGUgPSB0aGlzLmJvb2tpbmdEZXRhaWxzPy56b25lLnRpbWV6b25lCiAgICAgICAgICAgICAgICA/IGZvcm1hdCgKICAgICAgICAgICAgICAgICAgICBkYXRlVG9UaW1lWm9uZURhdGUoCiAgICAgICAgICAgICAgICAgICAgICAgIG1heFpvbmVEYXRlLAogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmJvb2tpbmdEZXRhaWxzPy56b25lPy50aW1lem9uZQogICAgICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICAgICAgInl5eXktTU0tZGQiCiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICA6IGZvcm1hdChuZXcgRGF0ZSgpLCAieXl5eS1NTS1kZCIpOwogICAgICAgICAgICB0aGlzLmV4aXREYXRlID0gZm9ybWF0KAogICAgICAgICAgICAgICAgbmV3IERhdGUodGhpcy5mb3JtYXRFeGl0RGF0ZVRpbWUodGhpcy5ib29raW5nRGV0YWlscz8uYm9va2luZz8ucmV2RW5kLCAnZGF0ZScpKSwKICAgICAgICAgICAgICAgICJ5eXl5LU1NLWRkIgogICAgICAgICAgICApCiAgICAgICAgICAgIC8vZ2V0IG1heCBkYXRlIHdpdGggdGltZSBhbmQgc2V0IGl0IHRvIG1heERhdGVUaW1lCiAgICAgICAgICAgIHRoaXMubWF4RGF0ZVRpbWUgPSB0aGlzLmJvb2tpbmdEZXRhaWxzPy56b25lPy50aW1lem9uZQogICAgICAgICAgICAgICAgPyBmb3JtYXQoCiAgICAgICAgICAgICAgICAgICAgZGF0ZVRvVGltZVpvbmVEYXRlKAogICAgICAgICAgICAgICAgICAgICAgICBuZXcgRGF0ZShtYXhab25lRGF0ZSksCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYm9va2luZ0RldGFpbHM/LnpvbmU/LnRpbWV6b25lCiAgICAgICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgICAgICAieXl5eS1NTS1kZCBoaDptbSBhYWFhYSIKICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIDogZm9ybWF0KG5ldyBEYXRlKCksICJ5eXl5LU1NLWRkIGhoOm1tIGFhYWFhIik7CiAgICAgICAgfSwKICAgICAgICBzZXRUaW1lUGlja2VyKHZhbCkgewogICAgICAgICAgICAvLyBsZXQgY3VycmVudFRpbWVNZXJpZGlhbiA9IHRoaXMub25EZW1hbmRab25lRGV0YWlscy50aW1lWm9uZQogICAgICAgICAgICAvLyA/IGZvcm1hdCgKICAgICAgICAgICAgLy8gICAgIGRhdGVUb1RpbWVab25lRGF0ZSgKICAgICAgICAgICAgLy8gICAgICAgYWRkTWludXRlcyhuZXcgRGF0ZSgpLCAxNSksCiAgICAgICAgICAgIC8vICAgICAgIHRoaXMub25EZW1hbmRab25lRGV0YWlscy50aW1lWm9uZQogICAgICAgICAgICAvLyAgICAgKSwKICAgICAgICAgICAgLy8gICAgICJhYWEiCiAgICAgICAgICAgIC8vICAgKQogICAgICAgICAgICAvLyA6IGZvcm1hdChuZXcgRGF0ZSgpLCAiYWFhIik7CiAgICAgICAgICAgIC8vIGxldCBjdXJyZW50SHIgPSB0aGlzLmJvb2tpbmdEZXRhaWxzLnpvbmUudGltZXpvbmUKICAgICAgICAgICAgLy8gICA/IGZvcm1hdCgKICAgICAgICAgICAgLy8gICAgIGRhdGVUb1RpbWVab25lRGF0ZSgKICAgICAgICAgICAgLy8gICAgICAgbmV3IERhdGUoKSwKICAgICAgICAgICAgLy8gICAgICAgdGhpcy5ib29raW5nRGV0YWlscy56b25lLnRpbWV6b25lCiAgICAgICAgICAgIC8vICAgICApLAogICAgICAgICAgICAvLyAgICAgImgiCiAgICAgICAgICAgIC8vICAgKQogICAgICAgICAgICAvLyAgIDogZm9ybWF0KG5ldyBEYXRlKCksICJoIik7CiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGN1cnJlbnRIcikKCiAgICAgICAgICAgIC8vIGdldCB0aGUgdG9kYXlzIGN1cnJlbnQgem9uZSB0aW1lCiAgICAgICAgICAgIGxldCBleGl0ZGF0ZWhvdXIgPSB0aGlzLmZvcm1hdEV4aXREYXRlVGltZSh0aGlzLmJvb2tpbmdEZXRhaWxzLmJvb2tpbmcucmV2RW5kLCAnaG91cicpCiAgICAgICAgICAgIC8vIGxldCBleGl0ZGF0ZW1pbnMgPSB0aGlzLmZvcm1hdEV4aXREYXRlVGltZSh0aGlzLmJvb2tpbmdEZXRhaWxzLmJvb2tpbmcuZXhpdHRpbWUsICdtaW5zJykKICAgICAgICAgICAgbGV0IGV4aXRkYXRldGltZSA9IHRoaXMuZm9ybWF0RXhpdERhdGVUaW1lKHRoaXMuYm9va2luZ0RldGFpbHMuYm9va2luZy5yZXZFbmQsICdkYXRlJykKCiAgICAgICAgICAgIC8vIGxldCBjdXJyZW50VGltZSA9IHRoaXMuYm9va2luZ0RldGFpbHMuem9uZS50aW1lem9uZQogICAgICAgICAgICAvLyAgID8gZm9ybWF0KAogICAgICAgICAgICAvLyAgICAgZGF0ZVRvVGltZVpvbmVEYXRlKAogICAgICAgICAgICAvLyAgICAgICBuZXcgRGF0ZSgpLAogICAgICAgICAgICAvLyAgICAgICB0aGlzLmJvb2tpbmdEZXRhaWxzLnpvbmUudGltZXpvbmUKICAgICAgICAgICAgLy8gICAgICksCiAgICAgICAgICAgIC8vICAgICAiaGFhYWFhIgogICAgICAgICAgICAvLyAgICkKICAgICAgICAgICAgLy8gICA6IGZvcm1hdChuZXcgRGF0ZSgpLCAiaGFhYWFhIik7CiAgICAgICAgICAgIC8vIHNldCB0aGUgaHIgcmFuZ2UKICAgICAgICAgICAgaWYgKAogICAgICAgICAgICAgICAgdGhpcy5leGl0RGF0ZSA9PQogICAgICAgICAgICAgICAgZm9ybWF0KAogICAgICAgICAgICAgICAgICAgIG5ldyBEYXRlKGV4aXRkYXRldGltZSksCiAgICAgICAgICAgICAgICAgICAgInl5eXktTU0tZGQiCiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICkgewogICAgICAgICAgICAgICAgdGhpcy50aW1lUGlja2VySHJSYW5nZSA9IFsKICAgICAgICAgICAgICAgICAgICBbZXhpdGRhdGVob3VyID09ICIxMmEiID8gIjBhIiA6IGV4aXRkYXRlaG91ciwgIjExcCJdLAogICAgICAgICAgICAgICAgXTsKICAgICAgICAgICAgfQogICAgICAgICAgICAvLyBpZiBtYXhkYXRlID09IGV4aXQgZGF0ZQogICAgICAgICAgICBlbHNlIGlmICgKICAgICAgICAgICAgICAgIHRoaXMubWF4RGF0ZVRpbWUgIT0gbnVsbCAmJgogICAgICAgICAgICAgICAgdGhpcy5tYXhEYXRlVGltZS5zcGxpdCgiICIpWzBdID09IHRoaXMuZXhpdERhdGUKICAgICAgICAgICAgKSB7CiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLm1heERhdGVUaW1lKQogICAgICAgICAgICAgICAgbGV0IHRpbWUgPSB0aGlzLm1heERhdGVUaW1lLnNwbGl0KCIgIilbMV07CiAgICAgICAgICAgICAgICBsZXQgaHIgPSB0aW1lLnNwbGl0KCI6IilbMF0gKyB0aGlzLm1heERhdGVUaW1lLnNwbGl0KCIgIilbMl07CiAgICAgICAgICAgICAgICBociA9PSAiMTJhIgogICAgICAgICAgICAgICAgICAgID8gIjBhIgogICAgICAgICAgICAgICAgICAgIDogdGltZS5zcGxpdCgiOiIpWzBdICsgdGhpcy5tYXhEYXRlVGltZS5zcGxpdCgiICIpWzJdOwogICAgICAgICAgICAgICAgdGhpcy50aW1lUGlja2VySHJSYW5nZSA9IFtbIjBhIiwgaHJdXTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICB0aGlzLnRpbWVQaWNrZXJIclJhbmdlID0gbnVsbDsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgbGV0IGhySW5QTSA9IHRoaXMuYm9va2luZ0RldGFpbHMuem9uZS50aW1lem9uZQogICAgICAgICAgICAgICAgPyBmb3JtYXQoCiAgICAgICAgICAgICAgICAgICAgbmV3IERhdGUoZXhpdGRhdGV0aW1lKSwKICAgICAgICAgICAgICAgICAgICAiaGhhYWEiCiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICA6IGZvcm1hdChuZXcgRGF0ZShleGl0ZGF0ZXRpbWUpLCAiaGhhYWEiKTsKICAgICAgICAgICAgLy8gc2V0IHRoZSBtaW4gcmFuZ2UKICAgICAgICAgICAgLy8gY29uc29sZS5sb2coaHJJblBNPT12YWw/LmhoICsgdmFsPy5hKTsKICAgICAgICAgICAgaWYgKAogICAgICAgICAgICAgICAgdGhpcy5leGl0RGF0ZSA9PQogICAgICAgICAgICAgICAgZm9ybWF0KAogICAgICAgICAgICAgICAgICAgIG5ldyBEYXRlKGV4aXRkYXRldGltZSksCiAgICAgICAgICAgICAgICAgICAgInl5eXktTU0tZGQiCiAgICAgICAgICAgICAgICApICYmCiAgICAgICAgICAgICAgICB2YWwgIT0gbnVsbCAmJgogICAgICAgICAgICAgICAgaHJJblBNID09IHZhbD8uaGggKyB2YWwuYQogICAgICAgICAgICApIHsKICAgICAgICAgICAgICAgIHRoaXMudGltZVBpY2tlck1pblJhbmdlID0gWwogICAgICAgICAgICAgICAgICAgIFsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ib29raW5nRGV0YWlscy56b25lLnRpbWV6b25lCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/ICgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JtYXQoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBEYXRlKGV4aXRkYXRldGltZSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJtbSIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGZvcm1hdChuZXcgRGF0ZShleGl0ZGF0ZXRpbWUpLCAibW0iKSwKICAgICAgICAgICAgICAgICAgICAgICAgNTksCiAgICAgICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgIF07CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSBpZiAoCiAgICAgICAgICAgICAgICB0aGlzLm1heERhdGVUaW1lICE9IG51bGwgJiYKICAgICAgICAgICAgICAgIHRoaXMubWF4RGF0ZVRpbWUuc3BsaXQoIiAiKVswXSA9PSB0aGlzLmV4aXREYXRlCiAgICAgICAgICAgICkgewogICAgICAgICAgICAgICAgbGV0IHRpbWUgPSB0aGlzLm1heERhdGVUaW1lLnNwbGl0KCIgIilbMV07CiAgICAgICAgICAgICAgICBsZXQgaHIgPSB0aW1lLnNwbGl0KCI6IilbMF0gKyB0aGlzLm1heERhdGVUaW1lLnNwbGl0KCIgIilbMl07CiAgICAgICAgICAgICAgICBpZiAodmFsICE9IG51bGwgJiYgaHIgPT0gdmFsPy5oaCArIHZhbC5hWzBdKSB7CiAgICAgICAgICAgICAgICAgICAgbGV0IG1pbiA9IHRpbWUuc3BsaXQoIjoiKVsxXTsKICAgICAgICAgICAgICAgICAgICB0aGlzLnRpbWVQaWNrZXJNaW5SYW5nZSA9IFtbMCwgbWluXV07CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHRoaXMudGltZVBpY2tlck1pblJhbmdlID0gW1swLCA1OV1dOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgLy8gLy8gfSAKCiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICB0aGlzLnRpbWVQaWNrZXJNaW5SYW5nZSA9IFtbMCwgNTldXTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoCiAgICAgICAgICAgICAgICB0aGlzLmV4aXRUaW1lU2VsZWN0ZWQgPT0gbnVsbCAmJgogICAgICAgICAgICAgICAgdGhpcy5ib29raW5nRGV0YWlscz8uYm9va2luZz8udGltZXpvbmUgIT0gdW5kZWZpbmVkCiAgICAgICAgICAgICkgewogICAgICAgICAgICAgICAgdGhpcy50aW1lUGlja2VySHJSYW5nZSA9IFtdOwogICAgICAgICAgICAgICAgdGhpcy50aW1lUGlja2VyTWluUmFuZ2UgPSBbXTsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmV4aXRUaW1lU2VsZWN0ZWQ/LmhoID09ICIiKSB7CiAgICAgICAgICAgICAgICB0aGlzLnRpbWVQaWNrZXJNaW5SYW5nZSA9IFtdOwogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICAvLyBvbk9wZW4oKSB7CiAgICAgICAgLy8gICB0aGlzLnNldFRpbWVQaWNrZXIodGhpcy5leGl0VGltZVNlbGVjdGVkKTsKICAgICAgICAvLyB9LAogICAgICAgIG9wZW5UaW1lUGlja2VyKCkgewogICAgICAgICAgICB0aGlzLnNldFRpbWVQaWNrZXIodGhpcy5leGl0VGltZVNlbGVjdGVkKTsKICAgICAgICB9LAogICAgICAgIC8qKiBAbWV0aG9kcyB0byBmaW5kIHRoZSBlc3RpbWF0ZSByYXRlIAogICAgICAgQHBhcmFtcyBzdGFydERhdGUgLCBzdG9wRGF0ZSx6Y29kZSwgdHlwZSAsIGVudl9vdmVyUmlkZQogICAgICAgKi8KCiAgICAgICAgYXN5bmMgZGF0ZVRpbWVDaGFuZ2UoKSB7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAvLyBmb3JtYXQobmV3IERhdGUodGhpcy5jaGVja2luRGF0ZSksICJ5eXl5LU1NLWRkJ1QnSEg6bW06c3MiKTsKICAgICAgICAgICAgICAgIHRoaXMuc2V0VGltZVBpY2tlcigpOwoKICAgICAgICAgICAgICAgIHRoaXMuc3RhcnREYXRlID0gdGhpcy5ib29raW5nRGV0YWlscz8uem9uZT8udGltZXpvbmUKICAgICAgICAgICAgICAgICAgICA/IGZvcm1hdCgKICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZVRvVGltZVpvbmVEYXRlKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IERhdGUoKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYm9va2luZ0RldGFpbHM/LnpvbmU/LnRpbWV6b25lCiAgICAgICAgICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICAgICAgICAgICJ5eXl5LU1NLWRkJ1QnSEg6bW06c3MiCiAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgIDogZm9ybWF0KG5ldyBEYXRlKCksICJ5eXl5LU1NLWRkJ1QnSEg6bW06c3MiKTsKICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMuZXhpdFRpbWVTZWxlY3RlZD8uaGgrIjoiK3RoaXMuZXhpdFRpbWVTZWxlY3RlZC5tbSsiOjAwIikKICAgICAgICAgICAgICAgIC8vIHRoaXMuZXhpdERhdGUgKyAiVDIzOjU5OjAwIjsKICAgICAgICAgICAgICAgIGxldCBzZWxlY3RlZEhvdXJzID0gdGhpcy5leGl0VGltZVNlbGVjdGVkPy5oaDsKICAgICAgICAgICAgICAgIGxldCBzZWxlY3RlZE1pbnMgPSB0aGlzLmV4aXRUaW1lU2VsZWN0ZWQ/Lm1tOwogICAgICAgICAgICAgICAgbGV0IHNlbGVjdGVkQU1QTSA9IHRoaXMuZXhpdFRpbWVTZWxlY3RlZD8uYTsKICAgICAgICAgICAgICAgIGlmIChzZWxlY3RlZEFNUE0gPT0gInBtIiAmJiBOdW1iZXIoc2VsZWN0ZWRIb3VycykgPCAxMikgewogICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkSG91cnMgPSAoTnVtYmVyKHNlbGVjdGVkSG91cnMpICsgMTIpLnRvU3RyaW5nKCk7CiAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRIb3VycyA9IHNlbGVjdGVkSG91cnMgPT09ICcwJyA/IHNlbGVjdGVkSG91cnMgPSAnMDAnIDogc2VsZWN0ZWRIb3VyczsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmIChzZWxlY3RlZEFNUE0gPT0gImFtIiAmJiBOdW1iZXIoc2VsZWN0ZWRIb3VycykgPT0gMTIpIHsKICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZEhvdXJzID0gKE51bWJlcihzZWxlY3RlZEhvdXJzKSAtIDEyKS50b1N0cmluZygpCiAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRIb3VycyA9IHNlbGVjdGVkSG91cnMgPT09ICcwJyA/IHNlbGVjdGVkSG91cnMgPSAnMDAnIDogc2VsZWN0ZWRIb3VyczsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGxldCBleGl0dGltZSA9IE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKHRoaXMuYm9va2luZ0RldGFpbHMsICd6b25lJykgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwodGhpcy5ib29raW5nRGV0YWlscy56b25lLCAnaXNHYXRlZCcpICYmIHRoaXMuYm9va2luZ0RldGFpbHM/LnpvbmU/LmlzR2F0ZWQgPT0gJzAnID8gJ1QnICsgc2VsZWN0ZWRIb3VycyArICI6IiArIHNlbGVjdGVkTWlucyArICI6MDAiIDogIlQyMzo1OTowMCIKICAgICAgICAgICAgICAgIGxldCBzdG9wRGF0ZSA9IHRoaXMuZXhpdERhdGUgKyBleGl0dGltZTsKCiAgICAgICAgICAgICAgICBsZXQgZGF0YSA9IHsKICAgICAgICAgICAgICAgICAgICBzdGFydEF0OiB0aGlzLnN0YXJ0RGF0ZSwKICAgICAgICAgICAgICAgICAgICBzdG9wQXQ6IHN0b3BEYXRlLAogICAgICAgICAgICAgICAgICAgIHpjb2RlOiB0aGlzLmJvb2tpbmdEZXRhaWxzPy56b25lPy56Y29kZSwKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB0aGlzLmV4dGVuZEJ0bkxvYWRpbmcgPSB0cnVlOwogICAgICAgICAgICAgICAgdGhpcy5hZGRQYXltZW50QnRuTG9hZGluZyA9IHRydWU7CiAgICAgICAgICAgICAgICB2YXIgZ2V0UmF0ZSA9IGF3YWl0IEFQSUhlbHBlcigiUE9TVCIsICIvYXBpL3YyL2dldFJhdGUiLCBkYXRhKTsKICAgICAgICAgICAgICAgIHRoaXMuZXh0ZW5kQnRuTG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICAgICAgdGhpcy5leHREYXRlQW5kVGltZSA9IHN0b3BEYXRlOwogICAgICAgICAgICAgICAgLy9jb25kaXRpb24gdG8gY2hlY2sgaWYgdGhlIGRhdGUgdGltZSBzZWxlY3RlZCBpcyBsZXNzZXIgdGhhbiBjdXJyZW50IHRpbWUKICAgICAgICAgICAgICAgIGlmICghZ2V0UmF0ZT8uZGF0YT8uc3RhdHVzICYmICF0aGlzLmdldFJhdGVDYWxsKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNhYmxlQWRkUGF5bWVudEJ0biA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5hbGVydERpYWxvZyA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5hbGVydE1zZyA9CiAgICAgICAgICAgICAgICAgICAgICAgIGdldFJhdGU/LmRhdGE/Lm1lc3NhZ2UgfHwgIkVycm9yIGluIGdldHRpbmcgcmF0ZSBkZXRhaWxzIjsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNhYmxlQWRkUGF5bWVudEJ0biA9IGZhbHNlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdGhpcy5lc3RpbWF0ZSA9IE9iamVjdC5hc3NpZ24oe30sIGdldFJhdGU/LmRhdGE/LmRhdGEpOwogICAgICAgICAgICAgICAgLy8gZXN0aW1hdGVkVmFsICE9ICIiICYmCiAgICAgICAgICAgICAgICAvLyBlc3RpbWF0ZWRWYWwgIT0gbnVsbCAmJgogICAgICAgICAgICAgICAgLy8gZXN0aW1hdGVkVmFsICE9IHVuZGVmaW5lZAogICAgICAgICAgICAgICAgLy8gICA/IE51bWJlcihlc3RpbWF0ZWRWYWwpLnRvRml4ZWQoMikKICAgICAgICAgICAgICAgIC8vICAgOiBlc3RpbWF0ZWRWYWw7CiAgICAgICAgICAgICAgICB0aGlzLmFkZFBheW1lbnRCdG5Mb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgICAgICAgICB0aGlzLmFkZFBheW1lbnRCdG5Mb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7CiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIGNhbGN1bGF0ZUV4aXREYXRlVGltZSgpIHsKICAgICAgICAgICAgaWYgKHRoaXMuYm9va2luZ0RldGFpbHM/LnpvbmU/LnRpbWV6b25lKSB7CiAgICAgICAgICAgICAgICAvLyAgIHZhciBjdXJyZW50VGltZSA9CiAgICAgICAgICAgICAgICAvLyBuZXcgRGF0ZSgpLmdldFRpbWUoKSArCiAgICAgICAgICAgICAgICAvLyAoTnVtYmVyKHRoaXMuYm9va2luZ0RldGFpbHMuem9uZS50aW1lem9uZW9mZnNldCkgKiAxMDAwICsKICAgICAgICAgICAgICAgIC8vICAgTnVtYmVyKHRoaXMuYm9va2luZ0RldGFpbHMuem9uZS50aW1lem9uZWRzdG9mZnNldCkgKiAxMDAwKTsKICAgICAgICAgICAgICAgIHZhciBjdXJyZW50VGltZSA9CiAgICAgICAgICAgICAgICAgICAgbmV3IERhdGUoKS5nZXRUaW1lKCkgKwogICAgICAgICAgICAgICAgICAgIChOdW1iZXIodGhpcy5ib29raW5nRGV0YWlscy56b25lLnRpbWV6b25lb2Zmc2V0KSAqIDEwMDAgKwogICAgICAgICAgICAgICAgICAgICAgICBOdW1iZXIodGhpcy5ib29raW5nRGV0YWlscy56b25lLnRpbWV6b25lZHN0b2Zmc2V0KSAqIDEwMDApOwogICAgICAgICAgICAgICAgdmFyIGV4aXRUaW1lID0KICAgICAgICAgICAgICAgICAgICBuZXcgRGF0ZSh0aGlzLmJvb2tpbmdEZXRhaWxzLmJvb2tpbmcucmVzZXJ2YXRpb25FbmREYXRlKS5nZXRUaW1lKCk7CiAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoIlNFVF9FWElUX1RJTUVfVElNRV9TVEFUVVMiLCB0aGlzLmV4aXREYXRlVGltZSA8IDApOwogICAgICAgICAgICAgICAgZXhpdFRpbWUgLSBjdXJyZW50VGltZSA8IDAKICAgICAgICAgICAgICAgICAgICA/IGNsZWFySW50ZXJ2YWwodGhpcy5leGl0SW50ZXJ2YWwpCiAgICAgICAgICAgICAgICAgICAgOiAiIjsKICAgICAgICAgICAgICAgIHJldHVybiBleGl0VGltZSAtIGN1cnJlbnRUaW1lOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiAwCgogICAgICAgIH0sCiAgICAgICAgaG90ZWxHdWVzdCgpIHsKICAgICAgICAgICAgbGV0IHVybCA9IHdpbmRvdy5sb2NhdGlvbi5vcmlnaW4gKyAnP3pjb2RlPScgKyB0aGlzLmJvb2tpbmdEZXRhaWxzPy56b25lPy5sb2NhdGlvbkNvZGUgKyAnIy9jcmVhdGVzZXNzaW9uJzsKICAgICAgICAgICAgbGV0IHBsYXRlID0gdGhpcy5ib29raW5nRGV0YWlscz8uYm9va2luZz8udmVoaWNsZU5vIHx8ICIiOwogICAgICAgICAgICBsZXQgcGhvbmUgPSB0aGlzLmJvb2tpbmdEZXRhaWxzPy51c2VyPy5jb250YWN0IHx8ICIiOwogICAgICAgICAgICBsZXQgYmlkID0gdGhpcy5ib29raW5nRGV0YWlscz8uYm9va2luZz8uYmlkIHx8ICIiOwogICAgICAgICAgICBsZXQgY2hlY2tpbmRhdGUgPSB0aGlzLmJvb2tpbmdEZXRhaWxzPy5ib29raW5nPy5lbnRyeXRpbWUgfHwgIiI7CiAgICAgICAgICAgIGxldCBwYXJhbXMgPSAnLz9waG9uZT0nICsgcGhvbmUgKyAnJmJpZD0nICsgYmlkICsgJyZwbGF0ZT0nICsgcGxhdGUgKyAnJmVudHJ5dGltZT0nICsgY2hlY2tpbmRhdGU7CiAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZXBsYWNlKHVybCArIHBhcmFtcyk7CiAgICAgICAgICAgIC8vIHRoaXMuJHJvdXRlci5yZXBsYWNlKHtwYXRoOicvJ30pOwoKICAgICAgICB9LAogICAgICAgIGNsb3NlUVJDb2RlRGlhbG9nKCkgewogICAgICAgICAgICB0aGlzLnFyQ29kZURpYWxvZyA9IGZhbHNlOwogICAgICAgICAgICB0aGlzLmNhbWVyYVN0YXR1cyA9IGZhbHNlOwogICAgICAgIH0sCiAgICAgICAgY2xvc2VWYWxpZGF0aW9uUVJEaWFsb2coKSB7CiAgICAgICAgICAgIHRoaXMudmFsaWRhdGlvbkNhbWVyYVN0YXR1cyA9IGZhbHNlOwogICAgICAgICAgICB0aGlzLnZhbGlkYXRlQm9va2luZ0RpYWxvZyA9IHRydWU7CiAgICAgICAgICAgIHRoaXMudmFsaWRhdGVRUkNvZGVEaWFsb2cgPSBmYWxzZTsKICAgICAgICB9LAogICAgICAgIHJlU2NhblFSKCkgewogICAgICAgICAgICB0aGlzLmludmFsaWRRUkRpYWxvZyA9IGZhbHNlOwogICAgICAgICAgICB0aGlzLmNhbWVyYVN0YXR1cyA9IHRydWU7CiAgICAgICAgfSwKICAgICAgICByZVNjYW5WYWxpZGF0aW9uUVIoKSB7CiAgICAgICAgICAgIHRoaXMuaW52YWxpZFZhbGlkYXRpb25RUkRpYWxvZyA9IGZhbHNlOwogICAgICAgICAgICB0aGlzLnZhbGlkYXRpb25DYW1lcmFTdGF0dXMgPSB0cnVlOwogICAgICAgIH0sCiAgICAgICAgb3BlblNtc1FyU2Nhbm5lcigpIHsKICAgICAgICAgICAgdGhpcy5xckNvZGVEaWFsb2cgPSB0cnVlOwogICAgICAgICAgICB0aGlzLmNhbWVyYVN0YXR1cyA9IHRydWU7CiAgICAgICAgfSwKICAgICAgICBvcGVuU01TRGlhbG9nKCkgewogICAgICAgICAgICB0aGlzLnNtc0RpYWxvZyA9IHRydWU7CiAgICAgICAgICAgIGxldCBleGl0TGFuZXMgPQogICAgICAgICAgICAgICAgdGhpcy5leGl0R2F0ZUNvZGVzLmxlbmd0aCA+IDAKICAgICAgICAgICAgICAgICAgICA/IHRoaXMuZXhpdEdhdGVDb2Rlcy5maWx0ZXIoKGEpID0+IGEuaXNQZWRlc3RyaWFuID09ICIwIikKICAgICAgICAgICAgICAgICAgICA6IFtdOwogICAgICAgICAgICBpZiAoCiAgICAgICAgICAgICAgICB0aGlzLmJvb2tpbmdEZXRhaWxzPy5ib29raW5nPy5wcmVQb3B1bGF0ZUdhdGVDb2RlcyAmJgogICAgICAgICAgICAgICAgdGhpcy5ib29raW5nRGV0YWlscy5ib29raW5nLnByZVBvcHVsYXRlR2F0ZUNvZGVzID09ICIxIgogICAgICAgICAgICApIHsKICAgICAgICAgICAgICAgIHRoaXMuc21zVGV4dCA9IGV4aXRMYW5lcy5sZW5ndGggPT0gMSA/IGV4aXRMYW5lc1swXS5zbXNfY29kZSA6ICIiOwogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBzY3JvbGxUb1N1Ym1pdCgpIHsKICAgICAgICAgICAgY29uc3QgZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjc3VibWl0c21zYnRuIik7CiAgICAgICAgICAgIGlmIChlbCkgewogICAgICAgICAgICAgICAgZWwuc2Nyb2xsSW50b1ZpZXcodGhpcy5vcHRpb25zKTsKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgc2Nyb2xsVG9WYWxpZGF0ZUJ0bigpIHsKICAgICAgICAgICAgY29uc3QgZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjdmFsaWRhdGVib29raW5nYnRuIik7CiAgICAgICAgICAgIGlmIChlbCkgewogICAgICAgICAgICAgICAgZWwuc2Nyb2xsSW50b1ZpZXcodGhpcy5vcHRpb25zKTsKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgY2FsY3VsYXRlR3JhY2VQZXJpb2RUaW1lKCkgewogICAgICAgICAgICB2YXIgY3VycmVudFRpbWUgPQogICAgICAgICAgICAgICAgbmV3IERhdGUoKS5nZXRUaW1lKCkgKwogICAgICAgICAgICAgICAgKE51bWJlcih0aGlzLmJvb2tpbmdEZXRhaWxzLnpvbmUudGltZXpvbmVvZmZzZXQpICogMTAwMCArCiAgICAgICAgICAgICAgICAgICAgTnVtYmVyKHRoaXMuYm9va2luZ0RldGFpbHMuem9uZS50aW1lem9uZWRzdG9mZnNldCkgKiAxMDAwKTsKICAgICAgICAgICAgdmFyIGdyYWNlUGVyaW9kVGltZSA9CiAgICAgICAgICAgICAgICAoTnVtYmVyKHRoaXMuYm9va2luZ0RldGFpbHMuYm9va2luZy5lbnRyeXRpbWUpICsKICAgICAgICAgICAgICAgICAgICBOdW1iZXIodGhpcy5ib29raW5nRGV0YWlscy5ib29raW5nLmdyYWNlUGVyaW9kKSkgKgogICAgICAgICAgICAgICAgMTAwMDsgLy8KICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KAogICAgICAgICAgICAgICAgIlNFVF9HUkFDRV9QRVJJT0RfVElNRV9TVEFUVVMiLAogICAgICAgICAgICAgICAgdGhpcy5ncmFjZVBlcmlvZFRpbWUgPD0gMAogICAgICAgICAgICApOwogICAgICAgICAgICByZXR1cm4gZ3JhY2VQZXJpb2RUaW1lIC0gY3VycmVudFRpbWU7CiAgICAgICAgfSwKICAgICAgICBjYWxjdWxhdGVWYWxpZGF0ZWRUaW1lKCkgewogICAgICAgICAgICB2YXIgY3VycmVudFRpbWUgPQogICAgICAgICAgICAgICAgbmV3IERhdGUoKS5nZXRUaW1lKCkgKwogICAgICAgICAgICAgICAgKE51bWJlcih0aGlzLmJvb2tpbmdEZXRhaWxzLnpvbmUudGltZXpvbmVvZmZzZXQpICogMTAwMCArCiAgICAgICAgICAgICAgICAgICAgTnVtYmVyKHRoaXMuYm9va2luZ0RldGFpbHMuem9uZS50aW1lem9uZWRzdG9mZnNldCkgKiAxMDAwKTsKICAgICAgICAgICAgdmFyIHZhbGlkYXRlZFRpbWUgPSB0aGlzLmJvb2tpbmdEZXRhaWxzLmJvb2tpbmcudHlwZSA9PSAiMTMiID8KICAgICAgICAgICAgICAgIChOdW1iZXIodGhpcy5ib29raW5nRGV0YWlscy5ib29raW5nLnJldlN0YXJ0KSArCiAgICAgICAgICAgICAgICAgICAgTnVtYmVyKHRoaXMuYm9va2luZ0RldGFpbHMuYm9va2luZy5jb3Vwb25WYWxpZFRpbWUpKSAqCiAgICAgICAgICAgICAgICAxMDAwIDogKE51bWJlcih0aGlzLmJvb2tpbmdEZXRhaWxzLmJvb2tpbmcuZW50cnl0aW1lKSArCiAgICAgICAgICAgICAgICAgICAgTnVtYmVyKHRoaXMuYm9va2luZ0RldGFpbHMuYm9va2luZy5jb3Vwb25WYWxpZFRpbWUpKSAqCiAgICAgICAgICAgICAgICAxMDAwCiAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgiU0VUX1ZBTElEQVRFRF9USU1FX1NUQVRVUyIsIHRoaXMudmFsaWRhdGVkVGltZSA8IDApOwogICAgICAgICAgICB2YWxpZGF0ZWRUaW1lIC0gY3VycmVudFRpbWUgPCAwCiAgICAgICAgICAgICAgICA/IGNsZWFySW50ZXJ2YWwodGhpcy52YWxpZGF0ZWRJbnRlcnZhbCkKICAgICAgICAgICAgICAgIDogIiI7CiAgICAgICAgICAgIHJldHVybiB2YWxpZGF0ZWRUaW1lIC0gY3VycmVudFRpbWU7CiAgICAgICAgfSwKICAgICAgICBjYWxjdWxhdGVQYXJraW5nVGltZShwYXJraW5nU3RhcnRUaW1lLCBncmFjZVBlcmlvZCwgem9uZSkgewogICAgICAgICAgICB2YXIgY3VycmVudFRpbWUgPSBuZXcgRGF0ZSgpOwogICAgICAgICAgICBjdXJyZW50VGltZS50b0xvY2FsZVN0cmluZygiZW4tVVMiLCB7IHRpbWVab25lOiB6b25lIH0pOwogICAgICAgICAgICB2YXIgZGlmZmVyZW5jZVRpbWUgPQogICAgICAgICAgICAgICAgZ3JhY2VQZXJpb2QgPiAwCiAgICAgICAgICAgICAgICAgICAgPyBjdXJyZW50VGltZS5nZXRUaW1lKCkgLSBwYXJraW5nU3RhcnRUaW1lICogMTAwMCAvLyAtIGdyYWNlUGVyaW9kICogMTAwMCB0byBleGNsdWRlIGdyYWNlIHBlcmlvZAogICAgICAgICAgICAgICAgICAgIDogY3VycmVudFRpbWUuZ2V0VGltZSgpIC0gcGFya2luZ1N0YXJ0VGltZSAqIDEwMDA7CiAgICAgICAgICAgIGxldCBwYXJrZWRUaW1lID0gdGhpcy5zZWNvbmRzVG9IbXMoZGlmZmVyZW5jZVRpbWUgLyAxMDAwKTsKICAgICAgICAgICAgcmV0dXJuIHBhcmtlZFRpbWU7CiAgICAgICAgfSwKICAgICAgICBzZWNvbmRzVG9IbXModGltZURpZmZlcmVuY2UpIHsKICAgICAgICAgICAgdmFyIGQgPSBOdW1iZXIodGltZURpZmZlcmVuY2UpOwogICAgICAgICAgICAvLyBpZiAodGltZURpZmZlcmVuY2UgPj0gODY0MDApIHsKICAgICAgICAgICAgLy8gICB2YXIgZGF5cyA9IE1hdGguZmxvb3IoZCAvIDg2NDAwKTsKICAgICAgICAgICAgLy8gICB2YXIgaHJzID0gTWF0aC5mbG9vcigoZCAlIDg2NDAwKSAvIDM2MDApOwogICAgICAgICAgICAvLyAgIHZhciBkYXlEaXNwbGF5ID0KICAgICAgICAgICAgLy8gICAgIGRheXMgPiAwID8gZGF5cyArIChkYXlzID09IDEgPyAiIGRheSAiIDogIiBkYXlzICIpIDogIiI7CiAgICAgICAgICAgIC8vICAgdmFyIGhyRGlzcGxheSA9IGhycyA+IDAgPyBocnMgKyAoaHJzID09IDEgPyAiIGhyICIgOiAiIGhycyAiKSA6ICIiOwogICAgICAgICAgICAvLyAgIHJldHVybiBkYXlEaXNwbGF5ICsgaHJEaXNwbGF5OwogICAgICAgICAgICAvLyB9CiAgICAgICAgICAgIHZhciBoID0gTWF0aC5mbG9vcihkIC8gMzYwMCk7CiAgICAgICAgICAgIHZhciBtID0gTWF0aC5mbG9vcigoZCAlIDM2MDApIC8gNjApOwogICAgICAgICAgICAvLyB2YXIgcyA9IE1hdGguZmxvb3IoZCAlIDM2MDAgJSA2MCk7CiAgICAgICAgICAgIHZhciBoRGlzcGxheSA9IGggPiAwID8gaCArICIgaCAiIDogIiI7CiAgICAgICAgICAgIHZhciBtRGlzcGxheSA9IG0gPiAwID8gbSArIChtID09IDEgPyAiIG1pbiAiIDogIiBtaW4iKSA6ICIgMCBtaW4iOwogICAgICAgICAgICAvLyB2YXIgc0Rpc3BsYXkgPSBzID4gMCA/IHMgKyAocyA9PSAxID8gIiBzZWNvbmQiIDogIiBzZWNvbmRzIikgOiAiIjsKICAgICAgICAgICAgcmV0dXJuIGhEaXNwbGF5ICsgbURpc3BsYXk7CiAgICAgICAgfSwKICAgICAgICBpc0NoZWNrb3V0RW5hYmxlZCh0eXBlKSB7CiAgICAgICAgICAgIGlmIChPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbCh0aGlzLmJvb2tpbmdEZXRhaWxzLCAnZXhpdE9wdGlvbnMnKSAmJiB0aGlzLmJvb2tpbmdEZXRhaWxzLmV4aXRPcHRpb25zLmxlbmd0aCAhPSAwKSB7CiAgICAgICAgICAgICAgICBsZXQgb3B0aW9uID0gdGhpcy5ib29raW5nRGV0YWlscy5leGl0T3B0aW9ucy5zb21lKAogICAgICAgICAgICAgICAgICAgICh0KSA9PiB0LnRlY2hUeXBlID09IHR5cGUKICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICByZXR1cm4gb3B0aW9uOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCiAgICAgICAgfSwKICAgICAgICBhc3luYyBnZXRCb29raW5nRGV0YWlscygpIHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIGxldCBib29raW5nSWQgPSB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUuc3Vic3RyaW5nKDMpOwogICAgICAgICAgICAgICAgdmFyIGJvb2tpbmdEZXRhaWxzID0gYXdhaXQgQVBJSGVscGVyKAogICAgICAgICAgICAgICAgICAgICJHRVQiLAogICAgICAgICAgICAgICAgICAgICIvYXBpL3YxL2Jvb2tpbmcvY29uZmlnLyIgKyBib29raW5nSWQKICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoCiAgICAgICAgICAgICAgICAgICAgIlNFVF9CT09LSU5HX0RFVEFJTFMiLAogICAgICAgICAgICAgICAgICAgIGJvb2tpbmdEZXRhaWxzLmRhdGE/LmRhdGEgPyBib29raW5nRGV0YWlscy5kYXRhLmRhdGEgOiBudWxsCiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpOwogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBhc3luYyBnZXRwZWRlc3RyaWFuQWNjZXNzKCkgewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgLy8gbGV0IGJvb2tpbmdJZCA9IHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZS5zdWJzdHJpbmcoMyk7CiAgICAgICAgICAgICAgICB2YXIgcGVkZXNBY2Nlc3MgPSBhd2FpdCBBUElIZWxwZXIoCiAgICAgICAgICAgICAgICAgICAgIlBPU1QiLAogICAgICAgICAgICAgICAgICAgICJhcGkvdjEvb3Blbi8iICsgdGhpcy5ib29raW5nSWQsCiAgICAgICAgICAgICAgICAgICAgeyBzb3VyY2U6ICJ3ZWJWaWV3IiB9CiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2cocGVkZXNBY2Nlc3MpCiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhwZWRlc0FjY2Vzcz8uZGF0YT8uc3RhdHVzKQogICAgICAgICAgICAgICAgaWYgKHBlZGVzQWNjZXNzPy5kYXRhPy5zdGF0dXMpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLnBvc3RUb0xvZ2dlckFQSSh7CiAgICAgICAgICAgICAgICAgICAgICAgIHBob25lOiB0aGlzLmJvb2tpbmdEZXRhaWxzLnVzZXIuY29udGFjdCwKICAgICAgICAgICAgICAgICAgICAgICAgcmVmSWQ6IHRoaXMuYm9va2luZ0lkLAogICAgICAgICAgICAgICAgICAgICAgICBpbWFnZTogImh0dHBzOi8vc3BwbC1kZXYuZGl2cnQuY28vaW1nL3BlZGVzdHJhaW5fZG9vci4wNDJmMDkyNy5wbmciLAogICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXNUZXh0OiAiUGFya2VyIGFjY2Vzc2VkIHBlZGVzdHJpYW4gZG9vciBzdWNjZXNzZnVsbHkuIiwKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB0aGlzLiRyb3V0ZXIucmVwbGFjZSh7IHBhdGg6ICIvcGVkZXN0cmlhbmFjY2VzcyIgfSk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHRoaXMucGVkZXN0cmlhbkFjY2Vzc1RleHQgPSBwZWRlc0FjY2Vzcy5kYXRhLm1lc3NhZ2U7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5wb3N0VG9Mb2dnZXJBUEkoewogICAgICAgICAgICAgICAgICAgICAgICBwaG9uZTogdGhpcy5ib29raW5nRGV0YWlscy51c2VyLmNvbnRhY3QsCiAgICAgICAgICAgICAgICAgICAgICAgIHJlZklkOiB0aGlzLmJvb2tpbmdJZCwKICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3I6IHRoaXMucGVkZXN0cmlhbkFjY2Vzc1RleHQsCiAgICAgICAgICAgICAgICAgICAgICAgIGltYWdlOiAiaHR0cHM6Ly9zcHBsLWRldi5kaXZydC5jby9pbWcvcGVkZXN0cmFpbl9kb29yLjA0MmYwOTI3LnBuZyIsCiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1c1RleHQ6ICJFcnJvciBpbiBvcGVuaW5nIHRoZSBwZWRlc3RyaWFuIGRvb3IuIiwKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB0aGlzLnBlZGVzdHJpYW5BY2Nlc3NEaWFsb2cgPSB0cnVlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vIHRoaXMuJHJvdXRlci5yZXBsYWNlKHsgcGF0aDogIi9wZWRlc3RyaWFuYWNjZXNzLyIrdHJ1ZSB9KTsKICAgICAgICB9LAogICAgICAgIG5hdmlnYXRlVG9BZGRQYXltZW50KCkgewogICAgICAgICAgICB0aGlzLnBvc3RUb0xvZ2dlckFQSSh7CiAgICAgICAgICAgICAgICBwaG9uZTogdGhpcy5ib29raW5nRGV0YWlscy51c2VyLmNvbnRhY3QsCiAgICAgICAgICAgICAgICByZWZJZDogdGhpcy5ib29raW5nSWQsCiAgICAgICAgICAgICAgICBzdGF0dXNUZXh0OiAiUGFya2VyIGNsaWNrZWQgb24gQUREIENSRURJVCBDQVJEIGJ0bi4iLAogICAgICAgICAgICB9KTsKICAgICAgICAgICAgdGhpcy4kcm91dGVyLnJlcGxhY2UoeyBwYXRoOiAiL2FkZHBheW1lbnQiIH0pOwogICAgICAgIH0sCiAgICAgICAgb3BlblZhbGlkYXRpb25EaWFsb2coKSB7CiAgICAgICAgICAgIHRoaXMudmFsaWRhdGVCb29raW5nRGlhbG9nID0gdHJ1ZTsKICAgICAgICB9LAogICAgICAgIGFzeW5jIG9wZW5TTVNBcHAoKSB7CiAgICAgICAgICAgIHRoaXMucG9zdFRvTG9nZ2VyQVBJKHsKICAgICAgICAgICAgICAgIHBob25lOiB0aGlzLmJvb2tpbmdEZXRhaWxzLnVzZXIuY29udGFjdCwKICAgICAgICAgICAgICAgIHJlZklkOiB0aGlzLmJvb2tpbmdJZCwKICAgICAgICAgICAgICAgIHN0YXR1c1RleHQ6ICJQYXJrZXIgY2xpY2tlZCBvbiBTTVMgc3VibWl0IGJ0bi4iLAogICAgICAgICAgICB9KTsKICAgICAgICAgICAgaWYgKHRoaXMuc21zVGV4dCA9PSBudWxsIHx8IHRoaXMuc21zVGV4dCA9PSAiIikgewogICAgICAgICAgICAgICAgdGhpcy5pbnZhbGlkU01TTXNnID0gIkdhdGUgY29kZSBjYW5ub3QgYmUgZW1wdHkiOwogICAgICAgICAgICAgICAgdGhpcy5pbnZhbGlkU01TRGlhbG9nID0gdHJ1ZTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5zbXNQZW5kaW5nID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICB2YXIgcHJlVmFsaWRhdGVTZW5kU01TID0gYXdhaXQgQVBJSGVscGVyKCJQT1NUIiwgIi9yZWNlaXZlX3NtcyIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgYmlkOiB0aGlzLmJvb2tpbmdJZCwKICAgICAgICAgICAgICAgICAgICAgICAgRnJvbTogdGhpcy5ib29raW5nRGV0YWlscy51c2VyLmNvbnRhY3QsCiAgICAgICAgICAgICAgICAgICAgICAgIFRleHQ6IHRoaXMuc21zVGV4dCwKICAgICAgICAgICAgICAgICAgICAgICAgVG86IHRoaXMuYm9va2luZ0RldGFpbHMuem9uZS5Ub01vYmlsZU5vLAogICAgICAgICAgICAgICAgICAgICAgICBNb2RlOiAiU01TIiwKICAgICAgICAgICAgICAgICAgICAgICAgd2ViVmlldzogIjEiLAogICAgICAgICAgICAgICAgICAgICAgICBwcmVWYWxpZGF0ZTogMSwKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB0aGlzLnNtc1BlbmRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICBpZiAoCiAgICAgICAgICAgICAgICAgICAgICAgIHByZVZhbGlkYXRlU2VuZFNNUz8uZGF0YT8uc3RhdHVzICYmCiAgICAgICAgICAgICAgICAgICAgICAgIHByZVZhbGlkYXRlU2VuZFNNUy5kYXRhLnN0YXR1cwogICAgICAgICAgICAgICAgICAgICkgewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNtc0RpYWxvZyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRyb3V0ZXIucmVwbGFjZSh7IHBhdGg6ICIvc3VjY2VzcyIgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc2VuZFNNUyA9IGF3YWl0IEFQSUhlbHBlcigiUE9TVCIsICIvcmVjZWl2ZV9zbXMiLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmlkOiB0aGlzLmJvb2tpbmdJZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBGcm9tOiB0aGlzLmJvb2tpbmdEZXRhaWxzLnVzZXIuY29udGFjdCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUZXh0OiB0aGlzLnNtc1RleHQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVG86IHRoaXMuYm9va2luZ0RldGFpbHMuem9uZS5Ub01vYmlsZU5vLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1vZGU6ICJTTVMiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdlYlZpZXc6ICIxIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNlbmRTTVM/LmRhdGE/LnN0YXR1cyAmJiBzZW5kU01TLmRhdGEuc3RhdHVzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zbXNEaWFsb2cgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBvc3RUb0xvZ2dlckFQSSh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBob25lOiB0aGlzLmJvb2tpbmdEZXRhaWxzLnVzZXIuY29udGFjdCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmSWQ6IHRoaXMuYm9va2luZ0lkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpY29uOiAibG9nb3V0IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzVGV4dDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJQYXJrZXIgY2hlY2tlZCBvdXQgc3VjY2Vzc2Z1bGx5IHVzaW5nIFNNUyAtICIgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zbXNUZXh0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmludmFsaWRTTVNNc2cgPSBzZW5kU01TPy5kYXRhPy5tZXNzYWdlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gc2VuZFNNUy5kYXRhLm1lc3NhZ2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiAiUGxlYXNlIHRyeSBhZ2FpbiI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbnZhbGlkU01TRGlhbG9nID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBvc3RUb0xvZ2dlckFQSSh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBob25lOiB0aGlzLmJvb2tpbmdEZXRhaWxzLnVzZXIuY29udGFjdCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmSWQ6IHRoaXMuYm9va2luZ0lkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvcjogdGhpcy5pbnZhbGlkU01TTXNnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpY29uOiAibG9nb3V0IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzVGV4dDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJFcnJvciBvY2N1cmVkIHdoaWxlIGNoZWNraW5nIG91dCB1c2luZyBTTVMgLSAiICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc21zVGV4dCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW52YWxpZFNNU01zZyA9IHByZVZhbGlkYXRlU2VuZFNNUz8uZGF0YT8ubWVzc2FnZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBwcmVWYWxpZGF0ZVNlbmRTTVMuZGF0YS5tZXNzYWdlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6ICJQbGVhc2UgdHJ5IGFnYWluIjsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbnZhbGlkU01TRGlhbG9nID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wb3N0VG9Mb2dnZXJBUEkoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGhvbmU6IHRoaXMuYm9va2luZ0RldGFpbHMudXNlci5jb250YWN0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmSWQ6IHRoaXMuYm9va2luZ0lkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3I6IHRoaXMuaW52YWxpZFNNU01zZywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb246ICJsb2dvdXQiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzVGV4dDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiRXJyb3Igb2NjdXJlZCB3aGlsZSBjaGVja2luZyBvdXQgdXNpbmcgU01TIC0gIiArIHRoaXMuc21zVGV4dCwKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIGdldE1vYmlsZU9wZXJhdGluZ1N5c3RlbSgpIHsKICAgICAgICAgICAgdmFyIHVzZXJBZ2VudCA9IG5hdmlnYXRvci51c2VyQWdlbnQgfHwgbmF2aWdhdG9yLnZlbmRvciB8fCB3aW5kb3cub3BlcmE7CiAgICAgICAgICAgIC8vIFdpbmRvd3MgUGhvbmUgbXVzdCBjb21lIGZpcnN0IGJlY2F1c2UgaXRzIFVBIGFsc28gY29udGFpbnMgIkFuZHJvaWQiCiAgICAgICAgICAgIGlmICgvd2luZG93cyBwaG9uZS9pLnRlc3QodXNlckFnZW50KSkgewogICAgICAgICAgICAgICAgcmV0dXJuICJXaW5kb3dzIFBob25lIjsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKC9hbmRyb2lkL2kudGVzdCh1c2VyQWdlbnQpKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gIkFuZHJvaWQiOwogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyBpT1MgZGV0ZWN0aW9uIGZyb206IGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9hLzkwMzk4ODUvMTc3NzEwCiAgICAgICAgICAgIGlmICgvaVBhZHxpUGhvbmV8aVBvZC8udGVzdCh1c2VyQWdlbnQpICYmICF3aW5kb3cuTVNTdHJlYW0pIHsKICAgICAgICAgICAgICAgIHJldHVybiAiaU9TIjsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gInVua25vd24iOwogICAgICAgIH0sCiAgICAgICAgZ2V0RXhpdEljb24oZXhpdElkKSB7CiAgICAgICAgICAgIGxldCBleGl0RGV0YWlscyA9IHRoaXMuYm9va2luZ0RldGFpbHMuZXhpdE9wdGlvbnMuZmluZCgKICAgICAgICAgICAgICAgIChwKSA9PiBwLnRlY2hUeXBlID09IGV4aXRJZAogICAgICAgICAgICApOwogICAgICAgICAgICByZXR1cm4gZXhpdERldGFpbHMuaWNvbjsKICAgICAgICB9LAogICAgICAgIGdldEV4aXRUZXh0KGV4aXRJZCkgewogICAgICAgICAgICBsZXQgZXhpdERldGFpbHMgPSB0aGlzLmJvb2tpbmdEZXRhaWxzLmV4aXRPcHRpb25zLmZpbmQoCiAgICAgICAgICAgICAgICAocCkgPT4gcC50ZWNoVHlwZSA9PSBleGl0SWQKICAgICAgICAgICAgKTsKICAgICAgICAgICAgcmV0dXJuIGV4aXREZXRhaWxzLm5hbWU7CiAgICAgICAgfSwKICAgICAgICBvcGVuRGlhbGVyQXBwKCkgewogICAgICAgICAgICB0aGlzLnBvc3RUb0xvZ2dlckFQSSh7CiAgICAgICAgICAgICAgICBwaG9uZTogdGhpcy5ib29raW5nRGV0YWlscy51c2VyLmNvbnRhY3QsCiAgICAgICAgICAgICAgICByZWZJZDogdGhpcy5ib29raW5nSWQsCiAgICAgICAgICAgICAgICBzdGF0dXNUZXh0OiAiUGFya2VyIGNsaWNrZWQgb24gZGlhbGVyIHN1Ym1pdCBidG4uIiwKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHRoaXMuZGlhbGVyRGlhbG9nID0gZmFsc2U7CiAgICAgICAgICAgIHZhciB1cmwgPSAidGVsOiIgKyB0aGlzLmJvb2tpbmdEZXRhaWxzLnpvbmUuVG9Nb2JpbGVObzsKICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSB1cmw7CiAgICAgICAgICAgIGlmICh0aGlzLmdldE1vYmlsZU9wZXJhdGluZ1N5c3RlbSgpID09ICJBbmRyb2lkIikgewogICAgICAgICAgICAgICAgd2luZG93LmNsb3NlKCk7CiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIHR1cm5DYW1lcmFPbigpIHsKICAgICAgICAgICAgdGhpcy5jYW1lcmEgPSAiYXV0byI7CiAgICAgICAgfSwKCiAgICAgICAgdHVybkNhbWVyYU9mZigpIHsKICAgICAgICAgICAgdGhpcy5jYW1lcmEgPSAib2ZmIjsKICAgICAgICB9LAogICAgICAgIHZhbGlkYXRlRGVjb2RlZFN0cmluZyhzdHIpIHsKICAgICAgICAgICAgbGV0IHZhbGlkYXRlRGl2cnRTdHIgPSBzdHIuc3RhcnRzV2l0aCgiZGl2cnQ6Ly8iKTsKICAgICAgICAgICAgbGV0IHZhbGlkYXRlTU1JRCA9IHN0ci5zcGxpdCgiLyIpWzJdID09IHRoaXMuYm9va2luZ0RldGFpbHMuYm9va2luZy5tbWlkOwogICAgICAgICAgICBsZXQgdmFsaWRhdGVNYWpvcklkID0KICAgICAgICAgICAgICAgIHN0ci5zcGxpdCgiLyIpWzNdID09IHRoaXMuYm9va2luZ0RldGFpbHMuYm9va2luZy5tYWpvcmlkOwogICAgICAgICAgICBsZXQgdmFsaWRhdGVNaW5vcklkID0gdGhpcy5ib29raW5nRGV0YWlscy5ib29raW5nLm1pbm9yX2lkcy5pbmNsdWRlcygKICAgICAgICAgICAgICAgIHN0ci5zcGxpdCgiLyIpWzRdCiAgICAgICAgICAgICk7CiAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgICB2YWxpZGF0ZURpdnJ0U3RyICYmIHZhbGlkYXRlTU1JRCAmJiB2YWxpZGF0ZU1ham9ySWQgJiYgdmFsaWRhdGVNaW5vcklkCiAgICAgICAgICAgICk7CiAgICAgICAgfSwKICAgICAgICBhc3luYyBvbkRlY29kZShkZWNvZGVkU3RyaW5nKSB7CiAgICAgICAgICAgIHZhciBzZWxmID0gdGhpczsKICAgICAgICAgICAgdGhpcy5xckNvZGUgPSBkZWNvZGVkU3RyaW5nOwogICAgICAgICAgICB0aGlzLmNhbWVyYVN0YXR1cyA9IGZhbHNlOwogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgdmFyIHByZVZhbGlkYXRlUXJSZXN1bHQgPSBhd2FpdCBBUElIZWxwZXIoCiAgICAgICAgICAgICAgICAgICAgIlBPU1QiLAogICAgICAgICAgICAgICAgICAgICIvYXBpL3YxL2NoZWNrb3V0LyIgKyB0aGlzLmJvb2tpbmdJZCwKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIGJlYWNvbklkOiBkZWNvZGVkU3RyaW5nLAogICAgICAgICAgICAgICAgICAgICAgICBwcmVWYWxpZGF0ZTogMSwKICAgICAgICAgICAgICAgICAgICAgICAgemlkOiB0aGlzLmJvb2tpbmdEZXRhaWxzLnpvbmUubG9jYXRpb25Db2RlCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgIGlmIChwcmVWYWxpZGF0ZVFyUmVzdWx0LmRhdGEuc3RhdHVzKSB7CiAgICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi4kcm91dGVyLnJlcGxhY2UoeyBwYXRoOiAiL3N1Y2Nlc3MiIH0pOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgcXJSZXN1bHQgPSBhd2FpdCBBUElIZWxwZXIoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAiUE9TVCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAiL2FwaS92MS9jaGVja291dC8iICsgdGhpcy5ib29raW5nSWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmVhY29uSWQ6IGRlY29kZWRTdHJpbmcsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgemlkOiB0aGlzLmJvb2tpbmdEZXRhaWxzLnpvbmUubG9jYXRpb25Db2RlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChxclJlc3VsdC5kYXRhLnN0YXR1cykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wb3N0VG9Mb2dnZXJBUEkoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBob25lOiBzZWxmLmJvb2tpbmdEZXRhaWxzLnVzZXIuY29udGFjdCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWZJZDogc2VsZi5ib29raW5nSWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvbjogImxvZ291dCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzVGV4dDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIlBhcmtlciBzdWNjZXNzZnVsbHkgY2hlY2tlZCBvdXQgdXNpbmcgUVIgLSAiICsgZGVjb2RlZFN0cmluZywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCJTRVRfQ0hFQ0tPVVQiLCB0cnVlKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW52YWxpZFFSTXNnID0gcXJSZXN1bHQ/LmRhdGE/Lm1lc3NhZ2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHFyUmVzdWx0LmRhdGEubWVzc2FnZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogIlBsZWFzZSB0cnkgYWdhaW4iOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbnZhbGlkUVJEaWFsb2cgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wb3N0VG9Mb2dnZXJBUEkoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBob25lOiBzZWxmLmJvb2tpbmdEZXRhaWxzLnVzZXIuY29udGFjdCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWZJZDogc2VsZi5ib29raW5nSWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3I6IHNlbGYuaW52YWxpZFFSTXNnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb246ICJsb2dvdXQiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1c1RleHQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJFcnJvciBPY2N1cmVkIHdoaWxlIGNoZWNraW5nIG91dCB1c2luZyBRUiAtICIgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWNvZGVkU3RyaW5nLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLmludmFsaWRRUk1zZyA9IHByZVZhbGlkYXRlUXJSZXN1bHQ/LmRhdGE/Lm1lc3NhZ2UKICAgICAgICAgICAgICAgICAgICAgICAgPyBwcmVWYWxpZGF0ZVFyUmVzdWx0LmRhdGEubWVzc2FnZQogICAgICAgICAgICAgICAgICAgICAgICA6ICJQbGVhc2UgdHJ5IGFnYWluIjsKICAgICAgICAgICAgICAgICAgICB0aGlzLmludmFsaWRRUkRpYWxvZyA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5wb3N0VG9Mb2dnZXJBUEkoewogICAgICAgICAgICAgICAgICAgICAgICBwaG9uZTogc2VsZi5ib29raW5nRGV0YWlscy51c2VyLmNvbnRhY3QsCiAgICAgICAgICAgICAgICAgICAgICAgIHJlZklkOiBzZWxmLmJvb2tpbmdJZCwKICAgICAgICAgICAgICAgICAgICAgICAgaWNvbjogImxvZ291dCIsCiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yOiBzZWxmLmludmFsaWRRUk1zZywKICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzVGV4dDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICJFcnJvciBPY2N1cmVkIHdoaWxlIGNoZWNraW5nIG91dCB1c2luZyBRUiAtICIgKyBkZWNvZGVkU3RyaW5nLAogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpOwogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBhc3luYyBvbkluaXQocHJvbWlzZSkgewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgYXdhaXQgcHJvbWlzZTsKICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICAgICAgICAgIGlmIChlcnJvci5uYW1lID09PSAiTm90QWxsb3dlZEVycm9yIikgewogICAgICAgICAgICAgICAgICAgIHRoaXMuaW52YWxpZFFSTXNnID0gIlBsZWFzZSBncmFudCBjYW1lcmEgYWNjZXNzIHBlcm1pc3NvbiI7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGVycm9yLm5hbWUgPT09ICJOb3RGb3VuZEVycm9yIikgewogICAgICAgICAgICAgICAgICAgIHRoaXMuaW52YWxpZFFSTXNnID0gIk5vIGNhbWVyYSBmb3VuZCBvbiB0aGlzIGRldmljZSI7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGVycm9yLm5hbWUgPT09ICJOb3RTdXBwb3J0ZWRFcnJvciIpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLmludmFsaWRRUk1zZyA9ICJTZWN1cmUgY29udGV4dCByZXF1aXJlZCAoSFRUUFMsIGxvY2FsaG9zdCkiOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChlcnJvci5uYW1lID09PSAiTm90UmVhZGFibGVFcnJvciIpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLmludmFsaWRRUk1zZyA9ICJJcyB0aGUgY2FtZXJhIGFscmVhZHkgaW4gdXNlPyBQbGVhc2UgY2hlY2suIjsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZXJyb3IubmFtZSA9PT0gIk92ZXJjb25zdHJhaW5lZEVycm9yIikgewogICAgICAgICAgICAgICAgICAgIHRoaXMuaW52YWxpZFFSTXNnID0gIkluc3RhbGxlZCBjYW1lcmEgaXMgbm90IHN1aXRhYmxlIjsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZXJyb3IubmFtZSA9PT0gIlN0cmVhbUFwaU5vdFN1cHBvcnRlZEVycm9yIikgewogICAgICAgICAgICAgICAgICAgIHRoaXMuaW52YWxpZFFSTXNnID0gIlN0cmVhbSBBUEkgaXMgbm90IHN1cHBvcnRlZCBpbiB0aGlzIGJyb3dzZXIiOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdGhpcy5pbnZhbGlkUVJEaWFsb2cgPSB0cnVlOwogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBhc3luYyBvblZhbGlkYXRlVGV4dCgpIHsKICAgICAgICAgICAgdGhpcy52YWxpZGF0ZUJvb2tpbmdQZW5kaW5nID0gdHJ1ZTsKICAgICAgICAgICAgbGV0IHJlc3VsdCA9IGF3YWl0IHRoaXMudmFsaWRhdGVCb29raW5nKHRoaXMudmFsaWRhdGVCb29raW5nVHh0KTsKICAgICAgICAgICAgaWYgKCFyZXN1bHQuZGF0YS5zdGF0dXMpIHsKICAgICAgICAgICAgICAgIHRoaXMuaW52YWxpZFNNU01zZyA9IHJlc3VsdD8uZGF0YT8ubWVzc2FnZQogICAgICAgICAgICAgICAgICAgID8gcmVzdWx0LmRhdGEubWVzc2FnZQogICAgICAgICAgICAgICAgICAgIDogIlZhbGlkYXRpb24gbm90IHJlY29nbml6ZWQuIFBsZWFzZSB0cnkgYWdhaW4iOwogICAgICAgICAgICAgICAgdGhpcy5pbnZhbGlkU01TRGlhbG9nID0gdHJ1ZTsKICAgICAgICAgICAgICAgIHRoaXMudmFsaWRhdGVCb29raW5nUGVuZGluZyA9IGZhbHNlOwogICAgICAgICAgICAgICAgdGhpcy5wb3N0VG9Mb2dnZXJBUEkoewogICAgICAgICAgICAgICAgICAgIHBob25lOiB0aGlzLmJvb2tpbmdEZXRhaWxzLnVzZXIuY29udGFjdCwKICAgICAgICAgICAgICAgICAgICByZWZJZDogdGhpcy5ib29raW5nSWQsCiAgICAgICAgICAgICAgICAgICAgZXJyb3I6IHRoaXMuaW52YWxpZFNNU01zZywKICAgICAgICAgICAgICAgICAgICBpY29uOiAicmVkZWVtIiwKICAgICAgICAgICAgICAgICAgICBzdGF0dXNUZXh0OgogICAgICAgICAgICAgICAgICAgICAgICAiRXJyb3IgaW4gdmFsaWRhdGluZyB0aGUgc2Vzc2lvbiBvbiBlbnRlcmluZyB2YWxpZGF0aW9uIGNvZGUgLSAiICsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy52YWxpZGF0ZUJvb2tpbmdUeHQsCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHRoaXMucG9zdFRvTG9nZ2VyQVBJKHsKICAgICAgICAgICAgICAgICAgICBwaG9uZTogdGhpcy5ib29raW5nRGV0YWlscy51c2VyLmNvbnRhY3QsCiAgICAgICAgICAgICAgICAgICAgcmVmSWQ6IHRoaXMuYm9va2luZ0lkLAogICAgICAgICAgICAgICAgICAgIGljb246ICJyZWRlZW0iLAogICAgICAgICAgICAgICAgICAgIHN0YXR1c1RleHQ6CiAgICAgICAgICAgICAgICAgICAgICAgICJQYXJrZXIgdmFsaWRhdGVkIHRoZSBzZXNzaW9uIHN1Y2Nlc3NmdWxseSBieSBlbnRlcmluZyB2YWxpZGF0aW9uIGNvZGUgLSAiICsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy52YWxpZGF0ZUJvb2tpbmdUeHQsCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIHRoaXMuZ29sZGVuTnVnZ2V0ID0gZmFsc2U7CiAgICAgICAgICAgICAgICB0aGlzLnZhbGlkYXRlQm9va2luZ1BlbmRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgICAgIHRoaXMudmFsaWRhdGVCb29raW5nRGlhbG9nID0gZmFsc2U7CiAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoCiAgICAgICAgICAgICAgICAgICAgIlNFVF9WQUxJREFURURfTUVSQ0hBTlQiLAogICAgICAgICAgICAgICAgICAgIHJlc3VsdD8uZGF0YT8ubWVyY2hhbnROYW1lCiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLnJlcGxhY2UoeyBwYXRoOiAiL3ZhbGlkYXRlc3VjY2VzcyIgfSk7CiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIGFzeW5jIHZhbGlkYXRlQm9va2luZyhjb2RlKSB7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBsZXQgdmFsaWRhdGVSZXN1bHQgPSBhd2FpdCBBUElIZWxwZXIoCiAgICAgICAgICAgICAgICAgICAgIlBPU1QiLAogICAgICAgICAgICAgICAgICAgICIvYXBpL3YxL3ZhbGlkYXRlLyIgKyB0aGlzLmJvb2tpbmdJZCwKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvdXBvbjogY29kZSwKICAgICAgICAgICAgICAgICAgICAgICAgemlkOiB0aGlzLmJvb2tpbmdEZXRhaWxzLnpvbmUubG9jYXRpb25Db2RlCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgIHJldHVybiB2YWxpZGF0ZVJlc3VsdDsKICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgICAgICAgICAgICAgIHJldHVybiBlcnJvcjsKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgYXN5bmMgb3BlblNjYW5WYWxpZGF0aW9uQ29kZSgpIHsKICAgICAgICAgICAgdGhpcy52YWxpZGF0ZUJvb2tpbmdEaWFsb2cgPSBmYWxzZTsKICAgICAgICAgICAgdGhpcy52YWxpZGF0ZUJvb2tpbmdUeHQgPSAiIjsKICAgICAgICAgICAgdGhpcy52YWxpZGF0ZVFSQ29kZURpYWxvZyA9IHRydWU7CiAgICAgICAgICAgIHRoaXMudmFsaWRhdGlvbkNhbWVyYVN0YXR1cyA9IHRydWU7CiAgICAgICAgfSwKICAgICAgICBhc3luYyBvblZhbGlkYXRlUVJDb2RlKGRlY29kZWRTdHJpbmcpIHsKICAgICAgICAgICAgdGhpcy52YWxpZGF0aW9uQ2FtZXJhU3RhdHVzID0gZmFsc2U7CiAgICAgICAgICAgIHRoaXMudmFsaWRhdGVRUkNvZGVQZW5kaW5nID0gdHJ1ZTsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIGxldCByZXN1bHQgPSBhd2FpdCB0aGlzLnZhbGlkYXRlQm9va2luZyhkZWNvZGVkU3RyaW5nKTsKICAgICAgICAgICAgICAgIGlmICghcmVzdWx0LmRhdGEuc3RhdHVzKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbnZhbGlkVmFsaWRhdGlvblFSTXNnID0gcmVzdWx0Py5kYXRhPy5tZXNzYWdlCiAgICAgICAgICAgICAgICAgICAgICAgID8gcmVzdWx0LmRhdGEubWVzc2FnZQogICAgICAgICAgICAgICAgICAgICAgICA6ICJWYWxpZGF0aW9uIG5vdCByZWNvZ25pemVkLiBQbGVhc2UgdHJ5IGFnYWluIjsKICAgICAgICAgICAgICAgICAgICB0aGlzLmludmFsaWRWYWxpZGF0aW9uUVJEaWFsb2cgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIHRoaXMudmFsaWRhdGVRUkNvZGVQZW5kaW5nID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5wb3N0VG9Mb2dnZXJBUEkoewogICAgICAgICAgICAgICAgICAgICAgICBwaG9uZTogdGhpcy5ib29raW5nRGV0YWlscy51c2VyLmNvbnRhY3QsCiAgICAgICAgICAgICAgICAgICAgICAgIHJlZklkOiB0aGlzLmJvb2tpbmdJZCwKICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3I6IHRoaXMuaW52YWxpZFFSTXNnLAogICAgICAgICAgICAgICAgICAgICAgICBpY29uOiAicmVkZWVtIiwKICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzVGV4dDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICJFcnJvciBpbiB2YWxpZGF0aW5nIHRoZSBzZXNzaW9uIG9uIHNjYW5uaW5nIHZhbGlkYXRpb24gUVIgLSAiICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlY29kZWRTdHJpbmcsCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHRoaXMucG9zdFRvTG9nZ2VyQVBJKHsKICAgICAgICAgICAgICAgICAgICAgICAgcGhvbmU6IHRoaXMuYm9va2luZ0RldGFpbHMudXNlci5jb250YWN0LAogICAgICAgICAgICAgICAgICAgICAgICByZWZJZDogdGhpcy5ib29raW5nSWQsCiAgICAgICAgICAgICAgICAgICAgICAgIGljb246ICJyZWRlZW0iLAogICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXNUZXh0OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgIlBhcmtlciB2YWxpZGF0ZWQgdGhlIHNlc3Npb24gc3VjY2Vzc2Z1bGx5IGJ5IHNjYW5uaW5nIHZhbGlkYXRpb24gUVIgLSAiICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlY29kZWRTdHJpbmcsCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgdGhpcy52YWxpZGF0ZVFSQ29kZVBlbmRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICB0aGlzLnZhbGlkYXRlUVJDb2RlRGlhbG9nID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KAogICAgICAgICAgICAgICAgICAgICAgICAiU0VUX1ZBTElEQVRFRF9NRVJDSEFOVCIsCiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdD8uZGF0YT8ubWVyY2hhbnROYW1lCiAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgICB0aGlzLiRyb3V0ZXIucmVwbGFjZSh7IHBhdGg6ICIvdmFsaWRhdGVzdWNjZXNzIiB9KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICB9LAp9Owo="},{"version":3,"sources":["CheckedIn.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAk8BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"CheckedIn.vue","sourceRoot":"src/views","sourcesContent":["<template>\n    <v-container class=\"pa-4\" fluid>\n        <v-row class=\"text-center\" no-gutters>\n            <v-col cols=\"12\">\n                <v-img alt=\"PARKING.COM\" class=\"my-3\" height=\"42\" contain src=\"../assets/logo_huge_drk.png\" />\n            </v-col>\n        </v-row>\n        <v-row no-gutters>\n            <v-col>\n                <v-card class=\"mx-auto rounded-lg\" max-width=\"374\">\n                    <v-dialog v-model=\"loading\" persistent>\n                        <v-card class=\"pa-4\">\n                            <v-progress-circular indeterminate color=\"red\"></v-progress-circular>\n                            <span class=\"ml-4\" style=\"font-size: 14px\">Please wait...</span>\n                        </v-card>\n                    </v-dialog>\n                    <!-- <v-responsive :aspect-ratio=\"16/9\"> -->\n\n                    <template slot=\"progress\">\n                        <v-progress-linear color=\"red\" height=\"10\" indeterminate></v-progress-linear>\n                    </template>\n                    <div style=\"position: relative\">\n                        <!-- <v-skeleton-loader\n                  v-show=\"!bookingDetails.hasOwnProperty('zone')\"\n                  height=\"260px\"\n                  class=\"rounded-t-lg\"\n                  type=\"image\"\n                ></v-skeleton-loader>-->\n\n                        <v-img class=\"rounded-t-lg\" max-height=\"150px\" style=\"filter: brightness(50%)\" :src=\"bookingDetails.hasOwnProperty('zone') &&\n                            bookingDetails.zone.image != '' &&\n                            bookingDetails.zone.image != null\n                            ? bookingDetails.zone.image\n                            : zoneImgURL\n                            \" :lazy-src=\"bookingDetails.hasOwnProperty('zone') &&\n        bookingDetails.zone.image != '' &&\n        bookingDetails.zone.image != null\n        ? bookingDetails.zone.image\n        : zoneImgURL\n        \" alt=\"Parking.com garage\">\n                            <template v-slot:placeholder>\n                                <v-row class=\"fill-height ma-0\" align=\"center\" justify=\"center\" no-gutters>\n                                    <v-progress-circular indeterminate color=\"grey lighten-5\"></v-progress-circular>\n                                </v-row>\n                            </template>\n                        </v-img>\n                        <div class=\"booking_header white--text text-left mr-4\">\n                            <span>\n                                {{\n                                    bookingDetails.hasOwnProperty(\"booking\")\n                                    ? bookingDetails.booking.header\n                                    : \"\"\n                                }}\n                            </span>\n                        </div>\n                        <div class=\"booking_divider_div\">\n                            <v-divider class=\"booking_divider mx-4\"></v-divider>\n                        </div>\n                        <div class=\"booking_content white--text\">\n                            Checked in at\n                            {{\n                                bookingDetails.hasOwnProperty(\"booking\") ? booking_content : \"\"\n                            }}\n                            <span v-if=\"bookingDetails.hasOwnProperty('booking') &&\n                                bookingDetails.hasOwnProperty('zone') &&\n                                bookingDetails.booking.vehicleNo != null &&\n                                bookingDetails.booking.vehicleNo != ''\n                                \">\n                                with license plate\n                                {{\n                                    bookingDetails.hasOwnProperty(\"booking\")\n                                    ? bookingDetails.booking.vehicleNo\n                                    : \"\"\n                                }}\n                            </span>\n                        </div>\n                    </div>\n                    <v-fab-transition>\n                        <v-btn v-show=\"Object.hasOwnProperty.call(bookingDetails, 'zone') &&\n                                bookingDetails.zone.isPedestrian == 1\n                                \" class=\"fabIcon\" color=\"#f2555c !important\" fab dark raised large right\n                            @click=\"getpedestrianAccess()\" style=\"bottom: 35px; float: right; right: 10px\">\n                            <v-img src=\"../assets/pedestrain_door.png\" style=\"opacity: 1\" width=\"32\" height=\"32\"\n                                contain></v-img>\n                            <!-- <v-icon class=\"material-icons-outlined\">directions_walk</v-icon> -->\n                        </v-btn>\n                    </v-fab-transition>\n\n                    <v-card-title class=\"pa-1\"></v-card-title>\n                    <v-card-text class=\"pa-1\">\n                        <v-row align=\"center\" class=\"mx-0 pb-0\" no-gutters v-if=\"bookingDetails.hasOwnProperty('booking') &&\n                            bookingDetails.booking.hasOwnProperty('TypeOfBooking') &&\n                            bookingDetails.booking.TypeOfBooking != 'Self reservation'\">\n                            <v-col cols=\"2\">\n                                <v-icon style=\"font-size: 50px\">mdi-clock-outline</v-icon>\n                            </v-col>\n                            <v-col cols=\"10\" class=\"pl-1\">\n                                <v-row no-gutters class=\"counter-content-position\">\n                                    <v-col cols=\"12\" class=\"pa-0\">\n                                        <v-skeleton-loader v-show=\"!bookingDetails.hasOwnProperty('booking') ||\n                                            timeAgo == '' ||\n                                            timeAgo == null\n                                            \" height=\"40px\" max-width=\"200\" type=\"heading\"></v-skeleton-loader>\n                                        <span class=\"grey--text text--darken-1 time_ago\"\n                                            v-show=\"!(validatedDateTime > 0)\">{{\n                                                timeAgo\n                                            }}</span>\n                                        <!-- <span\n                          class=\"grey--text text--darken-1 time_ago\"\n                          v-show=\"gracePeriodTime > 0\"\n                          >{{ countDownGracePeriodTime }}</span\n                        >-->\n                                        <span class=\"grey--text text--darken-1 time_ago\" v-show=\"bookingDetails.hasOwnProperty('booking') &&\n                                                bookingDetails.booking.hasOwnProperty('validated') &&\n                                                bookingDetails.booking.validated == '1' &&\n                                                validatedDateTime > 0\n                                                \">{{ countDownValidatedTime }}</span>\n                                    </v-col>\n                                    <v-col cols=\"12\" v-if=\"bookingDetails.hasOwnProperty('booking') &&\n                                        validatedDateTime <= 0\n                                        \">\n                                        <span class=\"grey--text text--darken-1 time_ago_context\">Since you parked</span>\n                                    </v-col>\n                                    <!-- <v-col cols=\"12\" v-else-if=\"bookingDetails.hasOwnProperty('booking') && gracePeriodTime > 0\">\n                        <span class=\"grey--text text--darken-1 time_ago_context\"\n                          >Grace period remaining</span\n                        >\n                      </v-col>-->\n                                    <v-col cols=\"12\" v-else-if=\"bookingDetails.hasOwnProperty('booking') &&\n                                        bookingDetails.booking.hasOwnProperty('validated') &&\n                                        bookingDetails.booking.validated == '1' &&\n                                        validatedDateTime > 0\n                                        \">\n                                        <span class=\"grey--text text--darken-1 time_ago_context\">Validation time\n                                            remaining</span>\n                                    </v-col>\n                                    <v-col cols=\"12\" v-show=\"bookingDetails.hasOwnProperty('booking') &&\n                                        bookingDetails.booking.hasOwnProperty('validated') &&\n                                        bookingDetails.booking.validated == '1' &&\n                                        bookingDetails.booking.hasOwnProperty(\n                                            'validationType'\n                                        ) &&\n                                        bookingDetails.booking.validationType == 'DIVRT'\n                                        \">\n                                        <span class=\"grey--text text--darken-1 validated_time\">Validated until {{\n                                            validated_content\n                                        }}</span>\n                                    </v-col>\n                                </v-row>\n                            </v-col>\n                            <v-col cols class=\"align-self-center text-center\" v-show=\"bookingDetails.hasOwnProperty('booking') &&\n                                    bookingDetails.booking.hasOwnProperty('TypeOfBooking') &&\n                                    bookingDetails.booking.TypeOfBooking == 'Monthly'\n                                    \">\n                                <v-btn class=\"elevation-0 white--text\" tile x-small color=\"green darken-2\">Monthly</v-btn>\n                            </v-col>\n                            <v-col cols class=\"align-self-center text-center\" v-show=\"bookingDetails.hasOwnProperty('booking') &&\n                                bookingDetails.booking.hasOwnProperty('TypeOfBooking') &&\n                                bookingDetails.booking.TypeOfBooking == 'Employee'\n                                \">\n                                <v-btn class=\"elevation-0 white--text\" tile x-small color=\"green darken-2\">Employee</v-btn>\n                            </v-col>\n                        </v-row>\n                        <v-row align=\"center\" class=\"mx-0 pb-0\" no-gutters v-if=\"bookingDetails.hasOwnProperty('booking') &&\n                            bookingDetails.booking.hasOwnProperty('TypeOfBooking') &&\n                            bookingDetails.booking.TypeOfBooking == 'Self reservation'\">\n                            <v-col cols=\"2\">\n                                <v-icon class=\"material-icons-outlined\" style=\"font-size: 50px\">history_toggle_off</v-icon>\n                            </v-col>\n                            <v-col cols=\"10\" class=\"pl-1\">\n                                <v-row no-gutters class=\"counter-content-position\">\n                                    <v-col cols=\"12\" class=\"pa-0\">\n                                        <v-skeleton-loader v-show=\"!bookingDetails.hasOwnProperty('booking')\n                                            \" height=\"40px\" max-width=\"200\" type=\"heading\"></v-skeleton-loader>\n                                        <span class=\"grey--text text--darken-1 time_ago\" v-show=\"exitDateTime > 0\n                                            \">{{ countDownExitTime }}</span>\n                                    </v-col>\n                                    <v-col cols=\"12\" v-if=\"exitDateTime > 0\n                                        \">\n                                        <span class=\"grey--text text--darken-1 time_ago_context\">Remaining</span>\n                                    </v-col>\n                                </v-row>\n                            </v-col>\n                        </v-row>\n                        <v-row no-gutters align=\"center\" class=\"my-1\">\n                            <v-col cols=\"12\" class=\"pa-0 align-self-center text-center\">\n                                <v-btn class=\"elevation-0 white--text\" tile x-small color=\"green darken-2\" v-show=\"bookingDetails.hasOwnProperty('booking') &&\n                                    bookingDetails.booking.hasOwnProperty('validated') &&\n                                    bookingDetails.booking.validated == '1'\n                                    \">VALIDATED</v-btn>\n                                <!-- <v-icon color=\"red\" class=\"ml-2\" v-show=\"(bookingDetails.hasOwnProperty('booking') && bookingDetails.booking.validated == '1' && showPaymentCardAdded == '1')\" >approval</v-icon> -->\n                            </v-col>\n                        </v-row>\n                        <v-row class=\"justify-center mb-3\" no-gutters v-show=\"Object.hasOwnProperty.call(bookingDetails, 'zone') &&\n                            !(bookingDetails.zone.isGated == '0')\n                            \">\n                            <span class=\"grey--text text--darken-1 font-weight-bold\"\n                                v-if=\"showPaymentCardAdded && (isCheckoutEnabled(1) || isCheckoutEnabled(2) || isCheckoutEnabled(3))\">Click\n                                an option below to exit</span>\n                        </v-row>\n                        <v-row class=\"justify-center my-3\" no-gutters\n                            v-show=\"!(isCheckoutEnabled(1) || isCheckoutEnabled(2) || isCheckoutEnabled(3))\">\n                            <span class=\"black--text text--darken-1 font-weight-bold text-h5\">Checked In</span>\n                        </v-row>\n                    </v-card-text>\n                    <!-- <v-card-text class=\"text-center\">Click an option to exit</v-card-text> -->\n                    <v-card-actions class=\"text-center justify-center px-0 pb-4  \" v-if=\"Object.hasOwnProperty.call(bookingDetails, 'booking') &&\n                        !showPaymentCardAdded\n                        \">\n                        <v-container class=\"pa-0\" fluid>\n                            <v-row no-gutters>\n                                <v-col cols=\"12\" class=\"px-4\"\n                                    v-if=\"iosDevice && Object.hasOwnProperty.call(bookingDetails, 'zone') && Object.hasOwnProperty.call(bookingDetails.zone, 'paymentServices') && Object.hasOwnProperty.call(bookingDetails.zone.paymentServices, 'apple_pay') && bookingDetails.zone.paymentServices.apple_pay == '1'\">\n                                    <apple-pay width='75%' height=\"43px\"\n                                        :ios-device=\"iosDevice && Object.hasOwnProperty.call(bookingDetails, 'zone') && Object.hasOwnProperty.call(bookingDetails.zone, 'paymentServices') && Object.hasOwnProperty.call(bookingDetails.zone.paymentServices, 'apple_pay') && bookingDetails.zone.paymentServices.apple_pay == '1'\"></apple-pay>\n                                </v-col>\n                                <v-col cols=\"12\" class=\"px-4\"\n                                    v-if=\"!iosDevice && Object.hasOwnProperty.call(bookingDetails, 'zone') && Object.hasOwnProperty.call(bookingDetails.zone, 'paymentServices') && Object.hasOwnProperty.call(bookingDetails.zone.paymentServices, 'google_pay') && bookingDetails.zone.paymentServices.google_pay == '1'\">\n                                    <google-pay width='75%' height=\"43px\"></google-pay>\n                                </v-col>\n                                <v-col cols=\"12\" class=\"px-4\">\n                                    <v-btn style=\"font-weight:700\" elevation=\"20\" rounded width=\"75%\"\n                                        class=\"add_credit_card_btn white--text  \" @click=\"navigateToAddPayment\"> Add Credit\n                                        Card</v-btn>\n                                </v-col>\n                                <v-col cols=\"12\" class=\"mt-4 px-4\"\n                                    v-if=\"bookingDetails.zone.isPQREndReservation == 1 && (bookingDetails.booking.TypeOfBooking == 'Guest' || bookingDetails.booking.TypeOfBooking == 'Transient')\">\n                                    <v-btn text color=\"primary\"\n                                        style=\"font-size: 15px;font-weight: bolder;text-decoration: underline;\"\n                                        @click=\"hotelGuest\">I am an\n                                        overnight\n                                        hotel guest</v-btn>\n                                </v-col>\n                                <v-col cols=\"12\" class=\"mt-4 px-4\" v-show=\"bookingDetails.hasOwnProperty('booking') &&\n                                    bookingDetails.booking.hasOwnProperty('validated') &&\n                                    bookingDetails.booking.validated != '1' &&\n                                    bookingDetails.booking.isValidationEnabled == '1'\n                                    \">\n                                    <v-btn rounded elevation=\"20\" dense width=\"75%\"\n                                        class=\"validate_btn white--text blue darken-2 no-upper-case px-4\"\n                                        @click=\"openValidationDialog()\">Apply\n                                        Your Validation</v-btn>\n                                </v-col>\n                                <v-col cols=\"12\" class=\"mt-10 pa-0\"\n                                    v-if=\"Object.hasOwnProperty.call(bookingDetails, 'zone') && Object.hasOwnProperty.call(bookingDetails.zone, 'isLoyaltySupported') && bookingDetails.zone.isLoyaltySupported == '1' && bookingDetails.booking.validated != '1'\">\n                                    <v-card flat color=\"#ececec\" class=\"ma-0\" tile max-width=\"100%\">\n                                        <v-card-text>\n                                            <v-row class=\"text-center pt-0\" no-gutters>\n                                                <v-col cols=\"12\" class=\"pa-0\">\n                                                    <p style=\"font-size: 15px;color: #F2555C;font-weight: bolder;\">CLAIM\n                                                        YOUR PARKING DISCOUNT</p>\n                                                </v-col>\n                                                <v-col cols=\"12\">\n                                                    <v-btn color=\"black\" class=\"pa-0 ma-0\" rounded width=\"270\" height=\"70\"\n                                                        elevation=\"20\" @click=\"loyalty = true\">\n                                                        <v-avatar tile width=\"200\" height=\"100\">\n                                                            <v-img src=\"../assets/GNLoyalty.png\" height=\"60px\"\n                                                                width=\"400px\"></v-img>\n                                                        </v-avatar>\n                                                    </v-btn>\n                                                </v-col>\n                                            </v-row>\n\n                                        </v-card-text>\n                                    </v-card>\n                                </v-col>\n                                <v-divider style=\"color:black\"></v-divider>\n                                <v-col cols=\"12\" class=\"mt-4 text-center color-black px-4\" style=\"font-size: 12px;\" v-show=\"Object.hasOwnProperty.call(bookingDetails, 'zone') &&\n                                    !(bookingDetails.zone.isGated == '0')\n                                    \">\n                                    <p>\n                                        Credit card is required unless otherwise specified. Please enter your card number\n                                        now to avoid a slow\n                                        down at the exit.\n                                    </p>\n                                </v-col>\n                                <v-col cols=\"12\" class=\"mt-4 text-center color-black px-4\" style=\"font-size: 12px\" v-show=\"Object.hasOwnProperty.call(bookingDetails, 'zone') &&\n                                    !(bookingDetails.zone.isGated == '1') &&\n                                    validatedDateTime <= 0\n                                    \">\n                                    <p>\n                                        A valid credit card is required to park. Without one, you\n                                        could be subject to a parking violation and issued a\n                                        citation.\n                                    </p>\n                                </v-col>\n                                <v-col cols=\"12\" class=\"mt-4 color-black text-center px-4\" style=\"font-size: 12px\" v-show=\"bookingDetails.hasOwnProperty('booking') &&\n                                    bookingDetails.booking.hasOwnProperty('validated') &&\n                                    bookingDetails.booking.validated == '1' &&\n                                    validatedDateTime > 0\n                                    \">\n                                    <p>\n                                        Exiting after the validated time period will require a valid\n                                        credit card to continue parking. Without one, you could be\n                                        subject to a parking violation and issued a citation.\n                                    </p>\n                                </v-col>\n                                <v-col cols=\"12\" class=\"px-4 mt-2 color-black text-center\" style=\"font-size: 12px\"\n                                    v-show=\"iosDevice\">\n                                    <p>\n                                        You're only authorizing payment now. We'll charge you automatically when you\n                                        checkout based on the\n                                        duration of stay.\n                                    </p>\n                                </v-col>\n                            </v-row>\n\n                        </v-container>\n                    </v-card-actions>\n                    <v-card-actions class=\"justify-center pb-10\" v-if=\"showPaymentCardAdded\">\n                        <v-container class=\"pa-0\" fluid>\n                            <v-row no-gutters class=\"text-center px-10\" v-if=\"bookingDetails.hasOwnProperty('exitOptions') &&\n                                Object.hasOwnProperty.call(bookingDetails, 'zone') &&\n                                !(bookingDetails.zone.isGated == '0') && bookingDetails.exitOptions.length > 0\n                                \">\n                                <v-col v-if=\"isCheckoutEnabled(1)\">\n                                    <v-avatar color=\"red\" class=\"pa-6\" @click=\"openSMSDialog()\">\n                                        <v-icon medium color=\"white accent-2\" class=\"px-4\" dark>\n                                            {{\n                                                getExitIcon(1)\n                                            }}\n                                        </v-icon>\n                                    </v-avatar>\n                                    <p class=\"grey--text text--darken-1 exit-option-text\">\n                                        {{ getExitText(1) }}\n                                    </p>\n                                </v-col>\n                                <v-col v-if=\"isCheckoutEnabled(2)\">\n                                    <v-avatar color=\"red\" class=\"pa-6\" @click.stop=\"openSmsQrScanner()\">\n                                        <v-icon medium color=\"white accent-2\" class=\"px-4\" dark>\n                                            {{\n                                                getExitIcon(2)\n                                            }}\n                                        </v-icon>\n                                    </v-avatar>\n                                    <p class=\"grey--text text--darken-1 exit-option-text\">\n                                        {{ getExitText(2) }}\n                                    </p>\n                                </v-col>\n                                <v-col v-if=\"isCheckoutEnabled(3)\">\n                                    <v-avatar color=\"red\" class=\"pa-6\" @click=\"dialerDialog = true\">\n                                        <v-icon medium color=\"white accent-2\" class=\"px-4\" dark>\n                                            {{\n                                                getExitIcon(3)\n                                            }}\n                                        </v-icon>\n                                    </v-avatar>\n                                    <p class=\"grey--text text--darken-1 exit-option-text\">{{ getExitText(3) }}</p>\n                                </v-col>\n                            </v-row>\n                            <v-row no-gutters\n                                v-if=\"bookingDetails.zone.isPQREndReservation == 1 && bookingDetails.booking.TypeOfBooking == 'Self reservation'\">\n                                <v-col cols=\"12\" class=\"px-2 mt-4\">\n                                    <v-btn rounded elevation=\"20\" class=\"add_licence_plate_btn white--text\"\n                                        @click=\"openExtDialog()\">Extend\n                                        Parking</v-btn>\n                                </v-col>\n                            </v-row>\n                            <v-row no-gutters v-show=\"Object.hasOwnProperty.call(bookingDetails, 'zone') &&\n                                !(bookingDetails.zone.isGated == '0') && (isCheckoutEnabled(1) || isCheckoutEnabled(2) || isCheckoutEnabled(3))\n                                \">\n                                <v-col cols=\"12\" class=\"mt-2 text-center color-black\" style=\"font-size: 12px\">\n                                    <p class=\"mb-0\">\n                                        When you're ready to leave, please look for the\n                                        <strong>3 digit</strong> gate code on the sign in the exit\n                                        lane. Type that code when prompted. Have a good day!\n                                    </p>\n                                </v-col>\n                            </v-row>\n                            <v-row no-gutters class=\"mt-4\"\n                                v-if=\"Object.hasOwnProperty.call(bookingDetails, 'booking') && Object.hasOwnProperty.call(bookingDetails.booking, 'paymentType') && bookingDetails.booking.paymentType != '' && (bookingDetails.booking.paymentType=='APPLE_PAY' || bookingDetails.booking.paymentType=='GOOGLE_PAY')\">\n                                <v-col cols=\"12\" class=\"text-center font-weight-bold\">\n                                            <span style=\"font-size: 13px;\">Authorized with {{\n                                                getPaymentType(bookingDetails.booking.paymentType) }}</span>\n                                </v-col>\n                            </v-row>\n                            <v-row no-gutters>\n                                <v-col cols=\"12\" class=\"px-4 mt-4 text-center color-black font-weight-bold\"\n                                    style=\"font-size: 13px\" v-show=\"(bookingDetails.hasOwnProperty('booking') &&\n                                        bookingDetails.booking.hasOwnProperty('cardNo') &&\n                                        bookingDetails.booking.hasOwnProperty('accountType') &&\n                                        bookingDetails.booking.accountType == '2') ||\n                                        (bookingDetails.booking.cardOnfile == '1' &&\n                                            (bookingDetails.booking.accountType == '0' ||\n                                                bookingDetails.booking.accountType == '1') &&\n                                            !(\n                                                bookingDetails.booking.cardNo == '0' ||\n                                                bookingDetails.booking.cardNo == '' ||\n                                                bookingDetails.booking.cardNo == null\n                                            ))\n                                        \">\n                                    <p class=\"mb-0\">\n                                        Card ending with *{{\n                                            bookingDetails.hasOwnProperty(\"booking\") &&\n                                            bookingDetails.booking.hasOwnProperty(\"cardNo\")\n                                            ? bookingDetails.booking.cardNo\n                                            : \"\"\n                                        }}\n                                        on file\n                                    </p>\n                                </v-col>\n                            </v-row>\n                            <v-row no-gutters\n                                v-if=\"bookingDetails.zone.isPQREndReservation == 1 &&\n                                        (bookingDetails.booking.cardOnfile == '1' || bookingDetails.booking.cardOnfile == '2') && bookingDetails.booking.TypeOfBooking == 'Guest' || bookingDetails.booking.TypeOfBooking == 'Transient'\">\n                                <v-col cols=\"12\" class=\"mt-4 text-center\">\n                                    <v-btn text color=\"primary\"\n                                        style=\"font-size: 15px;font-weight: bolder;text-decoration: underline;\"\n                                        @click=\"hotelGuest\">I am an\n                                        overnight\n                                        hotel guest</v-btn>\n                                </v-col>\n                            </v-row>\n                            <v-row no-gutters class=\"mt-2\">\n                                <v-col cols=\"12\" class=\"text-center mt-2\" v-show=\"bookingDetails.hasOwnProperty('booking') &&\n                                    bookingDetails.booking.hasOwnProperty('validated') &&\n                                    bookingDetails.booking.validated != '1' &&\n                                    bookingDetails.booking.isValidationEnabled == '1'\n                                    \">\n                                    <v-btn rounded elevation=\"24\" dense width=\"75%\"\n                                        class=\"validate_btn white--text blue darken-2 no-upper-case\"\n                                        @click=\"openValidationDialog()\">Apply\n                                        Your Validation\n                                    </v-btn>\n                                </v-col>\n                            </v-row>\n                            <v-col cols=\"12\" class=\"mt-10 pa-0\"\n                                    v-if=\"Object.hasOwnProperty.call(bookingDetails, 'zone') && Object.hasOwnProperty.call(bookingDetails.zone, 'isLoyaltySupported') && bookingDetails.zone.isLoyaltySupported == '1' && bookingDetails.booking.validated != '1'\">\n                                    <v-card flat color=\"#ececec\" class=\"ma-0\" tile max-width=\"100%\">\n                                        <v-card-text>\n                                            <v-row class=\"text-center pt-0\" no-gutters>\n                                                <v-col cols=\"12\" class=\"pa-0\">\n                                                    <p style=\"font-size: 15px;color: #F2555C;font-weight: bolder;\">CLAIM\n                                                        YOUR PARKING DISCOUNT</p>\n                                                </v-col>\n                                                <v-col cols=\"12\">\n                                                    <v-btn color=\"black\" class=\"pa-0 ma-0\" rounded width=\"270\" height=\"70\"\n                                                        elevation=\"20\" @click=\"loyalty = true\">\n                                                        <v-avatar tile width=\"200\" height=\"100\">\n                                                            <v-img src=\"../assets/GNLoyalty.png\" height=\"60px\"\n                                                                width=\"400px\"></v-img>\n                                                        </v-avatar>\n                                                    </v-btn>\n                                                </v-col>\n                                            </v-row>\n\n                                        </v-card-text>\n                                    </v-card>\n                                </v-col>\n                            <v-row no-gutters class=\"text-center mt-1\" v-show=\"Object.hasOwnProperty.call(bookingDetails, 'zone') &&\n                                bookingDetails.zone.isGated == '0' &&\n                                bookingDetails.booking.cardOnfile == '1' &&\n                                validatedDateTime <= 0\n                                \">\n                                <v-col cols=\"12\" class=\"mt-2 color-black\" style=\"font-size: 12px\">\n                                    <p class=\"mb-0\">\n                                        The card on file will be automatically charged for the time\n                                        parked when you exit the garage.\n                                    </p>\n                                </v-col>\n                            </v-row>\n\n                            <v-row no-gutters>\n                                <v-col cols=\"12\" class=\"mt-1 text-center\" v-show=\"bookingDetails.hasOwnProperty('booking') &&\n                                    bookingDetails.booking.hasOwnProperty('cardNo') &&\n                                    bookingDetails.booking.hasOwnProperty('accountType') &&\n                                    bookingDetails.booking.hasOwnProperty('cardUpdated') &&\n                                    !(bookingDetails.booking.cardUpdated == '1') &&\n                                    (bookingDetails.booking.accountType == '2' ||\n                                        (bookingDetails.booking.cardOnfile == '1' &&\n                                            bookingDetails.booking.accountType == '0')) &&\n                                    !(bookingDetails.booking.tapToChangeCard == '0') && !(bookingDetails.booking.paymentType == 'APPLE_PAY' || bookingDetails.booking.paymentType == 'GOOGLE_PAY')\n                                    \">\n                                    <a class=\"text-caption\" @click=\"navigateToAddPayment()\">Tap to change card</a>\n                                </v-col>\n                            </v-row>\n                            <v-row no-gutters>\n                                <v-col cols=\"12\" class=\"mt-4 text-center color-black\" style=\"font-size: 12px\" v-show=\"Object.hasOwnProperty.call(bookingDetails, 'zone') &&\n                                    !(bookingDetails.zone.isGated == '1') &&\n                                    validatedDateTime <= 0 &&\n                                    bookingDetails.booking.cardOnfile != '1'\n                                    \">\n                                    <p>\n                                        A valid credit card is required to park. Without one, you\n                                        could be subject to a parking violation and issued a\n                                        citation.\n                                    </p>\n                                </v-col>\n                            </v-row>\n                            <v-row no-gutters>\n                                <v-col cols=\"12\" class=\"mt-4 text-center color-black\" style=\"font-size: 12px\" v-show=\"bookingDetails.hasOwnProperty('booking') &&\n                                    bookingDetails.booking.hasOwnProperty('validated') &&\n                                    bookingDetails.booking.validated == '1' &&\n                                    validatedDateTime > 0\n                                    \">\n                                    <p>\n                                        Exiting after the validated time period will require a valid\n                                        credit card to continue parking. Without one, you could be\n                                        subject to a parking violation and issued a citation.\n                                    </p>\n                                </v-col>\n                            </v-row>\n                        </v-container>\n                    </v-card-actions>\n                    <!-- <v-row v-if=\"showPaymentCardAdded\">\n                <v-col>\n                  <v-icon\n                    x-small\n                    color=\"green\"\n                    class=\"px-4\"\n                    dark\n                    @click=\"navigateToCheckOut\"\n                  >mdi-exit-to-app</v-icon>\n                </v-col>\n              </v-row>-->\n                    <!-- </v-responsive> -->\n                </v-card>\n            </v-col>\n        </v-row>\n        <v-dialog v-model=\"alertDialog\" persistent max-width=\"290\">\n            <v-card class=\"pa-0\">\n                <v-card-title class=\"justify-center\" style=\"position: relative\">\n                    <v-icon x-large color=\"green accent-2\">{{ alertIcon }}</v-icon>\n                </v-card-title>\n                <v-card-text class=\"text-center mt-5\">\n                    <span style=\"font-size: 20px\">{{ alertMsg }}</span>\n                </v-card-text>\n                <v-card-actions class=\"text-center pb-6\">\n                    <v-container pa-0 fluid>\n                        <v-row no-gutters>\n                            <v-col cols=\"12\">\n                                <v-btn rounded block elevation=\"0\" class=\"white--text exit_dialog_btn\"\n                                    @click=\"closeAlertDialog()\">Close</v-btn>\n                            </v-col>\n                        </v-row>\n                    </v-container>\n                </v-card-actions>\n            </v-card>\n        </v-dialog> <v-dialog v-model=\"loyalty\" width=\"750px\">\n            <v-card>\n                <v-row no-gutters style=\"background-color: black;\" class=\"text-center\">\n                    <v-col class=\"text-center pt-1 \">\n                        <img src=\"../assets/GNLoyalty.png\" width=\"200px\" height=\"65px\">\n                    </v-col>\n                </v-row>\n                <v-card-text>\n                    <v-row no-gutters class=\"mt-4\">\n                        <v-col>\n                            <p style=\"font-size:large;color: black;\">Enter the 24K Select number found on your Loyalty Card\n                            </p>\n                        </v-col>\n                    </v-row>\n                    <v-row no-gutters class=\"mt-2\">\n                        <v-col>\n                            <v-text-field label=\"24K Select Number\" outlined v-model=\"loyalty24knum\"\n                                @keyup=\"loyaltyValid\"></v-text-field>\n                        </v-col>\n                    </v-row>\n                    <v-row no-gutters class=\"mt-2 text-center\">\n                        <v-col>\n                            <v-btn color=\"#F2555C\" width=\"180\" rounded class=\"white--text\" :disabled=\"disableLoyalty\"\n                                @click=\"submitLoyalty(loyalty24knum)\">Submit</v-btn>\n                        </v-col>\n                    </v-row>\n                </v-card-text>\n            </v-card>\n        </v-dialog>\n        <v-dialog v-model=\"qrCodeDialog\" width=\"fit-content\" persistent>\n            <v-card>\n                <v-card-title>\n                    <v-spacer></v-spacer>\n                    <v-icon @click=\"closeQRCodeDialog()\">mdi-close</v-icon>\n                </v-card-title>\n                <v-card-text class=\"pa-1\">\n                    <qr-code-scanner :scan=\"'sms'\" v-bind:qrbox=\"250\" v-bind:fps=\"30\"\n                        :cameraStatus=\"cameraStatus\"></qr-code-scanner>\n                    <v-progress-circular v-if=\"!cameraStatus\" class=\"validation-pending\" indeterminate\n                        color=\"red\"></v-progress-circular>\n                </v-card-text>\n                <v-card-actions>\n                    <v-container class=\"pa-0\" fluid>\n                        <v-row no-gutters>\n                            <v-col cols=\"7\">\n                                <p class=\"grey--text font-weight-bold qr_text mr-4\">Scan the QR code affixed to exit the\n                                    gate</p>\n                            </v-col>\n                            <v-spacer></v-spacer>\n                            <v-img src=\"../assets/qr-code.png\" style=\"opacity: 0.7\" max-width=\"52\"></v-img>\n                        </v-row>\n                    </v-container>\n                </v-card-actions>\n            </v-card>\n        </v-dialog>\n        <div>\n            <v-dialog v-model=\"smsDialog\" width=\"fit-content\">\n                <v-card class=\"pa-0\" ref=\"smscontainer\">\n                    <v-card-title class=\"justify-center\" style=\"position: relative\">\n                        <v-btn class elevation=\"0\" color=\"white\" dark fab x-large>\n                            <v-icon x-large color=\"red accent-2\">mdi-message-text</v-icon>\n                        </v-btn>\n                    </v-card-title>\n                    <v-card-text class=\"pa-0\">\n                        <v-container class=\"px-4\" fluid>\n                            <v-row no-gutters>\n                                <v-col cols=\"12\" class=\"text-left\">\n                                    <p class=\"color-black\" style=\"font-size: 24px; line-height: 35px\">Enter the gate code\n                                        shown in the\n                                        lane to exit.</p>\n                                    <!-- <p class=\"sms-caption color-black\">\n                        We'll copy the code into a text message for you. You'll need\n                        to tap send on the message to open the gate.\n                      </p>-->\n                                </v-col>\n                                <v-col cols=\"12\" class=\"mt-2\">\n                                    <v-text-field class=\"sms-input\" color=\"red\" v-model=\"smsText\" outlined label=\"Gate code\"\n                                        maxlength=\"6\" type=\"tel\" autofocus v-on:keyup.enter=\"openSMSApp()\"\n                                        @focus=\"scrollToSubmit()\" @mouseup=\"scrollToSubmit()\" @keydown=\"scrollToSubmit()\"\n                                        clearable height=\"80px\"></v-text-field>\n                                </v-col>\n                            </v-row>\n                        </v-container>\n                        <v-progress-circular v-if=\"smsPending\" class=\"validation-pending\" indeterminate\n                            color=\"red\"></v-progress-circular>\n                    </v-card-text>\n                    <v-card-actions class=\"text-center\">\n                        <v-container pa-0 fluid>\n                            <v-row no-gutters>\n                                <v-col cols=\"12\">\n                                    <v-btn id=\"submitsmsbtn\" rounded block elevation=\"20\"\n                                        :disabled=\"smsText == '' || smsPending\" class=\"white--text exit_dialog_btn\"\n                                        @click=\"openSMSApp()\">SUBMIT</v-btn>\n                                </v-col>\n                                <v-col cols=\"12\" class=\"mt-2\">\n                                    <p style=\"cursor: pointer\" @click=\"smsDialog = false\">\n                                        Close\n                                    </p>\n                                </v-col>\n                            </v-row>\n                        </v-container>\n                    </v-card-actions>\n                </v-card>\n            </v-dialog>\n        </div>\n        <div>\n            <v-dialog v-model=\"validateQRCodeDialog\" width=\"fit-content\" persistent>\n                <v-card>\n                    <v-card-title>\n                        <v-spacer></v-spacer>\n                        <v-icon @click=\"closeValidationQRDialog()\">mdi-close</v-icon>\n                    </v-card-title>\n                    <v-card-text class=\"pa-1\">\n                        <validation-qr-code-scanner :scan=\"'validationCode'\" v-bind:qrbox=\"250\" v-bind:fps=\"30\"\n                            :cameraStatus=\"validationCameraStatus\"></validation-qr-code-scanner>\n                        <v-progress-circular v-if=\"!validationCameraStatus\" class=\"validation-pending\" indeterminate\n                            color=\"red\"></v-progress-circular>\n                    </v-card-text>\n                    <v-card-actions>\n                        <v-container class=\"pa-0\" fluid>\n                            <v-row no-gutters>\n                                <v-col cols=\"7\">\n                                    <p class=\"grey--text font-weight-bold qr_text mr-4\">Please scan the validation QR code\n                                    </p>\n                                </v-col>\n                                <v-spacer></v-spacer>\n                                <v-img src=\"../assets/qr-code.png\" style=\"opacity: 0.7\" max-width=\"52\"></v-img>\n                            </v-row>\n                        </v-container>\n                    </v-card-actions>\n                </v-card>\n            </v-dialog>\n        </div>\n        <div>\n            <v-dialog v-model=\"validateBookingDialog\" width=\"fit-content\">\n                <v-card class=\"pa-0\" ref=\"validatecontainer\">\n                    <v-card-title class=\"justify-center\" style=\"position: relative\">\n                        <v-btn class elevation=\"0\" color=\"white\" dark fab large>\n                            <v-icon x-large color=\"red accent-2\">mdi-ticket-percent</v-icon>\n                        </v-btn>\n                    </v-card-title>\n                    <v-card-text class=\"pa-0\">\n                        <v-container class=\"px-4 py-0\" fluid>\n                            <v-row no-gutters>\n                                <v-col cols=\"12\" class=\"text-left\">\n                                    <p class=\"color-black text-center\" style=\"font-size: 24px; line-height: 35px\">\n                                        If the Merchant provided you a validation code, you may scan\n                                        it or enter it here.\n                                    </p>\n                                </v-col>\n                                <v-col cols=\"12\">\n                                    <v-btn rounded block elevation=\"20\" class=\"white--text exit_dialog_btn\"\n                                        @click=\"openScanValidationCode()\">Scan Validation Code</v-btn>\n                                </v-col>\n                                <v-col cols=\"12\" class=\"text-left mt-4\">\n                                    <p class=\"color-black\" style=\"font-size: 24px; line-height: 35px\">or enter it below</p>\n                                </v-col>\n                                <v-col cols=\"12\">\n                                    <v-text-field class=\"sms-input\" color=\"red\" v-model=\"validateBookingTxt\" outlined\n                                        label=\"Validation code\" hide-details=\"auto\" v-on:keyup.enter=\"validateBooking()\"\n                                        @focus=\"scrollToValidateBtn()\" @mouseup=\"scrollToValidateBtn()\"\n                                        @keydown=\"scrollToValidateBtn()\" clearable height=\"80px\"></v-text-field>\n                                </v-col>\n                            </v-row>\n                        </v-container>\n                        <v-progress-circular v-if=\"validateBookingPending\" class=\"validation-pending\" indeterminate\n                            color=\"red\"></v-progress-circular>\n                    </v-card-text>\n                    <v-card-actions class=\"text-center\">\n                        <v-container pa-0 fluid>\n                            <v-row no-gutters>\n                                <v-col cols=\"12\">\n                                    <v-btn id=\"validatebookingbtn\" rounded block elevation=\"20\" :disabled=\"validateBookingTxt == '' ||\n                                        validateBookingTxt == null ||\n                                        validateBookingPending\n                                        \" class=\"white--text exit_dialog_btn\" @click=\"onValidateText()\">SUBMIT</v-btn>\n                                </v-col>\n                                <v-col cols=\"12\" class=\"mt-2\">\n                                    <p style=\"cursor: pointer\" @click=\"validateBookingDialog = false\">\n                                        Close\n                                    </p>\n                                </v-col>\n                            </v-row>\n                        </v-container>\n                    </v-card-actions>\n                </v-card>\n            </v-dialog>\n        </div>\n        <div>\n            <v-dialog v-model=\"dialerDialog\" width=\"fit-content\">\n                <v-card class=\"pa-0\">\n                    <v-card-title class=\"justify-center\" style=\"position: relative\">\n                        <v-btn class elevation=\"0\" color=\"white\" dark fab x-large>\n                            <v-icon x-large color=\"red accent-2\">mdi-phone-in-talk</v-icon>\n                        </v-btn>\n                    </v-card-title>\n                    <v-card-text class=\"pa-0\">\n                        <v-container class=\"px-4\" fluid>\n                            <v-row no-gutters>\n                                <v-col cols=\"12\" class=\"text-left\">\n                                    <p class=\"color-black\" style=\"font-size: 24px; line-height: 35px\">\n                                        Tap to call the gate. When prompted, enter the gate code\n                                        shown in the lane to exit.\n                                    </p>\n                                </v-col>\n                            </v-row>\n                        </v-container>\n                    </v-card-text>\n                    <v-card-actions class=\"text-center\">\n                        <v-container pa-0 fluid>\n                            <v-row no-gutters>\n                                <v-col cols=\"12\">\n                                    <v-btn rounded block elevation=\"20\" class=\"white--text exit_dialog_btn\"\n                                        @click=\"openDialerApp\">CALL\n                                        GATE</v-btn>\n                                </v-col>\n                                <v-col cols=\"12\" class=\"mt-2\">\n                                    <p style=\"cursor: pointer\" @click=\"dialerDialog = false\">\n                                        Close\n                                    </p>\n                                </v-col>\n                            </v-row>\n                        </v-container>\n                    </v-card-actions>\n                </v-card>\n            </v-dialog>\n        </div>\n        <v-dialog v-model=\"extensionDialog\" width=\"fit-content\">\n            <v-card class=\"pa-0\">\n                <v-card-title></v-card-title>\n                <v-card-text>\n                    <v-row class=\"text-center mt-3\" no-gutters>\n                        <v-col>\n                            <p class=\"black--text\" style=\"font-weight:bold\">Choose Date <span\n                                    v-if=\"Object.hasOwnProperty.call(bookingDetails, 'zone') && Object.hasOwnProperty.call(bookingDetails.zone, 'isGated') && this.bookingDetails.zone.isGated == 0 && bookingDetails.zone.isPQREndReservation == 1\">and\n                                    Time</span></p>\n                            <p>Expires at {{ countDownExitTime }}</p>\n                        </v-col>\n                    </v-row>\n\n                    <v-row no-gutters>\n                        <v-col cols=\"12\" class=\" text-center color-black\" style=\"font-size: 12px\">\n                            <v-row no-gutters>\n                                <v-col cols=\"1\" class=\"text-right align-self-center\">\n                                    <v-icon class=\"material-icons-outlined\">today</v-icon>\n                                </v-col>\n                                <v-col cols=\"11\" class=\"px-2\">\n                                    <v-menu ref=\"Datemenu\" v-model=\"Datemenu\" :close-on-content-click=\"false\"\n                                        transition=\"scale-transition\" offset-y max-width=\"290px\" min-width=\"auto\">\n                                        <template v-slot:activator=\"{ on, attrs }\">\n                                            <v-text-field class=\"pt-0\" v-model=\"dateFormatted\" v-bind=\"attrs\" v-on=\"on\"\n                                                readonly hide-details=\"auto\"></v-text-field>\n                                        </template>\n                                        <v-date-picker v-model=\"exitDate\" @input=\"Datemenu = false\"\n                                            @blur=\"exitDate = parseDate(dateFormatted)\" @change=\"dateTimeChange\"\n                                            :min=\"minDate\" :max=\"maxDate\" header-color=\"#f2555c\"\n                                            color=\"#f2555c\"></v-date-picker>\n                                    </v-menu>\n                                </v-col>\n                            </v-row>\n                        </v-col></v-row>\n                    <v-row no-gutters class=\"pt-2\"\n                        v-if=\"Object.hasOwnProperty.call(bookingDetails, 'zone') && Object.hasOwnProperty.call(bookingDetails.zone, 'isGated') && this.bookingDetails.zone.isGated == 0 && bookingDetails.zone.isPQREndReservation == 1\">\n                        <v-col cols=\"1\" class=\"text-right align-self-center\">\n                            <v-icon class=\"material-icons-outlined\">schedule</v-icon>\n                        </v-col>\n                        <v-col cols=\"11\" class=\"px-2\">\n                            <v-row no-gutters class=\"pb-0\">\n                                <v-col class=\"pb-0\">\n                                    <vue-time-picker auto-scroll hide-disabled-items v-model=\"exitTimeSelected\"\n                                        @open=\"openTimePicker()\" hide-clear-button hour-label=\"Hour\" minute-label=\"Minute\"\n                                        class=\"time-picker-input\" input-width=\"100%\" drop-direction=\"up\"\n                                        placeholder=\"Choose Time *\" format=\"hh:mm a\" :hour-range=\"timePickerHrRange\"\n                                        :minute-range=\"timePickerMinRange\" @change=\"onTimePickerChange\"></vue-time-picker>\n                                </v-col>\n                            </v-row>\n                        </v-col>\n                    </v-row>\n                    <v-container fluid pa-0 v-if=\"estimate != null && Object.keys(estimate).length != 0\"> <v-row no-gutters\n                            class=\"pt-2 px-2\">\n                            <v-col cols=\"4\" class=\"text-left\">\n                                <p style=\"font-size: small\" class=\"black--text\">\n                                    Parking\n                                </p>\n                            </v-col>\n                            <v-spacer></v-spacer>\n                            <v-col cols=\"4\" class=\"text-left\">\n                                <p style=\"font-size: small\" class=\"black--text text-right\">\n                                    {{ estimate.hasOwnProperty(\"totalPrice\") ? \"$ \" + estimate.totalPrice.toFixed(2) : \"-\"\n                                    }}\n\n                                </p>\n                            </v-col>\n                        </v-row>\n                        <v-row no-gutters class=\"mt-0 px-2\">\n                            <v-col cols=\"4\" class=\"text-left\">\n                                <p style=\"font-size: small\" class=\"black--text\">\n                                    Service Fee\n                                </p>\n                            </v-col>\n                            <v-spacer></v-spacer>\n                            <v-col cols=\"4\" class=\"text-left\">\n                                <p style=\"font-size: small\" class=\"black--text text-right\">\n                                    {{ estimate.hasOwnProperty(\"totalFee\") ? \"$ \" + estimate.totalFee.toFixed(2) : \"-\" }}\n                                </p>\n                            </v-col>\n                        </v-row>\n                        <hr />\n                        <v-row no-gutters class=\"mt-2 px-2\">\n                            <v-col cols=\"6\" class=\"text-left\">\n                                <p style=\"font-weight: bold;color:#F2555C;font-size:15px\">\n                                    Purchase Total <sup>*</sup>\n                                </p>\n                            </v-col>\n                            <v-spacer></v-spacer>\n                            <v-col cols=\"4\" class=\"text-left\">\n                                <p style=\"font-size: small;font-weight: bold;color:#F2555C\" class=\" text-right\">\n                                    {{ estimate.hasOwnProperty(\"grandTotal\") ? \"$ \" + estimate.grandTotal.toFixed(2) : \"-\"\n                                    }}\n\n                                </p>\n                            </v-col>\n                            <p>\n                                *Includes state and local taxes of {{ estimate.hasOwnProperty(\"totalTax\") ? \"$ \" +\n                                    estimate.totalTax.toFixed(2) : \"-\" }}\n                            </p>\n                        </v-row>\n                        <v-row>\n                            <v-col>\n                                <v-btn rounded elevation=\"20\" :loading=\"extendBtnLoading\"\n                                    class=\"add_licence_plate_btn white--text\" @click=\"extendEDT()\">Extend\n                                    Parking</v-btn>\n                            </v-col>\n                        </v-row>\n                    </v-container>\n                </v-card-text>\n            </v-card>\n        </v-dialog>\n        <v-dialog v-model=\"invalidQRDialog\" persistent max-width=\"290\">\n            <v-card class=\"pa-0\">\n                <v-card-title class=\"justify-center\" style=\"position: relative\">\n                    <v-icon x-large color=\"red accent-2\">mdi-alert-outline</v-icon>\n                </v-card-title>\n                <v-card-text class=\"text-center mt-5\">\n                    <span style=\"font-size: 20px\">{{ invalidQRMsg }}</span>\n                </v-card-text>\n                <v-card-actions class=\"text-center pb-6\">\n                    <v-container pa-0 fluid>\n                        <v-row no-gutters>\n                            <v-col cols=\"12\">\n                                <v-btn rounded block elevation=\"20\" class=\"white--text exit_dialog_btn\"\n                                    @click=\"reScanQR()\">Re-Scan\n                                    Code</v-btn>\n                            </v-col>\n                        </v-row>\n                    </v-container>\n                </v-card-actions>\n            </v-card>\n        </v-dialog>\n        <v-dialog v-model=\"invalidValidationQRDialog\" persistent max-width=\"290\">\n            <v-card class=\"pa-0\">\n                <v-card-title class=\"justify-center\" style=\"position: relative\">\n                    <v-icon x-large color=\"red accent-2\">mdi-alert-outline</v-icon>\n                </v-card-title>\n                <v-card-text class=\"text-center mt-5\">\n                    <span style=\"font-size: 20px\">{{ invalidValidationQRMsg }}</span>\n                </v-card-text>\n                <v-card-actions class=\"text-center pb-6\">\n                    <v-container pa-0 fluid>\n                        <v-row no-gutters>\n                            <v-col cols=\"12\">\n                                <v-btn rounded block elevation=\"20\" class=\"white--text exit_dialog_btn\"\n                                    @click=\"reScanValidationQR()\">Re-Scan Code</v-btn>\n                            </v-col>\n                        </v-row>\n                    </v-container>\n                </v-card-actions>\n            </v-card>\n        </v-dialog>\n        <v-dialog v-model=\"invalidSMSDialog\" persistent max-width=\"290\">\n            <v-card class=\"pa-0\">\n                <v-card-title class=\"justify-center\" style=\"position: relative\">\n                    <v-icon x-large color=\"red accent-2\">mdi-alert-outline</v-icon>\n                </v-card-title>\n                <v-card-text class=\"text-center mt-5\">\n                    <span style=\"font-size: 20px\">{{ invalidSMSMsg }}</span>\n                </v-card-text>\n                <v-card-actions class=\"text-center pb-6\">\n                    <v-container pa-0 fluid>\n                        <v-row no-gutters>\n                            <v-col cols=\"12\">\n                                <v-btn rounded block elevation=\"20\" class=\"white--text exit_dialog_btn\"\n                                    @click=\"invalidSMSDialog = false\">Re-Enter Code</v-btn>\n                            </v-col>\n                        </v-row>\n                    </v-container>\n                </v-card-actions>\n            </v-card>\n        </v-dialog>\n\n        <v-dialog v-model=\"pedestrianAccessDialog\" persistent max-width=\"290\">\n            <v-card class=\"pa-0\">\n                <v-card-title class=\"justify-center\" style=\"position: relative\">\n                    <v-icon x-large color=\"red accent-2\">mdi-alert-outline</v-icon>\n                </v-card-title>\n                <v-card-text class=\"text-center mt-5\">\n                    <span style=\"font-size: 20px\">{{ pedestrianAccessText }}</span>\n                </v-card-text>\n                <v-card-actions class=\"text-center pb-6\">\n                    <v-container pa-0 fluid>\n                        <v-row no-gutters>\n                            <v-col cols=\"12\">\n                                <v-btn rounded block elevation=\"0\" class=\"white--text exit_dialog_btn\"\n                                    @click=\"pedestrianAccessDialog = false\">Close</v-btn>\n                            </v-col>\n                        </v-row>\n                    </v-container>\n                </v-card-actions>\n            </v-card>\n        </v-dialog>\n    </v-container>\n</template>\n\n<script>\nimport APIHelper from \"../apiHelper\";\nimport GooglePay from \"./GooglePay.vue\";\n// import loggerHelper from \"../loggerHelper\";\nimport { mapGetters } from \"vuex\";\n// import { QrcodeStream } from \"vue-qrcode-reader\";\nimport QrCodeScanner from \"@/views/QrCodeScanner.vue\";\nimport ValidationQrCodeScanner from \"@/views/ValidationQrCodeScanner.vue\";\nimport ApplePay from \"@/views/ApplePay.vue\";\nimport { formatDateTime } from \"@/utils/formatDateTime\";\nimport { EventBus } from \"@/lib/EventBus\";\nimport VueTimePicker from \"@/uiComponents/VueTimePicker\";\nimport { secondsToHms } from \"@/utils/formatDateTime\";\nimport { addMinutes, addDays, addHours } from \"date-fns\";\nimport { format } from \"date-fns\";\nimport { dateToTimeZoneDate } from \"@/utils/formatDateTime\";\n// import QrScanner from 'qr-scanner';\nexport default {\n    name: \"CheckIn\",\n    components: { QrCodeScanner, ValidationQrCodeScanner, ApplePay, VueTimePicker, GooglePay },\n    data: () => ({\n        // rules: {\n        //   counter: value => value.length <= 6 || \"Max 6 characters\"\n        // },\n        loyalty24knum: \"\",\n        alertIcon: \"mdi-check-circle\",\n        alertDialog: false,\n        alertMsg: \"\",\n        loyalty: false,\n        extDateAndTime: null,\n        extendBtnLoading: false,\n        loading: false,\n        extensionDialog: false,\n        stopTime: \"\",\n        exitTimeSelected: {},\n        timePickerHrRange: null,\n        timeExceeded: false,\n        timePickerMinRange: null,\n        minDate: null,\n        maxDate: null,\n        Timemenu: false,\n        startDate: \"\",\n        maxDateTime: null,\n        estimate: null,\n        Datemenu: false,\n        exitDate: null,\n        dateFormatted: null,\n        exitDateTime: 0,\n        exitTimeInterval: null,\n        iosDevice: false,\n        invalidValidationQRDialog: false,\n        cameraStatus: false,\n        validationCameraStatus: false,\n        validatedDateTime: 0,\n        gracePeriodTime: 0,\n        validatedInterval: \"\",\n        duration: 300,\n        offset: 0,\n        pedestrianAccessDialog: false,\n        pedestrianAccessText: \"\",\n        easing: \"easeInOutCubic\",\n        pageHeight: window.outerHeight,\n        qrCodeDialog: false,\n        countUpTime: \"\",\n        interval: \"\",\n        isValid: undefined,\n        camera: \"auto\",\n        smsText: \"\",\n        smsDialog: false,\n        dialerDialog: false,\n        invalidQRMsg: \"\",\n        invalidValidationQRMsg: \"\",\n        invalidQRDialog: false,\n        invalidSMSMsg: \"\",\n\n        invalidSMSDialog: false,\n        smsPending: false,\n        validateBookingPending: false,\n        validateBookingDialog: false,\n        validateBookingTxt: \"\",\n        validateQRCodePending: false,\n        validateQRCodeDialog: false,\n    }),\n    computed: {\n        ...mapGetters({\n            bookingId: \"getterBookingId\",\n            bookingDetails: \"getterBookingDetails\",\n            zoneDetails: \"getterZoneDetails\",\n            entryTime: \"getterEntryTime\",\n            exitGateCodes: \"getterExitGateCodes\",\n            isPQREndReservation: \"getterZoneIsPQREndReservation\",\n\n        }),\n\n        disableLoyalty() {\n            let disabled = this.loyalty24knum === undefined || this.loyalty24knum === null || this.loyalty24knum == \"\"\n            return disabled\n        },\n        disableExtend() {\n            let disabled = (\n                this.time === null || this.time === \"\" || this.time === undefined || this.estimate === null || this.estimate === undefined || Object.keys(this.estimate).length === 0)\n            return disabled;\n        },\n        countDownExitTime() {\n            if (this.exitDateTime < 0) {\n                this.$store.commit(\"SET_VALIDATED_TIME_STATUS\", true);\n                clearInterval(this.exitTimeInterval);\n            }\n            return secondsToHms(this.exitDateTime / 1000 + 59);\n        },\n        countDownEstimateTime() {\n            if (this.exitDateTime < 0) {\n                this.$store.commit(\"SET_VALIDATED_TIME_STATUS\", true);\n                clearInterval(this.exitTimeInterval);\n            }\n            return secondsToHms(this.exitDateTime / 1000 + 59);\n        },\n        isExtra() {\n            return window.location.pathname.includes(\"/gx/\");\n        },\n        options() {\n            return {\n                duration: this.duration,\n                offset: this.offset,\n                easing: this.easing,\n            };\n        },\n        showPaymentCardAdded: function getCardStatus() {\n            var cardOnFile = this.bookingDetails?.booking?.cardOnfile\n                ? this.bookingDetails.booking.cardOnfile\n                : null;\n            var validatedState = this.bookingDetails?.booking?.validated\n                ? this.bookingDetails.booking.validated\n                : null;\n            var state =\n                cardOnFile == \"1\"\n                    ? true\n                    : cardOnFile == \"2\" &&\n                    validatedState == \"1\" &&\n                    this.validatedDateTime > 0;\n            return state;\n        },\n        timeAgo: function getTimeAgo() {\n            return this.countUpTime;\n        },\n        validationPending: function qrValidation() {\n            return this.isValid === undefined && this.camera === \"off\";\n        },\n        booking_content() {\n            let dateTime = formatDateTime(\n                Number(this.bookingDetails.booking.entrytime)\n            );\n            return dateTime[0] + \" on \" + dateTime[1] + \" \" + dateTime[2];\n        },\n        validated_content() {\n            if (this.bookingDetails?.zone?.timezoneoffset) {\n                let dateTime = this.bookingDetails.booking.type == \"13\" ? formatDateTime(\n                    Number(this.bookingDetails.booking.revStart) +\n                    Number(this.bookingDetails.booking.couponValidTime)\n                ) : formatDateTime(\n                    Number(this.bookingDetails.booking.entrytime) +\n                    Number(this.bookingDetails.booking.couponValidTime)\n                );\n                return dateTime[0] + \", \" + dateTime[1] + \" \" + dateTime[2];\n            }\n            return \"\";\n        },\n        countDownValidatedTime() {\n            if (this.validatedDateTime < 0) {\n                this.$store.commit(\"SET_VALIDATED_TIME_STATUS\", true);\n                clearInterval(this.validatedInterval);\n            }\n            return this.secondsToHms(this.validatedDateTime / 1000 + 59);\n        },\n        countDownGracePeriodTime() {\n            if (this.gracePeriodTime < 0) {\n                this.$store.commit(\"SET_GRACE_PERIOD_TIME_STATUS\", true);\n                clearInterval(this.gracePeriodInterval);\n            }\n            //add 59 sec to graceperiod time to skip 0 min.\n            return this.secondsToHms(this.gracePeriodTime / 1000 + 59);\n        },\n        // gracePeriodCountDownTime,\n        // countDownValidationtime(){\n        //   return\n        // }\n    },\n    watch: {\n        currentDate(newVal) {\n            console.log(newVal);\n        },\n        exitDate(newVal, oldVal) {\n            let exitdatetime = this.formatExitDateTime(this.bookingDetails?.booking?.revEnd, 'date');\n            this.dateFormatted = this.formatDate(this.exitDate)\n            if (oldVal != newVal && this.exitDate == format(\n                new Date(exitdatetime),\n                \"yyyy-MM-dd\"\n            )) {\n                let selectedHours =\n                    format(\n                        new Date(exitdatetime),\n                        \"hh\"\n                    )\n\n                let selectedMins =\n                    format(\n                        new Date(exitdatetime)\n                        ,\n                        \"mm\"\n                    )\n                let selectedAMPM =\n                    format(\n                        new Date(exitdatetime),\n                        \"aaa\"\n                    )\n                this.exitTimeSelected = Object.assign({}, {\n                    hh: selectedHours,\n                    mm: selectedMins,\n                    a: selectedAMPM\n                });\n                this.getRateCall = true;\n            }\n            else {\n                this.getRateCall = false\n            }\n        },\n        exitTimeSelected(newVal, oldVal) {\n            if (oldVal != null && newVal != null && oldVal?.a != newVal?.a) {\n                this.exitTimeSelected = Object.assign(this.exitTimeSelected, {\n                    hh: \"\",\n                    mm: \"\",\n                });\n            }\n            if (oldVal != null && newVal != null && oldVal?.hh != newVal?.hh) {\n                this.exitTimeSelected = Object.assign(this.exitTimeSelected, {\n                    mm: \"\",\n                });\n            }\n\n            this.setTimePicker(newVal);\n        },\n    },\n    created() { },\n    mounted: function () {\n        this.exitDateTime = this.calculateExitDateTime();\n        this.exitTimeInterval = setInterval(() => {\n            if (\n                this.bookingDetails?.zone?.timezone\n\n            ) {\n                this.exitDateTime = this.calculateExitDateTime();\n            }\n        }, 1000);\n        if (\n            this.entryTime != null &&\n            !this.bookingDetails?.booking?.exittime &&\n            this.bookingDetails?.zone?.timezone &&\n            this.bookingDetails?.booking?.gracePeriod\n        ) {\n            this.countUpTime = this.calculateParkingTime(\n                this.entryTime,\n                this.bookingDetails.booking.gracePeriod,\n                this.bookingDetails.zone.timezone\n            );\n        }\n        this.interval = setInterval(() => {\n            if (\n                this.entryTime != null &&\n                !this.bookingDetails?.booking?.exittime &&\n                this.bookingDetails?.zone?.timezone &&\n                this.bookingDetails?.booking?.gracePeriod\n            ) {\n                this.countUpTime = this.calculateParkingTime(\n                    this.entryTime,\n                    this.bookingDetails.booking.gracePeriod,\n                    this.bookingDetails.zone.timezone\n                );\n            }\n        }, 1000);\n        if (\n            this.bookingDetails?.booking?.exittime &&\n            this.bookingDetails.booking.exittime != null &&\n            this.bookingDetails.booking.exittime != \"\"\n        ) {\n            clearInterval(this.interval);\n        }\n        if (\n            this.bookingDetails?.booking?.validated &&\n            this.bookingDetails.booking.validated == \"1\" &&\n            this.bookingDetails?.booking?.validationType &&\n            this.bookingDetails.booking.validationType == \"DIVRT\"\n        ) {\n            this.validatedDateTime = this.calculateValidatedTime();\n        }\n\n        this.validatedInterval = setInterval(() => {\n            if (\n                this.bookingDetails?.zone?.timezone &&\n                this.bookingDetails?.booking?.validated &&\n                this.bookingDetails.booking.validated == \"1\" &&\n                this.bookingDetails?.booking?.validationType &&\n                this.bookingDetails.booking.validationType == \"DIVRT\"\n            ) {\n                this.validatedDateTime = this.calculateValidatedTime();\n            }\n        }, 1000);\n        if (\n            this.bookingDetails?.booking?.validated &&\n            this.bookingDetails.booking.validated == \"1\" &&\n            this.bookingDetails?.booking?.validationType &&\n            this.bookingDetails.booking.validationType == \"DIVRT\"\n        ) {\n            if (this.validatedDateTime < 0) {\n                this.$store.commit(\"SET_VALIDATED_TIME_STATUS\", true);\n                clearInterval(this.validatedInterval);\n            }\n        }\n\n        if (this.bookingDetails?.booking?.gracePeriod > 0) {\n            this.gracePeriodTime = this.calculateGracePeriodTime();\n        }\n\n        this.gracePeriodInterval = setInterval(() => {\n            if (this.bookingDetails?.zone?.timezone) {\n                this.gracePeriodTime = this.calculateGracePeriodTime();\n            }\n        }, 1000);\n        if (this.bookingDetails?.booking?.gracePeriod > 0) {\n            if (this.gracePeriodTime < 0) {\n                this.$store.commit(\"SET_GRACE_PERIOD_TIME_STATUS\", true);\n                clearInterval(this.gracePeriodInterval);\n            }\n        }\n        EventBus.$on(\"sms-qr-result\", (result) => {\n            this.onDecode(result);\n        });\n        EventBus.$on(\"validation-qr-result\", (result) => {\n            this.onValidateQRCode(result);\n        });\n\n        // if(this.bookingDetails?.zone?.isPedestrian=='1'){\n        //   this.pedestrianAccess=true\n        // }\n    },\n    destroyed() {\n        clearInterval(this.interval);\n        clearInterval(this.validatedInterval);\n        clearInterval(this.gracePeriodInterval);\n    },\n    beforeRouteEnter(to, from, next) {\n        next(async (vm) => {\n            vm.getMobileOperatingSystem() === 'iOS' ? vm.iosDevice = true : vm.iosDevice = false;\n            if (\n                vm.bookingDetails?.booking?.exittime &&\n                vm.bookingDetails.booking.exittime != null &&\n                vm.bookingDetails.booking.exittime != \"\"\n            ) {\n                clearInterval(vm.interval);\n            }\n            if (vm.bookingDetails?.booking?.validated == \"0\") {\n                if (vm.validatedDateTime < 0) {\n                    vm.$store.commit(\"SET_VALIDATED_TIME_STATUS\", true);\n                    clearInterval(vm.validatedInterval);\n                }\n            }\n        });\n    },\n    methods: {\n        loyaltyValid() {\n            if (!(/^[a-z0-9]+$/i).test(this.loyalty24knum)) {\n                console.log('here')\n                this.loyalty24knum = this.loyalty24knum.replace(/[^\\w\\s]/gi, '')\n            }\n        },\n        async submitLoyalty(code) {\n            try {\n                this.validateBookingPending = true;\n                let result = await this.validateBooking(code);\n                if (!result.data.status) {\n                    this.invalidSMSMsg = result?.data?.message\n                        ? result.data.message\n                        : \"Validation not recognized. Please try again\";\n                    this.invalidSMSDialog = true;\n                    this.validateBookingPending = false;\n                    this.postToLoggerAPI({\n                        phone: this.bookingDetails.user.contact,\n                        refId: this.bookingId,\n                        error: this.invalidSMSMsg,\n                        icon: \"redeem\",\n                        statusText:\n                            \"Error in validating the session on entering validation code - \" +\n                            this.validateBookingTxt,\n                    });\n                } else {\n                    this.postToLoggerAPI({\n                        phone: this.bookingDetails.user.contact,\n                        refId: this.bookingId,\n                        icon: \"redeem\",\n                        statusText:\n                            \"Parker validated the session successfully by entering validation code - \" +\n                            this.validateBookingTxt,\n                    });\n                    this.validateBookingPending = false;\n                    this.validateBookingDialog = false;\n                    this.$store.commit(\n                        \"SET_VALIDATED_MERCHANT\",\n                        result?.data?.merchantName\n                    );\n                    this.$router.replace({ path: \"/validatesuccess\" });\n                }\n            } catch (error) {\n                console.log(error);\n                this.validateBookingPending = false;\n            }\n        },\n        closeAlertDialog() {\n            this.alertDialog = false;\n\n        },\n        getPaymentType(type) {\n            switch (type) {\n                case 'APPLE_PAY': {\n                    return 'Apple Pay';\n                }\n                case 'GOOGLE_PAY': {\n                    return 'Google Pay'\n                }\n                case 'Card': {\n                    return 'Card'\n                }\n            }\n        },\n\n        /** @methods to find the the UTC date \n    @params the bookings date value , type 'exit (2023-12-02)' or 'formatdate (12/02/2023)'\n    */\n        formatUTCDefaultDate(defaultDate, type) {\n            let utcDate = new Date(defaultDate * 1000).toUTCString();\n            let month = utcDate.split(\",\")[1].split(\" \")[2]; // Jan\n            let date = utcDate.split(\",\")[1].split(\" \")[1]; // 27\n            let year = utcDate.split(\",\")[1].split(\" \")[3]; //2023\n            let exitformat = format(new Date(month + \" \" + date + \" \" + year), 'yyyy-MM-dd');\n            let dateformat = format(new Date(month + \" \" + date + \" \" + year), \"MM/dd/yyyy\");\n            return type === \"exit\" ? exitformat : dateformat;\n\n        },\n        formatExitDateTime(time, val) {\n            if (time !== null && time !== undefined && time != '') {\n                let utcDate = new Date(time * 1000).toUTCString(); //\"Wed, 27 Jan 2021 13:59:04 GMT\"\n                let month = utcDate.split(\",\")[1].split(\" \")[2]; // Jan\n                let date = utcDate.split(\",\")[1].split(\" \")[1]; // 27\n                let year = utcDate.split(\",\")[1].split(\" \")[3];\n                let hr = utcDate.split(\",\")[1].split(\" \")[4].split(\":\")[0]; // 13\n                let min = utcDate.split(\",\")[1].split(\" \")[4].split(\":\")[1]; //59\n                let formatHr = Number(hr) > 12 ? Number(hr) - 12 : Number(hr); // 1\n                formatHr = Number(formatHr) >= 10 ? Number(formatHr) : formatHr; //01\n                let amOrpm = Number(hr) >= 12 ? \"p\" : \"a\"; //PM\n                let ampm = Number(hr) >= 12 ? \"PM\" : \"AM\";\n                switch (val) {\n                    case 'hour': {\n                        return formatHr + amOrpm;\n                    }\n                    case 'mins': {\n                        return min\n                    }\n                    case 'date': {\n                        return month + \" \" + date + \", \" + year + \" \" + formatHr + \":\" + min + \" \" + ampm;\n                    }\n                }\n            }\n            //Jan 27, 01:59 PM\n        },\n        async extendEDT() {\n            try {\n                //format(new Date(this.checkinDate), \"yyyy-MM-dd'T'HH:mm:ss\");\n                this.extendBtnLoading = true;\n                let exitDateTime = this.extDateAndTime != null || this.extDateAndTime !== undefined || this.extDateAndTime != \"\" ?\n                    format(new Date(this.extDateAndTime), 'yyyy/MM/dd')\n                    +\n                    \" \" +\n                    format(new Date(this.extDateAndTime), 'hh:mm a') : \"\";\n                let data = {\n                    bid: this.bookingDetails?.booking?.bid,\n                    extendedTime: format(new Date(exitDateTime), \"yyyy-MM-dd HH:mm:ss\")//\"2022-12-29T02:26:00.000\",\n                };\n                var extendSessionRes = await APIHelper(\n                    \"POST\",\n                    \"/api/v1/prepaid/extendReservation\", data\n                );\n                if (extendSessionRes?.data?.message == \"Successfully updated!!\") {\n                    await this.getBookingDetails();\n                    this.extendBtnLoading = false;\n                    this.extensionDialog = false;\n                } else {\n                    this.alertDialog = true;\n                    this.alertMsg = extendSessionRes?.data?.message || \"Error in extending the session\"\n                }\n\n            } catch (error) {\n                this.extendBtnLoading = false;\n                console.log(error);\n            }\n        },\n        formatDate(date) {\n            let stringdate = date.toString();\n            if (!date) return null;\n\n            const [year, month, day] = stringdate.split(\"-\");\n            return `${month}/${day}/${year}`;\n        },\n        parseDate(date) {\n            if (!date) return null;\n\n            const [month, day, year] = date.split(\"/\");\n            return `${year}-${month.padStart(2, \"0\")}-${day.padStart(2, \"0\")}`;\n        },\n        async openExtDialog() {\n\n            // await axios.get(\n            //   process.env.VUE_APP_ON_DEMAND_URL + \"/\" + \"32899\"+ \".json\"\n            // );\n            this.setDefaultDate();\n            this.setDatePicker();\n            // this.setTimePicker();\n            this.extensionDialog = true;\n            this.extendBtnLoading = false;\n        },\n\n        setDefaultDate() {\n            this.exitDate = this.bookingDetails?.booking?.revEnd ? this.formatUTCDefaultDate(this.bookingDetails?.booking?.revEnd\n                , 'exit') : \"\";\n            //formatted exit date value to display\n            this.dateFormatted =\n                this.bookingDetails?.booking?.revEnd ? this.formatUTCDefaultDate(this.bookingDetails?.booking?.revEnd\n                    , 'format') : \"\";\n\n            let selectedHours = format(\n                new Date(this.formatExitDateTime(this.bookingDetails?.booking?.revEnd, 'date')),\n                \"hh\"\n            )\n            let selectedMins = format(\n                new Date(this.formatExitDateTime(this.bookingDetails?.booking?.revEnd, 'date')),\n                \"mm\"\n            )\n            let selectedAMPM = format(\n                new Date(this.formatExitDateTime(this.bookingDetails?.booking?.revEnd, 'date')),\n                \"aaa\"\n            )\n            this.exitTimeSelected = Object.assign(this.exitTimeSelected, {\n                hh: selectedHours,\n                mm: selectedMins,\n                a: selectedAMPM,\n            });\n            this.dateTimeChange();\n        },\n        onTimePickerChange(event) {\n            this.stopTime =\n                event.data.HH != \"\" && event.data.mm != \"\" && event.data.A != \"\"\n                    ? event.data.HH + \":\" + event.data.mm + \":00\"\n                    : \"\";\n            let currenTime = this.bookingDetails?.zone?.timezone\n                ? format(\n                    dateToTimeZoneDate(new Date(), this.bookingDetails?.zone?.timezone),\n                    \"yyyy-MM-dd HH:mm:ss\"\n                )\n                : format(new Date(), \"yyyy-MM-dd  HH:mm:ss\");\n            if (\n                event.data.HH != \"hh\" &&\n                event.data.mm != \"mm\" &&\n                this.stopTime != \"\" &&\n                new Date(this.exitDate + \" \" + this.stopTime).getTime() >\n                new Date(currenTime).getTime()\n            ) {\n\n                this.dateTimeChange();\n            }\n        },\n        setDatePicker() {\n            //set the minimum date to today date(zone time zone date)\n            this.minDate = this.bookingDetails.zone.timezone\n                ?\n                format(new Date(this.formatExitDateTime(this.bookingDetails?.booking?.revEnd, 'date')), 'yyyy-MM-dd')\n                :\n                format(dateToTimeZoneDate(\n                    new Date(Number(this.bookingDetails?.booking?.revEnd) * 1000 - Number(this.bookingDetails.zone.timezoneoffset) * 1000)\n                    , this.bookingDetails.zone.timezone\n                ), 'yyyy-MM-dd');\n            //calculate max parkign time in seconds\n            let maxPark = this.bookingDetails != null ? this.bookingDetails.zone.maxParkingTime : null;\n\n            let addeddays = addDays(new Date(), maxPark.days);\n            let addedhours = addHours(addeddays, maxPark.hours);\n            let addedmins = addMinutes(addedhours, maxPark.minutes);\n            //get max date in seconds based on max parking time\n            let maxZoneDate = addedmins;\n            this.maxDate = this.bookingDetails?.zone.timezone\n                ? format(\n                    dateToTimeZoneDate(\n                        maxZoneDate,\n                        this.bookingDetails?.zone?.timezone\n                    ),\n                    \"yyyy-MM-dd\"\n                )\n                : format(new Date(), \"yyyy-MM-dd\");\n            this.exitDate = format(\n                new Date(this.formatExitDateTime(this.bookingDetails?.booking?.revEnd, 'date')),\n                \"yyyy-MM-dd\"\n            )\n            //get max date with time and set it to maxDateTime\n            this.maxDateTime = this.bookingDetails?.zone?.timezone\n                ? format(\n                    dateToTimeZoneDate(\n                        new Date(maxZoneDate),\n                        this.bookingDetails?.zone?.timezone\n                    ),\n                    \"yyyy-MM-dd hh:mm aaaaa\"\n                )\n                : format(new Date(), \"yyyy-MM-dd hh:mm aaaaa\");\n        },\n        setTimePicker(val) {\n            // let currentTimeMeridian = this.onDemandZoneDetails.timeZone\n            // ? format(\n            //     dateToTimeZoneDate(\n            //       addMinutes(new Date(), 15),\n            //       this.onDemandZoneDetails.timeZone\n            //     ),\n            //     \"aaa\"\n            //   )\n            // : format(new Date(), \"aaa\");\n            // let currentHr = this.bookingDetails.zone.timezone\n            //   ? format(\n            //     dateToTimeZoneDate(\n            //       new Date(),\n            //       this.bookingDetails.zone.timezone\n            //     ),\n            //     \"h\"\n            //   )\n            //   : format(new Date(), \"h\");\n            // console.log(currentHr)\n\n            // get the todays current zone time\n            let exitdatehour = this.formatExitDateTime(this.bookingDetails.booking.revEnd, 'hour')\n            // let exitdatemins = this.formatExitDateTime(this.bookingDetails.booking.exittime, 'mins')\n            let exitdatetime = this.formatExitDateTime(this.bookingDetails.booking.revEnd, 'date')\n\n            // let currentTime = this.bookingDetails.zone.timezone\n            //   ? format(\n            //     dateToTimeZoneDate(\n            //       new Date(),\n            //       this.bookingDetails.zone.timezone\n            //     ),\n            //     \"haaaaa\"\n            //   )\n            //   : format(new Date(), \"haaaaa\");\n            // set the hr range\n            if (\n                this.exitDate ==\n                format(\n                    new Date(exitdatetime),\n                    \"yyyy-MM-dd\"\n                )\n            ) {\n                this.timePickerHrRange = [\n                    [exitdatehour == \"12a\" ? \"0a\" : exitdatehour, \"11p\"],\n                ];\n            }\n            // if maxdate == exit date\n            else if (\n                this.maxDateTime != null &&\n                this.maxDateTime.split(\" \")[0] == this.exitDate\n            ) {\n                // console.log(this.maxDateTime)\n                let time = this.maxDateTime.split(\" \")[1];\n                let hr = time.split(\":\")[0] + this.maxDateTime.split(\" \")[2];\n                hr == \"12a\"\n                    ? \"0a\"\n                    : time.split(\":\")[0] + this.maxDateTime.split(\" \")[2];\n                this.timePickerHrRange = [[\"0a\", hr]];\n            }\n\n            else {\n                this.timePickerHrRange = null;\n            }\n\n            let hrInPM = this.bookingDetails.zone.timezone\n                ? format(\n                    new Date(exitdatetime),\n                    \"hhaaa\"\n                )\n                : format(new Date(exitdatetime), \"hhaaa\");\n            // set the min range\n            // console.log(hrInPM==val?.hh + val?.a);\n            if (\n                this.exitDate ==\n                format(\n                    new Date(exitdatetime),\n                    \"yyyy-MM-dd\"\n                ) &&\n                val != null &&\n                hrInPM == val?.hh + val.a\n            ) {\n                this.timePickerMinRange = [\n                    [\n                        this.bookingDetails.zone.timezone\n                            ? (\n                                format(\n                                    new Date(exitdatetime),\n                                    \"mm\"\n                                )\n                            )\n                            : format(new Date(exitdatetime), \"mm\"),\n                        59,\n                    ],\n                ];\n            }\n            else if (\n                this.maxDateTime != null &&\n                this.maxDateTime.split(\" \")[0] == this.exitDate\n            ) {\n                let time = this.maxDateTime.split(\" \")[1];\n                let hr = time.split(\":\")[0] + this.maxDateTime.split(\" \")[2];\n                if (val != null && hr == val?.hh + val.a[0]) {\n                    let min = time.split(\":\")[1];\n                    this.timePickerMinRange = [[0, min]];\n                } else {\n                    this.timePickerMinRange = [[0, 59]];\n                }\n                // // } \n\n            }\n            else {\n                this.timePickerMinRange = [[0, 59]];\n            }\n            if (\n                this.exitTimeSelected == null &&\n                this.bookingDetails?.booking?.timezone != undefined\n            ) {\n                this.timePickerHrRange = [];\n                this.timePickerMinRange = [];\n                return;\n            } else if (this.exitTimeSelected?.hh == \"\") {\n                this.timePickerMinRange = [];\n            }\n        },\n        // onOpen() {\n        //   this.setTimePicker(this.exitTimeSelected);\n        // },\n        openTimePicker() {\n            this.setTimePicker(this.exitTimeSelected);\n        },\n        /** @methods to find the estimate rate \n       @params startDate , stopDate,zcode, type , env_overRide\n       */\n\n        async dateTimeChange() {\n            try {\n                // format(new Date(this.checkinDate), \"yyyy-MM-dd'T'HH:mm:ss\");\n                this.setTimePicker();\n\n                this.startDate = this.bookingDetails?.zone?.timezone\n                    ? format(\n                        dateToTimeZoneDate(\n                            new Date(),\n                            this.bookingDetails?.zone?.timezone\n                        ),\n                        \"yyyy-MM-dd'T'HH:mm:ss\"\n                    )\n                    : format(new Date(), \"yyyy-MM-dd'T'HH:mm:ss\");\n                // console.log(this.exitTimeSelected?.hh+\":\"+this.exitTimeSelected.mm+\":00\")\n                // this.exitDate + \"T23:59:00\";\n                let selectedHours = this.exitTimeSelected?.hh;\n                let selectedMins = this.exitTimeSelected?.mm;\n                let selectedAMPM = this.exitTimeSelected?.a;\n                if (selectedAMPM == \"pm\" && Number(selectedHours) < 12) {\n                    selectedHours = (Number(selectedHours) + 12).toString();\n                    selectedHours = selectedHours === '0' ? selectedHours = '00' : selectedHours;\n                }\n                if (selectedAMPM == \"am\" && Number(selectedHours) == 12) {\n                    selectedHours = (Number(selectedHours) - 12).toString()\n                    selectedHours = selectedHours === '0' ? selectedHours = '00' : selectedHours;\n                }\n                let exittime = Object.hasOwnProperty.call(this.bookingDetails, 'zone') && Object.hasOwnProperty.call(this.bookingDetails.zone, 'isGated') && this.bookingDetails?.zone?.isGated == '0' ? 'T' + selectedHours + \":\" + selectedMins + \":00\" : \"T23:59:00\"\n                let stopDate = this.exitDate + exittime;\n\n                let data = {\n                    startAt: this.startDate,\n                    stopAt: stopDate,\n                    zcode: this.bookingDetails?.zone?.zcode,\n                };\n                this.extendBtnLoading = true;\n                this.addPaymentBtnLoading = true;\n                var getRate = await APIHelper(\"POST\", \"/api/v2/getRate\", data);\n                this.extendBtnLoading = false;\n                this.extDateAndTime = stopDate;\n                //condition to check if the date time selected is lesser than current time\n                if (!getRate?.data?.status && !this.getRateCall) {\n                    this.disableAddPaymentBtn = true;\n                    this.alertDialog = true;\n                    this.alertMsg =\n                        getRate?.data?.message || \"Error in getting rate details\";\n                } else {\n                    this.disableAddPaymentBtn = false;\n                }\n                this.estimate = Object.assign({}, getRate?.data?.data);\n                // estimatedVal != \"\" &&\n                // estimatedVal != null &&\n                // estimatedVal != undefined\n                //   ? Number(estimatedVal).toFixed(2)\n                //   : estimatedVal;\n                this.addPaymentBtnLoading = false;\n            }\n            catch (error) {\n                this.addPaymentBtnLoading = false;\n                console.log(error);\n            }\n        },\n        calculateExitDateTime() {\n            if (this.bookingDetails?.zone?.timezone) {\n                //   var currentTime =\n                // new Date().getTime() +\n                // (Number(this.bookingDetails.zone.timezoneoffset) * 1000 +\n                //   Number(this.bookingDetails.zone.timezonedstoffset) * 1000);\n                var currentTime =\n                    new Date().getTime() +\n                    (Number(this.bookingDetails.zone.timezoneoffset) * 1000 +\n                        Number(this.bookingDetails.zone.timezonedstoffset) * 1000);\n                var exitTime =\n                    new Date(this.bookingDetails.booking.reservationEndDate).getTime();\n                this.$store.commit(\"SET_EXIT_TIME_TIME_STATUS\", this.exitDateTime < 0);\n                exitTime - currentTime < 0\n                    ? clearInterval(this.exitInterval)\n                    : \"\";\n                return exitTime - currentTime;\n            }\n            return 0\n\n        },\n        hotelGuest() {\n            let url = window.location.origin + '?zcode=' + this.bookingDetails?.zone?.locationCode + '#/createsession';\n            let plate = this.bookingDetails?.booking?.vehicleNo || \"\";\n            let phone = this.bookingDetails?.user?.contact || \"\";\n            let bid = this.bookingDetails?.booking?.bid || \"\";\n            let checkindate = this.bookingDetails?.booking?.entrytime || \"\";\n            let params = '/?phone=' + phone + '&bid=' + bid + '&plate=' + plate + '&entrytime=' + checkindate;\n            window.location.replace(url + params);\n            // this.$router.replace({path:'/'});\n\n        },\n        closeQRCodeDialog() {\n            this.qrCodeDialog = false;\n            this.cameraStatus = false;\n        },\n        closeValidationQRDialog() {\n            this.validationCameraStatus = false;\n            this.validateBookingDialog = true;\n            this.validateQRCodeDialog = false;\n        },\n        reScanQR() {\n            this.invalidQRDialog = false;\n            this.cameraStatus = true;\n        },\n        reScanValidationQR() {\n            this.invalidValidationQRDialog = false;\n            this.validationCameraStatus = true;\n        },\n        openSmsQrScanner() {\n            this.qrCodeDialog = true;\n            this.cameraStatus = true;\n        },\n        openSMSDialog() {\n            this.smsDialog = true;\n            let exitLanes =\n                this.exitGateCodes.length > 0\n                    ? this.exitGateCodes.filter((a) => a.isPedestrian == \"0\")\n                    : [];\n            if (\n                this.bookingDetails?.booking?.prePopulateGateCodes &&\n                this.bookingDetails.booking.prePopulateGateCodes == \"1\"\n            ) {\n                this.smsText = exitLanes.length == 1 ? exitLanes[0].sms_code : \"\";\n            }\n        },\n        scrollToSubmit() {\n            const el = document.querySelector(\"#submitsmsbtn\");\n            if (el) {\n                el.scrollIntoView(this.options);\n            }\n        },\n        scrollToValidateBtn() {\n            const el = document.querySelector(\"#validatebookingbtn\");\n            if (el) {\n                el.scrollIntoView(this.options);\n            }\n        },\n        calculateGracePeriodTime() {\n            var currentTime =\n                new Date().getTime() +\n                (Number(this.bookingDetails.zone.timezoneoffset) * 1000 +\n                    Number(this.bookingDetails.zone.timezonedstoffset) * 1000);\n            var gracePeriodTime =\n                (Number(this.bookingDetails.booking.entrytime) +\n                    Number(this.bookingDetails.booking.gracePeriod)) *\n                1000; //\n            this.$store.commit(\n                \"SET_GRACE_PERIOD_TIME_STATUS\",\n                this.gracePeriodTime <= 0\n            );\n            return gracePeriodTime - currentTime;\n        },\n        calculateValidatedTime() {\n            var currentTime =\n                new Date().getTime() +\n                (Number(this.bookingDetails.zone.timezoneoffset) * 1000 +\n                    Number(this.bookingDetails.zone.timezonedstoffset) * 1000);\n            var validatedTime = this.bookingDetails.booking.type == \"13\" ?\n                (Number(this.bookingDetails.booking.revStart) +\n                    Number(this.bookingDetails.booking.couponValidTime)) *\n                1000 : (Number(this.bookingDetails.booking.entrytime) +\n                    Number(this.bookingDetails.booking.couponValidTime)) *\n                1000\n            this.$store.commit(\"SET_VALIDATED_TIME_STATUS\", this.validatedTime < 0);\n            validatedTime - currentTime < 0\n                ? clearInterval(this.validatedInterval)\n                : \"\";\n            return validatedTime - currentTime;\n        },\n        calculateParkingTime(parkingStartTime, gracePeriod, zone) {\n            var currentTime = new Date();\n            currentTime.toLocaleString(\"en-US\", { timeZone: zone });\n            var differenceTime =\n                gracePeriod > 0\n                    ? currentTime.getTime() - parkingStartTime * 1000 // - gracePeriod * 1000 to exclude grace period\n                    : currentTime.getTime() - parkingStartTime * 1000;\n            let parkedTime = this.secondsToHms(differenceTime / 1000);\n            return parkedTime;\n        },\n        secondsToHms(timeDifference) {\n            var d = Number(timeDifference);\n            // if (timeDifference >= 86400) {\n            //   var days = Math.floor(d / 86400);\n            //   var hrs = Math.floor((d % 86400) / 3600);\n            //   var dayDisplay =\n            //     days > 0 ? days + (days == 1 ? \" day \" : \" days \") : \"\";\n            //   var hrDisplay = hrs > 0 ? hrs + (hrs == 1 ? \" hr \" : \" hrs \") : \"\";\n            //   return dayDisplay + hrDisplay;\n            // }\n            var h = Math.floor(d / 3600);\n            var m = Math.floor((d % 3600) / 60);\n            // var s = Math.floor(d % 3600 % 60);\n            var hDisplay = h > 0 ? h + \" h \" : \"\";\n            var mDisplay = m > 0 ? m + (m == 1 ? \" min \" : \" min\") : \" 0 min\";\n            // var sDisplay = s > 0 ? s + (s == 1 ? \" second\" : \" seconds\") : \"\";\n            return hDisplay + mDisplay;\n        },\n        isCheckoutEnabled(type) {\n            if (Object.hasOwnProperty.call(this.bookingDetails, 'exitOptions') && this.bookingDetails.exitOptions.length != 0) {\n                let option = this.bookingDetails.exitOptions.some(\n                    (t) => t.techType == type\n                );\n                return option;\n            }\n            return false;\n\n        },\n        async getBookingDetails() {\n            try {\n                let bookingId = window.location.pathname.substring(3);\n                var bookingDetails = await APIHelper(\n                    \"GET\",\n                    \"/api/v1/booking/config/\" + bookingId\n                );\n                this.$store.commit(\n                    \"SET_BOOKING_DETAILS\",\n                    bookingDetails.data?.data ? bookingDetails.data.data : null\n                );\n            } catch (error) {\n                console.log(error);\n            }\n        },\n        async getpedestrianAccess() {\n            try {\n                // let bookingId = window.location.pathname.substring(3);\n                var pedesAccess = await APIHelper(\n                    \"POST\",\n                    \"api/v1/open/\" + this.bookingId,\n                    { source: \"webView\" }\n                );\n                // console.log(pedesAccess)\n                // console.log(pedesAccess?.data?.status)\n                if (pedesAccess?.data?.status) {\n                    this.postToLoggerAPI({\n                        phone: this.bookingDetails.user.contact,\n                        refId: this.bookingId,\n                        image: \"https://sppl-dev.divrt.co/img/pedestrain_door.042f0927.png\",\n                        statusText: \"Parker accessed pedestrian door successfully.\",\n                    });\n                    this.$router.replace({ path: \"/pedestrianaccess\" });\n                } else {\n                    this.pedestrianAccessText = pedesAccess.data.message;\n                    this.postToLoggerAPI({\n                        phone: this.bookingDetails.user.contact,\n                        refId: this.bookingId,\n                        error: this.pedestrianAccessText,\n                        image: \"https://sppl-dev.divrt.co/img/pedestrain_door.042f0927.png\",\n                        statusText: \"Error in opening the pedestrian door.\",\n                    });\n                    this.pedestrianAccessDialog = true;\n                }\n            } catch (error) {\n                console.log(error);\n            }\n            // this.$router.replace({ path: \"/pedestrianaccess/\"+true });\n        },\n        navigateToAddPayment() {\n            this.postToLoggerAPI({\n                phone: this.bookingDetails.user.contact,\n                refId: this.bookingId,\n                statusText: \"Parker clicked on ADD CREDIT CARD btn.\",\n            });\n            this.$router.replace({ path: \"/addpayment\" });\n        },\n        openValidationDialog() {\n            this.validateBookingDialog = true;\n        },\n        async openSMSApp() {\n            this.postToLoggerAPI({\n                phone: this.bookingDetails.user.contact,\n                refId: this.bookingId,\n                statusText: \"Parker clicked on SMS submit btn.\",\n            });\n            if (this.smsText == null || this.smsText == \"\") {\n                this.invalidSMSMsg = \"Gate code cannot be empty\";\n                this.invalidSMSDialog = true;\n            } else {\n                try {\n                    this.smsPending = true;\n                    var preValidateSendSMS = await APIHelper(\"POST\", \"/receive_sms\", {\n                        bid: this.bookingId,\n                        From: this.bookingDetails.user.contact,\n                        Text: this.smsText,\n                        To: this.bookingDetails.zone.ToMobileNo,\n                        Mode: \"SMS\",\n                        webView: \"1\",\n                        preValidate: 1,\n                    });\n                    this.smsPending = false;\n                    if (\n                        preValidateSendSMS?.data?.status &&\n                        preValidateSendSMS.data.status\n                    ) {\n                        this.smsDialog = false;\n                        this.$router.replace({ path: \"/success\" });\n                        try {\n                            var sendSMS = await APIHelper(\"POST\", \"/receive_sms\", {\n                                bid: this.bookingId,\n                                From: this.bookingDetails.user.contact,\n                                Text: this.smsText,\n                                To: this.bookingDetails.zone.ToMobileNo,\n                                Mode: \"SMS\",\n                                webView: \"1\",\n                            });\n                            if (sendSMS?.data?.status && sendSMS.data.status) {\n                                this.smsDialog = false;\n                                this.postToLoggerAPI({\n                                    phone: this.bookingDetails.user.contact,\n                                    refId: this.bookingId,\n                                    icon: \"logout\",\n                                    statusText:\n                                        \"Parker checked out successfully using SMS - \" +\n                                        this.smsText,\n                                });\n                            } else {\n                                this.invalidSMSMsg = sendSMS?.data?.message\n                                    ? sendSMS.data.message\n                                    : \"Please try again\";\n                                this.invalidSMSDialog = true;\n                                this.postToLoggerAPI({\n                                    phone: this.bookingDetails.user.contact,\n                                    refId: this.bookingId,\n                                    error: this.invalidSMSMsg,\n                                    icon: \"logout\",\n                                    statusText:\n                                        \"Error occured while checking out using SMS - \" +\n                                        this.smsText,\n                                });\n                            }\n                        } catch (error) {\n                            console.log(error);\n                        }\n                    } else {\n                        this.invalidSMSMsg = preValidateSendSMS?.data?.message\n                            ? preValidateSendSMS.data.message\n                            : \"Please try again\";\n                        this.invalidSMSDialog = true;\n                        this.postToLoggerAPI({\n                            phone: this.bookingDetails.user.contact,\n                            refId: this.bookingId,\n                            error: this.invalidSMSMsg,\n                            icon: \"logout\",\n                            statusText:\n                                \"Error occured while checking out using SMS - \" + this.smsText,\n                        });\n                    }\n                } catch (error) {\n                    console.log(error);\n                }\n            }\n        },\n        getMobileOperatingSystem() {\n            var userAgent = navigator.userAgent || navigator.vendor || window.opera;\n            // Windows Phone must come first because its UA also contains \"Android\"\n            if (/windows phone/i.test(userAgent)) {\n                return \"Windows Phone\";\n            }\n\n            if (/android/i.test(userAgent)) {\n                return \"Android\";\n            }\n\n            // iOS detection from: http://stackoverflow.com/a/9039885/177710\n            if (/iPad|iPhone|iPod/.test(userAgent) && !window.MSStream) {\n                return \"iOS\";\n            }\n            return \"unknown\";\n        },\n        getExitIcon(exitId) {\n            let exitDetails = this.bookingDetails.exitOptions.find(\n                (p) => p.techType == exitId\n            );\n            return exitDetails.icon;\n        },\n        getExitText(exitId) {\n            let exitDetails = this.bookingDetails.exitOptions.find(\n                (p) => p.techType == exitId\n            );\n            return exitDetails.name;\n        },\n        openDialerApp() {\n            this.postToLoggerAPI({\n                phone: this.bookingDetails.user.contact,\n                refId: this.bookingId,\n                statusText: \"Parker clicked on dialer submit btn.\",\n            });\n            this.dialerDialog = false;\n            var url = \"tel:\" + this.bookingDetails.zone.ToMobileNo;\n            window.location.href = url;\n            if (this.getMobileOperatingSystem() == \"Android\") {\n                window.close();\n            }\n        },\n        turnCameraOn() {\n            this.camera = \"auto\";\n        },\n\n        turnCameraOff() {\n            this.camera = \"off\";\n        },\n        validateDecodedString(str) {\n            let validateDivrtStr = str.startsWith(\"divrt://\");\n            let validateMMID = str.split(\"/\")[2] == this.bookingDetails.booking.mmid;\n            let validateMajorId =\n                str.split(\"/\")[3] == this.bookingDetails.booking.majorid;\n            let validateMinorId = this.bookingDetails.booking.minor_ids.includes(\n                str.split(\"/\")[4]\n            );\n            return (\n                validateDivrtStr && validateMMID && validateMajorId && validateMinorId\n            );\n        },\n        async onDecode(decodedString) {\n            var self = this;\n            this.qrCode = decodedString;\n            this.cameraStatus = false;\n            try {\n                var preValidateQrResult = await APIHelper(\n                    \"POST\",\n                    \"/api/v1/checkout/\" + this.bookingId,\n                    {\n                        beaconId: decodedString,\n                        preValidate: 1,\n                        zid: this.bookingDetails.zone.locationCode\n                    }\n                );\n                if (preValidateQrResult.data.status) {\n                    try {\n                        self.$router.replace({ path: \"/success\" });\n                        var qrResult = await APIHelper(\n                            \"POST\",\n                            \"/api/v1/checkout/\" + this.bookingId,\n                            {\n                                beaconId: decodedString,\n                                zid: this.bookingDetails.zone.locationCode\n                            }\n                        );\n                        if (qrResult.data.status) {\n                            this.postToLoggerAPI({\n                                phone: self.bookingDetails.user.contact,\n                                refId: self.bookingId,\n                                icon: \"logout\",\n                                statusText:\n                                    \"Parker successfully checked out using QR - \" + decodedString,\n                            });\n                            this.$store.commit(\"SET_CHECKOUT\", true);\n                        } else {\n                            this.invalidQRMsg = qrResult?.data?.message\n                                ? qrResult.data.message\n                                : \"Please try again\";\n                            this.invalidQRDialog = true;\n                            this.postToLoggerAPI({\n                                phone: self.bookingDetails.user.contact,\n                                refId: self.bookingId,\n                                error: self.invalidQRMsg,\n                                icon: \"logout\",\n                                statusText:\n                                    \"Error Occured while checking out using QR - \" +\n                                    decodedString,\n                            });\n                        }\n                    } catch (error) {\n                        console.log(error);\n                    }\n                } else {\n                    this.invalidQRMsg = preValidateQrResult?.data?.message\n                        ? preValidateQrResult.data.message\n                        : \"Please try again\";\n                    this.invalidQRDialog = true;\n                    this.postToLoggerAPI({\n                        phone: self.bookingDetails.user.contact,\n                        refId: self.bookingId,\n                        icon: \"logout\",\n                        error: self.invalidQRMsg,\n                        statusText:\n                            \"Error Occured while checking out using QR - \" + decodedString,\n                    });\n                }\n            } catch (error) {\n                console.log(error);\n            }\n        },\n        async onInit(promise) {\n            try {\n                await promise;\n            } catch (error) {\n                if (error.name === \"NotAllowedError\") {\n                    this.invalidQRMsg = \"Please grant camera access permisson\";\n                } else if (error.name === \"NotFoundError\") {\n                    this.invalidQRMsg = \"No camera found on this device\";\n                } else if (error.name === \"NotSupportedError\") {\n                    this.invalidQRMsg = \"Secure context required (HTTPS, localhost)\";\n                } else if (error.name === \"NotReadableError\") {\n                    this.invalidQRMsg = \"Is the camera already in use? Please check.\";\n                } else if (error.name === \"OverconstrainedError\") {\n                    this.invalidQRMsg = \"Installed camera is not suitable\";\n                } else if (error.name === \"StreamApiNotSupportedError\") {\n                    this.invalidQRMsg = \"Stream API is not supported in this browser\";\n                }\n                this.invalidQRDialog = true;\n            }\n        },\n        async onValidateText() {\n            this.validateBookingPending = true;\n            let result = await this.validateBooking(this.validateBookingTxt);\n            if (!result.data.status) {\n                this.invalidSMSMsg = result?.data?.message\n                    ? result.data.message\n                    : \"Validation not recognized. Please try again\";\n                this.invalidSMSDialog = true;\n                this.validateBookingPending = false;\n                this.postToLoggerAPI({\n                    phone: this.bookingDetails.user.contact,\n                    refId: this.bookingId,\n                    error: this.invalidSMSMsg,\n                    icon: \"redeem\",\n                    statusText:\n                        \"Error in validating the session on entering validation code - \" +\n                        this.validateBookingTxt,\n                });\n            } else {\n                this.postToLoggerAPI({\n                    phone: this.bookingDetails.user.contact,\n                    refId: this.bookingId,\n                    icon: \"redeem\",\n                    statusText:\n                        \"Parker validated the session successfully by entering validation code - \" +\n                        this.validateBookingTxt,\n                });\n                this.goldenNugget = false;\n                this.validateBookingPending = false;\n                this.validateBookingDialog = false;\n                this.$store.commit(\n                    \"SET_VALIDATED_MERCHANT\",\n                    result?.data?.merchantName\n                );\n                this.$router.replace({ path: \"/validatesuccess\" });\n            }\n        },\n        async validateBooking(code) {\n            try {\n                let validateResult = await APIHelper(\n                    \"POST\",\n                    \"/api/v1/validate/\" + this.bookingId,\n                    {\n                        coupon: code,\n                        zid: this.bookingDetails.zone.locationCode\n                    }\n                );\n                return validateResult;\n            } catch (error) {\n                console.log(error);\n                return error;\n            }\n        },\n        async openScanValidationCode() {\n            this.validateBookingDialog = false;\n            this.validateBookingTxt = \"\";\n            this.validateQRCodeDialog = true;\n            this.validationCameraStatus = true;\n        },\n        async onValidateQRCode(decodedString) {\n            this.validationCameraStatus = false;\n            this.validateQRCodePending = true;\n            try {\n                let result = await this.validateBooking(decodedString);\n                if (!result.data.status) {\n                    this.invalidValidationQRMsg = result?.data?.message\n                        ? result.data.message\n                        : \"Validation not recognized. Please try again\";\n                    this.invalidValidationQRDialog = true;\n                    this.validateQRCodePending = false;\n                    this.postToLoggerAPI({\n                        phone: this.bookingDetails.user.contact,\n                        refId: this.bookingId,\n                        error: this.invalidQRMsg,\n                        icon: \"redeem\",\n                        statusText:\n                            \"Error in validating the session on scanning validation QR - \" +\n                            decodedString,\n                    });\n                } else {\n                    this.postToLoggerAPI({\n                        phone: this.bookingDetails.user.contact,\n                        refId: this.bookingId,\n                        icon: \"redeem\",\n                        statusText:\n                            \"Parker validated the session successfully by scanning validation QR - \" +\n                            decodedString,\n                    });\n                    this.validateQRCodePending = false;\n                    this.validateQRCodeDialog = false;\n                    this.$store.commit(\n                        \"SET_VALIDATED_MERCHANT\",\n                        result?.data?.merchantName\n                    );\n                    this.$router.replace({ path: \"/validatesuccess\" });\n                }\n            } catch (error) {\n                console.log(error);\n            }\n        },\n    },\n};\n</script>\n<style lang=\"less\">\n.add_licence_plate_btn {\n    width: 100%;\n    background-color: #f2555c !important;\n    font-size: 18px !important;\n    font-weight: 700 !important;\n    letter-spacing: normal !important;\n    height: 50px !important;\n}\n\n.booking_header {\n    position: absolute;\n    bottom: 72px;\n    left: 16px;\n    font-size: 18px;\n    font-weight: bolder;\n}\n\n.time_ago {\n    font-size: 22px;\n    font-weight: 600;\n    line-height: 2.5rem;\n    letter-spacing: 0.0073529412em !important;\n}\n\n.time_ago_context {\n    font-size: 16px;\n    font-weight: 500;\n}\n\n.validated_time {\n    font-size: 13px;\n    font-weight: 500;\n}\n\n.booking_divider {\n    border-color: white !important;\n    margin-top: 12px;\n}\n\n.booking_divider_div {\n    position: absolute;\n    bottom: 60px;\n    width: 100%;\n}\n\n.booking_content {\n    position: absolute !important;\n    bottom: 18px !important;\n    left: 16px !important;\n    font-size: 13px !important;\n    font-weight: normal !important;\n}\n\n.add_credit_card_btn {\n    // border-radius: 30px;\n    width: 100%;\n    background-color: #f2555c !important;\n    font-size: 18px !important;\n    letter-spacing: normal !important;\n    height: 37px !important;\n}\n\n.validation-pending {\n    position: absolute !important;\n    left: 50%;\n    top: 50%;\n    -webkit-transform: translateX(-50%);\n    transform: translateX(-50%);\n}\n\n.qr_text {\n    font-size: 13px;\n}\n\n.exit_dialog_btn {\n    width: 100%;\n    background-color: #f2555c !important;\n    font-size: 18px !important;\n    font-weight: 700 !important;\n    letter-spacing: normal !important;\n    height: 50px !important;\n}\n\n.sms-input input {\n    font-size: 36px;\n    font-weight: 500;\n    color: #44515a !important;\n}\n\n.v-text-field--enclosed .v-input__append-inner {\n    margin-top: 26px !important;\n}\n\n.exit-option-text {\n    font-size: 14px;\n}\n\n.sms-caption {\n    font-size: 0.75rem !important;\n    font-weight: 400;\n    line-height: 1.25rem;\n    letter-spacing: 0.0333333333em !important;\n}\n\n.qrcode-stream-wrapper video {\n    max-height: 300px;\n}\n\n.counter-content-position {\n    position: relative;\n}\n\n.grace-period-image {\n    position: absolute !important;\n    right: -51px;\n    bottom: 5px;\n}\n\n.fabIcon {\n    animation: pulse 2s infinite;\n    box-shadow: 0 0 0 0 rgba(0, 0, 0, 1);\n    transform: scale(1);\n\n    @keyframes pulse {\n        0% {\n            transform: scale(0.95);\n            box-shadow: 0 0 0 0 rgba(0, 0, 0, 0.7);\n        }\n\n        70% {\n            transform: scale(1);\n            box-shadow: 0 0 0 10px rgba(0, 0, 0, 0);\n        }\n\n        100% {\n            transform: scale(0.95);\n            box-shadow: 0 0 0 0 rgba(0, 0, 0, 0);\n        }\n    }\n}\n\n#qr-code-full-region__dashboard {\n    display: none;\n}\n\n#qr-code-full-region>video {\n    width: 100% !important;\n}\n\n#validation-qr-code>video {\n    width: 100% !important;\n}\n\n#qr-code-full-region img {\n    display: none;\n}\n\n.no-upper-case {\n    text-transform: unset !important;\n}\n\n.time-picker-input {\n    flex: 1 1 auto;\n    line-height: 20px;\n    padding: 8px 0 8px;\n    max-width: 100%;\n    min-width: 0px;\n    font-size: 16px;\n    font-family: \"Work Sans\";\n}\n\n.time-picker-input :focus-visible {\n    outline-color: #1976d2;\n}\n\n.vue__time-picker input.display-time {\n    padding: 0px !important;\n    border-bottom: 1px solid #767676;\n    border-top: 0px;\n    border-right: 0px;\n    border-left: 0px;\n}\n\n.vue__time-picker-dropdown ul li:not([disabled]).active,\n.vue__time-picker-dropdown ul li:not([disabled]).active:focus,\n.vue__time-picker-dropdown ul li:not([disabled]).active:hover,\n.vue__time-picker .dropdown ul li:not([disabled]).active,\n.vue__time-picker .dropdown ul li:not([disabled]).active:focus,\n.vue__time-picker .dropdown ul li:not([disabled]).active:hover {\n    background: #f2555c !important;\n}\n\n[data-key=\"am\"] {\n    border: 0.2px solid red;\n    border-radius: 2px;\n    margin-left: 2px;\n}\n\n[data-key=\"pm\"] {\n    border: 0.2px solid red;\n    margin-top: 0.5em;\n    margin-left: 2px;\n}\n\n.hours .hint {\n    position: sticky;\n    top: 0;\n    text-align: center;\n    background: #68808c;\n    z-index: 1;\n    -webkit-text-fill-color: white;\n    margin-bottom: 10px;\n}\n\n.apms .hint {\n    position: sticky;\n    top: 0;\n    text-align: center;\n    background: #68808c;\n    z-index: 1;\n    margin-left: 1px;\n    -webkit-text-fill-color: white;\n    margin-bottom: 10px;\n}\n\n.hours::-webkit-scrollbar {\n    display: none;\n}\n\n.minutes::-webkit-scrollbar {\n    display: none;\n}\n\n.minutes .hint {\n    position: sticky;\n    top: 0;\n    text-align: center;\n    background: #68808c;\n    z-index: 1;\n    -webkit-text-fill-color: white;\n    margin-bottom: 10px;\n}\n\nhr {\n    border: 1px solid #ffbc1f;\n}\n\n#apple-pay-button {\n    height: 48px;\n    width: 100%;\n    display: inline-block;\n    -webkit-appearance: -apple-pay-button;\n    -apple-pay-button-type: plain;\n    -apple-pay-button-style: black;\n}\n</style>"]}]}