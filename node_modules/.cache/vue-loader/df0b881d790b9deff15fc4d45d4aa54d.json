{"remainingRequest":"/home/vignesh/DIVRT/guest-webapp/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/vignesh/DIVRT/guest-webapp/src/views/CheckInSuccessCheck.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/vignesh/DIVRT/guest-webapp/src/views/CheckInSuccessCheck.vue","mtime":1673262692530},{"path":"/home/vignesh/DIVRT/guest-webapp/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vignesh/DIVRT/guest-webapp/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/vignesh/DIVRT/guest-webapp/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vignesh/DIVRT/guest-webapp/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcEdldHRlcnMgfSBmcm9tICJ2dWV4IjsKaW1wb3J0IEFQSUhlbHBlciBmcm9tICIuLi9hcGlIZWxwZXIiOwovLyBpbXBvcnQgbG9nZ2VySGVscGVyIGZyb20gIi4uL2xvZ2dlckhlbHBlciI7CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIlN1Y2Nlc3NDaGVjayIsCiAgZGF0YTogKCkgPT4gKHt9KSwKICBjb21wdXRlZDogewogICAgLi4ubWFwR2V0dGVycyh7CiAgICAgIGJvb2tpbmdJZDogImdldHRlckJvb2tpbmdJZCIsCiAgICAgIGJvb2tpbmdEZXRhaWxzOiAiZ2V0dGVyQm9va2luZ0RldGFpbHMiLAogICAgfSksCiAgfSwKICBtb3VudGVkKCkgewogICAgc2V0VGltZW91dChhc3luYyAoKSA9PiB7CiAgICAgIGF3YWl0IHRoaXMuZ2V0Qm9va2luZ1N0YXRlKCk7CiAgICB9LCA2MDAwKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGFzeW5jIGdldEJvb2tpbmdTdGF0ZSgpIHsKICAgICAgaWYgKHRoaXMuYm9va2luZ0lkICE9IG51bGwpIHsKICAgICAgICB0cnkgewogICAgICAgICAgdmFyIGJEZXRhaWxzID0gYXdhaXQgQVBJSGVscGVyKAogICAgICAgICAgICAiR0VUIiwKICAgICAgICAgICAgIi9hcGkvdjEvYm9va2luZy9jb25maWcvIiArIHRoaXMuYm9va2luZ0lkCiAgICAgICAgICApOwogICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KAogICAgICAgICAgIlNFVF9CT09LSU5HX0RFVEFJTFMiLAogICAgICAgICAgYkRldGFpbHMuZGF0YT8uZGF0YSA/IGJEZXRhaWxzLmRhdGEuZGF0YSA6IG51bGwKICAgICAgICApOwogICAgICAgICAgbGV0IGJvb2tpbmdTdGF0ZSA9IGJEZXRhaWxzLmRhdGE/LmRhdGE/LmJvb2tpbmc/LnN0YXRlCiAgICAgICAgICAgID8gYkRldGFpbHMuZGF0YS5kYXRhLmJvb2tpbmcuc3RhdGUKICAgICAgICAgICAgOiBudWxsOwogICAgICAgICAgaWYgKGJvb2tpbmdTdGF0ZSA9PSA4IHx8IGJvb2tpbmdTdGF0ZSA9PSAxMCB8fCAgYm9va2luZ1N0YXRlID09IDExKSB7CiAgICAgICAgICAgIC8vIHRoaXMucG9zdFRvTG9nZ2VyQVBJKHsKICAgICAgICAgICAgLy8gICAgIHBob25lOiBiRGV0YWlscy5kYXRhLmRhdGEudXNlci5jb250YWN0LAogICAgICAgICAgICAvLyAgICAgcmVmSWQ6IHRoaXMuYm9va2luZ0lkLAogICAgICAgICAgICAvLyAgICAgc3RhdHVzOiAiTG9hZGVkIHN1Y2Nlc3MgY2hlY2sgZm9yIGNoZWNrIGluIiwKICAgICAgICAgICAgLy8gICB9KQogICAgICAgICAgICB0aGlzLiRyb3V0ZXIucmVwbGFjZSh7IHBhdGg6ICIvY2hlY2tvdXQiIH0pOwogICAgICAgICAgfSBlbHNlIGlmIChib29raW5nU3RhdGUgPT0gMikgewogICAgICAgICAgICB0aGlzLiRyb3V0ZXIucmVwbGFjZSh7IHBhdGg6ICIvY2hlY2tlZGluIiB9KTsKICAgICAgICAgIH0gIGVsc2UgaWYgKGJvb2tpbmdTdGF0ZSA9PSAwKSB7CiAgICAgICAgICAgIHRoaXMuJHJvdXRlci5yZXBsYWNlKHsgcGF0aDogIi9jaGVja2luIiB9KTsKICAgICAgICAgIH1lbHNlIHsKICAgICAgICAgICAgc2V0VGltZW91dChhc3luYyAoKSA9PiB7CiAgICAgICAgICAgICAgYXdhaXQgdGhpcy5nZXRCb29raW5nU3RhdGUoKTsKICAgICAgICAgICAgfSwgNDAwMCk7CiAgICAgICAgICB9CiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgfSwKfTsK"},{"version":3,"sources":["CheckInSuccessCheck.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4BA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"CheckInSuccessCheck.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <v-container class=\"pa-0 text-center fill-height\" fluid>\n    <v-row\n      class=\"white fill-height\"\n      style=\"padding-top: 30%\"\n      align-content=\"start\"\n      justify=\"center\"\n      no-gutters\n    >\n      <v-col cols=\"12\">\n        <v-img\n          alt=\"Success\"\n          contain\n          height=\"175\"\n          src=\"../assets/success_check.gif\"\n        />\n      </v-col>\n      <v-col cols=\"12\">\n        <p class=\"font-weight-bold\" style=\"color: #3d3f3c\">Opening Gate</p>\n      </v-col>\n      <v-col cols=\"12\" style=\"color: #3d3f3c\">\n        <p>Please proceed to enter</p>\n      </v-col>\n    </v-row>\n  </v-container>\n</template>\n\n<script>\nimport { mapGetters } from \"vuex\";\nimport APIHelper from \"../apiHelper\";\n// import loggerHelper from \"../loggerHelper\";\n\nexport default {\n  name: \"SuccessCheck\",\n  data: () => ({}),\n  computed: {\n    ...mapGetters({\n      bookingId: \"getterBookingId\",\n      bookingDetails: \"getterBookingDetails\",\n    }),\n  },\n  mounted() {\n    setTimeout(async () => {\n      await this.getBookingState();\n    }, 6000);\n  },\n  methods: {\n    async getBookingState() {\n      if (this.bookingId != null) {\n        try {\n          var bDetails = await APIHelper(\n            \"GET\",\n            \"/api/v1/booking/config/\" + this.bookingId\n          );\n          this.$store.commit(\n          \"SET_BOOKING_DETAILS\",\n          bDetails.data?.data ? bDetails.data.data : null\n        );\n          let bookingState = bDetails.data?.data?.booking?.state\n            ? bDetails.data.data.booking.state\n            : null;\n          if (bookingState == 8 || bookingState == 10 ||  bookingState == 11) {\n            // this.postToLoggerAPI({\n            //     phone: bDetails.data.data.user.contact,\n            //     refId: this.bookingId,\n            //     status: \"Loaded success check for check in\",\n            //   })\n            this.$router.replace({ path: \"/checkout\" });\n          } else if (bookingState == 2) {\n            this.$router.replace({ path: \"/checkedin\" });\n          }  else if (bookingState == 0) {\n            this.$router.replace({ path: \"/checkin\" });\n          }else {\n            setTimeout(async () => {\n              await this.getBookingState();\n            }, 4000);\n          }\n        } catch (error) {\n          console.log(error);\n        }\n      }\n    },\n  },\n};\n</script>\n<style lang=\"less\">\n.place_bottom {\n  position: absolute;\n  bottom: 12%;\n}\n</style>\n"]}]}