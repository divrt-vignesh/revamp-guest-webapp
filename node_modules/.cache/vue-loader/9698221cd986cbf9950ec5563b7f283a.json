{"remainingRequest":"/home/vignesh/DIVRT/guest-webapp/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/vignesh/DIVRT/guest-webapp/src/views/CheckIn.vue?vue&type=style&index=0&lang=less&","dependencies":[{"path":"/home/vignesh/DIVRT/guest-webapp/src/views/CheckIn.vue","mtime":1683806222306},{"path":"/home/vignesh/DIVRT/guest-webapp/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vignesh/DIVRT/guest-webapp/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/home/vignesh/DIVRT/guest-webapp/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/home/vignesh/DIVRT/guest-webapp/node_modules/less-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vignesh/DIVRT/guest-webapp/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vignesh/DIVRT/guest-webapp/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5ib29raW5nX2hlYWRlciB7CiAgcG9zaXRpb246IGFic29sdXRlOwogIGJvdHRvbTogNjBweDsKICBsZWZ0OiAxNnB4OwogIGZvbnQtc2l6ZTogMThweDsKICBmb250LXdlaWdodDogYm9sZGVyOwp9CgouYm9va2luZ19kaXZpZGVyIHsKICBib3JkZXItY29sb3I6IHdoaXRlICFpbXBvcnRhbnQ7CiAgbWFyZ2luLXRvcDogMTJweDsKfQoKLmJvb2tpbmdfZGl2aWRlcl9kaXYgewogIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICBib3R0b206IDQ1cHg7CiAgd2lkdGg6IDEwMCU7Cn0KCi5ib29raW5nX2RhdGUgewogIGZvbnQtd2VpZ2h0OiBub3JtYWw7CiAgZm9udC1zaXplOiAxM3B4OwogIGNvbG9yOiAjM2QzZjNjICFpbXBvcnRhbnQ7Cn0KCi5ib29raW5nX2RhdGVfaGVhZGVyIHsKICBjb2xvcjogIzNkM2YzYyAhaW1wb3J0YW50OwogIGZvbnQtd2VpZ2h0OiBib2xkOwogIGZvbnQtc2l6ZTogMTRweDsKfQoKLmhlYWRlcl9jb250ZW50IHsKICBwb3NpdGlvbjogYWJzb2x1dGUgIWltcG9ydGFudDsKICBib3R0b206IDE4cHggIWltcG9ydGFudDsKICBsZWZ0OiAxNnB4ICFpbXBvcnRhbnQ7CiAgZm9udC1zaXplOiAxOHB4ICFpbXBvcnRhbnQ7CiAgZm9udC13ZWlnaHQ6IGJvbGRlciAhaW1wb3J0YW50Owp9Cgouc3BlZWNoLWlucHV0IGlucHV0IHsKICBmb250LXNpemU6IDM2cHg7CiAgZm9udC13ZWlnaHQ6IDUwMDsKICBjb2xvcjogIzQ0NTE1YSAhaW1wb3J0YW50Owp9CgouZW50cnktb3B0aW9uLXRleHQgewogIGZvbnQtc2l6ZTogMTRweDsKfQoKLnFyX3RleHQgewogIGZvbnQtc2l6ZTogMTNweDsKfQoKLnNtcy1pbnB1dCBpbnB1dCB7CiAgZm9udC1zaXplOiAzNnB4OwogIGZvbnQtd2VpZ2h0OiA1MDA7CiAgY29sb3I6ICM0NDUxNWEgIWltcG9ydGFudDsKfQoKLnYtdGV4dC1maWVsZC0tZW5jbG9zZWQgLnYtaW5wdXRfX2FwcGVuZC1pbm5lciB7CiAgbWFyZ2luLXRvcDogMjZweCAhaW1wb3J0YW50Owp9Cgouc21zLWNhcHRpb24gewogIGZvbnQtc2l6ZTogMC43NXJlbSAhaW1wb3J0YW50OwogIGZvbnQtd2VpZ2h0OiA0MDA7CiAgbGluZS1oZWlnaHQ6IDEuMjVyZW07CiAgbGV0dGVyLXNwYWNpbmc6IDAuMDMzMzMzMzMzM2VtICFpbXBvcnRhbnQ7Cn0KCi5xcmNvZGUtc3RyZWFtLXdyYXBwZXIgdmlkZW8gewogIG1heC1oZWlnaHQ6IDMwMHB4Owp9CgouZW50cnlfZGlhbG9nX2J0biB7CiAgd2lkdGg6IDEwMCU7CiAgYmFja2dyb3VuZC1jb2xvcjogI2YyNTU1YyAhaW1wb3J0YW50OwogIGZvbnQtc2l6ZTogMThweCAhaW1wb3J0YW50OwogIGZvbnQtd2VpZ2h0OiA3MDAgIWltcG9ydGFudDsKICBsZXR0ZXItc3BhY2luZzogbm9ybWFsICFpbXBvcnRhbnQ7CiAgaGVpZ2h0OiA1MHB4ICFpbXBvcnRhbnQ7Cn0KCi52YWxpZGF0aW9uLXBlbmRpbmcgewogIHBvc2l0aW9uOiBhYnNvbHV0ZSAhaW1wb3J0YW50OwogIGxlZnQ6IDUwJTsKICB0b3A6IDUwJTsKICAtd2Via2l0LXRyYW5zZm9ybTogdHJhbnNsYXRlWCgtNTAlKTsKICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVgoLTUwJSk7Cn0KCi5wdWxzZS1idXR0b24gewogIC13ZWJraXQtYW5pbWF0aW9uOiBwdWxzZSAxLjVzIGluZmluaXRlOwp9CgoucHVsc2UtYnV0dG9uOmhvdmVyIHsKICAtd2Via2l0LWFuaW1hdGlvbjogbm9uZTsKfQoKQC13ZWJraXQta2V5ZnJhbWVzIHB1bHNlIHsKICAwJSB7CiAgICBAaW5jbHVkZSB0cmFuc2Zvcm0oc2NhbGUoMC45KSk7CiAgfQoKICA3MCUgewogICAgQGluY2x1ZGUgdHJhbnNmb3JtKHNjYWxlKDEpKTsKICAgIGJveC1zaGFkb3c6IDAgMCAwIDUwcHggcmdiYSgjNWE5OWQ0LCAwKTsKICB9CgogIDEwMCUgewogICAgQGluY2x1ZGUgdHJhbnNmb3JtKHNjYWxlKDAuOSkpOwogICAgYm94LXNoYWRvdzogMCAwIDAgMCByZ2JhKCM1YTk5ZDQsIDApOwogIH0KfQo="},{"version":3,"sources":["CheckIn.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwyBA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"CheckIn.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <v-container class=\"pa-4\" fluid>\n    <v-row class=\"text-center\" no-gutters>\n      <v-col cols=\"12\">\n        <v-img alt=\"PARKING.COM\" class=\"my-3\" height=\"42\" contain src=\"../assets/logo_huge_drk.png\" />\n      </v-col>\n    </v-row>\n    <v-row no-gutters>\n      <v-col>\n        <v-card class=\"mx-auto rounded-lg\" max-width=\"374\">\n          <!-- <v-responsive :aspect-ratio=\"16/9\"> -->\n          <template slot=\"progress\">\n            <v-progress-linear color=\"red\" height=\"10\" indeterminate></v-progress-linear>\n          </template>\n          <div style=\"position: relative\">\n            <!-- <v-skeleton-loader\n                v-show=\"!bookingDetails.hasOwnProperty('zone')\"\n                height=\"260px\"\n                class=\"rounded-t-lg\"\n                type=\"image\"\n              ></v-skeleton-loader> -->\n\n            <v-img class=\"rounded-t-lg\" max-height=\"150px\" style=\"filter: brightness(50%)\" :src=\"\n              bookingDetails.hasOwnProperty('zone') && bookingDetails.zone.image != '' && bookingDetails.zone.image != null\n                ? bookingDetails.zone.image\n                : zoneImgURL\n            \" :lazy-src=\"\n  bookingDetails.hasOwnProperty('zone') && bookingDetails.zone.image != '' && bookingDetails.zone.image != null\n    ? bookingDetails.zone.image\n    : zoneImgURL\n\" alt=\"Parking.com garage\">\n              <template v-slot:placeholder>\n                <v-row class=\"fill-height ma-0\" align=\"center\" justify=\"center\" no-gutters>\n                  <v-progress-circular indeterminate color=\"grey lighten-5\"></v-progress-circular>\n                </v-row>\n              </template>\n            </v-img>\n            <div class=\"booking_header white--text text-left mr-4\" >\n              Hi\n              {{\n                bookingDetails.hasOwnProperty(\"user\") &&\n                bookingDetails.user.hasOwnProperty(\"name\")\n                ? bookingDetails.user.name\n                : \"\"\n              }},\n            </div>\n            <!-- <div class=\"booking_divider_div\">\n                <v-divider class=\"booking_divider mx-4\"></v-divider>\n              </div> -->\n            <div class=\"header_content white--text\">\n              <p style=\"margin-bottom: 0px\">\n                {{\n                  bookingDetails.hasOwnProperty(\"booking\") &&\n                  bookingDetails.booking.hasOwnProperty(\"header\")\n                  ? bookingDetails.booking.header\n                  : \"\"\n                }}\n              </p>\n            </div>\n          </div>\n          <v-card-title class=\"pa-1\"></v-card-title>\n          <v-card-text class=\"pa-2\">\n            <v-row align=\"center\" class=\"mx-0 pb-2\" no-gutters> </v-row>\n            <v-row no-gutters class=\"mt-1 mx-0\">\n              <v-col cols=\"4\" class=\"text-left pa-1\">\n                <p class=\"booking_date_header mb-0\">Mobile No:</p>\n              </v-col>\n              <v-col class=\"text-right pa-1\">\n                <p class=\"booking_date mb-0\">\n                  {{\n                    bookingDetails.hasOwnProperty(\"booking\") &&\n                    bookingDetails.booking.hasOwnProperty(\"jsonArr\")\n                    ? bookingDetails.booking[\"jsonArr\"][\"Mobile No\"]\n                    : \"\"\n                  }}\n                </p>\n              </v-col>\n            </v-row>\n            <v-row no-gutters class=\"mt-1 mx-0\">\n              <v-col cols=\"4\" class=\"text-left pa-1\">\n                <p class=\"booking_date_header mb-0\">Plate:</p>\n              </v-col>\n              <v-col class=\"text-right pa-1\">\n                <p class=\"booking_date mb-0\">\n                  {{\n                    bookingDetails.hasOwnProperty(\"booking\") &&\n                    bookingDetails.booking.hasOwnProperty(\"vehicleNo\")\n                    ? bookingDetails.booking.vehicleNo.toUpperCase() || \"-\"\n                    : \"\"\n                  }}\n                </p>\n              </v-col>\n            </v-row>\n            <v-row no-gutters class=\"mt-1 mx-0\">\n              <v-col cols=\"4\" class=\"text-left pa-1\">\n                <p class=\"booking_date_header mb-0\">Valid From:</p>\n              </v-col>\n              <v-col class=\"text-right pa-1\">\n                <p class=\"booking_date mb-0\">\n                  {{\n                    bookingDetails.hasOwnProperty(\"booking\") &&\n                    bookingDetails.booking.hasOwnProperty(\"jsonArr\")\n                    ? bookingDetails.booking[\"jsonArr\"][\"Start Date\"]\n                    : \"\"\n                  }}\n                </p>\n              </v-col>\n            </v-row>\n            <v-row no-gutters class=\"mx-0\">\n              <v-col cols=\"4\" class=\"text-left pa-1\">\n                <p class=\"booking_date_header\">Valid Until:</p>\n              </v-col>\n              <v-col class=\"text-right pa-1\">\n                <p class=\"booking_date\">\n                  {{\n                    bookingDetails.hasOwnProperty(\"booking\") &&\n                    bookingDetails.booking.hasOwnProperty(\"jsonArr\")\n                    ? bookingDetails.booking[\"jsonArr\"][\"End Date\"]\n                    : \"\"\n                  }}\n                </p>\n              </v-col>\n            </v-row>\n            <v-row class=\"justify-center mb-3\" no-gutters\n              v-show=\"(isCheckoutEnabled(1) || isCheckoutEnabled(2) || isCheckoutEnabled(3))\">\n              <span class=\"grey--text text--darken-1 font-weight-bold\">Click an option below to enter</span>\n            </v-row>\n\n            <v-row class=\"justify-center my-3\" no-gutters\n              v-show=\"!(isCheckoutEnabled(1) || isCheckoutEnabled(2) || isCheckoutEnabled(3))\">\n              <span class=\"black--text text--darken-1 font-weight-bold text-h5\">Ready to Check-in</span>\n            </v-row>\n\n          </v-card-text>\n          <!-- <v-card-text class=\"text-center\">Click an option to exit</v-card-text> -->\n          <v-card-actions class=\"justify-center pb-10\"\n            v-show=\"(isCheckoutEnabled(1) || isCheckoutEnabled(2) || isCheckoutEnabled(3))\">\n            <v-row no-gutters class=\"text-center px-10\">\n              <v-col v-if=\"isCheckoutEnabled(1)\">\n                <v-avatar color=\"red\" class=\"pa-6\">\n                  <v-icon medium color=\"white accent-2\" class=\"px-4\" dark @click=\"openSMSDialog()\"\n                    :disabled=\"checkStartDate()\">{{ getExitIcon(1) }}</v-icon>\n                </v-avatar>\n                <p class=\"grey--text text--darken-1 entry-option-text\">\n                  {{ getExitText(1) }}\n                </p>\n              </v-col>\n              <v-col v-if=\"isCheckoutEnabled(2)\">\n                <v-avatar color=\"red\" class=\"pa-6\">\n                  <v-icon medium color=\"white accent-2\" class=\"px-4\" dark @click.stop=\"qrCodeDialog = true\"\n                    :disabled=\"checkStartDate()\">{{ getExitIcon(2) }}</v-icon>\n                </v-avatar>\n                <p class=\"grey--text text--darken-1 entry-option-text\">\n                  {{ getExitText(2) }}\n                </p>\n              </v-col>\n              <v-col v-if=\"isCheckoutEnabled(3)\">\n                <v-avatar color=\"red\" class=\"pa-6\">\n                  <v-icon medium color=\"white accent-2\" class=\"px-4\" @click=\"dialerDialog = true\" dark\n                    :disabled=\"checkStartDate()\">{{ getExitIcon(3) }}</v-icon>\n                </v-avatar>\n                <p class=\"grey--text text--darken-1 entry-option-text\">\n                  {{ getExitText(3) }}\n                </p>\n              </v-col>\n              <!-- <v-col>\n                  <v-avatar color=\"red\" :class=\"{ 'pulse-button pa-6': toggle }\">\n                    <v-icon\n                      medium\n                      color=\"white accent-2\"\n                      class=\"pulse-button px-4\"\n                      style=\"webkit-animation-name: pulse\"\n                      dark\n                      @click.stop=\"\n                        toggle\n                          ? endSpeechRecognition()\n                          : startAudio(\n                              `Hi` +\n                                bookingDetails.user.name +\n                                `, Welcome to ` +\n                                bookingDetails.zone.zoneName +\n                                `. Please say the gate code.`\n                            )\n                      \"\n                      :disabled=\"checkStartDate()\"\n                      >{{ toggle ? \"mic_off\" : \"mic\" }}</v-icon\n                    >\n                  </v-avatar>\n                  <p class=\"grey--text text--darken-1 entry-option-text\">\n                    Speech\n                  </p>\n                </v-col> -->\n            </v-row>\n          </v-card-actions>\n          <!-- <v-row v-if=\"showPaymentCardAdded\">\n              <v-col>\n                <v-icon\n                  x-small\n                  color=\"green\"\n                  class=\"px-4\"\n                  dark\n                  @click=\"navigateToCheckOut\"\n                >mdi-exit-to-app</v-icon>\n              </v-col>\n            </v-row>-->\n          <!-- </v-responsive> -->\n        </v-card>\n      </v-col>\n    </v-row>\n    <v-dialog v-model=\"gateCodeSpeechDialog\" width=\"fit-content\">\n      <v-card class=\"pa-0\">\n        <v-card-title class=\"justify-center\" style=\"position: relative\">\n          <v-btn class elevation=\"0\" color=\"white\" dark fab large :class=\"{ 'animated infinite pulse': toggle }\">\n            <v-icon x-large color=\"red accent-2\">mic</v-icon>\n          </v-btn>\n        </v-card-title>\n        <v-card-text class=\"pa-0\">\n          <v-container fluid>\n            <v-row no-gutters>\n              <v-col cols=\"12\" class=\"text-left\">\n                <p class=\"color-black text-center\" style=\"font-size: 24px; line-height: 35px\">\n                  Please say the gate code\n                </p>\n              </v-col>\n              <v-col cols=\"12\">\n                <v-text-field class=\"speech-input\" color=\"red\" autofocus v-model=\"runtimeTranscription\" outlined\n                  label=\"Gate code\" hide-details=\"auto\" height=\"80px\"></v-text-field>\n              </v-col>\n            </v-row>\n          </v-container>\n          <v-progress-circular v-if=\"sendGateCodePending\" class=\"validation-pending\" indeterminate\n            color=\"red\"></v-progress-circular>\n        </v-card-text>\n        <v-card-actions class=\"text-center\">\n          <v-container pa-0 fluid>\n            <v-row no-gutters>\n              <v-col cols=\"12\" class=\"mt-2\">\n                <p style=\"cursor: pointer\" @click=\"gateCodeSpeechDialog = false\">\n                  Close\n                </p>\n              </v-col>\n            </v-row>\n          </v-container>\n        </v-card-actions>\n      </v-card>\n    </v-dialog>\n    <v-dialog v-model=\"qrCodeDialog\" width=\"fit-content\" persistent>\n      <v-card>\n        <v-card-title>\n          <v-spacer></v-spacer>\n          <v-icon @click=\"qrCodeDialog = false\">mdi-close</v-icon>\n        </v-card-title>\n        <v-card-text class=\"pa-1\">\n          <qrcode-stream :camera=\"camera\" @decode=\"onDecode\" @init=\"onInit\">\n            <v-progress-circular v-if=\"validationPending\" class=\"validation-pending\" indeterminate\n              color=\"red\"></v-progress-circular>\n          </qrcode-stream>\n        </v-card-text>\n        <v-card-actions>\n          <v-container class=\"pa-0\" fluid>\n            <v-row no-gutters>\n              <v-col cols=\"7\">\n                <p class=\"grey--text font-weight-bold qr_text mr-4\">\n                  Scan the QR code affixed to enter the gate\n                </p>\n              </v-col>\n              <v-spacer></v-spacer>\n              <v-img src=\"../assets/qr-code.png\" style=\"opacity: 0.7\" max-width=\"52\"></v-img>\n            </v-row>\n          </v-container>\n        </v-card-actions>\n      </v-card>\n    </v-dialog>\n    <v-dialog v-model=\"smsDialog\" width=\"fit-content\">\n      <v-card class=\"pa-0\" ref=\"smscontainer\">\n        <v-card-title class=\"justify-center\" style=\"position: relative\">\n          <v-btn class elevation=\"0\" color=\"white\" dark fab x-large>\n            <v-icon x-large color=\"red accent-2\">mdi-message-text</v-icon>\n          </v-btn>\n        </v-card-title>\n        <v-card-text class=\"pa-0\">\n          <v-container class=\"px-4\" fluid>\n            <v-row no-gutters>\n              <v-col cols=\"12\" class=\"text-left\">\n                <p class=\"color-black\" style=\"font-size: 24px; line-height: 35px\">\n                  Enter the gate code shown in the lane to enter.\n                </p>\n              </v-col>\n              <v-col cols=\"12\" class=\"mt-2\">\n                <v-text-field class=\"sms-input\" color=\"red\" v-model=\"smsText\" outlined label=\"Gate code\" maxlength=\"6\"\n                  type=\"tel\" autofocus v-on:keyup.enter=\"openSMSApp()\" @focus=\"scrollToSubmit()\"\n                  @mouseup=\"scrollToSubmit()\" @keydown=\"scrollToSubmit()\" clearable height=\"80px\"></v-text-field>\n              </v-col>\n            </v-row>\n          </v-container>\n          <v-progress-circular v-if=\"smsPending\" class=\"validation-pending\" indeterminate\n            color=\"red\"></v-progress-circular>\n        </v-card-text>\n        <v-card-actions class=\"text-center\">\n          <v-container pa-0 fluid>\n            <v-row no-gutters>\n              <v-col cols=\"12\">\n                <v-btn id=\"submitsmsbtn\" rounded block elevation=\"20\" :disabled=\"smsText == '' || smsPending\"\n                  class=\"white--text entry_dialog_btn\" @click=\"openSMSApp()\">SUBMIT</v-btn>\n              </v-col>\n              <v-col cols=\"12\" class=\"mt-2\">\n                <p style=\"cursor: pointer\" @click=\"smsDialog = false\">Close</p>\n              </v-col>\n            </v-row>\n          </v-container>\n        </v-card-actions>\n      </v-card>\n    </v-dialog>\n    <v-dialog v-model=\"dialerDialog\" width=\"fit-content\">\n      <v-card class=\"pa-0\">\n        <v-card-title class=\"justify-center\" style=\"position: relative\">\n          <v-btn class elevation=\"0\" color=\"white\" dark fab x-large>\n            <v-icon x-large color=\"red accent-2\">mdi-phone-in-talk</v-icon>\n          </v-btn>\n        </v-card-title>\n        <v-card-text class=\"pa-0\">\n          <v-container class=\"px-4\" fluid>\n            <v-row no-gutters>\n              <v-col cols=\"12\" class=\"text-left\">\n                <p class=\"color-black\" style=\"font-size: 24px; line-height: 35px\">\n                  Tap to call the gate. When prompted, enter the gate code shown\n                  in the lane to enter.\n                </p>\n              </v-col>\n            </v-row>\n          </v-container>\n        </v-card-text>\n        <v-card-actions class=\"text-center\">\n          <v-container pa-0 fluid>\n            <v-row no-gutters>\n              <v-col cols=\"12\">\n                <v-btn rounded block elevation=\"20\" class=\"white--text entry_dialog_btn\" @click=\"openDialerApp\">CALL\n                  GATE</v-btn>\n              </v-col>\n              <v-col cols=\"12\" class=\"mt-2\">\n                <p style=\"cursor: pointer\" @click=\"dialerDialog = false\">\n                  Close\n                </p>\n              </v-col>\n            </v-row>\n          </v-container>\n        </v-card-actions>\n      </v-card>\n    </v-dialog>\n    <v-dialog v-model=\"invalidQRDialog\" persistent max-width=\"290\">\n      <v-card class=\"pa-0\">\n        <v-card-title class=\"justify-center\" style=\"position: relative\">\n          <v-icon x-large color=\"red accent-2\">mdi-alert-outline</v-icon>\n        </v-card-title>\n        <v-card-text class=\"text-center mt-5\">\n          <span style=\"font-size: 20px\">{{ invalidQRMsg }}</span>\n        </v-card-text>\n        <v-card-actions class=\"text-center pb-6\">\n          <v-container pa-0 fluid>\n            <v-row no-gutters>\n              <v-col cols=\"12\">\n                <v-btn rounded block elevation=\"20\" class=\"white--text entry_dialog_btn\" @click=\"\n                  invalidQRDialog = false;\n                turnCameraOn();\n                                  \">Re-Scan Code</v-btn>\n              </v-col>\n            </v-row>\n          </v-container>\n        </v-card-actions>\n      </v-card>\n    </v-dialog>\n    <v-dialog v-model=\"invalidSMSDialog\" persistent max-width=\"290\">\n      <v-card class=\"pa-0\">\n        <v-card-title class=\"justify-center\" style=\"position: relative\">\n          <v-icon x-large color=\"red accent-2\">mdi-alert-outline</v-icon>\n        </v-card-title>\n        <v-card-text class=\"text-center mt-5\">\n          <span style=\"font-size: 20px\">{{ invalidSMSMsg }}</span>\n        </v-card-text>\n        <v-card-actions class=\"text-center pb-6\">\n          <v-container pa-0 fluid>\n            <v-row no-gutters>\n              <v-col cols=\"12\">\n                <v-btn rounded block elevation=\"20\" class=\"white--text entry_dialog_btn\"\n                  @click=\"invalidSMSDialog = false\">Re-Enter Code</v-btn>\n              </v-col>\n            </v-row>\n          </v-container>\n        </v-card-actions>\n      </v-card>\n    </v-dialog>\n  </v-container>\n</template>\n\n<script>\nimport APIHelper from \"../apiHelper\";\n// import loggerHelper from \"../loggerHelper\";\nlet SpeechRecognition =\n  window.SpeechRecognition || window.webkitSpeechRecognition;\nlet recognition = SpeechRecognition ? new SpeechRecognition() : false;\nimport { mapGetters } from \"vuex\";\nimport { QrcodeStream } from \"vue-qrcode-reader\";\nexport default {\n  name: \"CheckIn\",\n  components: { QrcodeStream },\n  data: () => ({\n    sendGateCodePending: false,\n    duration: 300,\n    offset: 0,\n    easing: \"easeInOutCubic\",\n    camera: \"auto\",\n    smsText: \"\",\n    smsDialog: false,\n    qrCodeDialog: false,\n    dialerDialog: false,\n    invalidQRMsg: \"\",\n    invalidQRDialog: false,\n    invalidSMSMsg: \"\",\n    invalidSMSDialog: false,\n    isValid: undefined,\n    smsPending: false,\n    gateCodeSpeechDialog: false,\n    lang: \"en-US\",\n    error: false,\n    speaking: false,\n    toggle: false,\n    runtimeTranscription: \"\",\n    sentences: [],\n    synth: window.speechSynthesis,\n    voiceList: [],\n    greetingSpeech: new window.SpeechSynthesisUtterance(),\n  }),\n  computed: {\n    ...mapGetters({\n      bookingId: \"getterBookingId\",\n      bookingDetails: \"getterBookingDetails\",\n      entryTime: \"getterEntryTime\",\n      entryGateCodes: \"getterEntryGateCodes\"\n    }),\n    options() {\n      return {\n        duration: this.duration,\n        offset: this.offset,\n        easing: this.easing,\n      };\n    },\n    validationPending: function qrValidation() {\n      return this.isValid === undefined && this.camera === \"off\";\n    },\n  },\n  watch: {},\n  created() { },\n  mounted() {\n    // this.checkCompatibility();\n  },\n  destroyed() { },\n  // beforeRouteEnter(to, from, next) {\n  //   next(async (vm) => {\n  // },\n  methods: {\n    openSMSDialog() {\n      this.smsDialog = true;\n      if (this.bookingDetails?.booking?.prePopulateGateCodes && this.bookingDetails.booking.prePopulateGateCodes == '1') {\n        this.smsText = this.entryGateCodes.length == 1 ? this.entryGateCodes[0].sms_code : \"\";\n      }\n    },\n    checkStartDate() {\n      return false;\n    },\n    scrollToSubmit() {\n      const el = document.querySelector(\"#submitsmsbtn\");\n      if (el) {\n        el.scrollIntoView(this.options);\n      }\n    },\n    scrollToValidateBtn() {\n      const el = document.querySelector(\"#validatebookingbtn\");\n      if (el) {\n        el.scrollIntoView(this.options);\n      }\n    },\n    checkCompatibility() {\n      if (!recognition) {\n        this.error =\n          \"Speech Recognition is not available on this browser. Please use Chrome or Firefox\";\n      }\n    },\n    isCheckoutEnabled(type) {\n      let option = this.bookingDetails?.exitOptions\n        ? this.bookingDetails.exitOptions.some((t) => t.techType == type)\n        : \"\";\n      return option;\n    },\n    getExitIcon(exitId) {\n      let exitDetails = this.bookingDetails?.exitOptions\n        ? this.bookingDetails.exitOptions.find((p) => p.techType == exitId)\n        : \"\";\n      return exitDetails.icon;\n    },\n    async openSMSApp() {\n      if (this.smsText == null || this.smsText == \"\") {\n        this.invalidSMSMsg = \"Gate code cannot be empty\";\n        this.invalidSMSDialog = true;\n      } else {\n        try {\n          this.smsPending = true;\n          var preValidateSendSMS = await APIHelper(\"POST\", \"/receive_sms\", {\n            bid: this.bookingId,\n            From: this.bookingDetails.user.contact,\n            Text: this.smsText,\n            To: this.bookingDetails.zone.ToMobileNo,\n            Mode: \"SMS\",\n            webView: \"1\",\n            preValidate: 1,\n          });\n          this.smsPending = false;\n          if (\n            preValidateSendSMS?.data?.status &&\n            preValidateSendSMS.data.status\n          ) {\n            try {\n              var sendSMS = await APIHelper(\"POST\", \"/receive_sms\", {\n                bid: this.bookingId,\n                From: this.bookingDetails.user.contact,\n                Text: this.smsText,\n                To: this.bookingDetails.zone.ToMobileNo,\n                Mode: \"SMS\",\n                webView: \"1\",\n              });\n              if (sendSMS?.data?.status && sendSMS.data.status) {\n                this.smsDialog = false;\n                this.$router.replace({ path: \"/checkinsuccess\" });\n              } else {\n                this.invalidSMSMsg = sendSMS?.data?.message\n                  ? sendSMS.data.message\n                  : \"Please try again\";\n                this.invalidSMSDialog = true;\n              }\n            } catch (error) {\n              console.log(error);\n            }\n          } else {\n            this.invalidSMSMsg = preValidateSendSMS?.data?.message\n              ? preValidateSendSMS.data.message\n              : \"Please try again\";\n            this.invalidSMSDialog = true;\n          }\n        } catch (error) {\n          console.log(error);\n        }\n      }\n    },\n    getMobileOperatingSystem() {\n      var userAgent = navigator.userAgent || navigator.vendor || window.opera;\n\n      // Windows Phone must come first because its UA also contains \"Android\"\n      if (/windows phone/i.test(userAgent)) {\n        return \"Windows Phone\";\n      }\n\n      if (/android/i.test(userAgent)) {\n        return \"Android\";\n      }\n\n      // iOS detection from: http://stackoverflow.com/a/9039885/177710\n      if (/iPad|iPhone|iPod/.test(userAgent) && !window.MSStream) {\n        return \"iOS\";\n      }\n      return \"unknown\";\n    },\n    openDialerApp() {\n      this.dialerDialog = false;\n      var url = \"tel:\" + this.bookingDetails.zone.ToMobileNo;\n      window.location.href = url;\n      if (this.getMobileOperatingSystem() == \"Android\") {\n        window.close();\n      }\n    },\n    turnCameraOn() {\n      this.camera = \"auto\";\n    },\n\n    turnCameraOff() {\n      this.camera = \"off\";\n    },\n    async sendGateCode() {\n      this.endSpeechRecognition();\n      let gateCodeText = this.runtimeTranscription;\n      try {\n        this.sendGateCodePending = true;\n        var preValidateSendGateCode = await APIHelper(\"POST\", \"/receive_sms\", {\n          bid: this.bookingId,\n          From: this.bookingDetails.user.contact,\n          Text: gateCodeText,\n          To: this.bookingDetails.zone.ToMobileNo,\n          Mode: \"SMS\",\n          webView: \"1\",\n          preValidate: 1,\n        });\n        this.sendGateCodePending = false;\n        this.toggle = false;\n        if (\n          preValidateSendGateCode?.data?.status &&\n          preValidateSendGateCode.data.status\n        ) {\n          try {\n            var sendSMS = await APIHelper(\"POST\", \"/receive_sms\", {\n              bid: this.bookingId,\n              From: this.bookingDetails.user.contact,\n              Text: gateCodeText,\n              To: this.bookingDetails.zone.ToMobileNo,\n              Mode: \"SMS\",\n              webView: \"1\",\n            });\n            if (sendSMS?.data?.status) {\n              this.gateCodeSpeechDialog = false;\n              this.$router.replace({ path: \"/checkinsuccess\" });\n            } else {\n              this.invalidSMSMsg = sendSMS?.data?.message\n                ? sendSMS.data.message\n                : \"Please try again\";\n              this.invalidSMSDialog = true;\n            }\n          } catch (error) {\n            console.log(error);\n          }\n        } else {\n          this.invalidSMSMsg = preValidateSendGateCode?.data?.message\n            ? preValidateSendGateCode.data.message\n            : \"Please try again\";\n          this.startAudio(this.invalidSMSMsg);\n          // this.invalidSMSDialog = true;\n        }\n      } catch (error) {\n        console.log(error);\n      }\n    },\n    async getBookingDetails() {\n      try {\n        let bookingId = window.location.pathname.substring(3);\n        var bookingDetails = await APIHelper(\n          \"GET\",\n          \"/api/v1/booking/config/\" + bookingId\n        );\n        this.$store.commit(\n          \"SET_BOOKING_DETAILS\",\n          bookingDetails.data?.data ? bookingDetails.data.data : null\n        );\n      } catch (error) {\n        console.log(error);\n      }\n    },\n    async onDecode(decodedString) {\n      var self = this;\n      this.qrCode = decodedString;\n      this.turnCameraOff();\n      try {\n        var preValidateQrResult = await APIHelper(\n          \"POST\",\n          \"/api/v1/checkout/\" + this.bookingId,\n          {\n            beaconId: decodedString,\n            preValidate: 1,\n            zid: this.bookingDetails.zone.locationCode\n          }\n        );\n        if (preValidateQrResult.data.status) {\n          try {\n            self.$router.replace({ path: \"/checkinsuccess\" });\n            var qrResult = await APIHelper(\n              \"POST\",\n              \"/api/v1/checkout/\" + this.bookingId,\n              {\n                beaconId: decodedString,\n                zid: this.bookingDetails.zone.locationCode\n              }\n            );\n            if (qrResult.data.status) {\n              console.log(\"checked In\");\n            } else {\n              this.invalidQRMsg = qrResult?.data?.message\n                ? qrResult.data.message\n                : \"Please try again\";\n              this.invalidQRDialog = true;\n            }\n          } catch (error) {\n            console.log(error);\n          }\n        } else {\n          this.invalidQRMsg = preValidateQrResult?.data?.message\n            ? preValidateQrResult.data.message\n            : \"Please try again\";\n          this.invalidQRDialog = true;\n        }\n      } catch (error) {\n        console.log(error);\n      }\n    },\n    async onInit(promise) {\n      try {\n        await promise;\n      } catch (error) {\n        if (error.name === \"NotAllowedError\") {\n          this.invalidQRMsg = \"Please grant camera access permisson\";\n        } else if (error.name === \"NotFoundError\") {\n          this.invalidQRMsg = \"No camera found on this device\";\n        } else if (error.name === \"NotSupportedError\") {\n          this.invalidQRMsg = \"Secure context required (HTTPS, localhost)\";\n        } else if (error.name === \"NotReadableError\") {\n          this.invalidQRMsg = \"Is the camera already in use? Please check.\";\n        } else if (error.name === \"OverconstrainedError\") {\n          this.invalidQRMsg = \"Installed camera is not suitable\";\n        } else if (error.name === \"StreamApiNotSupportedError\") {\n          this.invalidQRMsg = \"Stream API is not supported in this browser\";\n        }\n        this.invalidQRDialog = true;\n      }\n    },\n    endSpeechRecognition() {\n      recognition.stop();\n      this.synth.cancel();\n      this.toggle = false;\n      // this.$emit(\"speechend\", {\n      //   sentences: this.sentences,\n      //   text: this.sentences.join(\". \"),\n      // });\n    },\n    startAudio(speechText) {\n      this.gateCodeSpeechDialog = true;\n      // console.log(recognition)\n      this.voiceList = this.synth.getVoices();\n      // this.greetingSpeech.text = `Hi Rajesh Kola, Welcome to commerce B Garage. Please say the gate code.`\n      this.greetingSpeech.voice = this.voiceList[1];\n      // this.synth.speak(this.greetingSpeech);\n      const audio = new SpeechSynthesisUtterance(speechText);\n      audio.onstart = () => console.log(audio.text);\n      this.synth.speak(audio);\n      audio.onend = () => this.startSpeechRecognition();\n    },\n    startSpeechRecognition() {\n      var self = this;\n      if (!recognition) {\n        this.error =\n          \"Speech Recognition is not available on this browser. Please use Chrome or Firefox\";\n        return false;\n      }\n      this.toggle = true;\n      recognition.lang = this.lang;\n      recognition.interimResults = true;\n\n      recognition.addEventListener(\"speechstart\", () => {\n        self.speaking = true;\n      });\n\n      recognition.addEventListener(\"soundend\", () => {\n        self.speaking = false;\n      });\n      recognition.addEventListener(\"speechend\", () => {\n        self.speaking = false;\n      });\n\n      recognition.addEventListener(\"result\", (event) => {\n        const text = Array.from(event.results)\n          .map((result) => result[0])\n          .map((result) => result.transcript)\n          .join(\"\");\n        self.runtimeTranscription = text;\n      });\n\n      recognition.addEventListener(\"end\", (event) => {\n        console.log(event);\n        if (self.runtimeTranscription !== \"\") {\n          self.sentences.push(self.runtimeTranscription);\n          // self.$emit(\n          //   \"update:text\",\n          //   `${self.text}${self.sentences.slice(-1)[0]}. `\n          // );\n        }\n\n        self.runtimeTranscription == \"\" ? \"\" : self.sendGateCode(); //&& self.synth.cancel();\n        self.runtimeTranscription == \"\"\n          ? \"\"\n          : (self.gateCodeSpeechDialog = false);\n        self.runtimeTranscription = \"\";\n        recognition.stop();\n        // self.endSpeechRecognition()\n        // self.sentences =[];\n        if (self.toggle) {\n          // keep it going.\n          recognition.start();\n        }\n      });\n      recognition.start();\n    },\n    getExitText(exitId) {\n      let exitDetails = this.bookingDetails?.exitOptions\n        ? this.bookingDetails.exitOptions.find((p) => p.techType == exitId)\n        : \"\";\n      return exitDetails.name;\n    },\n    speechEnd({ sentences, text }) {\n      console.log(text)\n      this.sentences = sentences;\n    },\n  },\n};\n</script>\n<style lang=\"less\">\n.booking_header {\n  position: absolute;\n  bottom: 60px;\n  left: 16px;\n  font-size: 18px;\n  font-weight: bolder;\n}\n\n.booking_divider {\n  border-color: white !important;\n  margin-top: 12px;\n}\n\n.booking_divider_div {\n  position: absolute;\n  bottom: 45px;\n  width: 100%;\n}\n\n.booking_date {\n  font-weight: normal;\n  font-size: 13px;\n  color: #3d3f3c !important;\n}\n\n.booking_date_header {\n  color: #3d3f3c !important;\n  font-weight: bold;\n  font-size: 14px;\n}\n\n.header_content {\n  position: absolute !important;\n  bottom: 18px !important;\n  left: 16px !important;\n  font-size: 18px !important;\n  font-weight: bolder !important;\n}\n\n.speech-input input {\n  font-size: 36px;\n  font-weight: 500;\n  color: #44515a !important;\n}\n\n.entry-option-text {\n  font-size: 14px;\n}\n\n.qr_text {\n  font-size: 13px;\n}\n\n.sms-input input {\n  font-size: 36px;\n  font-weight: 500;\n  color: #44515a !important;\n}\n\n.v-text-field--enclosed .v-input__append-inner {\n  margin-top: 26px !important;\n}\n\n.sms-caption {\n  font-size: 0.75rem !important;\n  font-weight: 400;\n  line-height: 1.25rem;\n  letter-spacing: 0.0333333333em !important;\n}\n\n.qrcode-stream-wrapper video {\n  max-height: 300px;\n}\n\n.entry_dialog_btn {\n  width: 100%;\n  background-color: #f2555c !important;\n  font-size: 18px !important;\n  font-weight: 700 !important;\n  letter-spacing: normal !important;\n  height: 50px !important;\n}\n\n.validation-pending {\n  position: absolute !important;\n  left: 50%;\n  top: 50%;\n  -webkit-transform: translateX(-50%);\n  transform: translateX(-50%);\n}\n\n.pulse-button {\n  -webkit-animation: pulse 1.5s infinite;\n}\n\n.pulse-button:hover {\n  -webkit-animation: none;\n}\n\n@-webkit-keyframes pulse {\n  0% {\n    @include transform(scale(0.9));\n  }\n\n  70% {\n    @include transform(scale(1));\n    box-shadow: 0 0 0 50px rgba(#5a99d4, 0);\n  }\n\n  100% {\n    @include transform(scale(0.9));\n    box-shadow: 0 0 0 0 rgba(#5a99d4, 0);\n  }\n}\n</style>\n"]}]}