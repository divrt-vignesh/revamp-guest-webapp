{"remainingRequest":"/home/vignesh/DIVRT/guest-webapp/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/vignesh/DIVRT/guest-webapp/src/views/CheckedIn.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/vignesh/DIVRT/guest-webapp/src/views/CheckedIn.vue","mtime":1681900461991},{"path":"/home/vignesh/DIVRT/guest-webapp/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vignesh/DIVRT/guest-webapp/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/vignesh/DIVRT/guest-webapp/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vignesh/DIVRT/guest-webapp/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBBUElIZWxwZXIgZnJvbSAiLi4vYXBpSGVscGVyIjsKLy8gaW1wb3J0IGxvZ2dlckhlbHBlciBmcm9tICIuLi9sb2dnZXJIZWxwZXIiOwppbXBvcnQgeyBtYXBHZXR0ZXJzIH0gZnJvbSAidnVleCI7Ci8vIGltcG9ydCB7IFFyY29kZVN0cmVhbSB9IGZyb20gInZ1ZS1xcmNvZGUtcmVhZGVyIjsKaW1wb3J0IFFyQ29kZVNjYW5uZXIgZnJvbSAiQC92aWV3cy9RckNvZGVTY2FubmVyLnZ1ZSI7CmltcG9ydCBWYWxpZGF0aW9uUXJDb2RlU2Nhbm5lciBmcm9tICJAL3ZpZXdzL1ZhbGlkYXRpb25RckNvZGVTY2FubmVyLnZ1ZSI7CmltcG9ydCBBcHBsZVBheSBmcm9tICJAL3ZpZXdzL0FwcGxlUGF5LnZ1ZSI7CmltcG9ydCB7IGZvcm1hdERhdGVUaW1lIH0gZnJvbSAiQC91dGlscy9mb3JtYXREYXRlVGltZSI7CmltcG9ydCB7IEV2ZW50QnVzIH0gZnJvbSAiQC9saWIvRXZlbnRCdXMiOwppbXBvcnQgeyBzZWNvbmRzVG9IbXMgfSBmcm9tICJAL3V0aWxzL2Zvcm1hdERhdGVUaW1lIjsKLy8gaW1wb3J0IFFyU2Nhbm5lciBmcm9tICdxci1zY2FubmVyJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJDaGVja0luIiwKICBjb21wb25lbnRzOiB7IFFyQ29kZVNjYW5uZXIsIFZhbGlkYXRpb25RckNvZGVTY2FubmVyLCBBcHBsZVBheSB9LAogIGRhdGE6ICgpID0+ICh7CiAgICAvLyBydWxlczogewogICAgLy8gICBjb3VudGVyOiB2YWx1ZSA9PiB2YWx1ZS5sZW5ndGggPD0gNiB8fCAiTWF4IDYgY2hhcmFjdGVycyIKICAgIC8vIH0sCiAgICBleGl0RGF0ZVRpbWU6IDAsCiAgICBleGl0VGltZUludGVydmFsOiBudWxsLAogICAgaW9zRGV2aWNlOiBmYWxzZSwKICAgIGludmFsaWRWYWxpZGF0aW9uUVJEaWFsb2c6IGZhbHNlLAogICAgY2FtZXJhU3RhdHVzOiBmYWxzZSwKICAgIHZhbGlkYXRpb25DYW1lcmFTdGF0dXM6IGZhbHNlLAogICAgdmFsaWRhdGVkRGF0ZVRpbWU6IDAsCiAgICBncmFjZVBlcmlvZFRpbWU6IDAsCiAgICB2YWxpZGF0ZWRJbnRlcnZhbDogIiIsCiAgICBkdXJhdGlvbjogMzAwLAogICAgb2Zmc2V0OiAwLAogICAgcGVkZXN0cmlhbkFjY2Vzc0RpYWxvZzogZmFsc2UsCiAgICBwZWRlc3RyaWFuQWNjZXNzVGV4dDogIiIsCiAgICBlYXNpbmc6ICJlYXNlSW5PdXRDdWJpYyIsCiAgICBwYWdlSGVpZ2h0OiB3aW5kb3cub3V0ZXJIZWlnaHQsCiAgICBxckNvZGVEaWFsb2c6IGZhbHNlLAogICAgY291bnRVcFRpbWU6ICIiLAogICAgaW50ZXJ2YWw6ICIiLAogICAgaXNWYWxpZDogdW5kZWZpbmVkLAogICAgY2FtZXJhOiAiYXV0byIsCiAgICBzbXNUZXh0OiAiIiwKICAgIHNtc0RpYWxvZzogZmFsc2UsCiAgICBkaWFsZXJEaWFsb2c6IGZhbHNlLAogICAgaW52YWxpZFFSTXNnOiAiIiwKICAgIGludmFsaWRWYWxpZGF0aW9uUVJNc2c6ICIiLAogICAgaW52YWxpZFFSRGlhbG9nOiBmYWxzZSwKICAgIGludmFsaWRTTVNNc2c6ICIiLAoKICAgIGludmFsaWRTTVNEaWFsb2c6IGZhbHNlLAogICAgc21zUGVuZGluZzogZmFsc2UsCiAgICB2YWxpZGF0ZUJvb2tpbmdQZW5kaW5nOiBmYWxzZSwKICAgIHZhbGlkYXRlQm9va2luZ0RpYWxvZzogZmFsc2UsCiAgICB2YWxpZGF0ZUJvb2tpbmdUeHQ6ICIiLAogICAgdmFsaWRhdGVRUkNvZGVQZW5kaW5nOiBmYWxzZSwKICAgIHZhbGlkYXRlUVJDb2RlRGlhbG9nOiBmYWxzZSwKICB9KSwKICBjb21wdXRlZDogewogICAgLi4ubWFwR2V0dGVycyh7CiAgICAgIGJvb2tpbmdJZDogImdldHRlckJvb2tpbmdJZCIsCiAgICAgIGJvb2tpbmdEZXRhaWxzOiAiZ2V0dGVyQm9va2luZ0RldGFpbHMiLAogICAgICBlbnRyeVRpbWU6ICJnZXR0ZXJFbnRyeVRpbWUiLAogICAgICBleGl0R2F0ZUNvZGVzOiAiZ2V0dGVyRXhpdEdhdGVDb2RlcyIsCiAgICAgIGlzUFFSRW5kUmVzZXJ2YXRpb246ICJnZXR0ZXJab25lSXNQUVJFbmRSZXNlcnZhdGlvbiIsCgogICAgfSksCiAgICBjb3VudERvd25FeGl0VGltZSgpIHsKICAgICAgaWYgKHRoaXMuZXhpdERhdGVUaW1lIDwgMCkgewogICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgiU0VUX1ZBTElEQVRFRF9USU1FX1NUQVRVUyIsIHRydWUpOwogICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5leGl0VGltZUludGVydmFsKTsKICAgICAgfQogICAgICByZXR1cm4gc2Vjb25kc1RvSG1zKHRoaXMuZXhpdERhdGVUaW1lIC8gMTAwMCArIDU5KTsKICAgIH0sCiAgICBpc0V4dHJhKCkgewogICAgICByZXR1cm4gd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lLmluY2x1ZGVzKCIvZ3gvIik7CiAgICB9LAogICAgb3B0aW9ucygpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICBkdXJhdGlvbjogdGhpcy5kdXJhdGlvbiwKICAgICAgICBvZmZzZXQ6IHRoaXMub2Zmc2V0LAogICAgICAgIGVhc2luZzogdGhpcy5lYXNpbmcsCiAgICAgIH07CiAgICB9LAogICAgc2hvd1BheW1lbnRDYXJkQWRkZWQ6IGZ1bmN0aW9uIGdldENhcmRTdGF0dXMoKSB7CiAgICAgIHZhciBjYXJkT25GaWxlID0gdGhpcy5ib29raW5nRGV0YWlscz8uYm9va2luZz8uY2FyZE9uZmlsZQogICAgICAgID8gdGhpcy5ib29raW5nRGV0YWlscy5ib29raW5nLmNhcmRPbmZpbGUKICAgICAgICA6IG51bGw7CiAgICAgIHZhciB2YWxpZGF0ZWRTdGF0ZSA9IHRoaXMuYm9va2luZ0RldGFpbHM/LmJvb2tpbmc/LnZhbGlkYXRlZAogICAgICAgID8gdGhpcy5ib29raW5nRGV0YWlscy5ib29raW5nLnZhbGlkYXRlZAogICAgICAgIDogbnVsbDsKICAgICAgdmFyIHN0YXRlID0KICAgICAgICBjYXJkT25GaWxlID09ICIxIgogICAgICAgICAgPyB0cnVlCiAgICAgICAgICA6IGNhcmRPbkZpbGUgPT0gIjIiICYmCiAgICAgICAgICB2YWxpZGF0ZWRTdGF0ZSA9PSAiMSIgJiYKICAgICAgICAgIHRoaXMudmFsaWRhdGVkRGF0ZVRpbWUgPiAwOwogICAgICByZXR1cm4gc3RhdGU7CiAgICB9LAogICAgdGltZUFnbzogZnVuY3Rpb24gZ2V0VGltZUFnbygpIHsKICAgICAgcmV0dXJuIHRoaXMuY291bnRVcFRpbWU7CiAgICB9LAogICAgdmFsaWRhdGlvblBlbmRpbmc6IGZ1bmN0aW9uIHFyVmFsaWRhdGlvbigpIHsKICAgICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA9PT0gdW5kZWZpbmVkICYmIHRoaXMuY2FtZXJhID09PSAib2ZmIjsKICAgIH0sCiAgICBib29raW5nX2NvbnRlbnQoKSB7CiAgICAgIGxldCBkYXRlVGltZSA9IGZvcm1hdERhdGVUaW1lKAogICAgICAgIE51bWJlcih0aGlzLmJvb2tpbmdEZXRhaWxzLmJvb2tpbmcuZW50cnl0aW1lKQogICAgICApOwogICAgICByZXR1cm4gZGF0ZVRpbWVbMF0gKyAiIG9uICIgKyBkYXRlVGltZVsxXSArICIgIiArIGRhdGVUaW1lWzJdOwogICAgfSwKICAgIHZhbGlkYXRlZF9jb250ZW50KCkgewogICAgICBpZiAodGhpcy5ib29raW5nRGV0YWlscz8uem9uZT8udGltZXpvbmVvZmZzZXQpIHsKICAgICAgICBsZXQgZGF0ZVRpbWUgPSB0aGlzLmJvb2tpbmdEZXRhaWxzLmJvb2tpbmcudHlwZSA9PSAiMTMiID8gZm9ybWF0RGF0ZVRpbWUoCiAgICAgICAgICBOdW1iZXIodGhpcy5ib29raW5nRGV0YWlscy5ib29raW5nLnJldlN0YXJ0KSArCiAgICAgICAgICBOdW1iZXIodGhpcy5ib29raW5nRGV0YWlscy5ib29raW5nLmNvdXBvblZhbGlkVGltZSkKICAgICAgICApIDogZm9ybWF0RGF0ZVRpbWUoCiAgICAgICAgICBOdW1iZXIodGhpcy5ib29raW5nRGV0YWlscy5ib29raW5nLmVudHJ5dGltZSkgKwogICAgICAgICAgTnVtYmVyKHRoaXMuYm9va2luZ0RldGFpbHMuYm9va2luZy5jb3Vwb25WYWxpZFRpbWUpCiAgICAgICAgKTsKICAgICAgICByZXR1cm4gZGF0ZVRpbWVbMF0gKyAiLCAiICsgZGF0ZVRpbWVbMV0gKyAiICIgKyBkYXRlVGltZVsyXTsKICAgICAgfQogICAgICByZXR1cm4gIiI7CiAgICB9LAogICAgY291bnREb3duVmFsaWRhdGVkVGltZSgpIHsKICAgICAgaWYgKHRoaXMudmFsaWRhdGVkRGF0ZVRpbWUgPCAwKSB7CiAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCJTRVRfVkFMSURBVEVEX1RJTUVfU1RBVFVTIiwgdHJ1ZSk7CiAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLnZhbGlkYXRlZEludGVydmFsKTsKICAgICAgfQogICAgICByZXR1cm4gdGhpcy5zZWNvbmRzVG9IbXModGhpcy52YWxpZGF0ZWREYXRlVGltZSAvIDEwMDAgKyA1OSk7CiAgICB9LAogICAgY291bnREb3duR3JhY2VQZXJpb2RUaW1lKCkgewogICAgICBpZiAodGhpcy5ncmFjZVBlcmlvZFRpbWUgPCAwKSB7CiAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCJTRVRfR1JBQ0VfUEVSSU9EX1RJTUVfU1RBVFVTIiwgdHJ1ZSk7CiAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLmdyYWNlUGVyaW9kSW50ZXJ2YWwpOwogICAgICB9CiAgICAgIC8vYWRkIDU5IHNlYyB0byBncmFjZXBlcmlvZCB0aW1lIHRvIHNraXAgMCBtaW4uCiAgICAgIHJldHVybiB0aGlzLnNlY29uZHNUb0htcyh0aGlzLmdyYWNlUGVyaW9kVGltZSAvIDEwMDAgKyA1OSk7CiAgICB9LAogICAgLy8gZ3JhY2VQZXJpb2RDb3VudERvd25UaW1lLAogICAgLy8gY291bnREb3duVmFsaWRhdGlvbnRpbWUoKXsKICAgIC8vICAgcmV0dXJuCiAgICAvLyB9CiAgfSwKICB3YXRjaDogewogICAgY3VycmVudERhdGUobmV3VmFsKSB7CiAgICAgIGNvbnNvbGUubG9nKG5ld1ZhbCk7CiAgICB9LAogIH0sCiAgY3JlYXRlZCgpIHsgfSwKICBtb3VudGVkOiBmdW5jdGlvbiAoKSB7CiAgICB0aGlzLmV4aXREYXRlVGltZSA9IHRoaXMuY2FsY3VsYXRlRXhpdERhdGVUaW1lKCk7CiAgICB0aGlzLmV4aXRUaW1lSW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCgoKSA9PiB7CiAgICAgIGlmICgKICAgICAgICB0aGlzLmJvb2tpbmdEZXRhaWxzPy56b25lPy50aW1lem9uZQoKICAgICAgKSB7CiAgICAgICAgdGhpcy5leGl0RGF0ZVRpbWUgPSB0aGlzLmNhbGN1bGF0ZUV4aXREYXRlVGltZSgpOwogICAgICB9CiAgICB9LCAxMDAwKTsKICAgIGlmICgKICAgICAgdGhpcy5lbnRyeVRpbWUgIT0gbnVsbCAmJgogICAgICAhdGhpcy5ib29raW5nRGV0YWlscz8uYm9va2luZz8uZXhpdHRpbWUgJiYKICAgICAgdGhpcy5ib29raW5nRGV0YWlscz8uem9uZT8udGltZXpvbmUgJiYKICAgICAgdGhpcy5ib29raW5nRGV0YWlscz8uYm9va2luZz8uZ3JhY2VQZXJpb2QKICAgICkgewogICAgICB0aGlzLmNvdW50VXBUaW1lID0gdGhpcy5jYWxjdWxhdGVQYXJraW5nVGltZSgKICAgICAgICB0aGlzLmVudHJ5VGltZSwKICAgICAgICB0aGlzLmJvb2tpbmdEZXRhaWxzLmJvb2tpbmcuZ3JhY2VQZXJpb2QsCiAgICAgICAgdGhpcy5ib29raW5nRGV0YWlscy56b25lLnRpbWV6b25lCiAgICAgICk7CiAgICB9CiAgICB0aGlzLmludGVydmFsID0gc2V0SW50ZXJ2YWwoKCkgPT4gewogICAgICBpZiAoCiAgICAgICAgdGhpcy5lbnRyeVRpbWUgIT0gbnVsbCAmJgogICAgICAgICF0aGlzLmJvb2tpbmdEZXRhaWxzPy5ib29raW5nPy5leGl0dGltZSAmJgogICAgICAgIHRoaXMuYm9va2luZ0RldGFpbHM/LnpvbmU/LnRpbWV6b25lICYmCiAgICAgICAgdGhpcy5ib29raW5nRGV0YWlscz8uYm9va2luZz8uZ3JhY2VQZXJpb2QKICAgICAgKSB7CiAgICAgICAgdGhpcy5jb3VudFVwVGltZSA9IHRoaXMuY2FsY3VsYXRlUGFya2luZ1RpbWUoCiAgICAgICAgICB0aGlzLmVudHJ5VGltZSwKICAgICAgICAgIHRoaXMuYm9va2luZ0RldGFpbHMuYm9va2luZy5ncmFjZVBlcmlvZCwKICAgICAgICAgIHRoaXMuYm9va2luZ0RldGFpbHMuem9uZS50aW1lem9uZQogICAgICAgICk7CiAgICAgIH0KICAgIH0sIDEwMDApOwogICAgaWYgKAogICAgICB0aGlzLmJvb2tpbmdEZXRhaWxzPy5ib29raW5nPy5leGl0dGltZSAmJgogICAgICB0aGlzLmJvb2tpbmdEZXRhaWxzLmJvb2tpbmcuZXhpdHRpbWUgIT0gbnVsbCAmJgogICAgICB0aGlzLmJvb2tpbmdEZXRhaWxzLmJvb2tpbmcuZXhpdHRpbWUgIT0gIiIKICAgICkgewogICAgICBjbGVhckludGVydmFsKHRoaXMuaW50ZXJ2YWwpOwogICAgfQogICAgaWYgKAogICAgICB0aGlzLmJvb2tpbmdEZXRhaWxzPy5ib29raW5nPy52YWxpZGF0ZWQgJiYKICAgICAgdGhpcy5ib29raW5nRGV0YWlscy5ib29raW5nLnZhbGlkYXRlZCA9PSAiMSIgJiYKICAgICAgdGhpcy5ib29raW5nRGV0YWlscz8uYm9va2luZz8udmFsaWRhdGlvblR5cGUgJiYKICAgICAgdGhpcy5ib29raW5nRGV0YWlscy5ib29raW5nLnZhbGlkYXRpb25UeXBlID09ICJESVZSVCIKICAgICkgewogICAgICB0aGlzLnZhbGlkYXRlZERhdGVUaW1lID0gdGhpcy5jYWxjdWxhdGVWYWxpZGF0ZWRUaW1lKCk7CiAgICB9CgogICAgdGhpcy52YWxpZGF0ZWRJbnRlcnZhbCA9IHNldEludGVydmFsKCgpID0+IHsKICAgICAgaWYgKAogICAgICAgIHRoaXMuYm9va2luZ0RldGFpbHM/LnpvbmU/LnRpbWV6b25lICYmCiAgICAgICAgdGhpcy5ib29raW5nRGV0YWlscz8uYm9va2luZz8udmFsaWRhdGVkICYmCiAgICAgICAgdGhpcy5ib29raW5nRGV0YWlscy5ib29raW5nLnZhbGlkYXRlZCA9PSAiMSIgJiYKICAgICAgICB0aGlzLmJvb2tpbmdEZXRhaWxzPy5ib29raW5nPy52YWxpZGF0aW9uVHlwZSAmJgogICAgICAgIHRoaXMuYm9va2luZ0RldGFpbHMuYm9va2luZy52YWxpZGF0aW9uVHlwZSA9PSAiRElWUlQiCiAgICAgICkgewogICAgICAgIHRoaXMudmFsaWRhdGVkRGF0ZVRpbWUgPSB0aGlzLmNhbGN1bGF0ZVZhbGlkYXRlZFRpbWUoKTsKICAgICAgfQogICAgfSwgMTAwMCk7CiAgICBpZiAoCiAgICAgIHRoaXMuYm9va2luZ0RldGFpbHM/LmJvb2tpbmc/LnZhbGlkYXRlZCAmJgogICAgICB0aGlzLmJvb2tpbmdEZXRhaWxzLmJvb2tpbmcudmFsaWRhdGVkID09ICIxIiAmJgogICAgICB0aGlzLmJvb2tpbmdEZXRhaWxzPy5ib29raW5nPy52YWxpZGF0aW9uVHlwZSAmJgogICAgICB0aGlzLmJvb2tpbmdEZXRhaWxzLmJvb2tpbmcudmFsaWRhdGlvblR5cGUgPT0gIkRJVlJUIgogICAgKSB7CiAgICAgIGlmICh0aGlzLnZhbGlkYXRlZERhdGVUaW1lIDwgMCkgewogICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgiU0VUX1ZBTElEQVRFRF9USU1FX1NUQVRVUyIsIHRydWUpOwogICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy52YWxpZGF0ZWRJbnRlcnZhbCk7CiAgICAgIH0KICAgIH0KCiAgICBpZiAodGhpcy5ib29raW5nRGV0YWlscz8uYm9va2luZz8uZ3JhY2VQZXJpb2QgPiAwKSB7CiAgICAgIHRoaXMuZ3JhY2VQZXJpb2RUaW1lID0gdGhpcy5jYWxjdWxhdGVHcmFjZVBlcmlvZFRpbWUoKTsKICAgIH0KCiAgICB0aGlzLmdyYWNlUGVyaW9kSW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCgoKSA9PiB7CiAgICAgIGlmICh0aGlzLmJvb2tpbmdEZXRhaWxzPy56b25lPy50aW1lem9uZSkgewogICAgICAgIHRoaXMuZ3JhY2VQZXJpb2RUaW1lID0gdGhpcy5jYWxjdWxhdGVHcmFjZVBlcmlvZFRpbWUoKTsKICAgICAgfQogICAgfSwgMTAwMCk7CiAgICBpZiAodGhpcy5ib29raW5nRGV0YWlscz8uYm9va2luZz8uZ3JhY2VQZXJpb2QgPiAwKSB7CiAgICAgIGlmICh0aGlzLmdyYWNlUGVyaW9kVGltZSA8IDApIHsKICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoIlNFVF9HUkFDRV9QRVJJT0RfVElNRV9TVEFUVVMiLCB0cnVlKTsKICAgICAgICBjbGVhckludGVydmFsKHRoaXMuZ3JhY2VQZXJpb2RJbnRlcnZhbCk7CiAgICAgIH0KICAgIH0KICAgIEV2ZW50QnVzLiRvbigic21zLXFyLXJlc3VsdCIsIChyZXN1bHQpID0+IHsKICAgICAgdGhpcy5vbkRlY29kZShyZXN1bHQpOwogICAgfSk7CiAgICBFdmVudEJ1cy4kb24oInZhbGlkYXRpb24tcXItcmVzdWx0IiwgKHJlc3VsdCkgPT4gewogICAgICB0aGlzLm9uVmFsaWRhdGVRUkNvZGUocmVzdWx0KTsKICAgIH0pOwoKICAgIC8vIGlmKHRoaXMuYm9va2luZ0RldGFpbHM/LnpvbmU/LmlzUGVkZXN0cmlhbj09JzEnKXsKICAgIC8vICAgdGhpcy5wZWRlc3RyaWFuQWNjZXNzPXRydWUKICAgIC8vIH0KICB9LAogIGRlc3Ryb3llZCgpIHsKICAgIGNsZWFySW50ZXJ2YWwodGhpcy5pbnRlcnZhbCk7CiAgICBjbGVhckludGVydmFsKHRoaXMudmFsaWRhdGVkSW50ZXJ2YWwpOwogICAgY2xlYXJJbnRlcnZhbCh0aGlzLmdyYWNlUGVyaW9kSW50ZXJ2YWwpOwogIH0sCiAgYmVmb3JlUm91dGVFbnRlcih0bywgZnJvbSwgbmV4dCkgewogICAgbmV4dChhc3luYyAodm0pID0+IHsKICAgICAgdm0uZ2V0TW9iaWxlT3BlcmF0aW5nU3lzdGVtKCkgPT09ICdpT1MnID8gdm0uaW9zRGV2aWNlID0gdHJ1ZSA6IHZtLmlvc0RldmljZSA9IGZhbHNlOwoKICAgICAgaWYgKAogICAgICAgIHZtLmJvb2tpbmdEZXRhaWxzPy5ib29raW5nPy5leGl0dGltZSAmJgogICAgICAgIHZtLmJvb2tpbmdEZXRhaWxzLmJvb2tpbmcuZXhpdHRpbWUgIT0gbnVsbCAmJgogICAgICAgIHZtLmJvb2tpbmdEZXRhaWxzLmJvb2tpbmcuZXhpdHRpbWUgIT0gIiIKICAgICAgKSB7CiAgICAgICAgY2xlYXJJbnRlcnZhbCh2bS5pbnRlcnZhbCk7CiAgICAgIH0KICAgICAgaWYgKHZtLmJvb2tpbmdEZXRhaWxzPy5ib29raW5nPy52YWxpZGF0ZWQgPT0gIjAiKSB7CiAgICAgICAgaWYgKHZtLnZhbGlkYXRlZERhdGVUaW1lIDwgMCkgewogICAgICAgICAgdm0uJHN0b3JlLmNvbW1pdCgiU0VUX1ZBTElEQVRFRF9USU1FX1NUQVRVUyIsIHRydWUpOwogICAgICAgICAgY2xlYXJJbnRlcnZhbCh2bS52YWxpZGF0ZWRJbnRlcnZhbCk7CiAgICAgICAgfQogICAgICB9CiAgICB9KTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGNhbGN1bGF0ZUV4aXREYXRlVGltZSgpIHsKICAgICAgaWYgKHRoaXMuYm9va2luZ0RldGFpbHM/LnpvbmU/LnRpbWV6b25lKSB7CiAgICAgICAgLy8gICB2YXIgY3VycmVudFRpbWUgPQogICAgICAgIC8vIG5ldyBEYXRlKCkuZ2V0VGltZSgpICsKICAgICAgICAvLyAoTnVtYmVyKHRoaXMuYm9va2luZ0RldGFpbHMuem9uZS50aW1lem9uZW9mZnNldCkgKiAxMDAwICsKICAgICAgICAvLyAgIE51bWJlcih0aGlzLmJvb2tpbmdEZXRhaWxzLnpvbmUudGltZXpvbmVkc3RvZmZzZXQpICogMTAwMCk7CiAgICAgICAgdmFyIGN1cnJlbnRUaW1lID0KICAgICAgICAgIG5ldyBEYXRlKCkuZ2V0VGltZSgpICsKICAgICAgICAgIChOdW1iZXIodGhpcy5ib29raW5nRGV0YWlscy56b25lLnRpbWV6b25lb2Zmc2V0KSAqIDEwMDAgKwogICAgICAgICAgICBOdW1iZXIodGhpcy5ib29raW5nRGV0YWlscy56b25lLnRpbWV6b25lZHN0b2Zmc2V0KSAqIDEwMDApOwogICAgICAgIHZhciBleGl0VGltZSA9CiAgICAgICAgICBuZXcgRGF0ZSh0aGlzLmJvb2tpbmdEZXRhaWxzLmJvb2tpbmcucmVzZXJ2YXRpb25FbmREYXRlKS5nZXRUaW1lKCk7CiAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCJTRVRfRVhJVF9USU1FX1RJTUVfU1RBVFVTIiwgdGhpcy5leGl0RGF0ZVRpbWUgPCAwKTsKICAgICAgICBleGl0VGltZSAtIGN1cnJlbnRUaW1lIDwgMAogICAgICAgICAgPyBjbGVhckludGVydmFsKHRoaXMuZXhpdEludGVydmFsKQogICAgICAgICAgOiAiIjsKICAgICAgICByZXR1cm4gZXhpdFRpbWUgLSBjdXJyZW50VGltZTsKICAgICAgfQogICAgICByZXR1cm4gMAoKICAgIH0sCiAgICBob3RlbEd1ZXN0KCkgewogICAgICBsZXQgdXJsID0gd2luZG93LmxvY2F0aW9uLm9yaWdpbiArICc/emNvZGU9JyArIHRoaXMuYm9va2luZ0RldGFpbHM/LnpvbmU/LmxvY2F0aW9uQ29kZSArICcjL2NyZWF0ZXNlc3Npb24nOwogICAgICBsZXQgcGxhdGUgPSB0aGlzLmJvb2tpbmdEZXRhaWxzPy5ib29raW5nPy52ZWhpY2xlTm8gfHwgIiI7CiAgICAgIGxldCBwaG9uZSA9IHRoaXMuYm9va2luZ0RldGFpbHM/LnVzZXI/LmNvbnRhY3QgfHwgIiI7CiAgICAgIGxldCBiaWQgPSB0aGlzLmJvb2tpbmdEZXRhaWxzPy5ib29raW5nPy5iaWQgfHwgIiI7CiAgICAgIGxldCBwYXJhbXMgPSAnLz9waG9uZT0nICsgcGhvbmUgKyAnJmJpZD0nICsgYmlkICsgJyZwbGF0ZT0nICsgcGxhdGU7CiAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZXBsYWNlKHVybCArIHBhcmFtcyk7CiAgICAgIC8vIHRoaXMuJHJvdXRlci5yZXBsYWNlKHtwYXRoOicvJ30pOwoKICAgIH0sCiAgICBjbG9zZVFSQ29kZURpYWxvZygpIHsKICAgICAgdGhpcy5xckNvZGVEaWFsb2cgPSBmYWxzZTsKICAgICAgdGhpcy5jYW1lcmFTdGF0dXMgPSBmYWxzZTsKICAgIH0sCiAgICBjbG9zZVZhbGlkYXRpb25RUkRpYWxvZygpIHsKICAgICAgdGhpcy52YWxpZGF0aW9uQ2FtZXJhU3RhdHVzID0gZmFsc2U7CiAgICAgIHRoaXMudmFsaWRhdGVCb29raW5nRGlhbG9nID0gdHJ1ZTsKICAgICAgdGhpcy52YWxpZGF0ZVFSQ29kZURpYWxvZyA9IGZhbHNlOwogICAgfSwKICAgIHJlU2NhblFSKCkgewogICAgICB0aGlzLmludmFsaWRRUkRpYWxvZyA9IGZhbHNlOwogICAgICB0aGlzLmNhbWVyYVN0YXR1cyA9IHRydWU7CiAgICB9LAogICAgcmVTY2FuVmFsaWRhdGlvblFSKCkgewogICAgICB0aGlzLmludmFsaWRWYWxpZGF0aW9uUVJEaWFsb2cgPSBmYWxzZTsKICAgICAgdGhpcy52YWxpZGF0aW9uQ2FtZXJhU3RhdHVzID0gdHJ1ZTsKICAgIH0sCiAgICBvcGVuU21zUXJTY2FubmVyKCkgewogICAgICB0aGlzLnFyQ29kZURpYWxvZyA9IHRydWU7CiAgICAgIHRoaXMuY2FtZXJhU3RhdHVzID0gdHJ1ZTsKICAgIH0sCiAgICBvcGVuU01TRGlhbG9nKCkgewogICAgICB0aGlzLnNtc0RpYWxvZyA9IHRydWU7CiAgICAgIGxldCBleGl0TGFuZXMgPQogICAgICAgIHRoaXMuZXhpdEdhdGVDb2Rlcy5sZW5ndGggPiAwCiAgICAgICAgICA/IHRoaXMuZXhpdEdhdGVDb2Rlcy5maWx0ZXIoKGEpID0+IGEuaXNQZWRlc3RyaWFuID09ICIwIikKICAgICAgICAgIDogW107CiAgICAgIGlmICgKICAgICAgICB0aGlzLmJvb2tpbmdEZXRhaWxzPy5ib29raW5nPy5wcmVQb3B1bGF0ZUdhdGVDb2RlcyAmJgogICAgICAgIHRoaXMuYm9va2luZ0RldGFpbHMuYm9va2luZy5wcmVQb3B1bGF0ZUdhdGVDb2RlcyA9PSAiMSIKICAgICAgKSB7CiAgICAgICAgdGhpcy5zbXNUZXh0ID0gZXhpdExhbmVzLmxlbmd0aCA9PSAxID8gZXhpdExhbmVzWzBdLnNtc19jb2RlIDogIiI7CiAgICAgIH0KICAgIH0sCiAgICBzY3JvbGxUb1N1Ym1pdCgpIHsKICAgICAgY29uc3QgZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjc3VibWl0c21zYnRuIik7CiAgICAgIGlmIChlbCkgewogICAgICAgIGVsLnNjcm9sbEludG9WaWV3KHRoaXMub3B0aW9ucyk7CiAgICAgIH0KICAgIH0sCiAgICBzY3JvbGxUb1ZhbGlkYXRlQnRuKCkgewogICAgICBjb25zdCBlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiN2YWxpZGF0ZWJvb2tpbmdidG4iKTsKICAgICAgaWYgKGVsKSB7CiAgICAgICAgZWwuc2Nyb2xsSW50b1ZpZXcodGhpcy5vcHRpb25zKTsKICAgICAgfQogICAgfSwKICAgIGNhbGN1bGF0ZUdyYWNlUGVyaW9kVGltZSgpIHsKICAgICAgdmFyIGN1cnJlbnRUaW1lID0KICAgICAgICBuZXcgRGF0ZSgpLmdldFRpbWUoKSArCiAgICAgICAgKE51bWJlcih0aGlzLmJvb2tpbmdEZXRhaWxzLnpvbmUudGltZXpvbmVvZmZzZXQpICogMTAwMCArCiAgICAgICAgICBOdW1iZXIodGhpcy5ib29raW5nRGV0YWlscy56b25lLnRpbWV6b25lZHN0b2Zmc2V0KSAqIDEwMDApOwogICAgICB2YXIgZ3JhY2VQZXJpb2RUaW1lID0KICAgICAgICAoTnVtYmVyKHRoaXMuYm9va2luZ0RldGFpbHMuYm9va2luZy5lbnRyeXRpbWUpICsKICAgICAgICAgIE51bWJlcih0aGlzLmJvb2tpbmdEZXRhaWxzLmJvb2tpbmcuZ3JhY2VQZXJpb2QpKSAqCiAgICAgICAgMTAwMDsgLy8KICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KAogICAgICAgICJTRVRfR1JBQ0VfUEVSSU9EX1RJTUVfU1RBVFVTIiwKICAgICAgICB0aGlzLmdyYWNlUGVyaW9kVGltZSA8PSAwCiAgICAgICk7CiAgICAgIHJldHVybiBncmFjZVBlcmlvZFRpbWUgLSBjdXJyZW50VGltZTsKICAgIH0sCiAgICBjYWxjdWxhdGVWYWxpZGF0ZWRUaW1lKCkgewogICAgICB2YXIgY3VycmVudFRpbWUgPQogICAgICAgIG5ldyBEYXRlKCkuZ2V0VGltZSgpICsKICAgICAgICAoTnVtYmVyKHRoaXMuYm9va2luZ0RldGFpbHMuem9uZS50aW1lem9uZW9mZnNldCkgKiAxMDAwICsKICAgICAgICAgIE51bWJlcih0aGlzLmJvb2tpbmdEZXRhaWxzLnpvbmUudGltZXpvbmVkc3RvZmZzZXQpICogMTAwMCk7CiAgICAgIHZhciB2YWxpZGF0ZWRUaW1lID0gdGhpcy5ib29raW5nRGV0YWlscy5ib29raW5nLnR5cGUgPT0gIjEzIiA/CiAgICAgICAgKE51bWJlcih0aGlzLmJvb2tpbmdEZXRhaWxzLmJvb2tpbmcucmV2U3RhcnQpICsKICAgICAgICAgIE51bWJlcih0aGlzLmJvb2tpbmdEZXRhaWxzLmJvb2tpbmcuY291cG9uVmFsaWRUaW1lKSkgKgogICAgICAgIDEwMDAgOiAoTnVtYmVyKHRoaXMuYm9va2luZ0RldGFpbHMuYm9va2luZy5lbnRyeXRpbWUpICsKICAgICAgICAgIE51bWJlcih0aGlzLmJvb2tpbmdEZXRhaWxzLmJvb2tpbmcuY291cG9uVmFsaWRUaW1lKSkgKgogICAgICAgIDEwMDAKICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCJTRVRfVkFMSURBVEVEX1RJTUVfU1RBVFVTIiwgdGhpcy52YWxpZGF0ZWRUaW1lIDwgMCk7CiAgICAgIHZhbGlkYXRlZFRpbWUgLSBjdXJyZW50VGltZSA8IDAKICAgICAgICA/IGNsZWFySW50ZXJ2YWwodGhpcy52YWxpZGF0ZWRJbnRlcnZhbCkKICAgICAgICA6ICIiOwogICAgICByZXR1cm4gdmFsaWRhdGVkVGltZSAtIGN1cnJlbnRUaW1lOwogICAgfSwKICAgIGNhbGN1bGF0ZVBhcmtpbmdUaW1lKHBhcmtpbmdTdGFydFRpbWUsIGdyYWNlUGVyaW9kLCB6b25lKSB7CiAgICAgIHZhciBjdXJyZW50VGltZSA9IG5ldyBEYXRlKCk7CiAgICAgIGN1cnJlbnRUaW1lLnRvTG9jYWxlU3RyaW5nKCJlbi1VUyIsIHsgdGltZVpvbmU6IHpvbmUgfSk7CiAgICAgIHZhciBkaWZmZXJlbmNlVGltZSA9CiAgICAgICAgZ3JhY2VQZXJpb2QgPiAwCiAgICAgICAgICA/IGN1cnJlbnRUaW1lLmdldFRpbWUoKSAtIHBhcmtpbmdTdGFydFRpbWUgKiAxMDAwIC8vIC0gZ3JhY2VQZXJpb2QgKiAxMDAwIHRvIGV4Y2x1ZGUgZ3JhY2UgcGVyaW9kCiAgICAgICAgICA6IGN1cnJlbnRUaW1lLmdldFRpbWUoKSAtIHBhcmtpbmdTdGFydFRpbWUgKiAxMDAwOwogICAgICBsZXQgcGFya2VkVGltZSA9IHRoaXMuc2Vjb25kc1RvSG1zKGRpZmZlcmVuY2VUaW1lIC8gMTAwMCk7CiAgICAgIHJldHVybiBwYXJrZWRUaW1lOwogICAgfSwKICAgIHNlY29uZHNUb0htcyh0aW1lRGlmZmVyZW5jZSkgewogICAgICB2YXIgZCA9IE51bWJlcih0aW1lRGlmZmVyZW5jZSk7CiAgICAgIC8vIGlmICh0aW1lRGlmZmVyZW5jZSA+PSA4NjQwMCkgewogICAgICAvLyAgIHZhciBkYXlzID0gTWF0aC5mbG9vcihkIC8gODY0MDApOwogICAgICAvLyAgIHZhciBocnMgPSBNYXRoLmZsb29yKChkICUgODY0MDApIC8gMzYwMCk7CiAgICAgIC8vICAgdmFyIGRheURpc3BsYXkgPQogICAgICAvLyAgICAgZGF5cyA+IDAgPyBkYXlzICsgKGRheXMgPT0gMSA/ICIgZGF5ICIgOiAiIGRheXMgIikgOiAiIjsKICAgICAgLy8gICB2YXIgaHJEaXNwbGF5ID0gaHJzID4gMCA/IGhycyArIChocnMgPT0gMSA/ICIgaHIgIiA6ICIgaHJzICIpIDogIiI7CiAgICAgIC8vICAgcmV0dXJuIGRheURpc3BsYXkgKyBockRpc3BsYXk7CiAgICAgIC8vIH0KICAgICAgdmFyIGggPSBNYXRoLmZsb29yKGQgLyAzNjAwKTsKICAgICAgdmFyIG0gPSBNYXRoLmZsb29yKChkICUgMzYwMCkgLyA2MCk7CiAgICAgIC8vIHZhciBzID0gTWF0aC5mbG9vcihkICUgMzYwMCAlIDYwKTsKICAgICAgdmFyIGhEaXNwbGF5ID0gaCA+IDAgPyBoICsgIiBoICIgOiAiIjsKICAgICAgdmFyIG1EaXNwbGF5ID0gbSA+IDAgPyBtICsgKG0gPT0gMSA/ICIgbWluICIgOiAiIG1pbiIpIDogIiAwIG1pbiI7CiAgICAgIC8vIHZhciBzRGlzcGxheSA9IHMgPiAwID8gcyArIChzID09IDEgPyAiIHNlY29uZCIgOiAiIHNlY29uZHMiKSA6ICIiOwogICAgICByZXR1cm4gaERpc3BsYXkgKyBtRGlzcGxheTsKICAgIH0sCiAgICBpc0NoZWNrb3V0RW5hYmxlZCh0eXBlKSB7CiAgICAgIGlmIChPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbCh0aGlzLmJvb2tpbmdEZXRhaWxzLCAnZXhpdE9wdGlvbnMnKSAmJiB0aGlzLmJvb2tpbmdEZXRhaWxzLmV4aXRPcHRpb25zLmxlbmd0aCAhPSAwKSB7CiAgICAgICAgbGV0IG9wdGlvbiA9IHRoaXMuYm9va2luZ0RldGFpbHMuZXhpdE9wdGlvbnMuc29tZSgKICAgICAgICAgICh0KSA9PiB0LnRlY2hUeXBlID09IHR5cGUKICAgICAgICApOwogICAgICAgIHJldHVybiBvcHRpb247CiAgICAgIH0KICAgICAgcmV0dXJuIGZhbHNlOwoKICAgIH0sCiAgICBhc3luYyBnZXRCb29raW5nRGV0YWlscygpIHsKICAgICAgdHJ5IHsKICAgICAgICBsZXQgYm9va2luZ0lkID0gd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lLnN1YnN0cmluZygzKTsKICAgICAgICB2YXIgYm9va2luZ0RldGFpbHMgPSBhd2FpdCBBUElIZWxwZXIoCiAgICAgICAgICAiR0VUIiwKICAgICAgICAgICIvYXBpL3YxL2Jvb2tpbmcvY29uZmlnLyIgKyBib29raW5nSWQKICAgICAgICApOwogICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgKICAgICAgICAgICJTRVRfQk9PS0lOR19ERVRBSUxTIiwKICAgICAgICAgIGJvb2tpbmdEZXRhaWxzLmRhdGE/LmRhdGEgPyBib29raW5nRGV0YWlscy5kYXRhLmRhdGEgOiBudWxsCiAgICAgICAgKTsKICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7CiAgICAgIH0KICAgIH0sCiAgICBhc3luYyBnZXRwZWRlc3RyaWFuQWNjZXNzKCkgewogICAgICB0cnkgewogICAgICAgIC8vIGxldCBib29raW5nSWQgPSB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUuc3Vic3RyaW5nKDMpOwogICAgICAgIHZhciBwZWRlc0FjY2VzcyA9IGF3YWl0IEFQSUhlbHBlcigKICAgICAgICAgICJQT1NUIiwKICAgICAgICAgICJhcGkvdjEvb3Blbi8iICsgdGhpcy5ib29raW5nSWQsCiAgICAgICAgICB7IHNvdXJjZTogIndlYlZpZXciIH0KICAgICAgICApOwogICAgICAgIC8vIGNvbnNvbGUubG9nKHBlZGVzQWNjZXNzKQogICAgICAgIC8vIGNvbnNvbGUubG9nKHBlZGVzQWNjZXNzPy5kYXRhPy5zdGF0dXMpCiAgICAgICAgaWYgKHBlZGVzQWNjZXNzPy5kYXRhPy5zdGF0dXMpIHsKICAgICAgICAgIHRoaXMucG9zdFRvTG9nZ2VyQVBJKHsKICAgICAgICAgICAgcGhvbmU6IHRoaXMuYm9va2luZ0RldGFpbHMudXNlci5jb250YWN0LAogICAgICAgICAgICByZWZJZDogdGhpcy5ib29raW5nSWQsCiAgICAgICAgICAgIGltYWdlOiAiaHR0cHM6Ly9zcHBsLWRldi5kaXZydC5jby9pbWcvcGVkZXN0cmFpbl9kb29yLjA0MmYwOTI3LnBuZyIsCiAgICAgICAgICAgIHN0YXR1c1RleHQ6ICJQYXJrZXIgYWNjZXNzZWQgcGVkZXN0cmlhbiBkb29yIHN1Y2Nlc3NmdWxseS4iLAogICAgICAgICAgfSk7CiAgICAgICAgICB0aGlzLiRyb3V0ZXIucmVwbGFjZSh7IHBhdGg6ICIvcGVkZXN0cmlhbmFjY2VzcyIgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMucGVkZXN0cmlhbkFjY2Vzc1RleHQgPSBwZWRlc0FjY2Vzcy5kYXRhLm1lc3NhZ2U7CiAgICAgICAgICB0aGlzLnBvc3RUb0xvZ2dlckFQSSh7CiAgICAgICAgICAgIHBob25lOiB0aGlzLmJvb2tpbmdEZXRhaWxzLnVzZXIuY29udGFjdCwKICAgICAgICAgICAgcmVmSWQ6IHRoaXMuYm9va2luZ0lkLAogICAgICAgICAgICBlcnJvcjogdGhpcy5wZWRlc3RyaWFuQWNjZXNzVGV4dCwKICAgICAgICAgICAgaW1hZ2U6ICJodHRwczovL3NwcGwtZGV2LmRpdnJ0LmNvL2ltZy9wZWRlc3RyYWluX2Rvb3IuMDQyZjA5MjcucG5nIiwKICAgICAgICAgICAgc3RhdHVzVGV4dDogIkVycm9yIGluIG9wZW5pbmcgdGhlIHBlZGVzdHJpYW4gZG9vci4iLAogICAgICAgICAgfSk7CiAgICAgICAgICB0aGlzLnBlZGVzdHJpYW5BY2Nlc3NEaWFsb2cgPSB0cnVlOwogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7CiAgICAgIH0KICAgICAgLy8gdGhpcy4kcm91dGVyLnJlcGxhY2UoeyBwYXRoOiAiL3BlZGVzdHJpYW5hY2Nlc3MvIit0cnVlIH0pOwogICAgfSwKICAgIG5hdmlnYXRlVG9BZGRQYXltZW50KCkgewogICAgICB0aGlzLnBvc3RUb0xvZ2dlckFQSSh7CiAgICAgICAgcGhvbmU6IHRoaXMuYm9va2luZ0RldGFpbHMudXNlci5jb250YWN0LAogICAgICAgIHJlZklkOiB0aGlzLmJvb2tpbmdJZCwKICAgICAgICBzdGF0dXNUZXh0OiAiUGFya2VyIGNsaWNrZWQgb24gQUREIENSRURJVCBDQVJEIGJ0bi4iLAogICAgICB9KTsKICAgICAgdGhpcy4kcm91dGVyLnJlcGxhY2UoeyBwYXRoOiAiL2FkZHBheW1lbnQiIH0pOwogICAgfSwKICAgIG9wZW5WYWxpZGF0aW9uRGlhbG9nKCkgewogICAgICB0aGlzLnZhbGlkYXRlQm9va2luZ0RpYWxvZyA9IHRydWU7CiAgICB9LAogICAgYXN5bmMgb3BlblNNU0FwcCgpIHsKICAgICAgdGhpcy5wb3N0VG9Mb2dnZXJBUEkoewogICAgICAgIHBob25lOiB0aGlzLmJvb2tpbmdEZXRhaWxzLnVzZXIuY29udGFjdCwKICAgICAgICByZWZJZDogdGhpcy5ib29raW5nSWQsCiAgICAgICAgc3RhdHVzVGV4dDogIlBhcmtlciBjbGlja2VkIG9uIFNNUyBzdWJtaXQgYnRuLiIsCiAgICAgIH0pOwogICAgICBpZiAodGhpcy5zbXNUZXh0ID09IG51bGwgfHwgdGhpcy5zbXNUZXh0ID09ICIiKSB7CiAgICAgICAgdGhpcy5pbnZhbGlkU01TTXNnID0gIkdhdGUgY29kZSBjYW5ub3QgYmUgZW1wdHkiOwogICAgICAgIHRoaXMuaW52YWxpZFNNU0RpYWxvZyA9IHRydWU7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIHRoaXMuc21zUGVuZGluZyA9IHRydWU7CiAgICAgICAgICB2YXIgcHJlVmFsaWRhdGVTZW5kU01TID0gYXdhaXQgQVBJSGVscGVyKCJQT1NUIiwgIi9yZWNlaXZlX3NtcyIsIHsKICAgICAgICAgICAgYmlkOiB0aGlzLmJvb2tpbmdJZCwKICAgICAgICAgICAgRnJvbTogdGhpcy5ib29raW5nRGV0YWlscy51c2VyLmNvbnRhY3QsCiAgICAgICAgICAgIFRleHQ6IHRoaXMuc21zVGV4dCwKICAgICAgICAgICAgVG86IHRoaXMuYm9va2luZ0RldGFpbHMuem9uZS5Ub01vYmlsZU5vLAogICAgICAgICAgICBNb2RlOiAiU01TIiwKICAgICAgICAgICAgd2ViVmlldzogIjEiLAogICAgICAgICAgICBwcmVWYWxpZGF0ZTogMSwKICAgICAgICAgIH0pOwogICAgICAgICAgdGhpcy5zbXNQZW5kaW5nID0gZmFsc2U7CiAgICAgICAgICBpZiAoCiAgICAgICAgICAgIHByZVZhbGlkYXRlU2VuZFNNUz8uZGF0YT8uc3RhdHVzICYmCiAgICAgICAgICAgIHByZVZhbGlkYXRlU2VuZFNNUy5kYXRhLnN0YXR1cwogICAgICAgICAgKSB7CiAgICAgICAgICAgIHRoaXMuc21zRGlhbG9nID0gZmFsc2U7CiAgICAgICAgICAgIHRoaXMuJHJvdXRlci5yZXBsYWNlKHsgcGF0aDogIi9zdWNjZXNzIiB9KTsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICB2YXIgc2VuZFNNUyA9IGF3YWl0IEFQSUhlbHBlcigiUE9TVCIsICIvcmVjZWl2ZV9zbXMiLCB7CiAgICAgICAgICAgICAgICBiaWQ6IHRoaXMuYm9va2luZ0lkLAogICAgICAgICAgICAgICAgRnJvbTogdGhpcy5ib29raW5nRGV0YWlscy51c2VyLmNvbnRhY3QsCiAgICAgICAgICAgICAgICBUZXh0OiB0aGlzLnNtc1RleHQsCiAgICAgICAgICAgICAgICBUbzogdGhpcy5ib29raW5nRGV0YWlscy56b25lLlRvTW9iaWxlTm8sCiAgICAgICAgICAgICAgICBNb2RlOiAiU01TIiwKICAgICAgICAgICAgICAgIHdlYlZpZXc6ICIxIiwKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICBpZiAoc2VuZFNNUz8uZGF0YT8uc3RhdHVzICYmIHNlbmRTTVMuZGF0YS5zdGF0dXMpIHsKICAgICAgICAgICAgICAgIHRoaXMuc21zRGlhbG9nID0gZmFsc2U7CiAgICAgICAgICAgICAgICB0aGlzLnBvc3RUb0xvZ2dlckFQSSh7CiAgICAgICAgICAgICAgICAgIHBob25lOiB0aGlzLmJvb2tpbmdEZXRhaWxzLnVzZXIuY29udGFjdCwKICAgICAgICAgICAgICAgICAgcmVmSWQ6IHRoaXMuYm9va2luZ0lkLAogICAgICAgICAgICAgICAgICBpY29uOiAibG9nb3V0IiwKICAgICAgICAgICAgICAgICAgc3RhdHVzVGV4dDoKICAgICAgICAgICAgICAgICAgICAiUGFya2VyIGNoZWNrZWQgb3V0IHN1Y2Nlc3NmdWxseSB1c2luZyBTTVMgLSAiICsKICAgICAgICAgICAgICAgICAgICB0aGlzLnNtc1RleHQsCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgdGhpcy5pbnZhbGlkU01TTXNnID0gc2VuZFNNUz8uZGF0YT8ubWVzc2FnZQogICAgICAgICAgICAgICAgICA/IHNlbmRTTVMuZGF0YS5tZXNzYWdlCiAgICAgICAgICAgICAgICAgIDogIlBsZWFzZSB0cnkgYWdhaW4iOwogICAgICAgICAgICAgICAgdGhpcy5pbnZhbGlkU01TRGlhbG9nID0gdHJ1ZTsKICAgICAgICAgICAgICAgIHRoaXMucG9zdFRvTG9nZ2VyQVBJKHsKICAgICAgICAgICAgICAgICAgcGhvbmU6IHRoaXMuYm9va2luZ0RldGFpbHMudXNlci5jb250YWN0LAogICAgICAgICAgICAgICAgICByZWZJZDogdGhpcy5ib29raW5nSWQsCiAgICAgICAgICAgICAgICAgIGVycm9yOiB0aGlzLmludmFsaWRTTVNNc2csCiAgICAgICAgICAgICAgICAgIGljb246ICJsb2dvdXQiLAogICAgICAgICAgICAgICAgICBzdGF0dXNUZXh0OgogICAgICAgICAgICAgICAgICAgICJFcnJvciBvY2N1cmVkIHdoaWxlIGNoZWNraW5nIG91dCB1c2luZyBTTVMgLSAiICsKICAgICAgICAgICAgICAgICAgICB0aGlzLnNtc1RleHQsCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpOwogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aGlzLmludmFsaWRTTVNNc2cgPSBwcmVWYWxpZGF0ZVNlbmRTTVM/LmRhdGE/Lm1lc3NhZ2UKICAgICAgICAgICAgICA/IHByZVZhbGlkYXRlU2VuZFNNUy5kYXRhLm1lc3NhZ2UKICAgICAgICAgICAgICA6ICJQbGVhc2UgdHJ5IGFnYWluIjsKICAgICAgICAgICAgdGhpcy5pbnZhbGlkU01TRGlhbG9nID0gdHJ1ZTsKICAgICAgICAgICAgdGhpcy5wb3N0VG9Mb2dnZXJBUEkoewogICAgICAgICAgICAgIHBob25lOiB0aGlzLmJvb2tpbmdEZXRhaWxzLnVzZXIuY29udGFjdCwKICAgICAgICAgICAgICByZWZJZDogdGhpcy5ib29raW5nSWQsCiAgICAgICAgICAgICAgZXJyb3I6IHRoaXMuaW52YWxpZFNNU01zZywKICAgICAgICAgICAgICBpY29uOiAibG9nb3V0IiwKICAgICAgICAgICAgICBzdGF0dXNUZXh0OgogICAgICAgICAgICAgICAgIkVycm9yIG9jY3VyZWQgd2hpbGUgY2hlY2tpbmcgb3V0IHVzaW5nIFNNUyAtICIgKyB0aGlzLnNtc1RleHQsCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgZ2V0TW9iaWxlT3BlcmF0aW5nU3lzdGVtKCkgewogICAgICB2YXIgdXNlckFnZW50ID0gbmF2aWdhdG9yLnVzZXJBZ2VudCB8fCBuYXZpZ2F0b3IudmVuZG9yIHx8IHdpbmRvdy5vcGVyYTsKICAgICAgLy8gV2luZG93cyBQaG9uZSBtdXN0IGNvbWUgZmlyc3QgYmVjYXVzZSBpdHMgVUEgYWxzbyBjb250YWlucyAiQW5kcm9pZCIKICAgICAgaWYgKC93aW5kb3dzIHBob25lL2kudGVzdCh1c2VyQWdlbnQpKSB7CiAgICAgICAgcmV0dXJuICJXaW5kb3dzIFBob25lIjsKICAgICAgfQoKICAgICAgaWYgKC9hbmRyb2lkL2kudGVzdCh1c2VyQWdlbnQpKSB7CiAgICAgICAgcmV0dXJuICJBbmRyb2lkIjsKICAgICAgfQoKICAgICAgLy8gaU9TIGRldGVjdGlvbiBmcm9tOiBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS85MDM5ODg1LzE3NzcxMAogICAgICBpZiAoL2lQYWR8aVBob25lfGlQb2QvLnRlc3QodXNlckFnZW50KSAmJiAhd2luZG93Lk1TU3RyZWFtKSB7CiAgICAgICAgcmV0dXJuICJpT1MiOwogICAgICB9CiAgICAgIHJldHVybiAidW5rbm93biI7CiAgICB9LAogICAgZ2V0RXhpdEljb24oZXhpdElkKSB7CiAgICAgIGxldCBleGl0RGV0YWlscyA9IHRoaXMuYm9va2luZ0RldGFpbHMuZXhpdE9wdGlvbnMuZmluZCgKICAgICAgICAocCkgPT4gcC50ZWNoVHlwZSA9PSBleGl0SWQKICAgICAgKTsKICAgICAgcmV0dXJuIGV4aXREZXRhaWxzLmljb247CiAgICB9LAogICAgZ2V0RXhpdFRleHQoZXhpdElkKSB7CiAgICAgIGxldCBleGl0RGV0YWlscyA9IHRoaXMuYm9va2luZ0RldGFpbHMuZXhpdE9wdGlvbnMuZmluZCgKICAgICAgICAocCkgPT4gcC50ZWNoVHlwZSA9PSBleGl0SWQKICAgICAgKTsKICAgICAgcmV0dXJuIGV4aXREZXRhaWxzLm5hbWU7CiAgICB9LAogICAgb3BlbkRpYWxlckFwcCgpIHsKICAgICAgdGhpcy5wb3N0VG9Mb2dnZXJBUEkoewogICAgICAgIHBob25lOiB0aGlzLmJvb2tpbmdEZXRhaWxzLnVzZXIuY29udGFjdCwKICAgICAgICByZWZJZDogdGhpcy5ib29raW5nSWQsCiAgICAgICAgc3RhdHVzVGV4dDogIlBhcmtlciBjbGlja2VkIG9uIGRpYWxlciBzdWJtaXQgYnRuLiIsCiAgICAgIH0pOwogICAgICB0aGlzLmRpYWxlckRpYWxvZyA9IGZhbHNlOwogICAgICB2YXIgdXJsID0gInRlbDoiICsgdGhpcy5ib29raW5nRGV0YWlscy56b25lLlRvTW9iaWxlTm87CiAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gdXJsOwogICAgICBpZiAodGhpcy5nZXRNb2JpbGVPcGVyYXRpbmdTeXN0ZW0oKSA9PSAiQW5kcm9pZCIpIHsKICAgICAgICB3aW5kb3cuY2xvc2UoKTsKICAgICAgfQogICAgfSwKICAgIHR1cm5DYW1lcmFPbigpIHsKICAgICAgdGhpcy5jYW1lcmEgPSAiYXV0byI7CiAgICB9LAoKICAgIHR1cm5DYW1lcmFPZmYoKSB7CiAgICAgIHRoaXMuY2FtZXJhID0gIm9mZiI7CiAgICB9LAogICAgdmFsaWRhdGVEZWNvZGVkU3RyaW5nKHN0cikgewogICAgICBsZXQgdmFsaWRhdGVEaXZydFN0ciA9IHN0ci5zdGFydHNXaXRoKCJkaXZydDovLyIpOwogICAgICBsZXQgdmFsaWRhdGVNTUlEID0gc3RyLnNwbGl0KCIvIilbMl0gPT0gdGhpcy5ib29raW5nRGV0YWlscy5ib29raW5nLm1taWQ7CiAgICAgIGxldCB2YWxpZGF0ZU1ham9ySWQgPQogICAgICAgIHN0ci5zcGxpdCgiLyIpWzNdID09IHRoaXMuYm9va2luZ0RldGFpbHMuYm9va2luZy5tYWpvcmlkOwogICAgICBsZXQgdmFsaWRhdGVNaW5vcklkID0gdGhpcy5ib29raW5nRGV0YWlscy5ib29raW5nLm1pbm9yX2lkcy5pbmNsdWRlcygKICAgICAgICBzdHIuc3BsaXQoIi8iKVs0XQogICAgICApOwogICAgICByZXR1cm4gKAogICAgICAgIHZhbGlkYXRlRGl2cnRTdHIgJiYgdmFsaWRhdGVNTUlEICYmIHZhbGlkYXRlTWFqb3JJZCAmJiB2YWxpZGF0ZU1pbm9ySWQKICAgICAgKTsKICAgIH0sCiAgICBhc3luYyBvbkRlY29kZShkZWNvZGVkU3RyaW5nKSB7CiAgICAgIHZhciBzZWxmID0gdGhpczsKICAgICAgdGhpcy5xckNvZGUgPSBkZWNvZGVkU3RyaW5nOwogICAgICB0aGlzLmNhbWVyYVN0YXR1cyA9IGZhbHNlOwogICAgICB0cnkgewogICAgICAgIHZhciBwcmVWYWxpZGF0ZVFyUmVzdWx0ID0gYXdhaXQgQVBJSGVscGVyKAogICAgICAgICAgIlBPU1QiLAogICAgICAgICAgIi9hcGkvdjEvY2hlY2tvdXQvIiArIHRoaXMuYm9va2luZ0lkLAogICAgICAgICAgewogICAgICAgICAgICBiZWFjb25JZDogZGVjb2RlZFN0cmluZywKICAgICAgICAgICAgcHJlVmFsaWRhdGU6IDEsCiAgICAgICAgICAgIHppZDogdGhpcy5ib29raW5nRGV0YWlscy56b25lLmxvY2F0aW9uQ29kZQogICAgICAgICAgfQogICAgICAgICk7CiAgICAgICAgaWYgKHByZVZhbGlkYXRlUXJSZXN1bHQuZGF0YS5zdGF0dXMpIHsKICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgIHNlbGYuJHJvdXRlci5yZXBsYWNlKHsgcGF0aDogIi9zdWNjZXNzIiB9KTsKICAgICAgICAgICAgdmFyIHFyUmVzdWx0ID0gYXdhaXQgQVBJSGVscGVyKAogICAgICAgICAgICAgICJQT1NUIiwKICAgICAgICAgICAgICAiL2FwaS92MS9jaGVja291dC8iICsgdGhpcy5ib29raW5nSWQsCiAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgYmVhY29uSWQ6IGRlY29kZWRTdHJpbmcsCiAgICAgICAgICAgICAgICB6aWQ6IHRoaXMuYm9va2luZ0RldGFpbHMuem9uZS5sb2NhdGlvbkNvZGUKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICk7CiAgICAgICAgICAgIGlmIChxclJlc3VsdC5kYXRhLnN0YXR1cykgewogICAgICAgICAgICAgIHRoaXMucG9zdFRvTG9nZ2VyQVBJKHsKICAgICAgICAgICAgICAgIHBob25lOiBzZWxmLmJvb2tpbmdEZXRhaWxzLnVzZXIuY29udGFjdCwKICAgICAgICAgICAgICAgIHJlZklkOiBzZWxmLmJvb2tpbmdJZCwKICAgICAgICAgICAgICAgIGljb246ICJsb2dvdXQiLAogICAgICAgICAgICAgICAgc3RhdHVzVGV4dDoKICAgICAgICAgICAgICAgICAgIlBhcmtlciBzdWNjZXNzZnVsbHkgY2hlY2tlZCBvdXQgdXNpbmcgUVIgLSAiICsgZGVjb2RlZFN0cmluZywKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoIlNFVF9DSEVDS09VVCIsIHRydWUpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHRoaXMuaW52YWxpZFFSTXNnID0gcXJSZXN1bHQ/LmRhdGE/Lm1lc3NhZ2UKICAgICAgICAgICAgICAgID8gcXJSZXN1bHQuZGF0YS5tZXNzYWdlCiAgICAgICAgICAgICAgICA6ICJQbGVhc2UgdHJ5IGFnYWluIjsKICAgICAgICAgICAgICB0aGlzLmludmFsaWRRUkRpYWxvZyA9IHRydWU7CiAgICAgICAgICAgICAgdGhpcy5wb3N0VG9Mb2dnZXJBUEkoewogICAgICAgICAgICAgICAgcGhvbmU6IHNlbGYuYm9va2luZ0RldGFpbHMudXNlci5jb250YWN0LAogICAgICAgICAgICAgICAgcmVmSWQ6IHNlbGYuYm9va2luZ0lkLAogICAgICAgICAgICAgICAgZXJyb3I6IHNlbGYuaW52YWxpZFFSTXNnLAogICAgICAgICAgICAgICAgaWNvbjogImxvZ291dCIsCiAgICAgICAgICAgICAgICBzdGF0dXNUZXh0OgogICAgICAgICAgICAgICAgICAiRXJyb3IgT2NjdXJlZCB3aGlsZSBjaGVja2luZyBvdXQgdXNpbmcgUVIgLSAiICsKICAgICAgICAgICAgICAgICAgZGVjb2RlZFN0cmluZywKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLmludmFsaWRRUk1zZyA9IHByZVZhbGlkYXRlUXJSZXN1bHQ/LmRhdGE/Lm1lc3NhZ2UKICAgICAgICAgICAgPyBwcmVWYWxpZGF0ZVFyUmVzdWx0LmRhdGEubWVzc2FnZQogICAgICAgICAgICA6ICJQbGVhc2UgdHJ5IGFnYWluIjsKICAgICAgICAgIHRoaXMuaW52YWxpZFFSRGlhbG9nID0gdHJ1ZTsKICAgICAgICAgIHRoaXMucG9zdFRvTG9nZ2VyQVBJKHsKICAgICAgICAgICAgcGhvbmU6IHNlbGYuYm9va2luZ0RldGFpbHMudXNlci5jb250YWN0LAogICAgICAgICAgICByZWZJZDogc2VsZi5ib29raW5nSWQsCiAgICAgICAgICAgIGljb246ICJsb2dvdXQiLAogICAgICAgICAgICBlcnJvcjogc2VsZi5pbnZhbGlkUVJNc2csCiAgICAgICAgICAgIHN0YXR1c1RleHQ6CiAgICAgICAgICAgICAgIkVycm9yIE9jY3VyZWQgd2hpbGUgY2hlY2tpbmcgb3V0IHVzaW5nIFFSIC0gIiArIGRlY29kZWRTdHJpbmcsCiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgY29uc29sZS5sb2coZXJyb3IpOwogICAgICB9CiAgICB9LAogICAgYXN5bmMgb25Jbml0KHByb21pc2UpIHsKICAgICAgdHJ5IHsKICAgICAgICBhd2FpdCBwcm9taXNlOwogICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIGlmIChlcnJvci5uYW1lID09PSAiTm90QWxsb3dlZEVycm9yIikgewogICAgICAgICAgdGhpcy5pbnZhbGlkUVJNc2cgPSAiUGxlYXNlIGdyYW50IGNhbWVyYSBhY2Nlc3MgcGVybWlzc29uIjsKICAgICAgICB9IGVsc2UgaWYgKGVycm9yLm5hbWUgPT09ICJOb3RGb3VuZEVycm9yIikgewogICAgICAgICAgdGhpcy5pbnZhbGlkUVJNc2cgPSAiTm8gY2FtZXJhIGZvdW5kIG9uIHRoaXMgZGV2aWNlIjsKICAgICAgICB9IGVsc2UgaWYgKGVycm9yLm5hbWUgPT09ICJOb3RTdXBwb3J0ZWRFcnJvciIpIHsKICAgICAgICAgIHRoaXMuaW52YWxpZFFSTXNnID0gIlNlY3VyZSBjb250ZXh0IHJlcXVpcmVkIChIVFRQUywgbG9jYWxob3N0KSI7CiAgICAgICAgfSBlbHNlIGlmIChlcnJvci5uYW1lID09PSAiTm90UmVhZGFibGVFcnJvciIpIHsKICAgICAgICAgIHRoaXMuaW52YWxpZFFSTXNnID0gIklzIHRoZSBjYW1lcmEgYWxyZWFkeSBpbiB1c2U/IFBsZWFzZSBjaGVjay4iOwogICAgICAgIH0gZWxzZSBpZiAoZXJyb3IubmFtZSA9PT0gIk92ZXJjb25zdHJhaW5lZEVycm9yIikgewogICAgICAgICAgdGhpcy5pbnZhbGlkUVJNc2cgPSAiSW5zdGFsbGVkIGNhbWVyYSBpcyBub3Qgc3VpdGFibGUiOwogICAgICAgIH0gZWxzZSBpZiAoZXJyb3IubmFtZSA9PT0gIlN0cmVhbUFwaU5vdFN1cHBvcnRlZEVycm9yIikgewogICAgICAgICAgdGhpcy5pbnZhbGlkUVJNc2cgPSAiU3RyZWFtIEFQSSBpcyBub3Qgc3VwcG9ydGVkIGluIHRoaXMgYnJvd3NlciI7CiAgICAgICAgfQogICAgICAgIHRoaXMuaW52YWxpZFFSRGlhbG9nID0gdHJ1ZTsKICAgICAgfQogICAgfSwKICAgIGFzeW5jIG9uVmFsaWRhdGVUZXh0KCkgewogICAgICB0aGlzLnZhbGlkYXRlQm9va2luZ1BlbmRpbmcgPSB0cnVlOwogICAgICBsZXQgcmVzdWx0ID0gYXdhaXQgdGhpcy52YWxpZGF0ZUJvb2tpbmcodGhpcy52YWxpZGF0ZUJvb2tpbmdUeHQpOwogICAgICBpZiAoIXJlc3VsdC5kYXRhLnN0YXR1cykgewogICAgICAgIHRoaXMuaW52YWxpZFNNU01zZyA9IHJlc3VsdD8uZGF0YT8ubWVzc2FnZQogICAgICAgICAgPyByZXN1bHQuZGF0YS5tZXNzYWdlCiAgICAgICAgICA6ICJWYWxpZGF0aW9uIG5vdCByZWNvZ25pemVkLiBQbGVhc2UgdHJ5IGFnYWluIjsKICAgICAgICB0aGlzLmludmFsaWRTTVNEaWFsb2cgPSB0cnVlOwogICAgICAgIHRoaXMudmFsaWRhdGVCb29raW5nUGVuZGluZyA9IGZhbHNlOwogICAgICAgIHRoaXMucG9zdFRvTG9nZ2VyQVBJKHsKICAgICAgICAgIHBob25lOiB0aGlzLmJvb2tpbmdEZXRhaWxzLnVzZXIuY29udGFjdCwKICAgICAgICAgIHJlZklkOiB0aGlzLmJvb2tpbmdJZCwKICAgICAgICAgIGVycm9yOiB0aGlzLmludmFsaWRTTVNNc2csCiAgICAgICAgICBpY29uOiAicmVkZWVtIiwKICAgICAgICAgIHN0YXR1c1RleHQ6CiAgICAgICAgICAgICJFcnJvciBpbiB2YWxpZGF0aW5nIHRoZSBzZXNzaW9uIG9uIGVudGVyaW5nIHZhbGlkYXRpb24gY29kZSAtICIgKwogICAgICAgICAgICB0aGlzLnZhbGlkYXRlQm9va2luZ1R4dCwKICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnBvc3RUb0xvZ2dlckFQSSh7CiAgICAgICAgICBwaG9uZTogdGhpcy5ib29raW5nRGV0YWlscy51c2VyLmNvbnRhY3QsCiAgICAgICAgICByZWZJZDogdGhpcy5ib29raW5nSWQsCiAgICAgICAgICBpY29uOiAicmVkZWVtIiwKICAgICAgICAgIHN0YXR1c1RleHQ6CiAgICAgICAgICAgICJQYXJrZXIgdmFsaWRhdGVkIHRoZSBzZXNzaW9uIHN1Y2Nlc3NmdWxseSBieSBlbnRlcmluZyB2YWxpZGF0aW9uIGNvZGUgLSAiICsKICAgICAgICAgICAgdGhpcy52YWxpZGF0ZUJvb2tpbmdUeHQsCiAgICAgICAgfSk7CiAgICAgICAgdGhpcy52YWxpZGF0ZUJvb2tpbmdQZW5kaW5nID0gZmFsc2U7CiAgICAgICAgdGhpcy52YWxpZGF0ZUJvb2tpbmdEaWFsb2cgPSBmYWxzZTsKICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoCiAgICAgICAgICAiU0VUX1ZBTElEQVRFRF9NRVJDSEFOVCIsCiAgICAgICAgICByZXN1bHQ/LmRhdGE/Lm1lcmNoYW50TmFtZQogICAgICAgICk7CiAgICAgICAgdGhpcy4kcm91dGVyLnJlcGxhY2UoeyBwYXRoOiAiL3ZhbGlkYXRlc3VjY2VzcyIgfSk7CiAgICAgIH0KICAgIH0sCiAgICBhc3luYyB2YWxpZGF0ZUJvb2tpbmcoY29kZSkgewogICAgICB0cnkgewogICAgICAgIGxldCB2YWxpZGF0ZVJlc3VsdCA9IGF3YWl0IEFQSUhlbHBlcigKICAgICAgICAgICJQT1NUIiwKICAgICAgICAgICIvYXBpL3YxL3ZhbGlkYXRlLyIgKyB0aGlzLmJvb2tpbmdJZCwKICAgICAgICAgIHsKICAgICAgICAgICAgY291cG9uOiBjb2RlLAogICAgICAgICAgICB6aWQ6IHRoaXMuYm9va2luZ0RldGFpbHMuem9uZS5sb2NhdGlvbkNvZGUKICAgICAgICAgIH0KICAgICAgICApOwogICAgICAgIHJldHVybiB2YWxpZGF0ZVJlc3VsdDsKICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7CiAgICAgICAgcmV0dXJuIGVycm9yOwogICAgICB9CiAgICB9LAogICAgYXN5bmMgb3BlblNjYW5WYWxpZGF0aW9uQ29kZSgpIHsKICAgICAgdGhpcy52YWxpZGF0ZUJvb2tpbmdEaWFsb2cgPSBmYWxzZTsKICAgICAgdGhpcy52YWxpZGF0ZUJvb2tpbmdUeHQgPSAiIjsKICAgICAgdGhpcy52YWxpZGF0ZVFSQ29kZURpYWxvZyA9IHRydWU7CiAgICAgIHRoaXMudmFsaWRhdGlvbkNhbWVyYVN0YXR1cyA9IHRydWU7CiAgICB9LAogICAgYXN5bmMgb25WYWxpZGF0ZVFSQ29kZShkZWNvZGVkU3RyaW5nKSB7CiAgICAgIHRoaXMudmFsaWRhdGlvbkNhbWVyYVN0YXR1cyA9IGZhbHNlOwogICAgICB0aGlzLnZhbGlkYXRlUVJDb2RlUGVuZGluZyA9IHRydWU7CiAgICAgIHRyeSB7CiAgICAgICAgbGV0IHJlc3VsdCA9IGF3YWl0IHRoaXMudmFsaWRhdGVCb29raW5nKGRlY29kZWRTdHJpbmcpOwogICAgICAgIGlmICghcmVzdWx0LmRhdGEuc3RhdHVzKSB7CiAgICAgICAgICB0aGlzLmludmFsaWRWYWxpZGF0aW9uUVJNc2cgPSByZXN1bHQ/LmRhdGE/Lm1lc3NhZ2UKICAgICAgICAgICAgPyByZXN1bHQuZGF0YS5tZXNzYWdlCiAgICAgICAgICAgIDogIlZhbGlkYXRpb24gbm90IHJlY29nbml6ZWQuIFBsZWFzZSB0cnkgYWdhaW4iOwogICAgICAgICAgdGhpcy5pbnZhbGlkVmFsaWRhdGlvblFSRGlhbG9nID0gdHJ1ZTsKICAgICAgICAgIHRoaXMudmFsaWRhdGVRUkNvZGVQZW5kaW5nID0gZmFsc2U7CiAgICAgICAgICB0aGlzLnBvc3RUb0xvZ2dlckFQSSh7CiAgICAgICAgICAgIHBob25lOiB0aGlzLmJvb2tpbmdEZXRhaWxzLnVzZXIuY29udGFjdCwKICAgICAgICAgICAgcmVmSWQ6IHRoaXMuYm9va2luZ0lkLAogICAgICAgICAgICBlcnJvcjogdGhpcy5pbnZhbGlkUVJNc2csCiAgICAgICAgICAgIGljb246ICJyZWRlZW0iLAogICAgICAgICAgICBzdGF0dXNUZXh0OgogICAgICAgICAgICAgICJFcnJvciBpbiB2YWxpZGF0aW5nIHRoZSBzZXNzaW9uIG9uIHNjYW5uaW5nIHZhbGlkYXRpb24gUVIgLSAiICsKICAgICAgICAgICAgICBkZWNvZGVkU3RyaW5nLAogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMucG9zdFRvTG9nZ2VyQVBJKHsKICAgICAgICAgICAgcGhvbmU6IHRoaXMuYm9va2luZ0RldGFpbHMudXNlci5jb250YWN0LAogICAgICAgICAgICByZWZJZDogdGhpcy5ib29raW5nSWQsCiAgICAgICAgICAgIGljb246ICJyZWRlZW0iLAogICAgICAgICAgICBzdGF0dXNUZXh0OgogICAgICAgICAgICAgICJQYXJrZXIgdmFsaWRhdGVkIHRoZSBzZXNzaW9uIHN1Y2Nlc3NmdWxseSBieSBzY2FubmluZyB2YWxpZGF0aW9uIFFSIC0gIiArCiAgICAgICAgICAgICAgZGVjb2RlZFN0cmluZywKICAgICAgICAgIH0pOwogICAgICAgICAgdGhpcy52YWxpZGF0ZVFSQ29kZVBlbmRpbmcgPSBmYWxzZTsKICAgICAgICAgIHRoaXMudmFsaWRhdGVRUkNvZGVEaWFsb2cgPSBmYWxzZTsKICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgKICAgICAgICAgICAgIlNFVF9WQUxJREFURURfTUVSQ0hBTlQiLAogICAgICAgICAgICByZXN1bHQ/LmRhdGE/Lm1lcmNoYW50TmFtZQogICAgICAgICAgKTsKICAgICAgICAgIHRoaXMuJHJvdXRlci5yZXBsYWNlKHsgcGF0aDogIi92YWxpZGF0ZXN1Y2Nlc3MiIH0pOwogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7CiAgICAgIH0KICAgIH0sCiAgfSwKfTsK"},{"version":3,"sources":["CheckedIn.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwuBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"CheckedIn.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <v-container class=\"pa-4\" fluid>\n    <v-row class=\"text-center\" no-gutters>\n      <v-col cols=\"12\">\n        <v-img alt=\"PARKING.COM\" class=\"my-3\" height=\"42\" contain src=\"../assets/logo_huge_drk.png\" />\n      </v-col>\n    </v-row>\n    <v-row no-gutters>\n      <v-col>\n        <v-card class=\"mx-auto rounded-lg\" max-width=\"374\">\n          <!-- <v-responsive :aspect-ratio=\"16/9\"> -->\n\n          <template slot=\"progress\">\n            <v-progress-linear color=\"red\" height=\"10\" indeterminate></v-progress-linear>\n          </template>\n          <div style=\"position: relative\">\n            <!-- <v-skeleton-loader\n                  v-show=\"!bookingDetails.hasOwnProperty('zone')\"\n                  height=\"260px\"\n                  class=\"rounded-t-lg\"\n                  type=\"image\"\n                ></v-skeleton-loader>-->\n\n            <v-img class=\"rounded-t-lg\" max-height=\"150px\" style=\"filter: brightness(50%)\" :src=\"\n              bookingDetails.hasOwnProperty('zone') &&\n                bookingDetails.zone.image != '' &&\n                bookingDetails.zone.image != null\n                ? bookingDetails.zone.image\n                : zoneImgURL\n            \" :lazy-src=\"\n  bookingDetails.hasOwnProperty('zone') &&\n    bookingDetails.zone.image != '' &&\n    bookingDetails.zone.image != null\n    ? bookingDetails.zone.image\n    : zoneImgURL\n\" alt=\"Parking.com garage\">\n              <template v-slot:placeholder>\n                <v-row class=\"fill-height ma-0\" align=\"center\" justify=\"center\" no-gutters>\n                  <v-progress-circular indeterminate color=\"grey lighten-5\"></v-progress-circular>\n                </v-row>\n              </template>\n            </v-img>\n            <div class=\"booking_header white--text text-left mr-4\">\n              <span>\n                {{\n                  bookingDetails.hasOwnProperty(\"booking\")\n                  ? bookingDetails.booking.header\n                  : \"\"\n                }}\n              </span>\n            </div>\n            <div class=\"booking_divider_div\">\n              <v-divider class=\"booking_divider mx-4\"></v-divider>\n            </div>\n            <div class=\"booking_content white--text\">\n              Checked in at\n              {{\n                bookingDetails.hasOwnProperty(\"booking\") ? booking_content : \"\"\n              }}\n              <span v-if=\"\n                bookingDetails.hasOwnProperty('booking') &&\n                bookingDetails.hasOwnProperty('zone') &&\n                bookingDetails.booking.vehicleNo != null &&\n                bookingDetails.booking.vehicleNo != ''\n              \">\n                with license plate\n                {{\n                  bookingDetails.hasOwnProperty(\"booking\")\n                  ? bookingDetails.booking.vehicleNo\n                  : \"\"\n                }}\n              </span>\n            </div>\n          </div>\n          <v-fab-transition>\n            <v-btn v-show=\"\n              Object.hasOwnProperty.call(bookingDetails, 'zone') &&\n              bookingDetails.zone.isPedestrian == 1\n            \" class=\"fabIcon\" color=\"#f2555c !important\" fab dark raised large right @click=\"getpedestrianAccess()\"\n              style=\"bottom: 35px; float: right; right: 10px\">\n              <v-img src=\"../assets/pedestrain_door.png\" style=\"opacity: 1\" width=\"32\" height=\"32\" contain></v-img>\n              <!-- <v-icon class=\"material-icons-outlined\">directions_walk</v-icon> -->\n            </v-btn>\n          </v-fab-transition>\n\n          <v-card-title class=\"pa-1\"></v-card-title>\n          <v-card-text class=\"pa-1\">\n            <v-row align=\"center\" class=\"mx-0 pb-0\" no-gutters v-if=\"bookingDetails.hasOwnProperty('booking') &&\n              bookingDetails.booking.hasOwnProperty('TypeOfBooking') &&\n              bookingDetails.booking.TypeOfBooking != 'Self reservation'\">\n              <v-col cols=\"2\">\n                <v-icon style=\"font-size: 50px\">mdi-clock-outline</v-icon>\n              </v-col>\n              <v-col cols=\"10\" class=\"pl-1\">\n                <v-row no-gutters class=\"counter-content-position\">\n                  <v-col cols=\"12\" class=\"pa-0\">\n                    <v-skeleton-loader v-show=\"\n                      !bookingDetails.hasOwnProperty('booking') ||\n                      timeAgo == '' ||\n                      timeAgo == null\n                    \" height=\"40px\" max-width=\"200\" type=\"heading\"></v-skeleton-loader>\n                    <span class=\"grey--text text--darken-1 time_ago\" v-show=\"!(validatedDateTime > 0)\">{{\n                      timeAgo\n                    }}</span>\n                    <!-- <span\n                          class=\"grey--text text--darken-1 time_ago\"\n                          v-show=\"gracePeriodTime > 0\"\n                          >{{ countDownGracePeriodTime }}</span\n                        >-->\n                    <span class=\"grey--text text--darken-1 time_ago\" v-show=\"\n                      bookingDetails.hasOwnProperty('booking') &&\n                      bookingDetails.booking.hasOwnProperty('validated') &&\n                      bookingDetails.booking.validated == '1' &&\n                      validatedDateTime > 0\n                    \">{{ countDownValidatedTime }}</span>\n                  </v-col>\n                  <v-col cols=\"12\" v-if=\"\n                    bookingDetails.hasOwnProperty('booking') &&\n                    validatedDateTime <= 0\n                  \">\n                    <span class=\"grey--text text--darken-1 time_ago_context\">Since you parked</span>\n                  </v-col>\n                  <!-- <v-col cols=\"12\" v-else-if=\"bookingDetails.hasOwnProperty('booking') && gracePeriodTime > 0\">\n                        <span class=\"grey--text text--darken-1 time_ago_context\"\n                          >Grace period remaining</span\n                        >\n                      </v-col>-->\n                  <v-col cols=\"12\" v-else-if=\"\n                    bookingDetails.hasOwnProperty('booking') &&\n                    bookingDetails.booking.hasOwnProperty('validated') &&\n                    bookingDetails.booking.validated == '1' &&\n                    validatedDateTime > 0\n                  \">\n                    <span class=\"grey--text text--darken-1 time_ago_context\">Validation time remaining</span>\n                  </v-col>\n                  <v-col cols=\"12\" v-show=\"\n                    bookingDetails.hasOwnProperty('booking') &&\n                    bookingDetails.booking.hasOwnProperty('validated') &&\n                    bookingDetails.booking.validated == '1' &&\n                    bookingDetails.booking.hasOwnProperty(\n                      'validationType'\n                    ) &&\n                    bookingDetails.booking.validationType == 'DIVRT'\n                  \">\n                    <span class=\"grey--text text--darken-1 validated_time\">Validated until {{\n                      validated_content\n                    }}</span>\n                  </v-col>\n                </v-row>\n              </v-col>\n              <v-col cols class=\"align-self-center text-center\" v-show=\"\n                bookingDetails.hasOwnProperty('booking') &&\n                bookingDetails.booking.hasOwnProperty('TypeOfBooking') &&\n                bookingDetails.booking.TypeOfBooking == 'Monthly'\n              \">\n                <v-btn class=\"elevation-0 white--text\" tile x-small color=\"green darken-2\">Monthly</v-btn>\n              </v-col>\n              <v-col cols class=\"align-self-center text-center\" v-show=\"\n                bookingDetails.hasOwnProperty('booking') &&\n                bookingDetails.booking.hasOwnProperty('TypeOfBooking') &&\n                bookingDetails.booking.TypeOfBooking == 'Employee'\n              \">\n                <v-btn class=\"elevation-0 white--text\" tile x-small color=\"green darken-2\">Employee</v-btn>\n              </v-col>\n            </v-row>\n            <v-row align=\"center\" class=\"mx-0 pb-0\" no-gutters v-if=\"bookingDetails.hasOwnProperty('booking') &&\n              bookingDetails.booking.hasOwnProperty('TypeOfBooking') &&\n              bookingDetails.booking.TypeOfBooking == 'Self reservation'\">\n              <v-col cols=\"2\">\n                <v-icon class=\"material-icons-outlined\" style=\"font-size: 50px\">history_toggle_off</v-icon>\n              </v-col>\n              <v-col cols=\"10\" class=\"pl-1\">\n                <v-row no-gutters class=\"counter-content-position\">\n                  <v-col cols=\"12\" class=\"pa-0\">\n                    <v-skeleton-loader v-show=\"\n                      !bookingDetails.hasOwnProperty('booking')\n                    \" height=\"40px\" max-width=\"200\" type=\"heading\"></v-skeleton-loader>\n                    <span class=\"grey--text text--darken-1 time_ago\" v-show=\"\n                      exitDateTime > 0\n                    \">{{ countDownExitTime }}</span>\n                  </v-col>\n                  <v-col cols=\"12\" v-if=\"\n                    exitDateTime > 0\n                  \">\n                    <span class=\"grey--text text--darken-1 time_ago_context\">Remaining</span>\n                  </v-col>\n                </v-row>\n              </v-col>\n            </v-row>\n            <v-row no-gutters align=\"center\" class=\"my-1\">\n              <v-col cols=\"12\" class=\"pa-0 align-self-center text-center\">\n                <v-btn class=\"elevation-0 white--text\" tile x-small color=\"green darken-2\" v-show=\"\n                  bookingDetails.hasOwnProperty('booking') &&\n                  bookingDetails.booking.hasOwnProperty('validated') &&\n                  bookingDetails.booking.validated == '1'\n                \">VALIDATED</v-btn>\n                <!-- <v-icon color=\"red\" class=\"ml-2\" v-show=\"(bookingDetails.hasOwnProperty('booking') && bookingDetails.booking.validated == '1' && showPaymentCardAdded == '1')\" >approval</v-icon> -->\n              </v-col>\n            </v-row>\n            <v-row class=\"justify-center mb-3\" no-gutters v-show=\"\n              Object.hasOwnProperty.call(bookingDetails, 'zone') &&\n              !(bookingDetails.zone.isGated == '0')\n            \">\n              <span class=\"grey--text text--darken-1 font-weight-bold\"\n                v-if=\"showPaymentCardAdded && (isCheckoutEnabled(1) || isCheckoutEnabled(2) || isCheckoutEnabled(3))\">Click\n                an option below to exit</span>\n            </v-row>\n            <v-row class=\"justify-center my-3\" no-gutters\n              v-show=\"!(isCheckoutEnabled(1) || isCheckoutEnabled(2) || isCheckoutEnabled(3))\">\n              <span class=\"black--text text--darken-1 font-weight-bold text-h5\">Checked In</span>\n            </v-row>\n          </v-card-text>\n          <!-- <v-card-text class=\"text-center\">Click an option to exit</v-card-text> -->\n          <v-card-actions class=\"text-center justify-center px-0 pb-4  px-4\" v-if=\"\n            Object.hasOwnProperty.call(bookingDetails, 'booking') &&\n            !showPaymentCardAdded\n          \">\n            <v-container class=\"pa-0\" fluid>\n              <v-row no-gutters>\n                <v-col cols=\"12\" v-if=\"iosDevice\">\n                  <apple-pay :ios-device=\"iosDevice && Object.hasOwnProperty.call(bookingDetails, 'zone') && Object.hasOwnProperty.call(bookingDetails.zone, 'paymentServices') && Object.hasOwnProperty.call(bookingDetails.zone.paymentServices, 'apple_pay') && bookingDetails.zone.paymentServices.apple_pay === 1\"></apple-pay>\n                </v-col>\n                <v-col cols=\"12\"> \n                  <v-btn    style=\"font-weight:700\" elevation=\"0\" rounded width=\"75%\"\n                    class=\"add_credit_card_btn white--text \" @click=\"navigateToAddPayment\"> Add Credit\n                    Card</v-btn>\n                </v-col>\n                <v-col cols=\"12\" class=\"mt-4\"\n                  v-if=\"bookingDetails.zone.isPQREndReservation == 1 && bookingDetails.booking.TypeOfBooking == 'Guest'\">\n                  <v-btn text color=\"primary\" style=\"font-size: 15px;font-weight: bolder;text-decoration: underline;\"\n                    @click=\"hotelGuest\">I am an\n                    overnight\n                    hotel guest</v-btn>\n                </v-col>\n                <v-col cols=\"12\" class=\"mt-4\" v-show=\"\n                  bookingDetails.hasOwnProperty('booking') &&\n                  bookingDetails.booking.hasOwnProperty('validated') &&\n                  bookingDetails.booking.validated != '1' &&\n                  bookingDetails.booking.isValidationEnabled == '1'\n                \">\n\n                  <v-btn   elevation=\"0\"  dense width=\"75%\" rounded \n                    class=\" white--text blue no-upper-case\" @click=\"openValidationDialog()\">Apply\n                    Your Validation</v-btn>\n                </v-col>\n                <v-divider style=\"color:black\"></v-divider>\n                <v-col cols=\"12\" class=\"mt-4 text-center color-black\" style=\"font-size: 12px;\" v-show=\"\n                  Object.hasOwnProperty.call(bookingDetails, 'zone') &&\n                  !(bookingDetails.zone.isGated == '0')\n                \">\n                  <p>\n                    If you fully validate your parking prior to exiting the garage, no credit card is required.\n                    Otherwise, enter your credit card info now to avoid a slow down at exit.\n                  </p>\n                </v-col>\n                <v-col cols=\"12\" class=\"mt-4 text-center color-black\" style=\"font-size: 12px\" v-show=\"\n                  Object.hasOwnProperty.call(bookingDetails, 'zone') &&\n                  !(bookingDetails.zone.isGated == '1') &&\n                  validatedDateTime <= 0\n                \">\n                  <p>\n                    A valid credit card is required to park. Without one, you\n                    could be subject to a parking violation and issued a\n                    citation.\n                  </p>\n                </v-col>\n                <v-col cols=\"12\" class=\"mt-4 color-black text-center\" style=\"font-size: 12px\" v-show=\"\n                  bookingDetails.hasOwnProperty('booking') &&\n                  bookingDetails.booking.hasOwnProperty('validated') &&\n                  bookingDetails.booking.validated == '1' &&\n                  validatedDateTime > 0\n                \">\n                  <p>\n                    Exiting after the validated time period will require a valid\n                    credit card to continue parking. Without one, you could be\n                    subject to a parking violation and issued a citation.\n                  </p>\n                </v-col>\n                <v-col cols=\"12\" class=\"mt-2 color-black text-center\" style=\"font-size: 12px\" v-show=\"iosDevice\">\n                  <p>\n                    You're only authorizing payment now. We'll charge you automatically when you checkout based on the\n                    duration of stay.\n                  </p>\n                </v-col>\n              </v-row>\n\n            </v-container>\n          </v-card-actions>\n          <v-card-actions class=\"justify-center pb-10\" v-if=\"showPaymentCardAdded\">\n            <v-container class=\"pa-0\" fluid>\n              <v-row no-gutters class=\"text-center px-10\" v-if=\"\n                bookingDetails.hasOwnProperty('exitOptions') &&\n                Object.hasOwnProperty.call(bookingDetails, 'zone') &&\n                !(bookingDetails.zone.isGated == '0') && bookingDetails.exitOptions.length > 0\n              \">\n                <v-col v-if=\"isCheckoutEnabled(1)\">\n                  <v-avatar color=\"red\" class=\"pa-6\" @click=\"openSMSDialog()\">\n                    <v-icon medium color=\"white accent-2\" class=\"px-4\" dark>\n                      {{\n                        getExitIcon(1)\n                      }}\n                    </v-icon>\n                  </v-avatar>\n                  <p class=\"grey--text text--darken-1 exit-option-text\">\n                    {{ getExitText(1) }}\n                  </p>\n                </v-col>\n                <v-col v-if=\"isCheckoutEnabled(2)\">\n                  <v-avatar color=\"red\" class=\"pa-6\" @click.stop=\"openSmsQrScanner()\">\n                    <v-icon medium color=\"white accent-2\" class=\"px-4\" dark>\n                      {{\n                        getExitIcon(2)\n                      }}\n                    </v-icon>\n                  </v-avatar>\n                  <p class=\"grey--text text--darken-1 exit-option-text\">\n                    {{ getExitText(2) }}\n                  </p>\n                </v-col>\n                <v-col v-if=\"isCheckoutEnabled(3)\">\n                  <v-avatar color=\"red\" class=\"pa-6\" @click=\"dialerDialog = true\">\n                    <v-icon medium color=\"white accent-2\" class=\"px-4\" dark>\n                      {{\n                        getExitIcon(3)\n                      }}\n                    </v-icon>\n                  </v-avatar>\n                  <p class=\"grey--text text--darken-1 exit-option-text\">{{ getExitText(3) }}</p>\n                </v-col>\n              </v-row>\n\n              <v-row no-gutters v-show=\"\n                Object.hasOwnProperty.call(bookingDetails, 'zone') &&\n                !(bookingDetails.zone.isGated == '0') && (isCheckoutEnabled(1) || isCheckoutEnabled(2) || isCheckoutEnabled(3))\n              \">\n                <v-col cols=\"12\" class=\"mt-2 text-center color-black\" style=\"font-size: 12px\">\n                  <p class=\"mb-0\">\n                    When you're ready to leave, please look for the\n                    <strong>3 digit</strong> gate code on the sign in the exit\n                    lane. Type that code when prompted. Have a good day!\n                  </p>\n                </v-col>\n              </v-row>\n              <v-row no-gutters>\n                <v-col cols=\"12\" class=\"px-4 mt-4 text-center color-black font-weight-bold\" style=\"font-size: 13px\"\n                  v-show=\"\n                    (bookingDetails.hasOwnProperty('booking') &&\n                      bookingDetails.booking.hasOwnProperty('cardNo') &&\n                      bookingDetails.booking.hasOwnProperty('accountType') &&\n                      bookingDetails.booking.accountType == '2') ||\n                    (bookingDetails.booking.cardOnfile == '1' &&\n                      (bookingDetails.booking.accountType == '0' ||\n                        bookingDetails.booking.accountType == '1') &&\n                      !(\n                        bookingDetails.booking.cardNo == '0' ||\n                        bookingDetails.booking.cardNo == '' ||\n                        bookingDetails.booking.cardNo == null\n                      ))\n                  \">\n                  <p class=\"mb-0\" >\n                    Card ending with *{{\n                      bookingDetails.hasOwnProperty(\"booking\") &&\n                      bookingDetails.booking.hasOwnProperty(\"cardNo\")\n                      ? bookingDetails.booking.cardNo\n                      : \"\"\n                    }}\n                    on file\n                  </p>\n                </v-col>\n              </v-row>\n              <v-row no-gutters v-if=\"bookingDetails.zone.isPQREndReservation == 1 &&\n                (bookingDetails.booking.cardOnfile == '1' || bookingDetails.booking.cardOnfile=='2')&& bookingDetails.booking.TypeOfBooking == 'Guest'\">\n                <v-col cols=\"12\" class=\"mt-4 text-center\">\n                  <v-btn text color=\"primary\" style=\"font-size: 15px;font-weight: bolder;text-decoration: underline;\"\n                    @click=\"hotelGuest\">I am an\n                    overnight\n                    hotel guest</v-btn>\n                </v-col>\n              </v-row>\n              <v-row no-gutters class=\"mt-2\">\n                <v-col cols=\"12\" class=\"text-center mt-2\" v-show=\"\n                  bookingDetails.hasOwnProperty('booking') &&\n                  bookingDetails.booking.hasOwnProperty('validated') &&\n                  bookingDetails.booking.validated != '1' &&\n                  bookingDetails.booking.isValidationEnabled == '1'\n                \">\n                  <v-btn  elevation=\"0\"  width=\"75%\" \n                    class=\" white--text blue  no-upper-case\" @click=\"openValidationDialog()\">Apply\n                    Your Validation\n                  </v-btn>\n                </v-col>\n              </v-row>\n              <v-row no-gutters class=\"text-center mt-1\" v-show=\"\n                Object.hasOwnProperty.call(bookingDetails, 'zone') &&\n                bookingDetails.zone.isGated == '0' &&\n                bookingDetails.booking.cardOnfile == '1' &&\n                validatedDateTime <= 0\n              \">\n                <v-col cols=\"12\" class=\"mt-2 color-black\" style=\"font-size: 12px\">\n                  <p class=\"mb-0\">\n                    The card on file will be automatically charged for the time\n                    parked when you exit the garage.\n                  </p>\n                </v-col>\n              </v-row>\n\n              <v-row no-gutters>\n                <v-col cols=\"12\" class=\"mt-1 text-center\" v-show=\"\n                  bookingDetails.hasOwnProperty('booking') &&\n                  bookingDetails.booking.hasOwnProperty('cardNo') &&\n                  bookingDetails.booking.hasOwnProperty('accountType') &&\n                  bookingDetails.booking.hasOwnProperty('cardUpdated') &&\n                  !(bookingDetails.booking.cardUpdated == '1') &&\n                  (bookingDetails.booking.accountType == '2' ||\n                    (bookingDetails.booking.cardOnfile == '1' &&\n                      bookingDetails.booking.accountType == '0')) &&\n                  !(bookingDetails.booking.tapToChangeCard == '0') && !(bookingDetails.booking.paymentType == 'APPLE_PAY')\n                \">\n                  <a class=\"text-caption\" @click=\"navigateToAddPayment()\">Tap to change card</a>\n                </v-col>\n              </v-row>\n              <v-row no-gutters>\n                <v-col cols=\"12\" class=\"mt-4 text-center color-black\" style=\"font-size: 12px\" v-show=\"\n                  Object.hasOwnProperty.call(bookingDetails, 'zone') &&\n                  !(bookingDetails.zone.isGated == '1') &&\n                  validatedDateTime <= 0 &&\n                  bookingDetails.booking.cardOnfile != '1'\n                \">\n                  <p>\n                    A valid credit card is required to park. Without one, you\n                    could be subject to a parking violation and issued a\n                    citation.\n                  </p>\n                </v-col>\n              </v-row>\n              <v-row no-gutters>\n                <v-col cols=\"12\" class=\"mt-4 text-center color-black\" style=\"font-size: 12px\" v-show=\"\n                  bookingDetails.hasOwnProperty('booking') &&\n                  bookingDetails.booking.hasOwnProperty('validated') &&\n                  bookingDetails.booking.validated == '1' &&\n                  validatedDateTime > 0\n                \">\n                  <p>\n                    Exiting after the validated time period will require a valid\n                    credit card to continue parking. Without one, you could be\n                    subject to a parking violation and issued a citation.\n                  </p>\n                </v-col>\n              </v-row>\n            </v-container>\n          </v-card-actions>\n          <!-- <v-row v-if=\"showPaymentCardAdded\">\n                <v-col>\n                  <v-icon\n                    x-small\n                    color=\"green\"\n                    class=\"px-4\"\n                    dark\n                    @click=\"navigateToCheckOut\"\n                  >mdi-exit-to-app</v-icon>\n                </v-col>\n              </v-row>-->\n          <!-- </v-responsive> -->\n        </v-card>\n      </v-col>\n    </v-row>\n    <v-dialog v-model=\"qrCodeDialog\" width=\"fit-content\" persistent>\n      <v-card>\n        <v-card-title>\n          <v-spacer></v-spacer>\n          <v-icon @click=\"closeQRCodeDialog()\">mdi-close</v-icon>\n        </v-card-title>\n        <v-card-text class=\"pa-1\">\n          <qr-code-scanner :scan=\"'sms'\" v-bind:qrbox=\"250\" v-bind:fps=\"30\"\n            :cameraStatus=\"cameraStatus\"></qr-code-scanner>\n          <v-progress-circular v-if=\"!cameraStatus\" class=\"validation-pending\" indeterminate\n            color=\"red\"></v-progress-circular>\n        </v-card-text>\n        <v-card-actions>\n          <v-container class=\"pa-0\" fluid>\n            <v-row no-gutters>\n              <v-col cols=\"7\">\n                <p class=\"grey--text font-weight-bold qr_text mr-4\">Scan the QR code affixed to exit the gate</p>\n              </v-col>\n              <v-spacer></v-spacer>\n              <v-img src=\"../assets/qr-code.png\" style=\"opacity: 0.7\" max-width=\"52\"></v-img>\n            </v-row>\n          </v-container>\n        </v-card-actions>\n      </v-card>\n    </v-dialog>\n    <div>\n      <v-dialog v-model=\"smsDialog\" width=\"fit-content\">\n        <v-card class=\"pa-0\" ref=\"smscontainer\">\n          <v-card-title class=\"justify-center\" style=\"position: relative\">\n            <v-btn class elevation=\"0\" color=\"white\" dark fab x-large>\n              <v-icon x-large color=\"red accent-2\">mdi-message-text</v-icon>\n            </v-btn>\n          </v-card-title>\n          <v-card-text class=\"pa-0\">\n            <v-container class=\"px-4\" fluid>\n              <v-row no-gutters>\n                <v-col cols=\"12\" class=\"text-left\">\n                  <p class=\"color-black\" style=\"font-size: 24px; line-height: 35px\">Enter the gate code shown in the\n                    lane to exit.</p>\n                  <!-- <p class=\"sms-caption color-black\">\n                        We'll copy the code into a text message for you. You'll need\n                        to tap send on the message to open the gate.\n                      </p>-->\n                </v-col>\n                <v-col cols=\"12\" class=\"mt-2\">\n                  <v-text-field class=\"sms-input\" color=\"red\" v-model=\"smsText\" outlined label=\"Gate code\" maxlength=\"6\"\n                    type=\"tel\" autofocus v-on:keyup.enter=\"openSMSApp()\" @focus=\"scrollToSubmit()\"\n                    @mouseup=\"scrollToSubmit()\" @keydown=\"scrollToSubmit()\" clearable height=\"80px\"></v-text-field>\n                </v-col>\n              </v-row>\n            </v-container>\n            <v-progress-circular v-if=\"smsPending\" class=\"validation-pending\" indeterminate\n              color=\"red\"></v-progress-circular>\n          </v-card-text>\n          <v-card-actions class=\"text-center\">\n            <v-container pa-0 fluid>\n              <v-row no-gutters>\n                <v-col cols=\"12\">\n                  <v-btn id=\"submitsmsbtn\" rounded block elevation=\"0\" :disabled=\"smsText == '' || smsPending\"\n                    class=\"white--text exit_dialog_btn\" @click=\"openSMSApp()\">SUBMIT</v-btn>\n                </v-col>\n                <v-col cols=\"12\" class=\"mt-2\">\n                  <p style=\"cursor: pointer\" @click=\"smsDialog = false\">\n                    Close\n                  </p>\n                </v-col>\n              </v-row>\n            </v-container>\n          </v-card-actions>\n        </v-card>\n      </v-dialog>\n    </div>\n    <div>\n      <v-dialog v-model=\"validateQRCodeDialog\" width=\"fit-content\" persistent>\n        <v-card>\n          <v-card-title>\n            <v-spacer></v-spacer>\n            <v-icon @click=\"closeValidationQRDialog()\">mdi-close</v-icon>\n          </v-card-title>\n          <v-card-text class=\"pa-1\">\n            <validation-qr-code-scanner :scan=\"'validationCode'\" v-bind:qrbox=\"250\" v-bind:fps=\"30\"\n              :cameraStatus=\"validationCameraStatus\"></validation-qr-code-scanner>\n            <v-progress-circular v-if=\"!validationCameraStatus\" class=\"validation-pending\" indeterminate\n              color=\"red\"></v-progress-circular>\n          </v-card-text>\n          <v-card-actions>\n            <v-container class=\"pa-0\" fluid>\n              <v-row no-gutters>\n                <v-col cols=\"7\">\n                  <p class=\"grey--text font-weight-bold qr_text mr-4\">Please scan the validation QR code</p>\n                </v-col>\n                <v-spacer></v-spacer>\n                <v-img src=\"../assets/qr-code.png\" style=\"opacity: 0.7\" max-width=\"52\"></v-img>\n              </v-row>\n            </v-container>\n          </v-card-actions>\n        </v-card>\n      </v-dialog>\n    </div>\n    <div>\n      <v-dialog v-model=\"validateBookingDialog\" width=\"fit-content\">\n        <v-card class=\"pa-0\" ref=\"validatecontainer\">\n          <v-card-title class=\"justify-center\" style=\"position: relative\">\n            <v-btn class elevation=\"0\" color=\"white\" dark fab large>\n              <v-icon x-large color=\"red accent-2\">mdi-ticket-percent</v-icon>\n            </v-btn>\n          </v-card-title>\n          <v-card-text class=\"pa-0\">\n            <v-container class=\"px-4 py-0\" fluid>\n              <v-row no-gutters>\n                <v-col cols=\"12\" class=\"text-left\">\n                  <p class=\"color-black text-center\" style=\"font-size: 24px; line-height: 35px\">\n                    If the Merchant provided you a validation code, you may scan\n                    it or enter it here.\n                  </p>\n                </v-col>\n                <v-col cols=\"12\">\n                  <v-btn rounded block elevation=\"0\" class=\"white--text exit_dialog_btn\"\n                    @click=\"openScanValidationCode()\">Scan Validation Code</v-btn>\n                </v-col>\n                <v-col cols=\"12\" class=\"text-left mt-4\">\n                  <p class=\"color-black\" style=\"font-size: 24px; line-height: 35px\">or enter it below</p>\n                </v-col>\n                <v-col cols=\"12\">\n                  <v-text-field class=\"sms-input\" color=\"red\" v-model=\"validateBookingTxt\" outlined\n                    label=\"Validation code\" hide-details=\"auto\" v-on:keyup.enter=\"validateBooking()\"\n                    @focus=\"scrollToValidateBtn()\" @mouseup=\"scrollToValidateBtn()\" @keydown=\"scrollToValidateBtn()\"\n                    clearable height=\"80px\"></v-text-field>\n                </v-col>\n              </v-row>\n            </v-container>\n            <v-progress-circular v-if=\"validateBookingPending\" class=\"validation-pending\" indeterminate\n              color=\"red\"></v-progress-circular>\n          </v-card-text>\n          <v-card-actions class=\"text-center\">\n            <v-container pa-0 fluid>\n              <v-row no-gutters>\n                <v-col cols=\"12\">\n                  <v-btn id=\"validatebookingbtn\" rounded block elevation=\"0\" :disabled=\"\n                    validateBookingTxt == '' ||\n                    validateBookingTxt == null ||\n                    validateBookingPending\n                  \" class=\"white--text exit_dialog_btn\" @click=\"onValidateText()\">SUBMIT</v-btn>\n                </v-col>\n                <v-col cols=\"12\" class=\"mt-2\">\n                  <p style=\"cursor: pointer\" @click=\"validateBookingDialog = false\">\n                    Close\n                  </p>\n                </v-col>\n              </v-row>\n            </v-container>\n          </v-card-actions>\n        </v-card>\n      </v-dialog>\n    </div>\n    <div>\n      <v-dialog v-model=\"dialerDialog\" width=\"fit-content\">\n        <v-card class=\"pa-0\">\n          <v-card-title class=\"justify-center\" style=\"position: relative\">\n            <v-btn class elevation=\"0\" color=\"white\" dark fab x-large>\n              <v-icon x-large color=\"red accent-2\">mdi-phone-in-talk</v-icon>\n            </v-btn>\n          </v-card-title>\n          <v-card-text class=\"pa-0\">\n            <v-container class=\"px-4\" fluid>\n              <v-row no-gutters>\n                <v-col cols=\"12\" class=\"text-left\">\n                  <p class=\"color-black\" style=\"font-size: 24px; line-height: 35px\">\n                    Tap to call the gate. When prompted, enter the gate code\n                    shown in the lane to exit.\n                  </p>\n                </v-col>\n              </v-row>\n            </v-container>\n          </v-card-text>\n          <v-card-actions class=\"text-center\">\n            <v-container pa-0 fluid>\n              <v-row no-gutters>\n                <v-col cols=\"12\">\n                  <v-btn rounded block elevation=\"0\" class=\"white--text exit_dialog_btn\" @click=\"openDialerApp\">CALL\n                    GATE</v-btn>\n                </v-col>\n                <v-col cols=\"12\" class=\"mt-2\">\n                  <p style=\"cursor: pointer\" @click=\"dialerDialog = false\">\n                    Close\n                  </p>\n                </v-col>\n              </v-row>\n            </v-container>\n          </v-card-actions>\n        </v-card>\n      </v-dialog>\n    </div>\n    <v-dialog v-model=\"invalidQRDialog\" persistent max-width=\"290\">\n      <v-card class=\"pa-0\">\n        <v-card-title class=\"justify-center\" style=\"position: relative\">\n          <v-icon x-large color=\"red accent-2\">mdi-alert-outline</v-icon>\n        </v-card-title>\n        <v-card-text class=\"text-center mt-5\">\n          <span style=\"font-size: 20px\">{{ invalidQRMsg }}</span>\n        </v-card-text>\n        <v-card-actions class=\"text-center pb-6\">\n          <v-container pa-0 fluid>\n            <v-row no-gutters>\n              <v-col cols=\"12\">\n                <v-btn rounded block elevation=\"0\" class=\"white--text exit_dialog_btn\" @click=\"reScanQR()\">Re-Scan\n                  Code</v-btn>\n              </v-col>\n            </v-row>\n          </v-container>\n        </v-card-actions>\n      </v-card>\n    </v-dialog>\n    <v-dialog v-model=\"invalidValidationQRDialog\" persistent max-width=\"290\">\n      <v-card class=\"pa-0\">\n        <v-card-title class=\"justify-center\" style=\"position: relative\">\n          <v-icon x-large color=\"red accent-2\">mdi-alert-outline</v-icon>\n        </v-card-title>\n        <v-card-text class=\"text-center mt-5\">\n          <span style=\"font-size: 20px\">{{ invalidValidationQRMsg }}</span>\n        </v-card-text>\n        <v-card-actions class=\"text-center pb-6\">\n          <v-container pa-0 fluid>\n            <v-row no-gutters>\n              <v-col cols=\"12\">\n                <v-btn rounded block elevation=\"0\" class=\"white--text exit_dialog_btn\"\n                  @click=\"reScanValidationQR()\">Re-Scan Code</v-btn>\n              </v-col>\n            </v-row>\n          </v-container>\n        </v-card-actions>\n      </v-card>\n    </v-dialog>\n    <v-dialog v-model=\"invalidSMSDialog\" persistent max-width=\"290\">\n      <v-card class=\"pa-0\">\n        <v-card-title class=\"justify-center\" style=\"position: relative\">\n          <v-icon x-large color=\"red accent-2\">mdi-alert-outline</v-icon>\n        </v-card-title>\n        <v-card-text class=\"text-center mt-5\">\n          <span style=\"font-size: 20px\">{{ invalidSMSMsg }}</span>\n        </v-card-text>\n        <v-card-actions class=\"text-center pb-6\">\n          <v-container pa-0 fluid>\n            <v-row no-gutters>\n              <v-col cols=\"12\">\n                <v-btn rounded block elevation=\"0\" class=\"white--text exit_dialog_btn\"\n                  @click=\"invalidSMSDialog = false\">Re-Enter Code</v-btn>\n              </v-col>\n            </v-row>\n          </v-container>\n        </v-card-actions>\n      </v-card>\n    </v-dialog>\n\n    <v-dialog v-model=\"pedestrianAccessDialog\" persistent max-width=\"290\">\n      <v-card class=\"pa-0\">\n        <v-card-title class=\"justify-center\" style=\"position: relative\">\n          <v-icon x-large color=\"red accent-2\">mdi-alert-outline</v-icon>\n        </v-card-title>\n        <v-card-text class=\"text-center mt-5\">\n          <span style=\"font-size: 20px\">{{ pedestrianAccessText }}</span>\n        </v-card-text>\n        <v-card-actions class=\"text-center pb-6\">\n          <v-container pa-0 fluid>\n            <v-row no-gutters>\n              <v-col cols=\"12\">\n                <v-btn rounded block elevation=\"0\" class=\"white--text exit_dialog_btn\"\n                  @click=\"pedestrianAccessDialog = false\">Close</v-btn>\n              </v-col>\n            </v-row>\n          </v-container>\n        </v-card-actions>\n      </v-card>\n    </v-dialog>\n  </v-container>\n</template>\n\n<script>\nimport APIHelper from \"../apiHelper\";\n// import loggerHelper from \"../loggerHelper\";\nimport { mapGetters } from \"vuex\";\n// import { QrcodeStream } from \"vue-qrcode-reader\";\nimport QrCodeScanner from \"@/views/QrCodeScanner.vue\";\nimport ValidationQrCodeScanner from \"@/views/ValidationQrCodeScanner.vue\";\nimport ApplePay from \"@/views/ApplePay.vue\";\nimport { formatDateTime } from \"@/utils/formatDateTime\";\nimport { EventBus } from \"@/lib/EventBus\";\nimport { secondsToHms } from \"@/utils/formatDateTime\";\n// import QrScanner from 'qr-scanner';\nexport default {\n  name: \"CheckIn\",\n  components: { QrCodeScanner, ValidationQrCodeScanner, ApplePay },\n  data: () => ({\n    // rules: {\n    //   counter: value => value.length <= 6 || \"Max 6 characters\"\n    // },\n    exitDateTime: 0,\n    exitTimeInterval: null,\n    iosDevice: false,\n    invalidValidationQRDialog: false,\n    cameraStatus: false,\n    validationCameraStatus: false,\n    validatedDateTime: 0,\n    gracePeriodTime: 0,\n    validatedInterval: \"\",\n    duration: 300,\n    offset: 0,\n    pedestrianAccessDialog: false,\n    pedestrianAccessText: \"\",\n    easing: \"easeInOutCubic\",\n    pageHeight: window.outerHeight,\n    qrCodeDialog: false,\n    countUpTime: \"\",\n    interval: \"\",\n    isValid: undefined,\n    camera: \"auto\",\n    smsText: \"\",\n    smsDialog: false,\n    dialerDialog: false,\n    invalidQRMsg: \"\",\n    invalidValidationQRMsg: \"\",\n    invalidQRDialog: false,\n    invalidSMSMsg: \"\",\n\n    invalidSMSDialog: false,\n    smsPending: false,\n    validateBookingPending: false,\n    validateBookingDialog: false,\n    validateBookingTxt: \"\",\n    validateQRCodePending: false,\n    validateQRCodeDialog: false,\n  }),\n  computed: {\n    ...mapGetters({\n      bookingId: \"getterBookingId\",\n      bookingDetails: \"getterBookingDetails\",\n      entryTime: \"getterEntryTime\",\n      exitGateCodes: \"getterExitGateCodes\",\n      isPQREndReservation: \"getterZoneIsPQREndReservation\",\n\n    }),\n    countDownExitTime() {\n      if (this.exitDateTime < 0) {\n        this.$store.commit(\"SET_VALIDATED_TIME_STATUS\", true);\n        clearInterval(this.exitTimeInterval);\n      }\n      return secondsToHms(this.exitDateTime / 1000 + 59);\n    },\n    isExtra() {\n      return window.location.pathname.includes(\"/gx/\");\n    },\n    options() {\n      return {\n        duration: this.duration,\n        offset: this.offset,\n        easing: this.easing,\n      };\n    },\n    showPaymentCardAdded: function getCardStatus() {\n      var cardOnFile = this.bookingDetails?.booking?.cardOnfile\n        ? this.bookingDetails.booking.cardOnfile\n        : null;\n      var validatedState = this.bookingDetails?.booking?.validated\n        ? this.bookingDetails.booking.validated\n        : null;\n      var state =\n        cardOnFile == \"1\"\n          ? true\n          : cardOnFile == \"2\" &&\n          validatedState == \"1\" &&\n          this.validatedDateTime > 0;\n      return state;\n    },\n    timeAgo: function getTimeAgo() {\n      return this.countUpTime;\n    },\n    validationPending: function qrValidation() {\n      return this.isValid === undefined && this.camera === \"off\";\n    },\n    booking_content() {\n      let dateTime = formatDateTime(\n        Number(this.bookingDetails.booking.entrytime)\n      );\n      return dateTime[0] + \" on \" + dateTime[1] + \" \" + dateTime[2];\n    },\n    validated_content() {\n      if (this.bookingDetails?.zone?.timezoneoffset) {\n        let dateTime = this.bookingDetails.booking.type == \"13\" ? formatDateTime(\n          Number(this.bookingDetails.booking.revStart) +\n          Number(this.bookingDetails.booking.couponValidTime)\n        ) : formatDateTime(\n          Number(this.bookingDetails.booking.entrytime) +\n          Number(this.bookingDetails.booking.couponValidTime)\n        );\n        return dateTime[0] + \", \" + dateTime[1] + \" \" + dateTime[2];\n      }\n      return \"\";\n    },\n    countDownValidatedTime() {\n      if (this.validatedDateTime < 0) {\n        this.$store.commit(\"SET_VALIDATED_TIME_STATUS\", true);\n        clearInterval(this.validatedInterval);\n      }\n      return this.secondsToHms(this.validatedDateTime / 1000 + 59);\n    },\n    countDownGracePeriodTime() {\n      if (this.gracePeriodTime < 0) {\n        this.$store.commit(\"SET_GRACE_PERIOD_TIME_STATUS\", true);\n        clearInterval(this.gracePeriodInterval);\n      }\n      //add 59 sec to graceperiod time to skip 0 min.\n      return this.secondsToHms(this.gracePeriodTime / 1000 + 59);\n    },\n    // gracePeriodCountDownTime,\n    // countDownValidationtime(){\n    //   return\n    // }\n  },\n  watch: {\n    currentDate(newVal) {\n      console.log(newVal);\n    },\n  },\n  created() { },\n  mounted: function () {\n    this.exitDateTime = this.calculateExitDateTime();\n    this.exitTimeInterval = setInterval(() => {\n      if (\n        this.bookingDetails?.zone?.timezone\n\n      ) {\n        this.exitDateTime = this.calculateExitDateTime();\n      }\n    }, 1000);\n    if (\n      this.entryTime != null &&\n      !this.bookingDetails?.booking?.exittime &&\n      this.bookingDetails?.zone?.timezone &&\n      this.bookingDetails?.booking?.gracePeriod\n    ) {\n      this.countUpTime = this.calculateParkingTime(\n        this.entryTime,\n        this.bookingDetails.booking.gracePeriod,\n        this.bookingDetails.zone.timezone\n      );\n    }\n    this.interval = setInterval(() => {\n      if (\n        this.entryTime != null &&\n        !this.bookingDetails?.booking?.exittime &&\n        this.bookingDetails?.zone?.timezone &&\n        this.bookingDetails?.booking?.gracePeriod\n      ) {\n        this.countUpTime = this.calculateParkingTime(\n          this.entryTime,\n          this.bookingDetails.booking.gracePeriod,\n          this.bookingDetails.zone.timezone\n        );\n      }\n    }, 1000);\n    if (\n      this.bookingDetails?.booking?.exittime &&\n      this.bookingDetails.booking.exittime != null &&\n      this.bookingDetails.booking.exittime != \"\"\n    ) {\n      clearInterval(this.interval);\n    }\n    if (\n      this.bookingDetails?.booking?.validated &&\n      this.bookingDetails.booking.validated == \"1\" &&\n      this.bookingDetails?.booking?.validationType &&\n      this.bookingDetails.booking.validationType == \"DIVRT\"\n    ) {\n      this.validatedDateTime = this.calculateValidatedTime();\n    }\n\n    this.validatedInterval = setInterval(() => {\n      if (\n        this.bookingDetails?.zone?.timezone &&\n        this.bookingDetails?.booking?.validated &&\n        this.bookingDetails.booking.validated == \"1\" &&\n        this.bookingDetails?.booking?.validationType &&\n        this.bookingDetails.booking.validationType == \"DIVRT\"\n      ) {\n        this.validatedDateTime = this.calculateValidatedTime();\n      }\n    }, 1000);\n    if (\n      this.bookingDetails?.booking?.validated &&\n      this.bookingDetails.booking.validated == \"1\" &&\n      this.bookingDetails?.booking?.validationType &&\n      this.bookingDetails.booking.validationType == \"DIVRT\"\n    ) {\n      if (this.validatedDateTime < 0) {\n        this.$store.commit(\"SET_VALIDATED_TIME_STATUS\", true);\n        clearInterval(this.validatedInterval);\n      }\n    }\n\n    if (this.bookingDetails?.booking?.gracePeriod > 0) {\n      this.gracePeriodTime = this.calculateGracePeriodTime();\n    }\n\n    this.gracePeriodInterval = setInterval(() => {\n      if (this.bookingDetails?.zone?.timezone) {\n        this.gracePeriodTime = this.calculateGracePeriodTime();\n      }\n    }, 1000);\n    if (this.bookingDetails?.booking?.gracePeriod > 0) {\n      if (this.gracePeriodTime < 0) {\n        this.$store.commit(\"SET_GRACE_PERIOD_TIME_STATUS\", true);\n        clearInterval(this.gracePeriodInterval);\n      }\n    }\n    EventBus.$on(\"sms-qr-result\", (result) => {\n      this.onDecode(result);\n    });\n    EventBus.$on(\"validation-qr-result\", (result) => {\n      this.onValidateQRCode(result);\n    });\n\n    // if(this.bookingDetails?.zone?.isPedestrian=='1'){\n    //   this.pedestrianAccess=true\n    // }\n  },\n  destroyed() {\n    clearInterval(this.interval);\n    clearInterval(this.validatedInterval);\n    clearInterval(this.gracePeriodInterval);\n  },\n  beforeRouteEnter(to, from, next) {\n    next(async (vm) => {\n      vm.getMobileOperatingSystem() === 'iOS' ? vm.iosDevice = true : vm.iosDevice = false;\n\n      if (\n        vm.bookingDetails?.booking?.exittime &&\n        vm.bookingDetails.booking.exittime != null &&\n        vm.bookingDetails.booking.exittime != \"\"\n      ) {\n        clearInterval(vm.interval);\n      }\n      if (vm.bookingDetails?.booking?.validated == \"0\") {\n        if (vm.validatedDateTime < 0) {\n          vm.$store.commit(\"SET_VALIDATED_TIME_STATUS\", true);\n          clearInterval(vm.validatedInterval);\n        }\n      }\n    });\n  },\n  methods: {\n    calculateExitDateTime() {\n      if (this.bookingDetails?.zone?.timezone) {\n        //   var currentTime =\n        // new Date().getTime() +\n        // (Number(this.bookingDetails.zone.timezoneoffset) * 1000 +\n        //   Number(this.bookingDetails.zone.timezonedstoffset) * 1000);\n        var currentTime =\n          new Date().getTime() +\n          (Number(this.bookingDetails.zone.timezoneoffset) * 1000 +\n            Number(this.bookingDetails.zone.timezonedstoffset) * 1000);\n        var exitTime =\n          new Date(this.bookingDetails.booking.reservationEndDate).getTime();\n        this.$store.commit(\"SET_EXIT_TIME_TIME_STATUS\", this.exitDateTime < 0);\n        exitTime - currentTime < 0\n          ? clearInterval(this.exitInterval)\n          : \"\";\n        return exitTime - currentTime;\n      }\n      return 0\n\n    },\n    hotelGuest() {\n      let url = window.location.origin + '?zcode=' + this.bookingDetails?.zone?.locationCode + '#/createsession';\n      let plate = this.bookingDetails?.booking?.vehicleNo || \"\";\n      let phone = this.bookingDetails?.user?.contact || \"\";\n      let bid = this.bookingDetails?.booking?.bid || \"\";\n      let params = '/?phone=' + phone + '&bid=' + bid + '&plate=' + plate;\n      window.location.replace(url + params);\n      // this.$router.replace({path:'/'});\n\n    },\n    closeQRCodeDialog() {\n      this.qrCodeDialog = false;\n      this.cameraStatus = false;\n    },\n    closeValidationQRDialog() {\n      this.validationCameraStatus = false;\n      this.validateBookingDialog = true;\n      this.validateQRCodeDialog = false;\n    },\n    reScanQR() {\n      this.invalidQRDialog = false;\n      this.cameraStatus = true;\n    },\n    reScanValidationQR() {\n      this.invalidValidationQRDialog = false;\n      this.validationCameraStatus = true;\n    },\n    openSmsQrScanner() {\n      this.qrCodeDialog = true;\n      this.cameraStatus = true;\n    },\n    openSMSDialog() {\n      this.smsDialog = true;\n      let exitLanes =\n        this.exitGateCodes.length > 0\n          ? this.exitGateCodes.filter((a) => a.isPedestrian == \"0\")\n          : [];\n      if (\n        this.bookingDetails?.booking?.prePopulateGateCodes &&\n        this.bookingDetails.booking.prePopulateGateCodes == \"1\"\n      ) {\n        this.smsText = exitLanes.length == 1 ? exitLanes[0].sms_code : \"\";\n      }\n    },\n    scrollToSubmit() {\n      const el = document.querySelector(\"#submitsmsbtn\");\n      if (el) {\n        el.scrollIntoView(this.options);\n      }\n    },\n    scrollToValidateBtn() {\n      const el = document.querySelector(\"#validatebookingbtn\");\n      if (el) {\n        el.scrollIntoView(this.options);\n      }\n    },\n    calculateGracePeriodTime() {\n      var currentTime =\n        new Date().getTime() +\n        (Number(this.bookingDetails.zone.timezoneoffset) * 1000 +\n          Number(this.bookingDetails.zone.timezonedstoffset) * 1000);\n      var gracePeriodTime =\n        (Number(this.bookingDetails.booking.entrytime) +\n          Number(this.bookingDetails.booking.gracePeriod)) *\n        1000; //\n      this.$store.commit(\n        \"SET_GRACE_PERIOD_TIME_STATUS\",\n        this.gracePeriodTime <= 0\n      );\n      return gracePeriodTime - currentTime;\n    },\n    calculateValidatedTime() {\n      var currentTime =\n        new Date().getTime() +\n        (Number(this.bookingDetails.zone.timezoneoffset) * 1000 +\n          Number(this.bookingDetails.zone.timezonedstoffset) * 1000);\n      var validatedTime = this.bookingDetails.booking.type == \"13\" ?\n        (Number(this.bookingDetails.booking.revStart) +\n          Number(this.bookingDetails.booking.couponValidTime)) *\n        1000 : (Number(this.bookingDetails.booking.entrytime) +\n          Number(this.bookingDetails.booking.couponValidTime)) *\n        1000\n      this.$store.commit(\"SET_VALIDATED_TIME_STATUS\", this.validatedTime < 0);\n      validatedTime - currentTime < 0\n        ? clearInterval(this.validatedInterval)\n        : \"\";\n      return validatedTime - currentTime;\n    },\n    calculateParkingTime(parkingStartTime, gracePeriod, zone) {\n      var currentTime = new Date();\n      currentTime.toLocaleString(\"en-US\", { timeZone: zone });\n      var differenceTime =\n        gracePeriod > 0\n          ? currentTime.getTime() - parkingStartTime * 1000 // - gracePeriod * 1000 to exclude grace period\n          : currentTime.getTime() - parkingStartTime * 1000;\n      let parkedTime = this.secondsToHms(differenceTime / 1000);\n      return parkedTime;\n    },\n    secondsToHms(timeDifference) {\n      var d = Number(timeDifference);\n      // if (timeDifference >= 86400) {\n      //   var days = Math.floor(d / 86400);\n      //   var hrs = Math.floor((d % 86400) / 3600);\n      //   var dayDisplay =\n      //     days > 0 ? days + (days == 1 ? \" day \" : \" days \") : \"\";\n      //   var hrDisplay = hrs > 0 ? hrs + (hrs == 1 ? \" hr \" : \" hrs \") : \"\";\n      //   return dayDisplay + hrDisplay;\n      // }\n      var h = Math.floor(d / 3600);\n      var m = Math.floor((d % 3600) / 60);\n      // var s = Math.floor(d % 3600 % 60);\n      var hDisplay = h > 0 ? h + \" h \" : \"\";\n      var mDisplay = m > 0 ? m + (m == 1 ? \" min \" : \" min\") : \" 0 min\";\n      // var sDisplay = s > 0 ? s + (s == 1 ? \" second\" : \" seconds\") : \"\";\n      return hDisplay + mDisplay;\n    },\n    isCheckoutEnabled(type) {\n      if (Object.hasOwnProperty.call(this.bookingDetails, 'exitOptions') && this.bookingDetails.exitOptions.length != 0) {\n        let option = this.bookingDetails.exitOptions.some(\n          (t) => t.techType == type\n        );\n        return option;\n      }\n      return false;\n\n    },\n    async getBookingDetails() {\n      try {\n        let bookingId = window.location.pathname.substring(3);\n        var bookingDetails = await APIHelper(\n          \"GET\",\n          \"/api/v1/booking/config/\" + bookingId\n        );\n        this.$store.commit(\n          \"SET_BOOKING_DETAILS\",\n          bookingDetails.data?.data ? bookingDetails.data.data : null\n        );\n      } catch (error) {\n        console.log(error);\n      }\n    },\n    async getpedestrianAccess() {\n      try {\n        // let bookingId = window.location.pathname.substring(3);\n        var pedesAccess = await APIHelper(\n          \"POST\",\n          \"api/v1/open/\" + this.bookingId,\n          { source: \"webView\" }\n        );\n        // console.log(pedesAccess)\n        // console.log(pedesAccess?.data?.status)\n        if (pedesAccess?.data?.status) {\n          this.postToLoggerAPI({\n            phone: this.bookingDetails.user.contact,\n            refId: this.bookingId,\n            image: \"https://sppl-dev.divrt.co/img/pedestrain_door.042f0927.png\",\n            statusText: \"Parker accessed pedestrian door successfully.\",\n          });\n          this.$router.replace({ path: \"/pedestrianaccess\" });\n        } else {\n          this.pedestrianAccessText = pedesAccess.data.message;\n          this.postToLoggerAPI({\n            phone: this.bookingDetails.user.contact,\n            refId: this.bookingId,\n            error: this.pedestrianAccessText,\n            image: \"https://sppl-dev.divrt.co/img/pedestrain_door.042f0927.png\",\n            statusText: \"Error in opening the pedestrian door.\",\n          });\n          this.pedestrianAccessDialog = true;\n        }\n      } catch (error) {\n        console.log(error);\n      }\n      // this.$router.replace({ path: \"/pedestrianaccess/\"+true });\n    },\n    navigateToAddPayment() {\n      this.postToLoggerAPI({\n        phone: this.bookingDetails.user.contact,\n        refId: this.bookingId,\n        statusText: \"Parker clicked on ADD CREDIT CARD btn.\",\n      });\n      this.$router.replace({ path: \"/addpayment\" });\n    },\n    openValidationDialog() {\n      this.validateBookingDialog = true;\n    },\n    async openSMSApp() {\n      this.postToLoggerAPI({\n        phone: this.bookingDetails.user.contact,\n        refId: this.bookingId,\n        statusText: \"Parker clicked on SMS submit btn.\",\n      });\n      if (this.smsText == null || this.smsText == \"\") {\n        this.invalidSMSMsg = \"Gate code cannot be empty\";\n        this.invalidSMSDialog = true;\n      } else {\n        try {\n          this.smsPending = true;\n          var preValidateSendSMS = await APIHelper(\"POST\", \"/receive_sms\", {\n            bid: this.bookingId,\n            From: this.bookingDetails.user.contact,\n            Text: this.smsText,\n            To: this.bookingDetails.zone.ToMobileNo,\n            Mode: \"SMS\",\n            webView: \"1\",\n            preValidate: 1,\n          });\n          this.smsPending = false;\n          if (\n            preValidateSendSMS?.data?.status &&\n            preValidateSendSMS.data.status\n          ) {\n            this.smsDialog = false;\n            this.$router.replace({ path: \"/success\" });\n            try {\n              var sendSMS = await APIHelper(\"POST\", \"/receive_sms\", {\n                bid: this.bookingId,\n                From: this.bookingDetails.user.contact,\n                Text: this.smsText,\n                To: this.bookingDetails.zone.ToMobileNo,\n                Mode: \"SMS\",\n                webView: \"1\",\n              });\n              if (sendSMS?.data?.status && sendSMS.data.status) {\n                this.smsDialog = false;\n                this.postToLoggerAPI({\n                  phone: this.bookingDetails.user.contact,\n                  refId: this.bookingId,\n                  icon: \"logout\",\n                  statusText:\n                    \"Parker checked out successfully using SMS - \" +\n                    this.smsText,\n                });\n              } else {\n                this.invalidSMSMsg = sendSMS?.data?.message\n                  ? sendSMS.data.message\n                  : \"Please try again\";\n                this.invalidSMSDialog = true;\n                this.postToLoggerAPI({\n                  phone: this.bookingDetails.user.contact,\n                  refId: this.bookingId,\n                  error: this.invalidSMSMsg,\n                  icon: \"logout\",\n                  statusText:\n                    \"Error occured while checking out using SMS - \" +\n                    this.smsText,\n                });\n              }\n            } catch (error) {\n              console.log(error);\n            }\n          } else {\n            this.invalidSMSMsg = preValidateSendSMS?.data?.message\n              ? preValidateSendSMS.data.message\n              : \"Please try again\";\n            this.invalidSMSDialog = true;\n            this.postToLoggerAPI({\n              phone: this.bookingDetails.user.contact,\n              refId: this.bookingId,\n              error: this.invalidSMSMsg,\n              icon: \"logout\",\n              statusText:\n                \"Error occured while checking out using SMS - \" + this.smsText,\n            });\n          }\n        } catch (error) {\n          console.log(error);\n        }\n      }\n    },\n    getMobileOperatingSystem() {\n      var userAgent = navigator.userAgent || navigator.vendor || window.opera;\n      // Windows Phone must come first because its UA also contains \"Android\"\n      if (/windows phone/i.test(userAgent)) {\n        return \"Windows Phone\";\n      }\n\n      if (/android/i.test(userAgent)) {\n        return \"Android\";\n      }\n\n      // iOS detection from: http://stackoverflow.com/a/9039885/177710\n      if (/iPad|iPhone|iPod/.test(userAgent) && !window.MSStream) {\n        return \"iOS\";\n      }\n      return \"unknown\";\n    },\n    getExitIcon(exitId) {\n      let exitDetails = this.bookingDetails.exitOptions.find(\n        (p) => p.techType == exitId\n      );\n      return exitDetails.icon;\n    },\n    getExitText(exitId) {\n      let exitDetails = this.bookingDetails.exitOptions.find(\n        (p) => p.techType == exitId\n      );\n      return exitDetails.name;\n    },\n    openDialerApp() {\n      this.postToLoggerAPI({\n        phone: this.bookingDetails.user.contact,\n        refId: this.bookingId,\n        statusText: \"Parker clicked on dialer submit btn.\",\n      });\n      this.dialerDialog = false;\n      var url = \"tel:\" + this.bookingDetails.zone.ToMobileNo;\n      window.location.href = url;\n      if (this.getMobileOperatingSystem() == \"Android\") {\n        window.close();\n      }\n    },\n    turnCameraOn() {\n      this.camera = \"auto\";\n    },\n\n    turnCameraOff() {\n      this.camera = \"off\";\n    },\n    validateDecodedString(str) {\n      let validateDivrtStr = str.startsWith(\"divrt://\");\n      let validateMMID = str.split(\"/\")[2] == this.bookingDetails.booking.mmid;\n      let validateMajorId =\n        str.split(\"/\")[3] == this.bookingDetails.booking.majorid;\n      let validateMinorId = this.bookingDetails.booking.minor_ids.includes(\n        str.split(\"/\")[4]\n      );\n      return (\n        validateDivrtStr && validateMMID && validateMajorId && validateMinorId\n      );\n    },\n    async onDecode(decodedString) {\n      var self = this;\n      this.qrCode = decodedString;\n      this.cameraStatus = false;\n      try {\n        var preValidateQrResult = await APIHelper(\n          \"POST\",\n          \"/api/v1/checkout/\" + this.bookingId,\n          {\n            beaconId: decodedString,\n            preValidate: 1,\n            zid: this.bookingDetails.zone.locationCode\n          }\n        );\n        if (preValidateQrResult.data.status) {\n          try {\n            self.$router.replace({ path: \"/success\" });\n            var qrResult = await APIHelper(\n              \"POST\",\n              \"/api/v1/checkout/\" + this.bookingId,\n              {\n                beaconId: decodedString,\n                zid: this.bookingDetails.zone.locationCode\n              }\n            );\n            if (qrResult.data.status) {\n              this.postToLoggerAPI({\n                phone: self.bookingDetails.user.contact,\n                refId: self.bookingId,\n                icon: \"logout\",\n                statusText:\n                  \"Parker successfully checked out using QR - \" + decodedString,\n              });\n              this.$store.commit(\"SET_CHECKOUT\", true);\n            } else {\n              this.invalidQRMsg = qrResult?.data?.message\n                ? qrResult.data.message\n                : \"Please try again\";\n              this.invalidQRDialog = true;\n              this.postToLoggerAPI({\n                phone: self.bookingDetails.user.contact,\n                refId: self.bookingId,\n                error: self.invalidQRMsg,\n                icon: \"logout\",\n                statusText:\n                  \"Error Occured while checking out using QR - \" +\n                  decodedString,\n              });\n            }\n          } catch (error) {\n            console.log(error);\n          }\n        } else {\n          this.invalidQRMsg = preValidateQrResult?.data?.message\n            ? preValidateQrResult.data.message\n            : \"Please try again\";\n          this.invalidQRDialog = true;\n          this.postToLoggerAPI({\n            phone: self.bookingDetails.user.contact,\n            refId: self.bookingId,\n            icon: \"logout\",\n            error: self.invalidQRMsg,\n            statusText:\n              \"Error Occured while checking out using QR - \" + decodedString,\n          });\n        }\n      } catch (error) {\n        console.log(error);\n      }\n    },\n    async onInit(promise) {\n      try {\n        await promise;\n      } catch (error) {\n        if (error.name === \"NotAllowedError\") {\n          this.invalidQRMsg = \"Please grant camera access permisson\";\n        } else if (error.name === \"NotFoundError\") {\n          this.invalidQRMsg = \"No camera found on this device\";\n        } else if (error.name === \"NotSupportedError\") {\n          this.invalidQRMsg = \"Secure context required (HTTPS, localhost)\";\n        } else if (error.name === \"NotReadableError\") {\n          this.invalidQRMsg = \"Is the camera already in use? Please check.\";\n        } else if (error.name === \"OverconstrainedError\") {\n          this.invalidQRMsg = \"Installed camera is not suitable\";\n        } else if (error.name === \"StreamApiNotSupportedError\") {\n          this.invalidQRMsg = \"Stream API is not supported in this browser\";\n        }\n        this.invalidQRDialog = true;\n      }\n    },\n    async onValidateText() {\n      this.validateBookingPending = true;\n      let result = await this.validateBooking(this.validateBookingTxt);\n      if (!result.data.status) {\n        this.invalidSMSMsg = result?.data?.message\n          ? result.data.message\n          : \"Validation not recognized. Please try again\";\n        this.invalidSMSDialog = true;\n        this.validateBookingPending = false;\n        this.postToLoggerAPI({\n          phone: this.bookingDetails.user.contact,\n          refId: this.bookingId,\n          error: this.invalidSMSMsg,\n          icon: \"redeem\",\n          statusText:\n            \"Error in validating the session on entering validation code - \" +\n            this.validateBookingTxt,\n        });\n      } else {\n        this.postToLoggerAPI({\n          phone: this.bookingDetails.user.contact,\n          refId: this.bookingId,\n          icon: \"redeem\",\n          statusText:\n            \"Parker validated the session successfully by entering validation code - \" +\n            this.validateBookingTxt,\n        });\n        this.validateBookingPending = false;\n        this.validateBookingDialog = false;\n        this.$store.commit(\n          \"SET_VALIDATED_MERCHANT\",\n          result?.data?.merchantName\n        );\n        this.$router.replace({ path: \"/validatesuccess\" });\n      }\n    },\n    async validateBooking(code) {\n      try {\n        let validateResult = await APIHelper(\n          \"POST\",\n          \"/api/v1/validate/\" + this.bookingId,\n          {\n            coupon: code,\n            zid: this.bookingDetails.zone.locationCode\n          }\n        );\n        return validateResult;\n      } catch (error) {\n        console.log(error);\n        return error;\n      }\n    },\n    async openScanValidationCode() {\n      this.validateBookingDialog = false;\n      this.validateBookingTxt = \"\";\n      this.validateQRCodeDialog = true;\n      this.validationCameraStatus = true;\n    },\n    async onValidateQRCode(decodedString) {\n      this.validationCameraStatus = false;\n      this.validateQRCodePending = true;\n      try {\n        let result = await this.validateBooking(decodedString);\n        if (!result.data.status) {\n          this.invalidValidationQRMsg = result?.data?.message\n            ? result.data.message\n            : \"Validation not recognized. Please try again\";\n          this.invalidValidationQRDialog = true;\n          this.validateQRCodePending = false;\n          this.postToLoggerAPI({\n            phone: this.bookingDetails.user.contact,\n            refId: this.bookingId,\n            error: this.invalidQRMsg,\n            icon: \"redeem\",\n            statusText:\n              \"Error in validating the session on scanning validation QR - \" +\n              decodedString,\n          });\n        } else {\n          this.postToLoggerAPI({\n            phone: this.bookingDetails.user.contact,\n            refId: this.bookingId,\n            icon: \"redeem\",\n            statusText:\n              \"Parker validated the session successfully by scanning validation QR - \" +\n              decodedString,\n          });\n          this.validateQRCodePending = false;\n          this.validateQRCodeDialog = false;\n          this.$store.commit(\n            \"SET_VALIDATED_MERCHANT\",\n            result?.data?.merchantName\n          );\n          this.$router.replace({ path: \"/validatesuccess\" });\n        }\n      } catch (error) {\n        console.log(error);\n      }\n    },\n  },\n};\n</script>\n<style lang=\"less\">\n.booking_header {\n  position: absolute;\n  bottom: 72px;\n  left: 16px;\n  font-size: 18px;\n  font-weight: bolder;\n}\n\n.time_ago {\n  font-size: 22px;\n  font-weight: 600;\n  line-height: 2.5rem;\n  letter-spacing: 0.0073529412em !important;\n}\n\n.time_ago_context {\n  font-size: 16px;\n  font-weight: 500;\n}\n\n.validated_time {\n  font-size: 13px;\n  font-weight: 500;\n}\n\n.booking_divider {\n  border-color: white !important;\n  margin-top: 12px;\n}\n\n.booking_divider_div {\n  position: absolute;\n  bottom: 60px;\n  width: 100%;\n}\n\n.booking_content {\n  position: absolute !important;\n  bottom: 18px !important;\n  left: 16px !important;\n  font-size: 13px !important;\n  font-weight: normal !important;\n}\n\n.add_credit_card_btn {\n  // border-radius: 30px;\n  width: 100%;\n  background-color: #f2555c !important;\n  font-size: 18px !important;\n  letter-spacing: normal !important;\n  height: 37px !important;\n}\n\n.validation-pending {\n  position: absolute !important;\n  left: 50%;\n  top: 50%;\n  -webkit-transform: translateX(-50%);\n  transform: translateX(-50%);\n}\n\n.qr_text {\n  font-size: 13px;\n}\n\n.exit_dialog_btn {\n  width: 100%;\n  background-color: #f2555c !important;\n  font-size: 18px !important;\n  font-weight: 700 !important;\n  letter-spacing: normal !important;\n  height: 50px !important;\n}\n\n.sms-input input {\n  font-size: 36px;\n  font-weight: 500;\n  color: #44515a !important;\n}\n\n.v-text-field--enclosed .v-input__append-inner {\n  margin-top: 26px !important;\n}\n\n.exit-option-text {\n  font-size: 14px;\n}\n\n.sms-caption {\n  font-size: 0.75rem !important;\n  font-weight: 400;\n  line-height: 1.25rem;\n  letter-spacing: 0.0333333333em !important;\n}\n\n.qrcode-stream-wrapper video {\n  max-height: 300px;\n}\n\n.counter-content-position {\n  position: relative;\n}\n\n.grace-period-image {\n  position: absolute !important;\n  right: -51px;\n  bottom: 5px;\n}\n\n.fabIcon {\n  animation: pulse 2s infinite;\n  box-shadow: 0 0 0 0 rgba(0, 0, 0, 1);\n  transform: scale(1);\n\n  @keyframes pulse {\n    0% {\n      transform: scale(0.95);\n      box-shadow: 0 0 0 0 rgba(0, 0, 0, 0.7);\n    }\n\n    70% {\n      transform: scale(1);\n      box-shadow: 0 0 0 10px rgba(0, 0, 0, 0);\n    }\n\n    100% {\n      transform: scale(0.95);\n      box-shadow: 0 0 0 0 rgba(0, 0, 0, 0);\n    }\n  }\n}\n\n#qr-code-full-region__dashboard {\n  display: none;\n}\n\n#qr-code-full-region>video {\n  width: 100% !important;\n}\n\n#validation-qr-code>video {\n  width: 100% !important;\n}\n\n#qr-code-full-region img {\n  display: none;\n}\n\n.no-upper-case {\n  text-transform: unset !important;\n}\n\n#apple-pay-button {\n  height: 48px;\n  width: 100%;\n  display: inline-block;\n  -webkit-appearance: -apple-pay-button;\n  -apple-pay-button-type: plain;\n  -apple-pay-button-style: black;\n}\n</style>"]}]}