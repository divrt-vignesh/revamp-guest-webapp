{"remainingRequest":"/home/vignesh/DIVRT/guest-webapp/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/vignesh/DIVRT/guest-webapp/src/views/UnpaidExit.vue?vue&type=style&index=0&lang=less&","dependencies":[{"path":"/home/vignesh/DIVRT/guest-webapp/src/views/UnpaidExit.vue","mtime":1678169106677},{"path":"/home/vignesh/DIVRT/guest-webapp/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vignesh/DIVRT/guest-webapp/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/home/vignesh/DIVRT/guest-webapp/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/home/vignesh/DIVRT/guest-webapp/node_modules/less-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vignesh/DIVRT/guest-webapp/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vignesh/DIVRT/guest-webapp/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5yZWNlaXB0X2J0biB7CiAgYmFja2dyb3VuZC1jb2xvcjogI2YyNTU1YyAhaW1wb3J0YW50OwogIHdpZHRoOiAxMDAlOwogIGZvbnQtc2l6ZTogMThweCAhaW1wb3J0YW50OwogIGZvbnQtd2VpZ2h0OiA3MDAgIWltcG9ydGFudDsKICBoZWlnaHQ6IDUwcHggIWltcG9ydGFudDsKICBsZXR0ZXItc3BhY2luZzogbm9ybWFsICFpbXBvcnRhbnQ7Cn0KLnRoYW5reW91X2hlYWRlciB7CiAgcG9zaXRpb246IGFic29sdXRlOwogIGJvdHRvbTogMjBweDsKICBsZWZ0OiAxNnB4OwogIGZvbnQtc2l6ZTogMjRweDsKICBmb250LXdlaWdodDogYm9sZGVyOwp9Ci5ib29raW5nX2RhdGUgewogIGZvbnQtd2VpZ2h0OiBub3JtYWw7CiAgZm9udC1zaXplOiAxM3B4OwogIGNvbG9yOiAjM2QzZjNjICFpbXBvcnRhbnQ7Cn0KLmJvb2tpbmdfZGF0ZV9oZWFkZXIgewogIGNvbG9yOiAjM2QzZjNjICFpbXBvcnRhbnQ7CiAgZm9udC13ZWlnaHQ6IGJvbGQ7CiAgZm9udC1zaXplOiAxNHB4Owp9Ci50b3RhbC1wYXJraW5nIHsKICBjb2xvcjogIzNkM2YzYzsKICBmb250LXNpemU6IDAuODc1cmVtICFpbXBvcnRhbnQ7CiAgZm9udC13ZWlnaHQ6IDUwMDsKICBsaW5lLWhlaWdodDogMi4yNXJlbTsKICBsZXR0ZXItc3BhY2luZzogMC4wODkyODU3MTQzZW0gIWltcG9ydGFudDsKICB0ZXh0LXRyYW5zZm9ybTogdXBwZXJjYXNlICFpbXBvcnRhbnQ7Cn0KLmFtb3VudC10ZXh0IHsKICBjb2xvcjogIzNkM2YzYzsKICBmb250LXNpemU6IDM0cHg7Cn0KLmFtb3VudC1jb250ZW50LXBvc2l0aW9uIHsKICBwb3NpdGlvbjogcmVsYXRpdmU7Cn0KLnZhbGlkYXRlLWltYWdlIHsKICBwb3NpdGlvbjogYWJzb2x1dGUgIWltcG9ydGFudDsKICByaWdodDogMDsKICBib3R0b206IDIwcHg7Cn0K"},{"version":3,"sources":["UnpaidExit.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+QA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"UnpaidExit.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <v-container class=\"pa-4\" fluid>\n    <v-row class=\"text-center\" no-gutters>\n      <v-col cols=\"12\">\n        <v-img\n          alt=\"PARKING.COM\"\n          class=\"my-3\"\n          height=\"42\"\n          contain\n          src=\"../assets/logo_huge_drk.png\"\n        />\n      </v-col>\n    </v-row>\n    <v-row no-gutters>\n      <v-col cols=\"12\">\n        <v-card class=\"mx-auto rounded-lg\" max-width=\"374\">\n          <template slot=\"progress\">\n            <v-progress-linear\n              color=\"red\"\n              height=\"10\"\n              indeterminate\n            ></v-progress-linear>\n          </template>\n          <div style=\"position: relative\">\n            <v-img\n              class=\"rounded-t-lg\"\n              max-height=\"260px\"\n              style=\"filter: brightness(50%)\"\n              :src=\"\n                bookingDetails.hasOwnProperty('zone') && bookingDetails.zone.image != '' && bookingDetails.zone.image != null\n                  ? bookingDetails.zone.image\n                  : zoneImgURL\n              \"\n              :lazy-src=\"\n                bookingDetails.hasOwnProperty('zone') && bookingDetails.zone.image != '' && bookingDetails.zone.image != null\n                  ? bookingDetails.zone.image\n                  : zoneImgURL\n              \"\n              alt=\"Parking.com garage\"\n            >\n              <template v-slot:placeholder>\n                <v-row\n                  no-gutters\n                  class=\"fill-height ma-0\"\n                  align=\"center\"\n                  justify=\"center\"\n                >\n                  <v-progress-circular\n                    indeterminate\n                    color=\"grey lighten-5\"\n                  ></v-progress-circular>\n                </v-row>\n              </template>\n            </v-img>\n            <!-- <div class=\"thankyou_header white--text\">THANK YOU!</div> -->\n          </div>\n          <v-card-title class=\"pa-1\"></v-card-title>\n          <v-card-text class=\"pb-1\">\n            <v-row no-gutters class=\"mx-0\">\n              <v-col class=\"pa-1\">\n                <p class=\"black--text\">\n                  {{\n                    bookingDetails.hasOwnProperty(\"booking\")\n                      ? bookingDetails.booking.header\n                      : \"\"\n                  }}\n                </p>\n              </v-col>\n            </v-row>\n            <v-row no-gutters>\n            <v-col cols=\"\" class=\"align-self-center text-center\"  v-show=\"\n                    bookingDetails.hasOwnProperty('booking') &&\n                    bookingDetails.booking.hasOwnProperty('TypeOfBooking') &&\n                    bookingDetails.booking.TypeOfBooking == 'Monthly'\n                  \">\n                <v-btn\n                  class=\"elevation-0 white--text\"\n                  tile\n                  x-small\n                  color=\"green darken-2\"\n                  >Monthly</v-btn\n                >\n              </v-col>\n              <v-col cols=\"\" class=\"align-self-center text-center\"  v-show=\"\n                    bookingDetails.hasOwnProperty('booking') &&\n                    bookingDetails.booking.hasOwnProperty('TypeOfBooking') &&\n                    bookingDetails.booking.TypeOfBooking == 'Employee'\n                  \">\n                <v-btn\n                  class=\"elevation-0 white--text\"\n                  tile\n                  x-small\n                  color=\"green darken-2\"\n                  >Employee</v-btn\n                >\n              </v-col>\n            </v-row>\n            <v-row no-gutters class=\"mt-1 mx-0\" v-if=\"bookingDetails.hasOwnProperty('booking') && bookingDetails.hasOwnProperty('zone') && bookingDetails.booking.vehicleNo != null && bookingDetails.booking.vehicleNo != '' && bookingDetails.zone.isGated == '0' \">\n              <v-col cols=\"4\" class=\"text-left pa-1\">\n                <p class=\"booking_date_header mb-0\">License Plate:</p>\n              </v-col>\n              <v-col class=\"text-right pa-1\">\n                <p class=\"booking_date mb-0\">\n                 {{bookingDetails.hasOwnProperty(\"booking\") ? bookingDetails.booking.vehicleNo : \"\"}}\n                </p>\n              </v-col>\n            </v-row>\n            <v-row no-gutters class=\"mt-1 mx-0\">\n              <v-col cols=\"4\" class=\"text-left pa-1\">\n                <p class=\"booking_date_header mb-0\">Entered At:</p>\n              </v-col>\n              <v-col class=\"text-right pa-1\">\n                <p class=\"booking_date mb-0\">\n                  {{\n                    bookingDetails.hasOwnProperty(\"booking\") &&\n                    bookingDetails.booking.hasOwnProperty(\"entrytime\")\n                      ? formatDateTime(bookingDetails.booking.entrytime)\n                      : \"\"\n                  }}\n                </p>\n              </v-col>\n            </v-row>\n            <v-row no-gutters class=\"mx-0\">\n              <v-col cols=\"4\" class=\"text-left pa-1\">\n                <p class=\"booking_date_header\">Exited At:</p>\n              </v-col>\n              <v-col class=\"text-right pa-1\">\n                <p class=\"booking_date\">\n                  {{\n                    bookingDetails.hasOwnProperty(\"booking\") &&\n                    bookingDetails.booking.hasOwnProperty(\"exittime\")\n                      ? formatDateTime(bookingDetails.booking.exittime)\n                      : \"\"\n                  }}\n                </p>\n              </v-col>\n            </v-row>\n            <v-row no-gutters class=\"mx-0\">\n              <v-col\n                  cols=\"12\"\n                  class=\"mt-4 text-center color-black\"\n                  style=\"font-size: 12px\"\n                >\n                  <p>\n                   A credit card was not added prior to exit. Vehicle is in violation and may be cited.\n                  </p>\n                </v-col>\n            </v-row>\n          </v-card-text>\n        </v-card>\n      </v-col>\n    </v-row>\n  </v-container>\n</template>\n\n<script>\nimport APIHelper from \"../apiHelper\";\n// import axios from \"axios\";\n// import loggerHelper from \"../loggerHelper\";\nimport { mapGetters } from \"vuex\";\nexport default {\n  name: \"UnpaidExit\",\n  data: () => ({\n    pageHeight: window.outerHeight,\n  }),\n  computed: {\n    ...mapGetters({\n      bookingId: \"getterBookingId\",\n      bookingDetails: \"getterBookingDetails\",\n    }),\n  },\n  beforeRouteEnter(to, from, next) {\n    next(async (vm) => {\n      vm.$vuetify.goTo(0);\n      if (vm.bookingId != null) {\n        try {\n          var bookingDetails = await APIHelper(\n            \"GET\",\n            \"/api/v1/booking/config/\" + vm.bookingId\n          );\n          vm.$store.commit(\n            \"SET_BOOKING_DETAILS\",\n            bookingDetails.data?.data ? bookingDetails.data.data : null\n          );\n        } catch (error) {\n          console.log(error);\n        }\n      }\n    });\n  },\n  mounted() {},\n  methods: {\n    navigateToReceipt() {\n      this.$router.push({ path: \"/receipt\" });\n    },\n    formatDateTime(time) {\n      let utcDate = new Date(time * 1000).toUTCString(); //\"Wed, 27 Jan 2021 13:59:04 GMT\"\n      let month = utcDate.split(\",\")[1].split(\" \")[2]; // Jan\n      let date = utcDate.split(\",\")[1].split(\" \")[1]; // 27\n      let hr = utcDate.split(\",\")[1].split(\" \")[4].split(\":\")[0]; // 13\n      let min = utcDate.split(\",\")[1].split(\" \")[4].split(\":\")[1]; //59\n      let formatHr = Number(hr) > 12 ? Number(hr) - 12 : Number(hr); // 1\n      formatHr = Number(formatHr) >= 10 ? Number(formatHr) : \"0\" + formatHr; //01\n      let amOrpm = Number(hr) >= 12 ? \"PM\" : \"AM\"; //PM\n      return month + \" \" + date + \", \" + formatHr + \":\" + min + \" \" + amOrpm; //Jan 27, 01:59 PM\n    },\n    checkReservationEndDate() {\n      return this.bookingDetails?.booking?.revEnd &&\n        this.bookingDetails.booking.revEnd * 1000 - new Date().getTime() > 0\n        ? true\n        : false;\n    },\n    async reEnter() {\n      if (this.bookingId != null) {\n        try {\n          var bDetails = await APIHelper(\n            \"GET\",\n            \"/api/v1/booking/config/\" + this.bookingId + \"?reEnter=1\"\n          );\n          this.$store.commit(\n            \"SET_BOOKING_DETAILS\",\n            bDetails.data?.data ? bDetails.data.data : null\n          );\n          let bookingState = bDetails.data?.data?.booking?.state\n            ? bDetails.data.data.booking.state\n            : null;\n          if (bookingState == 8 || bookingState == 10 || bookingState == 11) {\n            this.$router.replace({ path: \"/checkout\" });\n          } else if (bookingState == 2) {\n            this.$router.replace({ path: \"/checkedin\" });\n          } else if (bookingState == 0) {\n            this.$router.replace({ path: \"/checkin\" });\n          } else {\n            setTimeout(async () => {\n              await this.getBookingState();\n            }, 4000);\n          }\n        } catch (error) {\n          console.log(error);\n        }\n      }\n    },\n    navigateToParkingSignUpPage() {\n      // var self = this;\n      let env = this.bookingDetails?.booking?.env_overRide;\n      let url = \"\";\n      switch (env) {\n        case \"qa\":\n          url = \"https://guest:guest-test@qa.parking.com/sign-up\";\n          break;\n        case \"uat\":\n          url = \"https://uat.parking.com/sign-up\";\n          break;\n        case \"prod\":\n          url = \"https://parking.com/sign-up\";\n          break;\n      }\n      let email = this.bookingDetails?.user?.email;\n      let contact = this.bookingDetails?.user?.contact;\n      contact = contact.length > 10 ? contact.substring(contact.length -10) : contact;\n      let createAccUrl=url+'?email='+email+'&phone='+contact+'&orderId='+this.bookingDetails?.booking?.orderID\n      window.open(createAccUrl, \"_blank\", \"\", true);\n    },\n    // closeWindow(){\n    //   // window.open(window.location, '_self').close();\n    //   window.close();\n    // }\n  },\n};\n</script>\n<style lang=\"less\">\n.receipt_btn {\n  background-color: #f2555c !important;\n  width: 100%;\n  font-size: 18px !important;\n  font-weight: 700 !important;\n  height: 50px !important;\n  letter-spacing: normal !important;\n}\n.thankyou_header {\n  position: absolute;\n  bottom: 20px;\n  left: 16px;\n  font-size: 24px;\n  font-weight: bolder;\n}\n.booking_date {\n  font-weight: normal;\n  font-size: 13px;\n  color: #3d3f3c !important;\n}\n.booking_date_header {\n  color: #3d3f3c !important;\n  font-weight: bold;\n  font-size: 14px;\n}\n.total-parking {\n  color: #3d3f3c;\n  font-size: 0.875rem !important;\n  font-weight: 500;\n  line-height: 2.25rem;\n  letter-spacing: 0.0892857143em !important;\n  text-transform: uppercase !important;\n}\n.amount-text {\n  color: #3d3f3c;\n  font-size: 34px;\n}\n.amount-content-position {\n  position: relative;\n}\n.validate-image {\n  position: absolute !important;\n  right: 0;\n  bottom: 20px;\n}\n</style>\n"]}]}