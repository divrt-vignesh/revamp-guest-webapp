{"remainingRequest":"/home/vignesh/DIVRT/revamp-guest-webapp/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/vignesh/DIVRT/revamp-guest-webapp/src/views/information/CreateView.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/vignesh/DIVRT/revamp-guest-webapp/src/views/information/CreateView.vue","mtime":1688985113997},{"path":"/home/vignesh/DIVRT/revamp-guest-webapp/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vignesh/DIVRT/revamp-guest-webapp/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/vignesh/DIVRT/revamp-guest-webapp/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vignesh/DIVRT/revamp-guest-webapp/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCi8vIGltcG9ydCBWdWUgZnJvbSAidnVlIjsKaW1wb3J0IEVzdGltYXRlIGZyb20gJ0AvY29tcG9uZW50cy9Fc3RpbWF0ZS52dWUnOwppbXBvcnQgQVBJIGZyb20gJ0AvYXBpJzsKaW1wb3J0IENhbGVuZGFyIGZyb20gJ0AvdWlDb21wb25lbnRzL0NhbGVuZGFyL0NhbGVuZGFyLnZ1ZScKaW1wb3J0IHsgRXZlbnRCdXMgfSBmcm9tICJAL2xpYi9FdmVudEJ1cyI7CmltcG9ydCB7IG1hcEdldHRlcnMgfSBmcm9tICJ2dWV4IjsKaW1wb3J0IHsgYWRkTWludXRlcywgYWRkRGF5cywgYWRkSG91cnMgfSBmcm9tICJkYXRlLWZucyI7CmltcG9ydCB7IGZvcm1hdCwgaXNWYWxpZCB9IGZyb20gImRhdGUtZm5zIjsKaW1wb3J0ICJwcmltZXZ1ZS9yZXNvdXJjZXMvdGhlbWVzL3NhZ2EtYmx1ZS90aGVtZS5jc3MiICAgICAgIC8vdGhlbWUKaW1wb3J0ICJwcmltZXZ1ZS9yZXNvdXJjZXMvcHJpbWV2dWUubWluLmNzcyIgICAgICAgICAgICAgICAgIC8vY29yZSBjc3MKaW1wb3J0ICJwcmltZWljb25zL3ByaW1laWNvbnMuY3NzIiAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vaWNvbnMKaW1wb3J0IHsgZGF0ZVRvVGltZVpvbmVEYXRlIH0gZnJvbSAiQC91dGlscy9mb3JtYXREYXRlVGltZSI7Ci8vIGltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmltcG9ydCBTcGhlcmVQaG9uZU51bWJlcklucHV0IGZyb20gJ0AvdWlDb21wb25lbnRzL1NwaGVyZVBob25lTnVtYmVySW5wdXQvVnVlUGhvbmVOdW1iZXJJbnB1dCcKLy8gaW1wb3J0IFZ1ZVBob25lTnVtYmVySW5wdXQgZnJvbSAidnVlLXBob25lLW51bWJlci1pbnB1dCI7Ci8vIGltcG9ydCAidnVlLXBob25lLW51bWJlci1pbnB1dC9kaXN0L3Z1ZS1waG9uZS1udW1iZXItaW5wdXQuY3NzIjsKLy8gaW1wb3J0IG1vbWVudCBmcm9tICJtb21lbnQiOwovLyBWdWUudXNlKG1vbWVudCk7CmltcG9ydCBydWxlcyBmcm9tICJAL3V0aWxzL3J1bGVzIjsKZXhwb3J0IGRlZmF1bHQgewogICAgZGF0YTogKCkgPT4gKHsKICAgICAgICBkYXRlOiAiIiwKICAgICAgICB0aW1lOiAiIiwKICAgICAgICBvcGVuVGltZVBpY2tlcjogZmFsc2UsCiAgICAgICAgb3BlbkRhdGVQaWNrZXI6IGZhbHNlLAogICAgICAgIG1pblRpbWVEYXRlOiBudWxsLAogICAgICAgIG1heFRpbWVEYXRlOiBudWxsLAogICAgICAgIC8vIGlzUFFSRW5kUmVzZXJ2YXRpb246IHRydWUsCiAgICAgICAgY3VycmVudERhdGU6IGZvcm1hdChuZXcgRGF0ZSgpLCAneXl5eS1NTS1kZCcpLAogICAgICAgIGVkdEVudHJ5VGltZTogbnVsbCwKICAgICAgICBlZHRQaG9uZUlucHV0OiBmYWxzZSwKICAgICAgICBjb250YWN0RGlzYWJsZWQ6IGZhbHNlLAogICAgICAgIHNlbGVjdGVkUGxhdGU6ICIiLAogICAgICAgIHJlRW50ZXJQbGF0ZTogZmFsc2UsCiAgICAgICAgZWR0QmlkOiBudWxsLAogICAgICAgIGNvbmZpcm1DcmVhdGVTZXNzaW9uRGlhbG9nOiBmYWxzZSwKICAgICAgICBhZGRMaWNlbmNlUGxhdGVCdG5Mb2FkaW5nOiBmYWxzZSwKICAgICAgICBlcnJEaWFsb2c6IGZhbHNlLAogICAgICAgIGVyck1zZzogIiIsCiAgICAgICAgYWxlcnREaWFsb2c6IGZhbHNlLAogICAgICAgIGFsZXJ0TXNnOiAiIiwKICAgICAgICBzdG9wVGltZTogIiIsCiAgICAgICAgZXhpdFRpbWVTZWxlY3RlZDoge30sCiAgICAgICAgdGltZVBpY2tlckhyUmFuZ2U6IG51bGwsCiAgICAgICAgdGltZUV4Y2VlZGVkOiBmYWxzZSwKICAgICAgICB0aW1lUGlja2VyTWluUmFuZ2U6IG51bGwsCgogICAgICAgIGRpc2FibGVBZGRQYXltZW50QnRuOiBmYWxzZSwKICAgICAgICBtYXhEYXRlVGltZTogbnVsbCwKICAgICAgICBnZXRSYXRlQ2FsbDogZmFsc2UsCiAgICAgICAgZ2V0UmF0ZVRleHQ6ICIiLAogICAgICAgIFRpbWVtZW51OiBmYWxzZSwKICAgICAgICBzdGFydERhdGU6ICIiLAogICAgICAgIGVzdGltYXRlOiBudWxsLAogICAgICAgIGJlZm9yZUVzdGltYXRlOiBudWxsLAogICAgICAgIERhdGVtZW51OiBmYWxzZSwKICAgICAgICBleGl0RGF0ZTogbnVsbCwKICAgICAgICBkYXRlRm9ybWF0dGVkOiBudWxsLAogICAgICAgIHJ1bGVzOiBydWxlcywKICAgICAgICBpc0NvbnRhY3RWYWxpZDogdHJ1ZSwKICAgICAgICBsaWNlbmNlUGxhdGU6ICIiLAogICAgICAgIGNvbnRhY3RPYmo6IHt9LAogICAgICAgIGxvYWRpbmc6IGZhbHNlLAogICAgICAgIGNvbnRhY3RPcHRpb25zOiB7CiAgICAgICAgICAgIGNvbG9yOiAiIzAyODhEMSIsCiAgICAgICAgICAgIHZhbGlkQ29sb3I6ICIjMDI4OEQxIiwKICAgICAgICAgICAgY29udGFjdEJvcmRlclJhZGl1czogMCwKICAgICAgICAgICAgZXJyb3JDb2xvcjogIiNGRjUyNTIiLAogICAgICAgICAgICBkZWZhdWx0Q291bnRyeTogIlVTIiwKICAgICAgICAgICAgdHJhbnNsYXRpb25zOiB7CiAgICAgICAgICAgICAgICBwaG9uZU51bWJlckxhYmVsOiAiQ29udGFjdCBObyIsCiAgICAgICAgICAgIH0sCiAgICAgICAgfSwKICAgICAgICBhZGRQYXltZW50QnRuTG9hZGluZzogZmFsc2UsCiAgICB9KSwKICAgIGNvbXBvbmVudHM6IHsKICAgICAgICAvLyBWdWVQaG9uZU51bWJlcklucHV0LAogICAgICAgIENhbGVuZGFyLCBFc3RpbWF0ZSwgU3BoZXJlUGhvbmVOdW1iZXJJbnB1dAogICAgfSwKICAgIGJlZm9yZVJvdXRlRW50ZXIodG8sIGZyb20sIG5leHQpIHsKICAgICAgICBuZXh0KGFzeW5jICh2bSkgPT4gewogICAgICAgICAgICBjb25zdCBwYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHdpbmRvdy5sb2NhdGlvbi5zZWFyY2gpCiAgICAgICAgICAgIGxldCBzZWFyY2hQYXJhbUtleSA9IHBhcmFtcy5oYXMoJ3pjb2RlJykgIT09IG51bGwgPyAnP3pjb2RlJyA6IHBhcmFtcy5oYXMoJ2dhdGVJZCcpICE9PSBudWxsID8gJz9nYXRlSWQnIDogIiI7CiAgICAgICAgICAgIGxldCBzZWFyY2hQYXJhbVZhbHVlID0gcGFyYW1zLmhhcygnemNvZGUnKSAhPT0gbnVsbCA/IHBhcmFtcy5nZXQoJ3pjb2RlJykgOiBwYXJhbXMuaGFzKCdnYXRlSWQnKSAhPT0gbnVsbCA/IHBhcmFtcy5nZXQoJ2dhdGVJZCcpIDogIiI7CiAgICAgICAgICAgIHN3aXRjaCAoc2VhcmNoUGFyYW1LZXkpIHsKICAgICAgICAgICAgICAgIGNhc2UgIj96Y29kZSI6CiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdm0uZ2V0Wm9uZURldGFpbHMoc2VhcmNoUGFyYW1LZXksIHNlYXJjaFBhcmFtVmFsdWUpOwogICAgICAgICAgICAgICAgICAgIGlmICh2bS5pc1BRUkVuZFJlc2VydmF0aW9uKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHZtLmdldE9uRGVtYW5kWm9uZURldGFpbHMoc2VhcmNoUGFyYW1WYWx1ZSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgY2FzZSAiP2dhdGVpZCI6CiAgICAgICAgICAgICAgICAgICAgLy9hd2FpdCBzZWxmLmdldFpvbmVEZXRhaWxzKHNlYXJjaFBhcmFtS2V5LCBzZWFyY2hQYXJhbVZhbHVlKTsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAodm0uaXNQUVJFbmRSZXNlcnZhdGlvbikgewogICAgICAgICAgICAgICAgdm0uY29udGFjdE9iaiA9CiAgICAgICAgICAgICAgICAgICAgdm0uY2FzaW5vRGV0YWlscyAhPSBudWxsICYmCiAgICAgICAgICAgICAgICAgICAgICAgIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKHZtLmNhc2lub0RldGFpbHMsICJ1c2VyRGV0YWlsIikgJiYKICAgICAgICAgICAgICAgICAgICAgICAgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwodm0uY2FzaW5vRGV0YWlscz8udXNlckRldGFpbCwgImNvbnRhY3QiKSAmJgogICAgICAgICAgICAgICAgICAgICAgICB2bS5jYXNpbm9EZXRhaWxzPy51c2VyRGV0YWlsPy5jb250YWN0ICE9IHVuZGVmaW5lZCAmJgogICAgICAgICAgICAgICAgICAgICAgICB2bS5jYXNpbm9EZXRhaWxzPy51c2VyRGV0YWlsPy5jb250YWN0ICE9IG51bGwKICAgICAgICAgICAgICAgICAgICAgICAgPyBPYmplY3QuYXNzaWduKHZtLmNvbnRhY3RPYmosIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50cnlDb2RlOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZtLmNhc2lub0RldGFpbHM/LnVzZXJEZXRhaWw/LmNvbnRhY3Quc2xpY2UoMCwgLTEwKSA9PSAiKzkxIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/ICJJTiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiB2bS5jYXNpbm9EZXRhaWxzPy51c2VyRGV0YWlsPy5jb250YWN0LnNsaWNlKDAsIC0xMCkgPT0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICIrMSIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gIlVTIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiAiIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBob25lTnVtYmVyOiB2bS5jYXNpbm9EZXRhaWxzPy51c2VyRGV0YWlsPy5jb250YWN0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0dGVkTnVtYmVyOiAiKyIgKyB2bS5jYXNpbm9EZXRhaWxzLnVzZXJEZXRhaWwuY29udGFjdCwKICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgOiB7fTsKICAgICAgICAgICAgICAgIHZtLmxpY2VuY2VQbGF0ZSA9IHZtLmNhc2lub0RldGFpbHM/LnVzZXJEZXRhaWwucGxhdGUKICAgICAgICAgICAgICAgICAgICA/IHZtLmNhc2lub0RldGFpbHM/LnVzZXJEZXRhaWwucGxhdGUKICAgICAgICAgICAgICAgICAgICA6ICIiOwogICAgICAgICAgICAgICAgaWYgKHdpbmRvdy5sb2NhdGlvbi5ocmVmLmluY2x1ZGVzKCdiaWQnKSkgewogICAgICAgICAgICAgICAgICAgIGxldCBocmVmUGFyYW1zID0gd2luZG93LmxvY2F0aW9uLmhyZWYuc3BsaXQoJ2NyZWF0ZXNlc3Npb24nKTsKICAgICAgICAgICAgICAgICAgICBsZXQgcGFyYW1BcnJheSA9IGhyZWZQYXJhbXNbMV0uc3BsaXQoJyYnKQogICAgICAgICAgICAgICAgICAgIGxldCBwaG9uZVBhcmFtID0gcGFyYW1BcnJheS5sZW5ndGggPj0gMSA/IHBhcmFtQXJyYXlbMF0uc3BsaXQoJz0nKVsxXSA6ICIiOwogICAgICAgICAgICAgICAgICAgIGxldCBiaWRQYXJhbSA9IHBhcmFtQXJyYXkubGVuZ3RoID49IDIgPyBwYXJhbUFycmF5WzFdLnNwbGl0KCc9JylbMV0gOiAiIjsKICAgICAgICAgICAgICAgICAgICBsZXQgcGxhdGVQYXJhbSA9IHBhcmFtQXJyYXkubGVuZ3RoID49IDMgPyBwYXJhbUFycmF5WzJdLnNwbGl0KCc9JylbMV0gOiAiIjsKICAgICAgICAgICAgICAgICAgICBsZXQgZW50cnl0aW1lcGFyYW0gPSBwYXJhbUFycmF5Lmxlbmd0aCA+PSA0ID8gcGFyYW1BcnJheVszXS5zcGxpdCgnPScpWzFdIDogIiI7ICAgICAgICAgIC8vIHZtLmNvbnRhY3RPYmoucGhvbmVOdW1iZXIgPSBwaG9uZVBhcmFtOwogICAgICAgICAgICAgICAgICAgIHZtLmVkdEVudHJ5VGltZSA9IGVudHJ5dGltZXBhcmFtICE9IG51bGwgJiYgZW50cnl0aW1lcGFyYW0gIT09ICIiICYmIGVudHJ5dGltZXBhcmFtICE9IHVuZGVmaW5lZCA/IGZvcm1hdChuZXcgRGF0ZSh2bS5mb3JtYXRFeGl0RGF0ZVRpbWUoZW50cnl0aW1lcGFyYW0sICdkYXRlJykpLCAieXl5eS1NTS1kZCdUJ0hIOm1tOnNzIikgOiBmb3JtYXQoZGF0ZVRvVGltZVpvbmVEYXRlKG5ldyBEYXRlKCksIHZtLnpvbmVEZXRhaWxzLnRpbWV6b25lKSwgInl5eXktTU0tZGQnVCdISDptbTpzcyIpCiAgICAgICAgICAgICAgICAgICAgdm0ubGljZW5jZVBsYXRlID0gcGxhdGVQYXJhbTsKICAgICAgICAgICAgICAgICAgICB2bS5lZHRCaWQgPSBiaWRQYXJhbTsKICAgICAgICAgICAgICAgICAgICBsZXQgZ3Vlc3RDb250YWN0ID0gcGhvbmVQYXJhbSA/IHsKICAgICAgICAgICAgICAgICAgICAgICAgY291bnRyeUNvZGU6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwaG9uZVBhcmFtLnNsaWNlKDAsIC0xMCkgPT0gIjkxIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gIklOIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogcGhvbmVQYXJhbS5zbGljZSgwLCAtMTApID09ICIxIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/ICJVUyIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiAiIiwKICAgICAgICAgICAgICAgICAgICAgICAgcGhvbmVOdW1iZXI6IHBob25lUGFyYW0sCiAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1hdHRlZE51bWJlcjogIisiICsgcGhvbmVQYXJhbSwKICAgICAgICAgICAgICAgICAgICB9IDogdm0uY29udGFjdE9iajsKICAgICAgICAgICAgICAgICAgICBpZiAocGhvbmVQYXJhbSAhPT0gIiIgJiYgcGhvbmVQYXJhbSAhPT0gbnVsbCAmJiBwaG9uZVBhcmFtICE9IHVuZGVmaW5lZCkgewogICAgICAgICAgICAgICAgICAgICAgICB2bS5lZHRQaG9uZUlucHV0ID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgdm0uY29udGFjdE9iaiA9IE9iamVjdC5hc3NpZ24oe30sIGd1ZXN0Q29udGFjdCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHZtLmNvbnRhY3REaXNhYmxlZCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIHZtLmNvbnRhY3RPYmouaXNWYWxpZCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGxldCBjb21taXREYXRhID0gewogICAgICAgICAgICAgICAgICAgICAgICBwbGF0ZTogdm0ubGljZW5jZVBsYXRlLAogICAgICAgICAgICAgICAgICAgICAgICBjb250YWN0OiB2bS5jb250YWN0T2JqPy5mb3JtYXR0ZWROdW1iZXIsCiAgICAgICAgICAgICAgICAgICAgICAgIGJpZDogdm0uZWR0QmlkLAogICAgICAgICAgICAgICAgICAgICAgICBlbnRyeXRpbWU6IHZtLmVkdEVudHJ5VGltZSwKICAgICAgICAgICAgICAgICAgICAgICAgZWR0UGFyYW1zOiBocmVmUGFyYW1zWzFdCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHZtLiRzdG9yZS5jb21taXQoIlNFVF9DQVNJTk9fVVNFUkRFVEFJTFMiLCBjb21taXREYXRhKTsKICAgICAgICAgICAgICAgICAgICB2bS4kc3RvcmUuY29tbWl0KCJTRVRfVEVNUExBVEVfRkxBR1MiLCAnYXRsYW50aWMtZmxhZycpOwoKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIHZtLmVkdFBob25lSW5wdXQgPSBmYWxzZTsKICAgICAgICAgICAgfQogICAgICAgIH0pOwogICAgfSwKICAgIHdhdGNoOiB7CiAgICAgICAgdGltZShuZXdWYWwsIG9sZFZhbCkgewogICAgICAgICAgICBpZiAob2xkVmFsICE9IG51bGwgJiYgbmV3VmFsICE9IG51bGwgJiYgb2xkVmFsICE9IG5ld1ZhbCAmJiBvbGRWYWwgIT0gIiIgJiYgbmV3VmFsICE9ICIiICYmIChpc1ZhbGlkKG5ld1ZhbCkpKSB7CiAgICAgICAgICAgICAgICB0aGlzLnJvdW5kKG5ld1ZhbCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgLy8gdGhpcy5zZXRUaW1lUGlja2VyKG5ld1ZhbCk7CiAgICAgICAgfSwKICAgIH0sCiAgICBjb21wdXRlZDogewogICAgICAgIHpvbmVOYW1lKCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy5pc1BRUkVuZFJlc2VydmF0aW9uID8gdGhpcy5vbkRlbWFuZFpvbmVEZXRhaWxzPy5uYW1lCiAgICAgICAgICAgICAgICA/IHRoaXMub25EZW1hbmRab25lRGV0YWlscz8ubmFtZQogICAgICAgICAgICAgICAgOiAiIiA6IHRoaXMuem9uZURldGFpbHM/LnpvbmVOYW1lCiAgICAgICAgICAgICAgICA/IHRoaXMuem9uZURldGFpbHM/LnpvbmVOYW1lCiAgICAgICAgICAgICAgICA6ICIiCiAgICAgICAgfSwKICAgICAgICBmb3JtYXR0ZWREYXRlVGltZSgpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMudGltZSAhPT0gbnVsbCAmJiB0aGlzLnRpbWUgIT09IHVuZGVmaW5lZCAmJiB0aGlzLnRpbWUgIT09ICIiID8gZm9ybWF0KHRoaXMudGltZSwgJ2lpaSwgTExMIGRkJykgOiAiIgogICAgICAgIH0sCiAgICAgICAgZm9ybWF0dGVkWWVhcigpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMudGltZSAhPT0gbnVsbCAmJiB0aGlzLnRpbWUgIT09IHVuZGVmaW5lZCAmJiB0aGlzLnRpbWUgIT09ICIiID8gZm9ybWF0KHRoaXMudGltZSwgJ3l5eXknKSA6ICIiCiAgICAgICAgfSwKICAgICAgICBmb3JtYXR0ZWRUaW1lKCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy50aW1lICE9PSBudWxsICYmIHRoaXMudGltZSAhPT0gdW5kZWZpbmVkICYmIHRoaXMudGltZSAhPT0gIiIgPyBmb3JtYXQodGhpcy50aW1lLCAnaGg6bW0gYWEnKSA6ICIiCiAgICAgICAgfSwKICAgICAgICAuLi5tYXBHZXR0ZXJzKHsKICAgICAgICAgICAgY2FzaW5vRGV0YWlsczogImdldHRlckNhc2lub0RldGFpbHMiLAogICAgICAgICAgICB6b25lRGV0YWlsczogImdldHRlclpvbmVEZXRhaWxzIiwKICAgICAgICAgICAgb25EZW1hbmRab25lRGV0YWlsczogImdldHRlck9uRGVtYW5kWm9uZURldGFpbHMiLAogICAgICAgICAgICB0ZW1wbGF0ZUZsYWdzOiAiZ2V0dGVyVGVtcGxhdGVGbGFncyIsCiAgICAgICAgICAgIGlzUFFSRW5kUmVzZXJ2YXRpb246ICJnZXR0ZXJab25lSXNQUVJFbmRSZXNlcnZhdGlvbiIsCiAgICAgICAgfSksCiAgICAgICAgc2luZ2xlUXVvdGVzKCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy50aW1lICE9PSBudWxsICYmIHRoaXMudGltZSAhPT0gdW5kZWZpbmVkICYmIHRoaXMudGltZSAhPT0gIiIgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwodGhpcy56b25lRGV0YWlscywgJ3RpbWVQaWNrZXJDb25maWd1cmF0aW9uJykgJiYgdGhpcy56b25lRGV0YWlscy50aW1lUGlja2VyQ29uZmlndXJhdGlvbiA9PSAiMCIgPyAoZm9ybWF0KHRoaXMudGltZSwgJ3l5eXktTU0tZGQnKSA9PSB0aGlzLmN1cnJlbnREYXRlIHx8ICh0aGlzLmJlZm9yZUVzdGltYXRlICE9PSBudWxsICYmIHRoaXMuYmVmb3JlRXN0aW1hdGUgIT09IHVuZGVmaW5lZCAmJiB0aGlzLmJlZm9yZUVzdGltYXRlICE9PSAiIiAmJiB0aGlzLmVzdGltYXRlICE9PSBudWxsICYmIHRoaXMuZXN0aW1hdGUgIT09IHVuZGVmaW5lZCAmJiB0aGlzLmVzdGltYXRlICE9PSAiIiAmJiB0aGlzLmJlZm9yZUVzdGltYXRlLmdyYW5kVG90YWwgPT0gdGhpcy5lc3RpbWF0ZS5ncmFuZFRvdGFsKSkgOiB0cnVlCiAgICAgICAgfSwKICAgICAgICBkb3VibGVRdW90ZXMoKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLnRpbWUgIT09IG51bGwgJiYgdGhpcy50aW1lICE9PSB1bmRlZmluZWQgJiYgdGhpcy50aW1lICE9PSAiIiAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbCh0aGlzLnpvbmVEZXRhaWxzLCAndGltZVBpY2tlckNvbmZpZ3VyYXRpb24nKSAmJiB0aGlzLnpvbmVEZXRhaWxzLnRpbWVQaWNrZXJDb25maWd1cmF0aW9uID09ICIwIiA/IChmb3JtYXQodGhpcy50aW1lLCAneXl5eS1NTS1kZCcpICE9IHRoaXMuY3VycmVudERhdGUgJiYgKHRoaXMuYmVmb3JlRXN0aW1hdGUgIT09IG51bGwgJiYgdGhpcy5iZWZvcmVFc3RpbWF0ZSAhPT0gdW5kZWZpbmVkICYmIHRoaXMuYmVmb3JlRXN0aW1hdGUgIT09ICIiICYmIHRoaXMuZXN0aW1hdGUgIT09IG51bGwgJiYgdGhpcy5lc3RpbWF0ZSAhPT0gdW5kZWZpbmVkICYmIHRoaXMuZXN0aW1hdGUgIT09ICIiICYmIHRoaXMuYmVmb3JlRXN0aW1hdGUuZ3JhbmRUb3RhbCAhPSB0aGlzLmVzdGltYXRlLmdyYW5kVG90YWwpKSA6IGZhbHNlCiAgICAgICAgfSwKICAgICAgICBmb3JtYXR0ZWRFbnRyeURpc3BsYXlUaW1lKCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy5jYXNpbm9EZXRhaWxzLnVzZXJEZXRhaWwuZW50cnl0aW1lICE9PSBudWxsICYmIHRoaXMuY2FzaW5vRGV0YWlscy51c2VyRGV0YWlsLmVudHJ5dGltZSAhPT0gdW5kZWZpbmVkICYmIHRoaXMuY2FzaW5vRGV0YWlscy51c2VyRGV0YWlsLmVudHJ5dGltZSAhPT0gIiIgPyBmb3JtYXQoKG5ldyBEYXRlKHRoaXMuY2FzaW5vRGV0YWlscy51c2VyRGV0YWlsLmVudHJ5dGltZSkpLCAnaGg6bW0gYScpIDogZm9ybWF0KGRhdGVUb1RpbWVab25lRGF0ZShuZXcgRGF0ZSgpLCB0aGlzLnpvbmVEZXRhaWxzLnRpbWV6b25lKSwgJ2hoOm1tIGEnKTsKICAgICAgICB9LAogICAgICAgIGluZm9GbGFnKCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy5jb250YWN0T2JqID09IG51bGwgfHwKICAgICAgICAgICAgICAgICF0aGlzLmNvbnRhY3RPYmouaXNWYWxpZCB8fAogICAgICAgICAgICAgICAgdGhpcy5jb250YWN0T2JqLnBob25lTnVtYmVyID09ICIiIHx8CiAgICAgICAgICAgICAgICB0aGlzLmNvbnRhY3RPYmoucGhvbmVOdW1iZXIgPT0gbnVsbCB8fAogICAgICAgICAgICAgICAgdGhpcy5saWNlbmNlUGxhdGUgPT09ICIiIHx8CiAgICAgICAgICAgICAgICB0aGlzLmxpY2VuY2VQbGF0ZSA9PT0gbnVsbAogICAgICAgICAgICAgICAgPyBmYWxzZQogICAgICAgICAgICAgICAgOiB0cnVlOwogICAgICAgIH0sCiAgICAgICAgdGltZUZsYWcoKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLnRpbWUgPT0gbnVsbCB8fAogICAgICAgICAgICAgICAgdGhpcy5kaXNhYmxlQWRkUGF5bWVudEJ0biB8fAogICAgICAgICAgICAgICAgdGhpcy5lc3RpbWF0ZSA9PT0gbnVsbCB8fAogICAgICAgICAgICAgICAgdGhpcy5lc3RpbWF0ZSA9PT0gIiIgfHwgKE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKHRoaXMuem9uZURldGFpbHMsICd0aW1lUGlja2VyQ29uZmlndXJhdGlvbicpICYmIHRoaXMuem9uZURldGFpbHMudGltZVBpY2tlckNvbmZpZ3VyYXRpb24gPT0gIjEiICYmIGZvcm1hdCh0aGlzLnRpbWUsICd5eXl5LU1NLWRkJykgIT0gZm9ybWF0KHRoaXMubWluVGltZURhdGUsICd5eXl5LU1NLWRkJykgJiYgKHRoaXMuYmVmb3JlRXN0aW1hdGUgPT09IG51bGwgfHwgdGhpcy5iZWZvcmVFc3RpbWF0ZSA9PSAiIiB8fCB0aGlzLmJlZm9yZUVzdGltYXRlID09IHVuZGVmaW5lZCkpIHx8CiAgICAgICAgICAgICAgICB0aGlzLnRpbWUgPT09ICIiIHx8IHRoaXMudGltZSA9PSB1bmRlZmluZWQKICAgICAgICAgICAgICAgID8gZmFsc2UKICAgICAgICAgICAgICAgIDogdHJ1ZTsKICAgICAgICB9LAogICAgICAgIHBheW1lbnRGbGFnKCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy5lc3RpbWF0ZSA9PT0gbnVsbCB8fAogICAgICAgICAgICAgICAgdGhpcy5lc3RpbWF0ZSA9PT0gIiIgfHwKICAgICAgICAgICAgICAgIHRoaXMuZXN0aW1hdGUuaGFzT3duUHJvcGVydHkuY2FsbCgiZ3JhbmRUb3RhbCIpIHx8CiAgICAgICAgICAgICAgICB0aGlzLmVzdGltYXRlLmhhc093blByb3BlcnR5LmNhbGwoInRvdGFsUHJpY2UiKSB8fAogICAgICAgICAgICAgICAgdGhpcy5lc3RpbWF0ZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKCJ0b3RhbEZlZSIpIHx8CiAgICAgICAgICAgICAgICB0aGlzLmVzdGltYXRlLmhhc093blByb3BlcnR5LmNhbGwoInRvdGFsVGF4IikgfHwgKHRoaXMuem9uZURldGFpbHM/LnRpbWVQaWNrZXJDb25maWd1cmF0aW9uID09ICcxJyAmJiB0aGlzLmJlZm9yZUVzdGltYXRlID09PSBudWxsICYmIHRoaXMuYmVmb3JlRXN0aW1hdGUgPT09ICIiICYmIHRoaXMuYmVmb3JlRXN0aW1hdGUgPT09IG51bGwgJiYgdGhpcy5iZWZvcmVFc3RpbWF0ZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKCJ0b3RhbFByaWNlIikgJiYgdGhpcy5iZWZvcmVFc3RpbWF0ZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKCJ0b3RhbEZlZSIpICYmIHRoaXMuYmVmb3JlRXN0aW1hdGUuaGFzT3duUHJvcGVydHkuY2FsbCgidG90YWxUYXgiKSkKICAgICAgICAgICAgICAgID8gZmFsc2UKICAgICAgICAgICAgICAgIDogdHJ1ZTsKICAgICAgICB9LAogICAgICAgIGNvbXB1dGVkRGF0ZUZvcm1hdHRlZCgpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMudGltZSAhPSBudWxsICYmIHRoaXMudGltZSAhPSAiIiAmJiB0aGlzLnRpbWUgIT0gdW5kZWZpbmVkID8gZm9ybWF0KHRoaXMudGltZSwgJ01NL2RkL3l5eXknKSA6ICIiCiAgICAgICAgfSwKICAgICAgICBkaXNhYmxlU3VibWl0QnRuKCkgewogICAgICAgICAgICBsZXQgZGlzYWJsZWQgPQogICAgICAgICAgICAgICAgdGhpcy5jb250YWN0T2JqID09IG51bGwgfHwKICAgICAgICAgICAgICAgICF0aGlzLmNvbnRhY3RPYmouaXNWYWxpZCB8fAogICAgICAgICAgICAgICAgdGhpcy5jb250YWN0T2JqLnBob25lTnVtYmVyID09ICIiIHx8CiAgICAgICAgICAgICAgICB0aGlzLmNvbnRhY3RPYmoucGhvbmVOdW1iZXIgPT0gbnVsbCB8fAogICAgICAgICAgICAgICAgdGhpcy5saWNlbmNlUGxhdGUgPT09ICIiIHx8CiAgICAgICAgICAgICAgICB0aGlzLmxpY2VuY2VQbGF0ZSA9PT0gbnVsbCB8fAogICAgICAgICAgICAgICAgdGhpcy5kaXNhYmxlQWRkUGF5bWVudEJ0biB8fAogICAgICAgICAgICAgICAgdGhpcy5lc3RpbWF0ZSA9PT0gbnVsbCB8fAogICAgICAgICAgICAgICAgdGhpcy5lc3RpbWF0ZSA9PT0gIiIKICAgICAgICAgICAgdGhpcy5leGl0RGF0ZSA9PT0gIiI7CiAgICAgICAgICAgIGxldCBzZWxlY3RlZE1pbnMgPSB0aGlzLnRpbWUgIT09IG51bGwgJiYgdGhpcy50aW1lICE9PSB1bmRlZmluZWQgJiYgdGhpcy50aW1lICE9PSAiIiA/IGZvcm1hdCh0aGlzLnRpbWUsICdtbScpIDogbmV3IERhdGUoKTsKICAgICAgICAgICAgbGV0IHNlbGVjdGVkSG91cnMgPSB0aGlzLnRpbWUgIT09IG51bGwgJiYgdGhpcy50aW1lICE9PSB1bmRlZmluZWQgJiYgdGhpcy50aW1lICE9PSAiIiA/IGZvcm1hdCh0aGlzLnRpbWUsICdoaCcpIDogbmV3IERhdGUoKTsKICAgICAgICAgICAgbGV0IHNlbGVjdGVkQU1QTSA9IHRoaXMudGltZSAhPT0gbnVsbCAmJiB0aGlzLnRpbWUgIT09IHVuZGVmaW5lZCAmJiB0aGlzLnRpbWUgIT09ICIiID8gZm9ybWF0KHRoaXMudGltZSwgJ2FhYScpIDogbmV3IERhdGUoKTsKICAgICAgICAgICAgZGlzYWJsZWQgPQogICAgICAgICAgICAgICAgZGlzYWJsZWQgfHwKICAgICAgICAgICAgICAgIHNlbGVjdGVkTWlucyA9PSBudWxsIHx8CiAgICAgICAgICAgICAgICBzZWxlY3RlZE1pbnMgPT09ICIiIHx8CiAgICAgICAgICAgICAgICBzZWxlY3RlZE1pbnMgPT0gdW5kZWZpbmVkIHx8CiAgICAgICAgICAgICAgICBzZWxlY3RlZEhvdXJzID09IG51bGwgfHwKICAgICAgICAgICAgICAgIHNlbGVjdGVkSG91cnMgPT09ICIiIHx8CiAgICAgICAgICAgICAgICBzZWxlY3RlZEhvdXJzID09IHVuZGVmaW5lZCB8fCBzZWxlY3RlZEFNUE0gPT0gbnVsbCB8fAogICAgICAgICAgICAgICAgc2VsZWN0ZWRBTVBNID09PSAiIiB8fAogICAgICAgICAgICAgICAgc2VsZWN0ZWRBTVBNID09IHVuZGVmaW5lZCB8fCB0aGlzLnRpbWUgPT09IG51bGwgfHwgdGhpcy50aW1lID09PSAiIiB8fCB0aGlzLnRpbWUgPT09IHVuZGVmaW5lZAogICAgICAgICAgICBkaXNhYmxlZCA9CiAgICAgICAgICAgICAgICB0aGlzLmxpY2VuY2VQbGF0ZSAhPSAiIiAmJiB0aGlzLmxpY2VuY2VQbGF0ZSAhPSBudWxsCiAgICAgICAgICAgICAgICAgICAgPyBkaXNhYmxlZCB8fCAvXlthLXowLTldKyQvaS50ZXN0KHRoaXMubGljZW5jZVBsYXRlKSA9PT0gZmFsc2UKICAgICAgICAgICAgICAgICAgICA6IGRpc2FibGVkOwogICAgICAgICAgICByZXR1cm4gZGlzYWJsZWQ7CiAgICAgICAgfSwKICAgICAgICBkaXNhYmxlQWRkTGljZW5jZVBsYXRlQnRuKCkgewogICAgICAgICAgICBpZiAodGhpcy56b25lRGV0YWlscy5scHJfc3RhdHVzID09ICIwIikgewogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuaXNDb250YWN0VmFsaWQgPT0gZmFsc2UgPyB0cnVlIDogZmFsc2U7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5pc0NvbnRhY3RWYWxpZCA9PSBmYWxzZSB8fAogICAgICAgICAgICAgICAgICAgIHRoaXMubGljZW5jZVBsYXRlID09ICIiIHx8CiAgICAgICAgICAgICAgICAgICAgdGhpcy5saWNlbmNlUGxhdGUgPT0gbnVsbCB8fAogICAgICAgICAgICAgICAgICAgIC9eW2EtejAtOV0rJC9pLnRlc3QodGhpcy5saWNlbmNlUGxhdGUpID09PSBmYWxzZQogICAgICAgICAgICAgICAgICAgID8gdHJ1ZQogICAgICAgICAgICAgICAgICAgIDogZmFsc2U7CiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgfSwKICAgIG1vdW50ZWQoKSB7CiAgICAgICAgRXZlbnRCdXMuJG9uKCdTRVRfVElNRScsICgpID0+IHsKICAgICAgICAgICAgdGhpcy5vblRpbWVQaWNrZXJDaGFuZ2UoKTsKICAgICAgICB9KQogICAgICAgIC8vIHRoaXMuc2V0RGVmYXVsdERhdGUoKTsKICAgIH0sCiAgICBtZXRob2RzOiB7CiAgICAgICAgcm91bmQodGltZSkgewogICAgICAgICAgICBsZXQgZXhpdGRhdGUgPSB0aW1lICE9PSBudWxsICYmIHRpbWUgIT09ICcnID8gZm9ybWF0KHRpbWUsICd5eXl5L01NL2RkJykgOiBuZXcgRGF0ZSgpOwoKICAgICAgICAgICAgbGV0IHNlbGVjdGVkTWlucyA9IHRpbWUgIT09IG51bGwgJiYgdGltZSAhPT0gJycgPyBmb3JtYXQodGltZSwgJ21tJykgOiBuZXcgRGF0ZSgpOwogICAgICAgICAgICBsZXQgc2VsZWN0ZWRIb3VycyA9IHRpbWUgIT09IG51bGwgJiYgdGltZSAhPT0gJycgPyBmb3JtYXQodGltZSwgJ2hoJykgOiBuZXcgRGF0ZSgpOwogICAgICAgICAgICBsZXQgc2VsZWN0ZWRBTVBNID0gdGltZSAhPT0gbnVsbCAmJiB0aW1lICE9PSAnJyA/IGZvcm1hdCh0aW1lLCAnYWFhJykgOiBuZXcgRGF0ZSgpOwogICAgICAgICAgICBpZiAoZXhpdGRhdGUgIT0gbnVsbCAmJiBzZWxlY3RlZE1pbnMgIT0gJzE1JyAmJiBzZWxlY3RlZE1pbnMgIT0gJzMwJyAmJiBzZWxlY3RlZE1pbnMgIT0gJzQ1JyAmJiBzZWxlY3RlZE1pbnMgIT0gJzAwJyAmJiBzZWxlY3RlZE1pbnMgIT0gbnVsbCAmJiBzZWxlY3RlZE1pbnMgIT0gIiIgJiYgc2VsZWN0ZWRIb3VycyAhPSBudWxsICYmIHNlbGVjdGVkSG91cnMgIT0gIiIgJiYgc2VsZWN0ZWRBTVBNICE9IG51bGwgJiYgc2VsZWN0ZWRBTVBNICE9ICIiKSB7CiAgICAgICAgICAgICAgICBsZXQgaW50ZXJ2YWxNaWxsaXNlY29uZHMgPSA5MDAwMDAKICAgICAgICAgICAgICAgIGxldCBkYXRldGltZSA9IG5ldyBEYXRlKGV4aXRkYXRlICsgIiAiICsgc2VsZWN0ZWRIb3VycyArICI6IiArIHNlbGVjdGVkTWlucyArICIgIiArIHNlbGVjdGVkQU1QTSkKICAgICAgICAgICAgICAgIGxldCBpbnRlcnZhbCA9IGRhdGV0aW1lLmdldFRpbWUoKSAlIGludGVydmFsTWlsbGlzZWNvbmRzOwogICAgICAgICAgICAgICAgbGV0IGRlbHRhID0gaW50ZXJ2YWwgPT09IDAgPyAwIDogZGF0ZXRpbWUuZ2V0VGltZSgpIC0gaW50ZXJ2YWw7CiAgICAgICAgICAgICAgICBkZWx0YSArPSBpbnRlcnZhbE1pbGxpc2Vjb25kczsKICAgICAgICAgICAgICAgIC8vIHRoaXMuZXhpdFRpbWVTZWxlY3RlZCA9IE9iamVjdC5hc3NpZ24odGhpcy5leGl0VGltZVNlbGVjdGVkLCB7IGhoOiBmb3JtYXQobmV3IERhdGUoZGVsdGEpLCAnaGgnKSwgbW06IGZvcm1hdChuZXcgRGF0ZShkZWx0YSksICdtbScpLCBhOiBmb3JtYXQobmV3IERhdGUoZGVsdGEpLCAnYScpLCB9KQogICAgICAgICAgICAgICAgcmV0dXJuIGludGVydmFsICE9PSAwID8gbmV3IERhdGUoZGVsdGEpIDogZGF0ZXRpbWU7CiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIGRhdGVDaGFuZ2UoKSB7CiAgICAgICAgICAgIHRoaXMuZGF0ZVRpbWVDaGFuZ2UoKTsKICAgICAgICAgICAgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwodGhpcy56b25lRGV0YWlscywgJ3RpbWVQaWNrZXJDb25maWd1cmF0aW9uJykgJiYgdGhpcy56b25lRGV0YWlscz8udGltZVBpY2tlckNvbmZpZ3VyYXRpb24gPT0gIjEiID8gdGhpcy5iZWZvcmVEYXRlVGltZUNoYW5nZSgpIDogIiI7CiAgICAgICAgfSwKICAgICAgICBmb3JtYXRFeGl0RGF0ZVRpbWUodGltZSwgdmFsKSB7CiAgICAgICAgICAgIGlmICh0aW1lICE9PSBudWxsICYmIHRpbWUgIT09IHVuZGVmaW5lZCAmJiB0aW1lICE9ICcnKSB7CiAgICAgICAgICAgICAgICBsZXQgdXRjRGF0ZSA9IG5ldyBEYXRlKHRpbWUgKiAxMDAwKS50b1VUQ1N0cmluZygpOyAvLyJXZWQsIDI3IEphbiAyMDIxIDEzOjU5OjA0IEdNVCIKICAgICAgICAgICAgICAgIGxldCBtb250aCA9IHV0Y0RhdGUuc3BsaXQoIiwiKVsxXS5zcGxpdCgiICIpWzJdOyAvLyBKYW4KICAgICAgICAgICAgICAgIGxldCBkYXRlID0gdXRjRGF0ZS5zcGxpdCgiLCIpWzFdLnNwbGl0KCIgIilbMV07IC8vIDI3CiAgICAgICAgICAgICAgICBsZXQgeWVhciA9IHV0Y0RhdGUuc3BsaXQoIiwiKVsxXS5zcGxpdCgiICIpWzNdOwogICAgICAgICAgICAgICAgbGV0IGhyID0gdXRjRGF0ZS5zcGxpdCgiLCIpWzFdLnNwbGl0KCIgIilbNF0uc3BsaXQoIjoiKVswXTsgLy8gMTMKICAgICAgICAgICAgICAgIGxldCBtaW4gPSB1dGNEYXRlLnNwbGl0KCIsIilbMV0uc3BsaXQoIiAiKVs0XS5zcGxpdCgiOiIpWzFdOyAvLzU5CiAgICAgICAgICAgICAgICBsZXQgZm9ybWF0SHIgPSBOdW1iZXIoaHIpID4gMTIgPyBOdW1iZXIoaHIpIC0gMTIgOiBOdW1iZXIoaHIpOyAvLyAxCiAgICAgICAgICAgICAgICBmb3JtYXRIciA9IE51bWJlcihmb3JtYXRIcikgPj0gMTAgPyBOdW1iZXIoZm9ybWF0SHIpIDogZm9ybWF0SHI7IC8vMDEKICAgICAgICAgICAgICAgIGxldCBhbU9ycG0gPSBOdW1iZXIoaHIpID49IDEyID8gInAiIDogImEiOyAvL1BNCiAgICAgICAgICAgICAgICBsZXQgYW1wbSA9IE51bWJlcihocikgPj0gMTIgPyAiUE0iIDogIkFNIjsKICAgICAgICAgICAgICAgIHN3aXRjaCAodmFsKSB7CiAgICAgICAgICAgICAgICAgICAgY2FzZSAnaG91cic6IHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZvcm1hdEhyICsgYW1PcnBtOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBjYXNlICdtaW5zJzogewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbWluCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGNhc2UgJ2RhdGUnOiB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBtb250aCArICIgIiArIGRhdGUgKyAiLCAiICsgeWVhciArICIgIiArIGZvcm1hdEhyICsgIjoiICsgbWluICsgIiAiICsgYW1wbTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgLy9KYW4gMjcsIDAxOjU5IFBNCiAgICAgICAgfSwKICAgICAgICByZWxvYWRCb29raW5nKCkgewogICAgICAgICAgICBsZXQgdXJsID0gd2luZG93LmxvY2F0aW9uLm9yaWdpbiArICIvZy8iICsgdGhpcy5jYXNpbm9EZXRhaWxzLnVzZXJEZXRhaWwuYmlkOwogICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVwbGFjZSh1cmwpOwogICAgICAgIH0sCiAgICAgICAgc2V0RGVmYXVsdERhdGUoKSB7CiAgICAgICAgICAgIHRoaXMuZGF0ZUZvcm1hdHRlZCA9IHRoaXMuem9uZURldGFpbHMudGltZXpvbmUgPyBmb3JtYXQoCiAgICAgICAgICAgICAgICBkYXRlVG9UaW1lWm9uZURhdGUoYWRkTWludXRlcyhuZXcgRGF0ZSgpLCAxNSksCiAgICAgICAgICAgICAgICAgICAgdGhpcy56b25lRGV0YWlscy50aW1lem9uZQogICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgICJNTS9kZC95eXl5IgogICAgICAgICAgICApCiAgICAgICAgICAgICAgICA6IGZvcm1hdChhZGRNaW51dGVzKG5ldyBEYXRlKCksIDE1KSwgIk1NL2RkL3l5eXkiKTsKICAgICAgICAgICAgdGhpcy50aW1lID0gdGhpcy56b25lRGV0YWlscy50aW1lem9uZQogICAgICAgICAgICAgICAgPwogICAgICAgICAgICAgICAgZGF0ZVRvVGltZVpvbmVEYXRlKAogICAgICAgICAgICAgICAgICAgIGFkZE1pbnV0ZXMobmV3IERhdGUoKSwgMTUpLAogICAgICAgICAgICAgICAgICAgIHRoaXMuem9uZURldGFpbHMudGltZXpvbmUKICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIDogYWRkTWludXRlcyhuZXcgRGF0ZSgpLCAxNSk7CiAgICAgICAgICAgIGxldCBmaWZ0ZWVuVGltZSA9IHRoaXMudGltZTsKICAgICAgICAgICAgdGhpcy50aW1lID0gZm9ybWF0KHRoaXMudGltZSwgJ21tJykgPT09ICcxNScgfHwgZm9ybWF0KHRoaXMudGltZSwgJ21tJykgPT09ICczMCcgfHwgZm9ybWF0KHRoaXMudGltZSwgJ21tJykgPT09ICc0NScgfHwgZm9ybWF0KHRoaXMudGltZSwgJ21tJykgPT09ICcwMCcgPyBmaWZ0ZWVuVGltZSA6IHRoaXMucm91bmQodGhpcy50aW1lKTsKICAgICAgICAgICAgbGV0IHNlbGVjdGVkTWlucyA9IHRoaXMudGltZSAhPT0gbnVsbCAmJiB0aGlzLnRpbWUgIT09IHVuZGVmaW5lZCAmJiB0aGlzLnRpbWUgIT09ICIiID8gZm9ybWF0KHRoaXMudGltZSwgJ21tJykgOiAiIjsKICAgICAgICAgICAgbGV0IHNlbGVjdGVkSG91cnMgPSB0aGlzLnRpbWUgIT09IG51bGwgJiYgdGhpcy50aW1lICE9PSB1bmRlZmluZWQgJiYgdGhpcy50aW1lICE9PSAiIiA/IGZvcm1hdCh0aGlzLnRpbWUsICdISCcpIDogIiI7CiAgICAgICAgICAgIGxldCBzZWxlY3RlZEFNUE0gPSB0aGlzLnRpbWUgIT09IG51bGwgJiYgdGhpcy50aW1lICE9PSB1bmRlZmluZWQgJiYgdGhpcy50aW1lICE9PSAiIiA/IGZvcm1hdCh0aGlzLnRpbWUsICdhJykgOiAiIjsKICAgICAgICAgICAgdGhpcy5zdG9wVGltZSA9IHNlbGVjdGVkTWlucyAhPSBudWxsICYmIHNlbGVjdGVkTWlucyAhPSAiIiAmJiBzZWxlY3RlZEhvdXJzICE9IG51bGwgJiYgc2VsZWN0ZWRIb3VycyAhPSAiIiAmJiBzZWxlY3RlZEFNUE0gIT0gbnVsbCAmJiBzZWxlY3RlZEFNUE0gIT0gIiIgPyBzZWxlY3RlZEhvdXJzICsgIjoiICsgc2VsZWN0ZWRNaW5zICsgIjoiICsgIjAwIiA6ICIiOwogICAgICAgICAgICAvLyB0aGlzLmRhdGVUaW1lQ2hhbmdlKCkKICAgICAgICAgICAgLy8gT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwodGhpcy56b25lRGV0YWlscywgJ3RpbWVQaWNrZXJDb25maWd1cmF0aW9uJykgJiYgdGhpcy56b25lRGV0YWlscz8udGltZVBpY2tlckNvbmZpZ3VyYXRpb24gPT0gIjEiICYmIGZvcm1hdCh0aGlzLnRpbWUsICd5eXl5LU1NLWRkJykgIT0gZm9ybWF0KGRhdGVUb1RpbWVab25lRGF0ZShuZXcgRGF0ZSgpLCB0aGlzLnpvbmVEZXRhaWxzLnRpbWV6b25lKSwgJ3l5eXktTU0tZGQnKSA/IHRoaXMuYmVmb3JlRGF0ZVRpbWVDaGFuZ2UoKSA6ICIiOwogICAgICAgIH0sCiAgICAgICAgb25UaW1lUGlja2VyQ2hhbmdlKCkgewogICAgICAgICAgICBsZXQgZXhpdGRhdGUgPSB0aGlzLnRpbWUgIT09IG51bGwgJiYgdGhpcy50aW1lICE9PSB1bmRlZmluZWQgJiYgdGhpcy50aW1lICE9PSAiIiA/IGZvcm1hdCh0aGlzLnRpbWUsICd5eXl5L01NL2RkJykgOiAiIjsKICAgICAgICAgICAgbGV0IHNlbGVjdGVkTWlucyA9IHRoaXMudGltZSAhPT0gbnVsbCAmJiB0aGlzLnRpbWUgIT09IHVuZGVmaW5lZCAmJiB0aGlzLnRpbWUgIT09ICIiID8gZm9ybWF0KHRoaXMudGltZSwgJ21tJykgOiAiIjsKICAgICAgICAgICAgbGV0IHNlbGVjdGVkSG91cnMgPSB0aGlzLnRpbWUgIT09IG51bGwgJiYgdGhpcy50aW1lICE9PSB1bmRlZmluZWQgJiYgdGhpcy50aW1lICE9PSAiIiA/IGZvcm1hdCh0aGlzLnRpbWUsICdISCcpIDogIiI7CiAgICAgICAgICAgIGxldCBzZWxlY3RlZEFNUE0gPSB0aGlzLnRpbWUgIT09IG51bGwgJiYgdGhpcy50aW1lICE9PSB1bmRlZmluZWQgJiYgdGhpcy50aW1lICE9PSAiIiA/IGZvcm1hdCh0aGlzLnRpbWUsICdhJykgOiAiIjsKICAgICAgICAgICAgdGhpcy5zdG9wVGltZSA9IHNlbGVjdGVkTWlucyAhPSBudWxsICYmIHNlbGVjdGVkTWlucyAhPSAiIiAmJiBzZWxlY3RlZEhvdXJzICE9IG51bGwgJiYgc2VsZWN0ZWRIb3VycyAhPSAiIiAmJiBzZWxlY3RlZEFNUE0gIT0gbnVsbCAmJiBzZWxlY3RlZEFNUE0gIT0gIiIgPyBzZWxlY3RlZEhvdXJzICsgIjoiICsgc2VsZWN0ZWRNaW5zICsgIjoiICsgIjAwIiA6ICIiOwogICAgICAgICAgICBsZXQgY3VycmVuVGltZSA9IHRoaXMuem9uZURldGFpbHMudGltZXpvbmUKICAgICAgICAgICAgICAgID8gZm9ybWF0KAogICAgICAgICAgICAgICAgICAgIGRhdGVUb1RpbWVab25lRGF0ZShuZXcgRGF0ZSgpLAogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnpvbmVEZXRhaWxzLnRpbWV6b25lCiAgICAgICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgICAgICAieXl5eS1NTS1kZCBISDptbTpzcyIKICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIDogZm9ybWF0KG5ldyBEYXRlKCksICJ5eXl5LU1NLWRkICBISDptbTpzcyIpOwogICAgICAgICAgICBpZiAoCiAgICAgICAgICAgICAgICBzZWxlY3RlZE1pbnMgIT0gbnVsbCAmJiBzZWxlY3RlZE1pbnMgIT0gIiIgJiYgc2VsZWN0ZWRIb3VycyAhPSBudWxsICYmIHNlbGVjdGVkSG91cnMgIT0gIiIgJiYgc2VsZWN0ZWRBTVBNICE9IG51bGwgJiYgc2VsZWN0ZWRBTVBNICE9ICIiICYmCiAgICAgICAgICAgICAgICBuZXcgRGF0ZShleGl0ZGF0ZSArICIgIiArIHRoaXMuc3RvcFRpbWUpLmdldFRpbWUoKSA+CiAgICAgICAgICAgICAgICBuZXcgRGF0ZShjdXJyZW5UaW1lKS5nZXRUaW1lKCkKICAgICAgICAgICAgKSB7CiAgICAgICAgICAgICAgICBmb3JtYXQodGhpcy50aW1lLCAneXl5eS1NTS1kZCcpICE9IGZvcm1hdCh0aGlzLm1pblRpbWVEYXRlLCAneXl5eS1NTS1kZCcpID8gdGhpcy5iZWZvcmVEYXRlVGltZUNoYW5nZSgpIDogIiI7CiAgICAgICAgICAgICAgICB0aGlzLmRhdGVUaW1lQ2hhbmdlKCk7CgogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBzZXREYXRlUGlja2VyKCkgewogICAgICAgICAgICAvL3NldCB0aGUgbWluaW11bSBkYXRlIHRvIHRvZGF5IGRhdGUoem9uZSB0aW1lIHpvbmUgZGF0ZSkKICAgICAgICAgICAgdGhpcy5taW5UaW1lRGF0ZSA9IHRoaXMuem9uZURldGFpbHMudGltZXpvbmUgPyB0aGlzLnJvdW5kKHRoaXMuem9uZURldGFpbHMudGltZXpvbmUKICAgICAgICAgICAgICAgID8KICAgICAgICAgICAgICAgIGRhdGVUb1RpbWVab25lRGF0ZShhZGRNaW51dGVzKG5ldyBEYXRlKCksIDE1KSwKICAgICAgICAgICAgICAgICAgICB0aGlzLnpvbmVEZXRhaWxzLnRpbWV6b25lCiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICA6IGFkZE1pbnV0ZXMobmV3IERhdGUoKSwgMTUpKSA6IHRoaXMuem9uZURldGFpbHMudGltZXpvbmUKICAgICAgICAgICAgICAgID8KICAgICAgICAgICAgICAgIGRhdGVUb1RpbWVab25lRGF0ZShhZGRNaW51dGVzKG5ldyBEYXRlKCksIDE1KSwKICAgICAgICAgICAgICAgICAgICB0aGlzLnpvbmVEZXRhaWxzLnRpbWV6b25lCiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICA6IGFkZE1pbnV0ZXMobmV3IERhdGUoKSwgMTUpCiAgICAgICAgICAgIC8vY2FsY3VsYXRlIG1heCBwYXJraWduIHRpbWUgaW4gc2Vjb25kcwogICAgICAgICAgICBsZXQgbWF4UGFyayA9IHRoaXMuem9uZURldGFpbHMgIT0gbnVsbCAmJiB0aGlzLnpvbmVEZXRhaWxzICE9PSB1bmRlZmluZWQgJiYgdGhpcy56b25lRGV0YWlscyAhPSAiIiA/IHRoaXMuem9uZURldGFpbHM/Lm1heFBhcmtpbmdUaW1lIDogbnVsbDsKCiAgICAgICAgICAgIGxldCBhZGRlZGRheXMgPSBhZGREYXlzKG5ldyBEYXRlKCksIG1heFBhcms/LmRheXMpOwogICAgICAgICAgICBsZXQgYWRkZWRob3VycyA9IGFkZEhvdXJzKGFkZGVkZGF5cywgbWF4UGFyaz8uaG91cnMpOwogICAgICAgICAgICBsZXQgYWRkZWRtaW5zID0gYWRkTWludXRlcyhhZGRlZGhvdXJzLCBtYXhQYXJrPy5taW51dGVzKTsKCiAgICAgICAgICAgIC8vZ2V0IG1heCBkYXRlIGluIHNlY29uZHMgYmFzZWQgb24gbWF4IHBhcmtpbmcgdGltZQogICAgICAgICAgICBsZXQgbWF4Wm9uZURhdGUgPSBhZGRlZG1pbnMKICAgICAgICAgICAgdGhpcy5tYXhUaW1lRGF0ZSA9IHRoaXMuem9uZURldGFpbHMudGltZXpvbmUKICAgICAgICAgICAgICAgID8KICAgICAgICAgICAgICAgIGRhdGVUb1RpbWVab25lRGF0ZSgKICAgICAgICAgICAgICAgICAgICBuZXcgRGF0ZShtYXhab25lRGF0ZSksCiAgICAgICAgICAgICAgICAgICAgdGhpcy56b25lRGV0YWlscy50aW1lem9uZQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgOiBuZXcgRGF0ZShtYXhab25lRGF0ZSk7CiAgICAgICAgICAgIC8vZ2V0IG1heCBkYXRlIHdpdGggdGltZSBhbmQgc2V0IGl0IHRvIG1heERhdGVUaW1lCiAgICAgICAgICAgIHRoaXMubWF4RGF0ZVRpbWUgPSB0aGlzLnpvbmVEZXRhaWxzLnRpbWV6b25lCiAgICAgICAgICAgICAgICA/IGZvcm1hdCgKICAgICAgICAgICAgICAgICAgICBkYXRlVG9UaW1lWm9uZURhdGUoCiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBEYXRlKG1heFpvbmVEYXRlKSwKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy56b25lRGV0YWlscy50aW1lem9uZQogICAgICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICAgICAgInl5eXktTU0tZGQgaGg6bW0gYWFhYWEiCiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICA6IGZvcm1hdChuZXcgRGF0ZSgpLCAieXl5eS1NTS1kZCBoaDptbSBhYWFhYSIpOwogICAgICAgIH0sCgogICAgICAgIC8qKiBAbWV0aG9kcyB0byBmaW5kIHRoZSBlc3RpbWF0ZSByYXRlIAogICAgICAgICBAcGFyYW1zIHN0YXJ0RGF0ZSAsIHN0b3BEYXRlLHpjb2RlLCB0eXBlICwgZW52X292ZXJSaWRlCiAgICAgICAgICovCgogICAgICAgIGFzeW5jIGRhdGVUaW1lQ2hhbmdlKCkgewogICAgICAgICAgICBpZiAoIXRoaXMuem9uZURldGFpbHMuemNvZGUpIHsKICAgICAgICAgICAgICAgIHJldHVybgogICAgICAgICAgICB9CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAvLyBmb3JtYXQobmV3IERhdGUodGhpcy5jaGVja2luRGF0ZSksICJ5eXl5LU1NLWRkJ1QnSEg6bW06c3MiKTsKICAgICAgICAgICAgICAgIGxldCBocmVmID0gd2luZG93LmxvY2F0aW9uLmhyZWY7CiAgICAgICAgICAgICAgICBsZXQgZWR0RW50cnlUaW1lID0gIiIKICAgICAgICAgICAgICAgIGlmIChocmVmLmluY2x1ZGVzKCdlbnRyeXRpbWUnKSkgewogICAgICAgICAgICAgICAgICAgIGxldCBwYXJhbXMgPSBocmVmLnNwbGl0KCc/Jyk7CiAgICAgICAgICAgICAgICAgICAgbGV0IHRpbWVwYXJhbSA9IHBhcmFtc1syXS5zcGxpdCgnZW50cnl0aW1lJylbMV07CiAgICAgICAgICAgICAgICAgICAgZWR0RW50cnlUaW1lID0gdGltZXBhcmFtLnN1YnN0cmluZygxLCB0aW1lcGFyYW0ubGVuZ3RoKQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHRoaXMuc3RhcnREYXRlID0gZWR0RW50cnlUaW1lICE9PSBudWxsICYmIGVkdEVudHJ5VGltZSAhPT0gdW5kZWZpbmVkICYmIGVkdEVudHJ5VGltZSAhPT0gIiIgPyBmb3JtYXQobmV3IERhdGUodGhpcy5mb3JtYXRFeGl0RGF0ZVRpbWUoZWR0RW50cnlUaW1lLCAnZGF0ZScpKSwgInl5eXktTU0tZGQnVCdISDptbTpzcyIpIDogdGhpcy56b25lRGV0YWlscy50aW1lem9uZQogICAgICAgICAgICAgICAgICAgID8gZm9ybWF0KAogICAgICAgICAgICAgICAgICAgICAgICBkYXRlVG9UaW1lWm9uZURhdGUoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgRGF0ZSgpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy56b25lRGV0YWlscy50aW1lem9uZQogICAgICAgICAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgICAgICAgICAieXl5eS1NTS1kZCdUJ0hIOm1tOnNzIgogICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICA6IGZvcm1hdChuZXcgRGF0ZSgpLCAieXl5eS1NTS1kZCdUJ0hIOm1tOnNzIik7CiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLmV4aXRUaW1lU2VsZWN0ZWQ/LmhoKyI6Iit0aGlzLmV4aXRUaW1lU2VsZWN0ZWQubW0rIjowMCIpCiAgICAgICAgICAgICAgICAvLyB0aGlzLmV4aXREYXRlICsgIlQyMzo1OTowMCIKICAgICAgICAgICAgICAgIGxldCBzdG9wVGltZSA9IHRoaXMuc3RvcFRpbWU7CiAgICAgICAgICAgICAgICBsZXQgZXhpdGRhdGUgPSB0aGlzLnRpbWUgIT09IG51bGwgJiYgdGhpcy50aW1lICE9PSB1bmRlZmluZWQgJiYgdGhpcy50aW1lICE9PSAiIiA/IGZvcm1hdCh0aGlzLnRpbWUsICd5eXl5LU1NLWRkJykgOiAiIjsKICAgICAgICAgICAgICAgIGxldCBleGl0dGltZSA9IE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKHRoaXMuem9uZURldGFpbHMsICd0aW1lUGlja2VyQ29uZmlndXJhdGlvbicpICYmIHRoaXMuem9uZURldGFpbHM/LnRpbWVQaWNrZXJDb25maWd1cmF0aW9uID09ICcxJyA/ICdUJyArIHN0b3BUaW1lIDogIlQyMzo1OTowMCI7CiAgICAgICAgICAgICAgICBsZXQgc3RvcERhdGUgPSBleGl0ZGF0ZSArIGV4aXR0aW1lOwogICAgICAgICAgICAgICAgbGV0IGRhdGEgPSB7CiAgICAgICAgICAgICAgICAgICAgc3RhcnRBdDogdGhpcy5zdGFydERhdGUsCiAgICAgICAgICAgICAgICAgICAgc3RvcEF0OiBzdG9wRGF0ZSwKICAgICAgICAgICAgICAgICAgICB6Y29kZTogdGhpcy56b25lRGV0YWlscy56Y29kZSwKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB0aGlzLmFkZFBheW1lbnRCdG5Mb2FkaW5nID0gdHJ1ZTsKICAgICAgICAgICAgICAgIHZhciBnZXRSYXRlID0gYXdhaXQgQVBJLmdldFJhdGUoZGF0YSk7CiAgICAgICAgICAgICAgICAvL2NvbmRpdGlvbiB0byBjaGVjayBpZiB0aGUgZGF0ZSB0aW1lIHNlbGVjdGVkIGlzIGxlc3NlciB0aGFuIGN1cnJlbnQgdGltZQogICAgICAgICAgICAgICAgaWYgKCFnZXRSYXRlPy5kYXRhPy5zdGF0dXMgJiYgIXRoaXMuZ2V0UmF0ZUNhbGwpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc2FibGVBZGRQYXltZW50QnRuID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICB0aGlzLmFsZXJ0RGlhbG9nID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICB0aGlzLmFsZXJ0TXNnID0KICAgICAgICAgICAgICAgICAgICAgICAgZ2V0UmF0ZT8uZGF0YT8ubWVzc2FnZSB8fCAiRXJyb3IgaW4gZ2V0dGluZyByYXRlIGRldGFpbHMiOwogICAgICAgICAgICAgICAgICAgIHRoaXMub3BlbkRhdGVQaWNrZXIgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICB0aGlzLm9wZW5UaW1lUGlja2VyID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgRXZlbnRCdXMuJGVtaXQoJ2RhdGV0aW1lLXNldCcpOwoKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNhYmxlQWRkUGF5bWVudEJ0biA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIHRoaXMub3BlbkRhdGVQaWNrZXIgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICB0aGlzLm9wZW5UaW1lUGlja2VyID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgRXZlbnRCdXMuJGVtaXQoJ2RhdGV0aW1lLXNldCcpOwoKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHRoaXMuZXN0aW1hdGUgPSBPYmplY3QuYXNzaWduKHt9LCBnZXRSYXRlPy5kYXRhPy5kYXRhKTsKICAgICAgICAgICAgICAgIC8vIGVzdGltYXRlZFZhbCAhPSAiIiAmJgogICAgICAgICAgICAgICAgLy8gZXN0aW1hdGVkVmFsICE9IG51bGwgJiYKICAgICAgICAgICAgICAgIC8vIGVzdGltYXRlZFZhbCAhPSB1bmRlZmluZWQKICAgICAgICAgICAgICAgIC8vICAgPyBOdW1iZXIoZXN0aW1hdGVkVmFsKS50b0ZpeGVkKDIpCiAgICAgICAgICAgICAgICAvLyAgIDogZXN0aW1hdGVkVmFsOwogICAgICAgICAgICAgICAgdGhpcy5vcGVuRGF0ZVBpY2tlciA9IGZhbHNlOwogICAgICAgICAgICAgICAgdGhpcy5vcGVuVGltZVBpY2tlciA9IGZhbHNlOwogICAgICAgICAgICAgICAgdGhpcy5hZGRQYXltZW50QnRuTG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGNhdGNoIChlcnJvcikgewogICAgICAgICAgICAgICAgdGhpcy5hZGRQYXltZW50QnRuTG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpOwogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBhc3luYyBiZWZvcmVEYXRlVGltZUNoYW5nZSgpIHsKICAgICAgICAgICAgaWYgKCF0aGlzLnpvbmVEZXRhaWxzLnpjb2RlKSB7CiAgICAgICAgICAgICAgICByZXR1cm4KICAgICAgICAgICAgfQogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgLy8gZm9ybWF0KG5ldyBEYXRlKHRoaXMuY2hlY2tpbkRhdGUpLCAieXl5eS1NTS1kZCdUJ0hIOm1tOnNzIik7CgogICAgICAgICAgICAgICAgbGV0IGhyZWYgPSB3aW5kb3cubG9jYXRpb24uaHJlZjsKICAgICAgICAgICAgICAgIGxldCBlZHRFbnRyeVRpbWUgPSAiIgogICAgICAgICAgICAgICAgaWYgKGhyZWYuaW5jbHVkZXMoJ2VudHJ5dGltZScpKSB7CiAgICAgICAgICAgICAgICAgICAgbGV0IHBhcmFtcyA9IGhyZWYuc3BsaXQoJz8nKTsKICAgICAgICAgICAgICAgICAgICBsZXQgdGltZXBhcmFtID0gcGFyYW1zWzJdLnNwbGl0KCdlbnRyeXRpbWUnKVsxXTsKICAgICAgICAgICAgICAgICAgICBlZHRFbnRyeVRpbWUgPSB0aW1lcGFyYW0uc3Vic3RyaW5nKDEsIHRpbWVwYXJhbS5sZW5ndGgpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0RGF0ZSA9IGVkdEVudHJ5VGltZSAhPT0gbnVsbCAmJiBlZHRFbnRyeVRpbWUgIT09IHVuZGVmaW5lZCAmJiBlZHRFbnRyeVRpbWUgIT09ICIiID8gZm9ybWF0KG5ldyBEYXRlKHRoaXMuZm9ybWF0RXhpdERhdGVUaW1lKGVkdEVudHJ5VGltZSwgJ2RhdGUnKSksICJ5eXl5LU1NLWRkJ1QnSEg6bW06c3MiKSA6IHRoaXMuem9uZURldGFpbHMudGltZXpvbmUKICAgICAgICAgICAgICAgICAgICA/IGZvcm1hdCgKICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZVRvVGltZVpvbmVEYXRlKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IERhdGUoKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuem9uZURldGFpbHMudGltZXpvbmUKICAgICAgICAgICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgICAgICAgICAgInl5eXktTU0tZGQnVCdISDptbTpzcyIKICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgOiBmb3JtYXQobmV3IERhdGUoKSwgInl5eXktTU0tZGQnVCdISDptbTpzcyIpOwogICAgICAgICAgICAgICAgbGV0IHN0b3BUaW1lID0gdGhpcy5zdG9wVGltZTsKICAgICAgICAgICAgICAgIGxldCBzZWxlY3RlZEhvdXJzID0gdGhpcy5jYXNpbm9EZXRhaWxzLnVzZXJEZXRhaWwuZW50cnl0aW1lICE9IG51bGwgJiYgdGhpcy5jYXNpbm9EZXRhaWxzLnVzZXJEZXRhaWwuZW50cnl0aW1lICE9PSB1bmRlZmluZWQgJiYgdGhpcy5jYXNpbm9EZXRhaWxzLnVzZXJEZXRhaWwuZW50cnl0aW1lICE9ICIiID8gZm9ybWF0KG5ldyBEYXRlKHRoaXMuY2FzaW5vRGV0YWlscy51c2VyRGV0YWlsLmVudHJ5dGltZSksICdISCcpIDogZm9ybWF0KGRhdGVUb1RpbWVab25lRGF0ZShuZXcgRGF0ZSgpLCB0aGlzLnpvbmVEZXRhaWxzLnRpbWV6b25lKSwgJ0hIJyk7CiAgICAgICAgICAgICAgICBsZXQgc2VsZWN0ZWRNaW5zID0gdGhpcy5jYXNpbm9EZXRhaWxzLnVzZXJEZXRhaWwuZW50cnl0aW1lICE9IG51bGwgJiYgdGhpcy5jYXNpbm9EZXRhaWxzLnVzZXJEZXRhaWwuZW50cnl0aW1lICE9PSB1bmRlZmluZWQgJiYgdGhpcy5jYXNpbm9EZXRhaWxzLnVzZXJEZXRhaWwuZW50cnl0aW1lICE9ICIiID8gZm9ybWF0KG5ldyBEYXRlKHRoaXMuY2FzaW5vRGV0YWlscy51c2VyRGV0YWlsLmVudHJ5dGltZSksICdtbScpIDogZm9ybWF0KGRhdGVUb1RpbWVab25lRGF0ZShuZXcgRGF0ZSgpLCB0aGlzLnpvbmVEZXRhaWxzLnRpbWV6b25lKSwgJ21tJyk7CiAgICAgICAgICAgICAgICBsZXQgZXhpdGRhdGUgPSB0aGlzLnRpbWUgIT09IG51bGwgJiYgdGhpcy50aW1lICE9PSB1bmRlZmluZWQgJiYgdGhpcy50aW1lICE9PSAiIiA/IGZvcm1hdCh0aGlzLnRpbWUsICd5eXl5LU1NLWRkJykgOiAiIjsKICAgICAgICAgICAgICAgIGxldCBleGl0dGltZSA9IE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKHRoaXMuem9uZURldGFpbHMsICdpc3RpbWVQaWNrZXJDb25maWd1cmF0aW9uR2F0ZWQnKSAmJiB0aGlzLnpvbmVEZXRhaWxzPy50aW1lUGlja2VyQ29uZmlndXJhdGlvbiA9PSAnMCcgPyAnVCcgKyBzdG9wVGltZSA6ICdUJyArIHNlbGVjdGVkSG91cnMgKyAiOiIgKyBzZWxlY3RlZE1pbnMgKyAiOjAwIjsKCiAgICAgICAgICAgICAgICBsZXQgc3RvcERhdGUgPSBleGl0ZGF0ZSArIGV4aXR0aW1lOwogICAgICAgICAgICAgICAgbGV0IGRhdGEgPSB7CiAgICAgICAgICAgICAgICAgICAgc3RhcnRBdDogdGhpcy5zdGFydERhdGUsCiAgICAgICAgICAgICAgICAgICAgc3RvcEF0OiBzdG9wRGF0ZSwKICAgICAgICAgICAgICAgICAgICB6Y29kZTogdGhpcy56b25lRGV0YWlscy56Y29kZSwKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB0aGlzLmFkZFBheW1lbnRCdG5Mb2FkaW5nID0gdHJ1ZTsKICAgICAgICAgICAgICAgIHZhciBnZXRSYXRlID0gYXdhaXQgQVBJLmdldFJhdGUoZGF0YSk7CiAgICAgICAgICAgICAgICAvL2NvbmRpdGlvbiB0byBjaGVjayBpZiB0aGUgZGF0ZSB0aW1lIHNlbGVjdGVkIGlzIGxlc3NlciB0aGFuIGN1cnJlbnQgdGltZQogICAgICAgICAgICAgICAgaWYgKCFnZXRSYXRlPy5kYXRhPy5zdGF0dXMgJiYgIXRoaXMuZ2V0UmF0ZUNhbGwpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc2FibGVBZGRQYXltZW50QnRuID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICB0aGlzLmFsZXJ0RGlhbG9nID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICB0aGlzLmFsZXJ0TXNnID0KICAgICAgICAgICAgICAgICAgICAgICAgZ2V0UmF0ZT8uZGF0YT8ubWVzc2FnZSB8fCAiRXJyb3IgaW4gZ2V0dGluZyByYXRlIGRldGFpbHMiOwogICAgICAgICAgICAgICAgICAgIHRoaXMub3BlbkRhdGVQaWNrZXIgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICB0aGlzLm9wZW5UaW1lUGlja2VyID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgRXZlbnRCdXMuJGVtaXQoJ2RhdGV0aW1lLXNldCcpOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc2FibGVBZGRQYXltZW50QnRuID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5vcGVuRGF0ZVBpY2tlciA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIHRoaXMub3BlblRpbWVQaWNrZXIgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICBFdmVudEJ1cy4kZW1pdCgnZGF0ZXRpbWUtc2V0Jyk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB0aGlzLmJlZm9yZUVzdGltYXRlID0gT2JqZWN0LmFzc2lnbih7fSwgZ2V0UmF0ZT8uZGF0YT8uZGF0YSk7CiAgICAgICAgICAgICAgICAvLyBlc3RpbWF0ZWRWYWwgIT0gIiIgJiYKICAgICAgICAgICAgICAgIC8vIGVzdGltYXRlZFZhbCAhPSBudWxsICYmCiAgICAgICAgICAgICAgICAvLyBlc3RpbWF0ZWRWYWwgIT0gdW5kZWZpbmVkCiAgICAgICAgICAgICAgICAvLyAgID8gTnVtYmVyKGVzdGltYXRlZFZhbCkudG9GaXhlZCgyKQogICAgICAgICAgICAgICAgLy8gICA6IGVzdGltYXRlZFZhbDsKICAgICAgICAgICAgICAgIHRoaXMuYWRkUGF5bWVudEJ0bkxvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgfQogICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHsKICAgICAgICAgICAgICAgIHRoaXMuYWRkUGF5bWVudEJ0bkxvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgZm9ybWF0RGF0ZShkYXRlKSB7CiAgICAgICAgICAgIGxldCBzdHJpbmdkYXRlID0gZGF0ZS50b1N0cmluZygpOwogICAgICAgICAgICBpZiAoIWRhdGUpIHJldHVybiBudWxsOwoKICAgICAgICAgICAgY29uc3QgW3llYXIsIG1vbnRoLCBkYXldID0gc3RyaW5nZGF0ZS5zcGxpdCgiLSIpOwogICAgICAgICAgICByZXR1cm4gYCR7bW9udGh9LyR7ZGF5fS8ke3llYXJ9YDsKICAgICAgICB9LAogICAgICAgIHBhcnNlRGF0ZShkYXRlKSB7CiAgICAgICAgICAgIGlmICghZGF0ZSkgcmV0dXJuIG51bGw7CgogICAgICAgICAgICBjb25zdCBbbW9udGgsIGRheSwgeWVhcl0gPSBkYXRlLnNwbGl0KCIvIik7CiAgICAgICAgICAgIHJldHVybiBgJHt5ZWFyfS0ke21vbnRoLnBhZFN0YXJ0KDIsICIwIil9LSR7ZGF5LnBhZFN0YXJ0KDIsICIwIil9YDsKICAgICAgICB9LAogICAgICAgIGFzeW5jIGFkZFBheW1lbnQoKSB7CiAgICAgICAgICAgIGxldCBleGl0RGF0ZSA9IHRoaXMudGltZSAhPSBudWxsIHx8IHRoaXMudGltZSAhPT0gdW5kZWZpbmVkIHx8IHRoaXMudGltZSAhPSAiIiA/IGZvcm1hdCh0aGlzLnRpbWUsICd5eXl5LU1NLWRkJykgOiBmb3JtYXQobmV3IERhdGUoKSwgJ3l5eXktTU0tZGQnKQogICAgICAgICAgICBsZXQgZXhpdFRpbWUgPSB0aGlzLnRpbWUgIT0gbnVsbCB8fCB0aGlzLnRpbWUgIT09IHVuZGVmaW5lZCB8fCB0aGlzLnRpbWUgIT0gIiIgPyBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbCh0aGlzLnpvbmVEZXRhaWxzLCAndGltZVBpY2tlckNvbmZpZ3VyYXRpb24nKSAmJiB0aGlzLnpvbmVEZXRhaWxzLnRpbWVQaWNrZXJDb25maWd1cmF0aW9uID09IDEgPyBmb3JtYXQodGhpcy50aW1lLCAnaGg6bW0gYScpIDogIjExOjU5IFBNIiA6ICIiOwogICAgICAgICAgICBsZXQgZXhpdERhdGVUaW1lID0gZXhpdERhdGUgKyAiICIgKyBleGl0VGltZQogICAgICAgICAgICBsZXQgZW50cnlEYXRlVGltZSA9IHRoaXMuem9uZURldGFpbHMudGltZXpvbmUKICAgICAgICAgICAgICAgID8gZm9ybWF0KAogICAgICAgICAgICAgICAgICAgIGRhdGVUb1RpbWVab25lRGF0ZShuZXcgRGF0ZSgpLCB0aGlzLnpvbmVEZXRhaWxzLnRpbWV6b25lKSwKICAgICAgICAgICAgICAgICAgICAieXl5eS1NTS1kZCBoaDptbSBhIgogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgOiBmb3JtYXQobmV3IERhdGUoKSwgInl5eXktTU0tZGQnVCdISDptbSBhIik7CiAgICAgICAgICAgIGxldCBjb21taXREYXRhID0gewogICAgICAgICAgICAgICAgcGxhdGU6IHRoaXMubGljZW5jZVBsYXRlLAogICAgICAgICAgICAgICAgY29udGFjdDogdGhpcy5jb250YWN0T2JqPy5mb3JtYXR0ZWROdW1iZXIsCiAgICAgICAgICAgICAgICBlbnRyeVRpbWU6IGVudHJ5RGF0ZVRpbWUsCiAgICAgICAgICAgICAgICBlZHRQYXJhbXM6IHRoaXMuY2FzaW5vRGV0YWlscz8udXNlckRldGFpbD8uZWR0UGFyYW1zLAogICAgICAgICAgICAgICAgZXhpdFRpbWU6IGV4aXREYXRlVGltZSwKICAgICAgICAgICAgICAgIGVzdGltYXRlOiB0aGlzLmVzdGltYXRlLAogICAgICAgICAgICB9OwogICAgICAgICAgICBsZXQgZGV0YWlscyA9IGF3YWl0IEFQSS5wcmVwYWlkT3BlblRyYW5zYWN0aW9uKHsKICAgICAgICAgICAgICAgIHZlaGljbGVObzogdGhpcy5saWNlbmNlUGxhdGUsCiAgICAgICAgICAgICAgICBjb250YWN0OiB0aGlzLmNvbnRhY3RPYmo/LmZvcm1hdHRlZE51bWJlciwKICAgICAgICAgICAgICAgIGV4aXRUaW1lOiBleGl0RGF0ZVRpbWUsIHpjb2RlOiB0aGlzLnpvbmVEZXRhaWxzPy56Y29kZSwKICAgICAgICAgICAgICAgIG1pZDogdGhpcy56b25lRGV0YWlscz8ubWlkLAogICAgICAgICAgICAgICAgZXZlbnRUeXBlOiAiUGFpZEhvc3RQYXNzIiwKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBpZiAoZGV0YWlscz8uZGF0YT8uc3RhdHVzKSB7CiAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoIlNFVF9DQVNJTk9fVVNFUkRFVEFJTFMiLCBjb21taXREYXRhKTsKICAgICAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsgbmFtZTogJ2FkZHBheW1lbnQnLCBxdWVyeTogeyB6Y29kZTogdGhpcy56b25lRGV0YWlscz8uemNvZGUsIHNlc3Npb250eXBlOiAnY2ljbycsIHN0YXRlOiAnYWRkcGF5bWVudCcgfSB9KTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGlmIChkZXRhaWxzPy5kYXRhPy5tZXNzYWdlID09ICJCb29raW5nIEFscmVhZHkgRXhpc3RzIikgewogICAgICAgICAgICAgICAgICAgIGxldCBjb21taXREYXRhID0gewogICAgICAgICAgICAgICAgICAgICAgICBwbGF0ZTogdGhpcy5saWNlbmNlUGxhdGUsCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRhY3Q6IHRoaXMuY29udGFjdE9iai5mb3JtYXR0ZWROdW1iZXIsCiAgICAgICAgICAgICAgICAgICAgICAgIGVudHJ5VGltZTogZW50cnlEYXRlVGltZSwKICAgICAgICAgICAgICAgICAgICAgICAgZWR0UGFyYW1zOiB0aGlzLmNhc2lub0RldGFpbHM/LnVzZXJEZXRhaWw/LmVkdFBhcmFtcywKICAgICAgICAgICAgICAgICAgICAgICAgZXhpdFRpbWU6IGV4aXREYXRlVGltZSwKICAgICAgICAgICAgICAgICAgICAgICAgZXN0aW1hdGU6IHRoaXMuZXN0aW1hdGUsCiAgICAgICAgICAgICAgICAgICAgICAgIGJpZDogZGV0YWlscz8uZGF0YT8uZGF0YT8uYmlkCiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICBpZiAoZGV0YWlscz8uZGF0YT8uZGF0YT8uY2FyZE9uRmlsZSA9PSAwIHx8IGRldGFpbHM/LmRhdGE/LmRhdGE/LmNhcmRPbkZpbGUgPT0gMikgewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoIlNFVF9DQVNJTk9fVVNFUkRFVEFJTFMiLCBjb21taXREYXRhKTsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goeyBuYW1lOiAnYWRkcGF5bWVudCcsIHF1ZXJ5OiB7IHpjb2RlOiB0aGlzLnpvbmVEZXRhaWxzPy56Y29kZSwgc2Vzc2lvbnR5cGU6ICdjaWNvJywgc3RhdGU6ICdhZGRwYXltZW50JyB9IH0pOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChkZXRhaWxzPy5kYXRhPy5kYXRhPy5jYXJkT25GaWxlID09IDEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhpcy4kc3RvcmUuY29tbWl0KCJTRVRfQ0FTSU5PX1VTRVJERVRBSUxTIiwgY29tbWl0RGF0YSk7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRoaXMuJHJvdXRlci5yZXBsYWNlKHsgcGF0aDogIi9wcmVwYWlkaG9zdC9vZFJlY2VpcHQiIH0pOwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRyb3V0ZXIucmVwbGFjZSh7IHF1ZXJ5OiB7IGJpZDogZGV0YWlscz8uZGF0YT8uZGF0YT8uYmlkIH0gfSk7CgogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHRoaXMuYWxlcnRNc2cgPSBkZXRhaWxzPy5kYXRhPy5tZXNzYWdlID8gZGV0YWlscz8uZGF0YT8ubWVzc2FnZSA6ICIiOwoKICAgICAgICAgICAgICAgIHRoaXMuYWxlcnREaWFsb2cgPSB0cnVlOwogICAgICAgICAgICB9CiAgICAgICAgfSwKCiAgICAgICAgdXBwZXJjYXNlKCkgewogICAgICAgICAgICBpZiAocnVsZXMuYWxwaGFOdW1lcmljKHRoaXMubGljZW5jZVBsYXRlKSA9PT0gIk11c3QgYmUgYWxwaGFudW1lcmljIikgewogICAgICAgICAgICAgICAgdGhpcy5saWNlbmNlUGxhdGUgPSB0aGlzLmxpY2VuY2VQbGF0ZS5yZXBsYWNlKC9bXlx3XHNdL2dpLCAnJykKICAgICAgICAgICAgfQogICAgICAgICAgICB0aGlzLmxpY2VuY2VQbGF0ZSA9IHRoaXMubGljZW5jZVBsYXRlLnRyaW0oKQogICAgICAgICAgICB0aGlzLmxpY2VuY2VQbGF0ZSA9IHRoaXMubGljZW5jZVBsYXRlLnRvVXBwZXJDYXNlKCk7CiAgICAgICAgfSwKICAgICAgICAvKioKICAgICAgICAgKiBAbWV0aG9kIGdldFpvbmVEZXRhaWxzIGZldGNoIHRoZSB6b25lIGRldGFpbHMgYW5kIGNvbW1pdCBTRVRfWk9ORV9ERVRBSUxTIG11dGF0aW9uLgogICAgICAgICAqLwogICAgICAgIGFzeW5jIGdldFpvbmVEZXRhaWxzKHNlYXJjaFBhcmFtS2V5LCBzZWFyY2hQYXJhbVZhbHVlKSB7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICB2YXIgem9uZURldGFpbHMgPSBhd2FpdCBBUEkuZ2V0Wm9uZURldGFpbHMoc2VhcmNoUGFyYW1LZXksIHNlYXJjaFBhcmFtVmFsdWUpCiAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoIlNFVF9aT05FX0RFVEFJTFMiLCB6b25lRGV0YWlscz8uZGF0YT8uem9uZSk7CiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7CiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIC8qKgogICAgICAgICAqIEBtZXRob2QgZ2V0T25EZW1hbmRab25lRGV0YWlscyBmZXRjaCB0aGUgb25kZW1hbmQgem9uZSBkZXRhaWxzIGZyb20gUGNvbSBhbmQgY29tbWl0IFNFVF9aT05FX0RFVEFJTFMgbXV0YXRpb24uCiAgICAgICAgICovCiAgICAgICAgYXN5bmMgZ2V0T25EZW1hbmRab25lRGV0YWlscyhzZWFyY2hQYXJhbVZhbHVlKSB7CiAgICAgICAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICB2YXIgem9uZURldGFpbHMgPSBhd2FpdCBBUEkuZ2V0T25EZW1hbmRab25lRGV0YWlscyhzZWFyY2hQYXJhbVZhbHVlKTsKICAgICAgICAgICAgICAgIHRoaXMuc2V0RGVmYXVsdERhdGUoKTsKICAgICAgICAgICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICAgICAgaWYgKHpvbmVEZXRhaWxzLmRhdGE/LmxvdCkgewogICAgICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgKICAgICAgICAgICAgICAgICAgICAgICAgIlNFVF9PTl9ERU1BTkRfWk9ORV9ERVRBSUxTIiwKICAgICAgICAgICAgICAgICAgICAgICAgem9uZURldGFpbHMuZGF0YT8ubG90CiAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgICB0aGlzLnNldERhdGVQaWNrZXIoKTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5hbGVydE1zZyA9CiAgICAgICAgICAgICAgICAgICAgICAgIHpvbmVEZXRhaWxzPy5kYXRhPy5tZXNzYWdlIHx8ICJFcnJvciBpbiBsb2FkaW5nIGxvY2F0aW9uIGRldGFpbHMuIjsKICAgICAgICAgICAgICAgICAgICB0aGlzLmFsZXJ0RGlhbG9nID0gdHJ1ZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICAgICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpOwogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBvbkNvbnRhY3RJbnB1dChjb250YWN0RGV0YWlscykgewogICAgICAgICAgICB0aGlzLmlzQ29udGFjdFZhbGlkID0gY29udGFjdERldGFpbHM/LmlzVmFsaWQ7CiAgICAgICAgICAgIHRoaXMuY29udGFjdE9iaiA9IE9iamVjdC5hc3NpZ24oe30sIGNvbnRhY3REZXRhaWxzKTsKICAgICAgICB9LAogICAgICAgIHNldFJlZW50ZXJQbGF0ZUZsYWcoKSB7CiAgICAgICAgICAgIHRoaXMubGljZW5jZVBsYXRlID0gdGhpcy5zZWxlY3RlZFBsYXRlIHx8ICIiOwogICAgICAgICAgICB0aGlzLnJlRW50ZXJQbGF0ZSA9IHRydWU7CiAgICAgICAgICAgIHRoaXMuY29uZmlybUNyZWF0ZVNlc3Npb25EaWFsb2cgPSBmYWxzZTsKICAgICAgICB9LAogICAgICAgIC8qKgogICAgICAgICAqIEBtZXRob2QgY3JlYXRlU2Vzc2lvbiBGZXRjaCBib29raW5nIGlkIG9uIGFkZCBib29raW5nIGFuZCBmZXRjaCB0aGUgYm9va2luZyBpbmZvLgogICAgICAgICAqLwogICAgICAgIGFzeW5jIGNyZWF0ZVNlc3Npb24oKSB7CiAgICAgICAgICAgIHRoaXMuYWRkTGljZW5jZVBsYXRlQnRuTG9hZGluZyA9IHRydWU7CiAgICAgICAgICAgIGxldCBwb3N0T2JqID0gewogICAgICAgICAgICAgICAgY29udGFjdDogdGhpcy5jb250YWN0T2JqPy5mb3JtYXR0ZWROdW1iZXIsCiAgICAgICAgICAgICAgICB1bmlxdWVJRDogdGhpcy5jb250YWN0T2JqPy5uYXRpb25hbE51bWJlciwKICAgICAgICAgICAgICAgIHZlaGljbGVObzogdGhpcy5saWNlbmNlUGxhdGUudG9VcHBlckNhc2UoKSwKICAgICAgICAgICAgICAgIGxvY2F0aW9uQ29kZTogdGhpcy56b25lRGV0YWlscy56Y29kZSwKICAgICAgICAgICAgICAgIHppZDogdGhpcy56b25lRGV0YWlscy56aWQsCiAgICAgICAgICAgICAgICBlbnRyeXRpbWU6IGZvcm1hdCgKICAgICAgICAgICAgICAgICAgICBuZXcgRGF0ZSgKICAgICAgICAgICAgICAgICAgICAgICAgbmV3IERhdGUoKS50b0xvY2FsZVN0cmluZygiZW4tVVMiLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lWm9uZTogdGhpcy56b25lRGV0YWlscy50aW1lem9uZSwKICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgICAgICJ5eXl5LU1NLWRkIEhIOm1tOnNzIgogICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgIHNvdXJjZTogImFwcGNsaXAiLAogICAgICAgICAgICAgICAgd2ViVmlldzogIjEiLAogICAgICAgICAgICAgICAgdHlwZTogIjIiLAogICAgICAgICAgICAgICAgc3RhdGU6IDIsCiAgICAgICAgICAgICAgICBwYXltZW50X3N0YXR1czogMCwKICAgICAgICAgICAgICAgIHR4bklEX2FkZENDOiAwLAogICAgICAgICAgICB9OwogICAgICAgICAgICBpZiAodGhpcy5yZUVudGVyUGxhdGUpIHsKICAgICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24ocG9zdE9iaiwgeyBjcmVhdGVOZXdTZXNzaW9uOiAxIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICB2YXIgc2Vzc2lvbiA9IGF3YWl0IEFQSS5jcmVhdGVTZXNzaW9uKHBvc3RPYmopOwogICAgICAgICAgICAgICAgbGV0IGJpZCA9IHNlc3Npb24/LmRhdGE/LnJlZm5vOwogICAgICAgICAgICAgICAgaWYgKHNlc3Npb24uZGF0YS5zdGF0dXMgPT09IGZhbHNlKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5lcnJNc2cgPSBzZXNzaW9uPy5kYXRhPy5tZXNzYWdlID8gc2Vzc2lvbi5kYXRhLm1lc3NhZ2UgOiAiIjsKICAgICAgICAgICAgICAgICAgICBpZiAoCiAgICAgICAgICAgICAgICAgICAgICAgIHNlc3Npb24/LmRhdGE/LnNob3dDcmVhdGVOZXdTZXNzaW9uUG9wdXAgJiYKICAgICAgICAgICAgICAgICAgICAgICAgc2Vzc2lvbi5kYXRhLnNob3dDcmVhdGVOZXdTZXNzaW9uUG9wdXAgPT0gMQogICAgICAgICAgICAgICAgICAgICkgewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBvc3RUb0xvZ2dlckFQSSh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwaG9uZTogdGhpcy5jb250YWN0T2JqPy5uYXRpb25hbE51bWJlciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYXRlOiB0aGlzLmxpY2VuY2VQbGF0ZS50b1VwcGVyQ2FzZSgpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzVGV4dDogIlBhcmtlciBzZXNzaW9uIG5vdCBmb3VuZCBpbiB0aGUgc3lzdGVtLiIsCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbmZpcm1DcmVhdGVTZXNzaW9uRGlhbG9nID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRMaWNlbmNlUGxhdGVCdG5Mb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgdGhpcy5lcnJEaWFsb2cgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkTGljZW5jZVBsYXRlQnRuTG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuZ2V0Qm9va2luZ0RldGFpbHMoYmlkKTsKICAgICAgICAgICAgICAgIHRoaXMuYWRkTGljZW5jZVBsYXRlQnRuTG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICAgICAgdGhpcy5yZUVudGVyUGxhdGUKICAgICAgICAgICAgICAgICAgICA/IHRoaXMucG9zdFRvTG9nZ2VyQVBJKHsKICAgICAgICAgICAgICAgICAgICAgICAgcGhvbmU6IHRoaXMuY29udGFjdE9iaj8ubmF0aW9uYWxOdW1iZXIsCiAgICAgICAgICAgICAgICAgICAgICAgIHJlZklkOiBiaWQsCiAgICAgICAgICAgICAgICAgICAgICAgIGljb246ICJsb2dpbiIsCiAgICAgICAgICAgICAgICAgICAgICAgIHBsYXRlOiB0aGlzLmxpY2VuY2VQbGF0ZS50b1VwcGVyQ2FzZSgpLAogICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXNUZXh0OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgIlBhcmtlciBwbGF0ZS9jb250YWN0IG51bWJlciBub3QgZm91bmQgaW4gdGhlIHN5c3RlbS4gUGFya2VyIGNyZWF0ZWQgYSBuZXcgc2Vzc2lvbiB1c2luZyBnZW5lcmljIHBheW1lbnQgUVIiLAogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgOiB0aGlzLnBvc3RUb0xvZ2dlckFQSSh7CiAgICAgICAgICAgICAgICAgICAgICAgIHBob25lOiB0aGlzLmNvbnRhY3RPYmo/Lm5hdGlvbmFsTnVtYmVyLAogICAgICAgICAgICAgICAgICAgICAgICByZWZJZDogYmlkLAogICAgICAgICAgICAgICAgICAgICAgICBpY29uOiAibG9naW4iLAogICAgICAgICAgICAgICAgICAgICAgICBwbGF0ZTogdGhpcy5saWNlbmNlUGxhdGUudG9VcHBlckNhc2UoKSwKICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzVGV4dDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICJQYXJrZXIgc2Vzc2lvbiBmb3VuZC4gUGFya2VyIG9wZW5lZCBoaXMvaGVyIHNlc3Npb24gdXNpbmcgZ2VuZXJpYyBwYXltZW50IFFSIiwKICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICB0aGlzLiRyb3V0ZXIucmVwbGFjZSh7IHF1ZXJ5OiB7IGJpZDogYmlkIH0gfSk7CiAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7CiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgICAgICAgICB0aGlzLmFkZExpY2VuY2VQbGF0ZUJ0bkxvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgLyoqCiAgICAgICAgICogQG1ldGhvZCBnZXRCb29raW5nRGV0YWlscyBmZXRjaCB0aGUgYm9va2luZyBkZXRhaWxzIGFuZCBjb21taXQgU0VUX0JPT0tJTkdfREVUQUlMUyBtdXRhdGlvbi4KICAgICAgICAgKi8KICAgICAgICBhc3luYyBnZXRCb29raW5nRGV0YWlscyhib29raW5nSWQpIHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIHZhciBib29raW5nRGV0YWlscyA9IGF3YWl0IEFQSS5nZXRCb29raW5nU3RhdGUoYm9va2luZ0lkKQogICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KAogICAgICAgICAgICAgICAgICAgICJTRVRfQk9PS0lOR19ERVRBSUxTIiwKICAgICAgICAgICAgICAgICAgICBib29raW5nRGV0YWlscy5kYXRhPy5kYXRhID8gYm9va2luZ0RldGFpbHMuZGF0YS5kYXRhIDogbnVsbAogICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgY2xvc2VDb25maXJtQ3JlYXRlU2Vzc2lvbkRpYWxvZygpIHsKICAgICAgICAgICAgdGhpcy5jb25maXJtQ3JlYXRlU2Vzc2lvbkRpYWxvZyA9IGZhbHNlOwogICAgICAgICAgICB0aGlzLmFkZExpY2VuY2VQbGF0ZUJ0bkxvYWRpbmcgPSBmYWxzZTsKICAgICAgICB9LAogICAgfSwKfTsK"},{"version":3,"sources":["CreateView.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8RA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"CreateView.vue","sourceRoot":"src/views/information","sourcesContent":["<template>\n    <v-container fluid pa-0>\n        <v-dialog v-model=\"loading\" persistent>\n            <v-card class=\"pa-4\">\n                <v-progress-circular indeterminate color=\"red\"></v-progress-circular>\n                <span class=\"ml-4\" style=\"font-size: 14px\">Please wait...</span>\n            </v-card>\n        </v-dialog>\n        <boiler-plate>\n            <div class=\"parking-values \">\n                <v-container pa-0 class=\"text-center\">\n                    <v-row no-gutters class=\"location-values \">\n                        <v-col cols=\"12\" class=\" pb-0\">\n                            <v-container pl-10>\n                                <p class=\"welcome text-start\">Welcome to</p>\n                                <p class=\"location text-start\">{{ zoneName }}</p>\n                            </v-container>\n                        </v-col>\n                    </v-row>\n                </v-container>\n            </div>\n            <v-container fluid class=\"text-center px-10\" elevation=\"20\">\n                <v-card  class=\"dialog-card\">\n                    <v-card-text>\n                        <v-container>\n                            <v-form>\n                                <v-row no-gutters>\n                                    <v-col class=\"text-left mb-5\">\n                                        <span style=\"font-weight: 700;font-size: 14px; \">Your Information</span>\n                                    </v-col>\n                                </v-row>\n                                <v-row no-gutters class=\"mb-5\">\n                                    <v-col cols=\"12\" v-if=\"!edtPhoneInput\">\n                                        <sphere-phone-number-input v-model=\"contactObj.phoneNumber\" size=\"md\"\n                                            @update=\"onContactInput\" show-code-on-list\n                                            :default-country-code=\"contactOptions.defaultCountry\"\n                                            :disabled=\"contactDisabled\" :color=\"contactOptions.color\"\n                                            :valid-color=\"contactOptions.validColor\"\n                                            :error-color=\"contactOptions.errorColor\"\n                                            :border-radius=\"contactOptions.contactBorderRadius\" :error=\"!isContactValid\"\n                                            required\n                                            :translations=\"contactOptions.translations\"></sphere-phone-number-input>\n                                    </v-col>\n                                    <v-col cols=\"11\" v-if=\"edtPhoneInput\">\n                                        <v-text-field v-model=\"contactObj.phoneNumber\" disabled oulined></v-text-field>\n                                    </v-col>\n                                    <v-col cols=\"1\"> </v-col>\n                                    <v-col cols=\"11\" v-if=\"!isPQREndReservation\">\n                                        <span style=\"font-size: 10px; line-height: 1.5\">Phone number is mandatory for\n                                            generating\n                                            the\n                                            receipt</span>\n                                    </v-col>\n                                </v-row>\n                                <v-row no-gutters class=\"mb-3\">\n                                    <v-col>\n                                        <v-text-field class=\"pt-0\" v-model=\"licencePlate\" hide-details=\"auto\" maxlength=\"8\"\n                                            dense outlined :rules=\"[rules.alphaNumeric]\" @keyup=\"uppercase\"\n                                            label=\"License Plate *\" clearable>\n\n                                        </v-text-field>\n                                    </v-col>\n                                </v-row>\n                                <v-row no-gutters>\n                                    <v-col cols=\"12\" class=\"text-left pb-1\" style=\"font-size: 10px;font-weight: 300;\">\n                                        <p class=\"mb-0\" v-if=\"zoneDetails.lpr_status == '1'\">\n                                            Enter your license plate and phone number for hassle-free\n                                            parking\n                                        </p>\n                                        <p class=\"mb-0\" v-else>\n                                            Enter your phone number for hassle-free parking\n                                        </p>\n                                    </v-col>\n\n                                </v-row>\n                                <v-row no-gutters v-if=\"isPQREndReservation\">\n                                    <v-col cols=\"12\">\n                                        <v-row no-gutters class=\" text-left pa-0 mb-0\">\n                                            <v-col cols=\"12\">\n                                                <p style=\"font-weight: 700;color: #3D4C56;margin-bottom: 3px;\">\n                                                    Set Your Exit Date <span\n                                                        v-if=\"isPQREndReservation && Object.hasOwnProperty.call(zoneDetails, 'timePickerConfiguration') && zoneDetails.timePickerConfiguration == '1'\">and\n                                                        Time</span>\n                                                </p>\n                                                <p class=\"text-left ma-0\"\n                                                    style=\"color: #6F6F6F;font-size: 10px; font-weight: 300; \"\n                                                    v-if=\"isPQREndReservation\">\n                                                    If you're a hotel guest, this is your checkout date.\n                                                </p>\n                                            </v-col>\n                                        </v-row>\n                                        <v-row no-gutters>\n                                            <v-col cols=\"12\" class=\" text-center color-black\" style=\"font-size: 12px\">\n\n                                                <v-row no-gutters class=\"py-2\">\n\n                                                    <v-col cols=\"12\">\n                                                        <v-text-field v-model=\"computedDateFormatted\" outlined dense\n                                                            class=\"date-text\" @click=\"() => { openDatePicker = true }\"\n                                                            hide-details=\"auto\" readonly>\n                                                            <template v-slot:prepend-inner>\n                                                                <v-icon class=\"material-icons-outlined\"\n                                                                    color=\"#3D4C56\">calendar_today</v-icon>\n                                                                <v-divider color=\"grey\" vertical\n                                                                    class=\"ml-3 mr-3\"></v-divider>\n                                                            </template>\n                                                        </v-text-field>\n                                                        <v-dialog v-model=\"openDatePicker\" max-width=\"450px\">\n                                                            <v-card\n                                                                style=\"background-color: #F2555C;color: white;\"><v-card-title>\n                                                                    <v-row no-gutters>\n                                                                        <v-col class=\"text-left\" cols=\"12\">\n                                                                            <span style=\"font-size:15px;color: #fabbbe;\">{{\n                                                                                time\n                                                                                !== null && time !== \"\" ?\n                                                                                formattedYear : \"\" }}</span>\n                                                                        </v-col>\n                                                                        <v-col>\n                                                                            <span style=\"font-size:30px\"> {{ time !== null\n                                                                                &&\n                                                                                time !== \"\" ? formattedDateTime :\n                                                                                \"\"\n                                                                            }}</span>\n                                                                        </v-col>\n                                                                    </v-row>\n                                                                </v-card-title></v-card>\n                                                            <Calendar inline class=\"text-left\" value :stepMinute=\"15\"\n                                                                hourFormat=\"12\" :minDate=\"minTimeDate\"\n                                                                @date-select=\"onTimePickerChange\" :maxDate=\"maxTimeDate\"\n                                                                v-model=\"time\" />\n                                                        </v-dialog>\n                                                    </v-col>\n                                                </v-row>\n                                                <v-row no-gutters class=\"pt-2\"\n                                                    v-if=\"Object.hasOwnProperty.call(zoneDetails, 'timePickerConfiguration') && zoneDetails.timePickerConfiguration == '1'\">\n                                                    <v-col cols=\"12\">\n                                                        <v-row no-gutters class=\"pb-0\">\n                                                            <v-col class=\"pb-0\">\n                                                                <v-text-field class=\"date-text\" v-model=\"formattedTime\"\n                                                                    dense outlined @click=\"() => {\n                                                                        openTimePicker = true;\n                                                                    }\" readonly>\n                                                                    <template v-slot:prepend-inner>\n                                                                        <v-icon class=\"material-icons-outlined\"\n                                                                            color=\"#3D4C56\">schedule</v-icon>\n                                                                        <v-divider color=\"grey\" vertical\n                                                                            class=\"ml-3 mr-3\"></v-divider>\n                                                                    </template>\n                                                                </v-text-field>\n                                                                <v-dialog v-model=\"openTimePicker\" max-width=\"300px\"\n                                                                    @click:outside=\"() => { setDefaultDate(); onTimePickerChange() }\">\n                                                                    <v-card\n                                                                        style=\"background-color: #F2555C;color: white;\"><v-card-title>What\n                                                                            time will you\n                                                                            exit?</v-card-title></v-card>\n                                                                    <Calendar inline time-only show-time class=\"text-left \"\n                                                                        value :stepMinute=\"15\" hourFormat=\"12\"\n                                                                        :minDate=\"minTimeDate\" :maxDate=\"maxTimeDate\"\n                                                                        v-model=\"time\" />\n                                                                </v-dialog>\n                                                            </v-col>\n                                                        </v-row>\n                                                    </v-col>\n                                                </v-row>\n                                                <v-row class=\"text-left mt-0  py-0 pb-3\">\n                                                    <v-col class=\"pt-0\">\n                                                        <p style=\"\n                                                    font-size: 10px; \n                                                    font-weight: 700;\n                              color: #3D4C56;\n                              line-height: 13px;\n                            \" class=\"ma-0\">\n                                                            HOURS OF OPERATION\n                                                        </p>\n                                                        <p class=\"ma-0\" style=\"font-size: 9px; \">\n                                                            Today :\n                                                            {{\n                                                                onDemandZoneDetails.hasOwnProperty(\n                                                                    \"todaysHoursOfOperation\"\n                                                                ) &&\n                                                                onDemandZoneDetails.todaysHoursOfOperation.hasOwnProperty(\n                                                                    \"is24HourOpen\"\n                                                                ) &&\n                                                                onDemandZoneDetails.todaysHoursOfOperation\n                                                                    .is24HourOpen == true\n                                                                ? \"Open 24 / 7\"\n                                                                : \"\"\n                                                            }}\n                                                        </p>\n                                                    </v-col>\n                                                </v-row>\n                                            </v-col>\n                                        </v-row>\n                                        <v-row no-gutters class=\" information pa-0\" v-if=\"estimate != null && Object.keys(estimate).length != 0\n                                                \">\n                                            <v-col cols=\"10\" class=\"text-left\">\n                                                <p style=\"color: #3D4C56; font-weight: bolder\">\n                                                    Your Parking Fees\n                                                </p>\n                                            </v-col>\n                                        </v-row>\n\n                                        <Estimate :singleQuotes=\"singleQuotes\" :doubleQuotes=\"doubleQuotes\"\n                                            :estimate=\"estimate\" :beforeEstimate=\"beforeEstimate\"\n                                            :formattedEntryDisplayTime=\"formattedEntryDisplayTime\"></Estimate>\n                                    </v-col>\n                                </v-row>\n                            </v-form>\n                        </v-container>\n                        <v-card-actions class=\"\">\n                            <v-container class=\"pa-0 text-center\" v-if=\"isPQREndReservation\">\n                                <v-row no-gutters>\n                                    <v-col cols=\"12\">\n                                        <v-btn class=\"add_licence_plate_btn\" width=\"100%\" :disabled=\"disableSubmitBtn\"\n                                            :loading=\"addPaymentBtnLoading\" @click=\"addPayment\">Add\n                                            Payment</v-btn>\n                                    </v-col>\n                                </v-row>\n                                <v-row no-gutters>\n                                    <v-col cols=\"12\" class=\"px-2 mt-4\">\n                                        <v-btn rounded elevation=\"20\" width=\"50%\" class=\"white--text\" color=\"primary\"\n                                            v-if=\"this.casinoDetails.userDetail.bid\" @click=\"reloadBooking\">Cancel</v-btn>\n                                    </v-col>\n                                </v-row>\n                            </v-container>\n                            <v-container class=\"pa-0\" fluid v-else>\n                                <v-row no-gutters>\n                                    <v-col cols=\"12\" class=\"px-2\">\n                                        <v-btn width=\"100%\" class=\"add_licence_plate_btn \"\n                                            :loading=\"addLicencePlateBtnLoading\" :disabled=\"disableAddLicencePlateBtn\"\n                                            @click=\"createSession()\">{{\n                                                reEnterPlate ? \"Confirm\" : \"Continue\" }}</v-btn>\n                                    </v-col>\n                                </v-row>\n                                <v-row no-gutters>\n                                    <v-col cols=\"12\" class=\"mt-2 text-center color-black px-2\" style=\"font-size: 12px\">\n                                        <p class=\"mb-0\" v-show=\"reEnterPlate\">\n                                            Please provide correct license plate and phone number.\n                                            Without one, you could be subject to a parking violation and\n                                            issued a citation.\n                                        </p>\n                                        <p class=\"mb-0\">\n                                            A valid credit card is required to park. Without one, you\n                                            could be subject to a parking violation and issued a\n                                            citation.\n                                        </p>\n                                    </v-col>\n                                </v-row>\n                            </v-container>\n                        </v-card-actions>\n                    </v-card-text>\n\n                </v-card>\n            </v-container>\n            <footer>\n                <v-row class=\"text-center parking.com pb-3\" no-gutters>\n                    <v-col cols=\"12\">\n                        <v-img alt=\"PARKING.COM\" class=\"my-3\" height=\"42\" contain src=\"@/assets/logo_huge_drk.png\" />\n                    </v-col>\n                </v-row>\n            </footer>\n            <v-dialog v-model=\"confirmCreateSessionDialog\" max-width=\"fit-content\">\n                <v-card class=\"pa-0\">\n                    <v-card-title class=\"justify-center\">\n                        <v-icon x-large color=\"red accent-2\">mdi-alert-outline</v-icon>\n                    </v-card-title>\n                    <v-card-text class=\"text-center mt-5\" style=\"font-size: 15px\">\n                        <span v-html=\"errMsg\"></span>\n                    </v-card-text>\n                    <v-card-actions class=\"text-center pb-6\">\n                        <v-container pa-0 fluid>\n                            <v-row no-gutters>\n                                <v-col cols=\"12\">\n                                    <v-btn rounded block elevation=\"0\" class=\"white--text exit_dialog_btn\"\n                                        @click=\"setReenterPlateFlag\">OK</v-btn>\n                                </v-col>\n                            </v-row>\n                        </v-container>\n                    </v-card-actions>\n                </v-card>\n            </v-dialog>\n        </boiler-plate>\n\n    </v-container>\n</template>\n<script>\n// import Vue from \"vue\";\nimport Estimate from '@/components/Estimate.vue';\nimport API from '@/api';\nimport Calendar from '@/uiComponents/Calendar/Calendar.vue'\nimport { EventBus } from \"@/lib/EventBus\";\nimport { mapGetters } from \"vuex\";\nimport { addMinutes, addDays, addHours } from \"date-fns\";\nimport { format, isValid } from \"date-fns\";\nimport \"primevue/resources/themes/saga-blue/theme.css\"       //theme\nimport \"primevue/resources/primevue.min.css\"                 //core css\nimport \"primeicons/primeicons.css\"                           //icons\nimport { dateToTimeZoneDate } from \"@/utils/formatDateTime\";\n// import axios from \"axios\";\nimport SpherePhoneNumberInput from '@/uiComponents/SpherePhoneNumberInput/VuePhoneNumberInput'\n// import VuePhoneNumberInput from \"vue-phone-number-input\";\n// import \"vue-phone-number-input/dist/vue-phone-number-input.css\";\n// import moment from \"moment\";\n// Vue.use(moment);\nimport rules from \"@/utils/rules\";\nexport default {\n    data: () => ({\n        date: \"\",\n        time: \"\",\n        openTimePicker: false,\n        openDatePicker: false,\n        minTimeDate: null,\n        maxTimeDate: null,\n        // isPQREndReservation: true,\n        currentDate: format(new Date(), 'yyyy-MM-dd'),\n        edtEntryTime: null,\n        edtPhoneInput: false,\n        contactDisabled: false,\n        selectedPlate: \"\",\n        reEnterPlate: false,\n        edtBid: null,\n        confirmCreateSessionDialog: false,\n        addLicencePlateBtnLoading: false,\n        errDialog: false,\n        errMsg: \"\",\n        alertDialog: false,\n        alertMsg: \"\",\n        stopTime: \"\",\n        exitTimeSelected: {},\n        timePickerHrRange: null,\n        timeExceeded: false,\n        timePickerMinRange: null,\n\n        disableAddPaymentBtn: false,\n        maxDateTime: null,\n        getRateCall: false,\n        getRateText: \"\",\n        Timemenu: false,\n        startDate: \"\",\n        estimate: null,\n        beforeEstimate: null,\n        Datemenu: false,\n        exitDate: null,\n        dateFormatted: null,\n        rules: rules,\n        isContactValid: true,\n        licencePlate: \"\",\n        contactObj: {},\n        loading: false,\n        contactOptions: {\n            color: \"#0288D1\",\n            validColor: \"#0288D1\",\n            contactBorderRadius: 0,\n            errorColor: \"#FF5252\",\n            defaultCountry: \"US\",\n            translations: {\n                phoneNumberLabel: \"Contact No\",\n            },\n        },\n        addPaymentBtnLoading: false,\n    }),\n    components: {\n        // VuePhoneNumberInput,\n        Calendar, Estimate, SpherePhoneNumberInput\n    },\n    beforeRouteEnter(to, from, next) {\n        next(async (vm) => {\n            const params = new URLSearchParams(window.location.search)\n            let searchParamKey = params.has('zcode') !== null ? '?zcode' : params.has('gateId') !== null ? '?gateId' : \"\";\n            let searchParamValue = params.has('zcode') !== null ? params.get('zcode') : params.has('gateId') !== null ? params.get('gateId') : \"\";\n            switch (searchParamKey) {\n                case \"?zcode\":\n                    await vm.getZoneDetails(searchParamKey, searchParamValue);\n                    if (vm.isPQREndReservation) {\n                        await vm.getOnDemandZoneDetails(searchParamValue);\n                    }\n                    break;\n                case \"?gateid\":\n                    //await self.getZoneDetails(searchParamKey, searchParamValue);\n                    break;\n            }\n            if (vm.isPQREndReservation) {\n                vm.contactObj =\n                    vm.casinoDetails != null &&\n                        Object.hasOwnProperty.call(vm.casinoDetails, \"userDetail\") &&\n                        Object.hasOwnProperty.call(vm.casinoDetails?.userDetail, \"contact\") &&\n                        vm.casinoDetails?.userDetail?.contact != undefined &&\n                        vm.casinoDetails?.userDetail?.contact != null\n                        ? Object.assign(vm.contactObj, {\n                            countryCode:\n                                vm.casinoDetails?.userDetail?.contact.slice(0, -10) == \"+91\"\n                                    ? \"IN\"\n                                    : vm.casinoDetails?.userDetail?.contact.slice(0, -10) ==\n                                        \"+1\"\n                                        ? \"US\"\n                                        : \"\",\n                            phoneNumber: vm.casinoDetails?.userDetail?.contact,\n                            formattedNumber: \"+\" + vm.casinoDetails.userDetail.contact,\n                        })\n                        : {};\n                vm.licencePlate = vm.casinoDetails?.userDetail.plate\n                    ? vm.casinoDetails?.userDetail.plate\n                    : \"\";\n                if (window.location.href.includes('bid')) {\n                    let hrefParams = window.location.href.split('createsession');\n                    let paramArray = hrefParams[1].split('&')\n                    let phoneParam = paramArray.length >= 1 ? paramArray[0].split('=')[1] : \"\";\n                    let bidParam = paramArray.length >= 2 ? paramArray[1].split('=')[1] : \"\";\n                    let plateParam = paramArray.length >= 3 ? paramArray[2].split('=')[1] : \"\";\n                    let entrytimeparam = paramArray.length >= 4 ? paramArray[3].split('=')[1] : \"\";          // vm.contactObj.phoneNumber = phoneParam;\n                    vm.edtEntryTime = entrytimeparam != null && entrytimeparam !== \"\" && entrytimeparam != undefined ? format(new Date(vm.formatExitDateTime(entrytimeparam, 'date')), \"yyyy-MM-dd'T'HH:mm:ss\") : format(dateToTimeZoneDate(new Date(), vm.zoneDetails.timezone), \"yyyy-MM-dd'T'HH:mm:ss\")\n                    vm.licencePlate = plateParam;\n                    vm.edtBid = bidParam;\n                    let guestContact = phoneParam ? {\n                        countryCode:\n                            phoneParam.slice(0, -10) == \"91\"\n                                ? \"IN\"\n                                : phoneParam.slice(0, -10) == \"1\"\n                                    ? \"US\"\n                                    : \"\",\n                        phoneNumber: phoneParam,\n                        formattedNumber: \"+\" + phoneParam,\n                    } : vm.contactObj;\n                    if (phoneParam !== \"\" && phoneParam !== null && phoneParam != undefined) {\n                        vm.edtPhoneInput = true;\n                        vm.contactObj = Object.assign({}, guestContact);\n                        vm.contactDisabled = true;\n                        vm.contactObj.isValid = true;\n                    }\n                    let commitData = {\n                        plate: vm.licencePlate,\n                        contact: vm.contactObj?.formattedNumber,\n                        bid: vm.edtBid,\n                        entrytime: vm.edtEntryTime,\n                        edtParams: hrefParams[1]\n                    }\n                    vm.$store.commit(\"SET_CASINO_USERDETAILS\", commitData);\n                    vm.$store.commit(\"SET_TEMPLATE_FLAGS\", 'atlantic-flag');\n\n                }\n            }\n            else {\n                vm.edtPhoneInput = false;\n            }\n        });\n    },\n    watch: {\n        time(newVal, oldVal) {\n            if (oldVal != null && newVal != null && oldVal != newVal && oldVal != \"\" && newVal != \"\" && (isValid(newVal))) {\n                this.round(newVal);\n            }\n            // this.setTimePicker(newVal);\n        },\n    },\n    computed: {\n        zoneName() {\n            return this.isPQREndReservation ? this.onDemandZoneDetails?.name\n                ? this.onDemandZoneDetails?.name\n                : \"\" : this.zoneDetails?.zoneName\n                ? this.zoneDetails?.zoneName\n                : \"\"\n        },\n        formattedDateTime() {\n            return this.time !== null && this.time !== undefined && this.time !== \"\" ? format(this.time, 'iii, LLL dd') : \"\"\n        },\n        formattedYear() {\n            return this.time !== null && this.time !== undefined && this.time !== \"\" ? format(this.time, 'yyyy') : \"\"\n        },\n        formattedTime() {\n            return this.time !== null && this.time !== undefined && this.time !== \"\" ? format(this.time, 'hh:mm aa') : \"\"\n        },\n        ...mapGetters({\n            casinoDetails: \"getterCasinoDetails\",\n            zoneDetails: \"getterZoneDetails\",\n            onDemandZoneDetails: \"getterOnDemandZoneDetails\",\n            templateFlags: \"getterTemplateFlags\",\n            isPQREndReservation: \"getterZoneIsPQREndReservation\",\n        }),\n        singleQuotes() {\n            return this.time !== null && this.time !== undefined && this.time !== \"\" && Object.hasOwnProperty.call(this.zoneDetails, 'timePickerConfiguration') && this.zoneDetails.timePickerConfiguration == \"0\" ? (format(this.time, 'yyyy-MM-dd') == this.currentDate || (this.beforeEstimate !== null && this.beforeEstimate !== undefined && this.beforeEstimate !== \"\" && this.estimate !== null && this.estimate !== undefined && this.estimate !== \"\" && this.beforeEstimate.grandTotal == this.estimate.grandTotal)) : true\n        },\n        doubleQuotes() {\n            return this.time !== null && this.time !== undefined && this.time !== \"\" && Object.hasOwnProperty.call(this.zoneDetails, 'timePickerConfiguration') && this.zoneDetails.timePickerConfiguration == \"0\" ? (format(this.time, 'yyyy-MM-dd') != this.currentDate && (this.beforeEstimate !== null && this.beforeEstimate !== undefined && this.beforeEstimate !== \"\" && this.estimate !== null && this.estimate !== undefined && this.estimate !== \"\" && this.beforeEstimate.grandTotal != this.estimate.grandTotal)) : false\n        },\n        formattedEntryDisplayTime() {\n            return this.casinoDetails.userDetail.entrytime !== null && this.casinoDetails.userDetail.entrytime !== undefined && this.casinoDetails.userDetail.entrytime !== \"\" ? format((new Date(this.casinoDetails.userDetail.entrytime)), 'hh:mm a') : format(dateToTimeZoneDate(new Date(), this.zoneDetails.timezone), 'hh:mm a');\n        },\n        infoFlag() {\n            return this.contactObj == null ||\n                !this.contactObj.isValid ||\n                this.contactObj.phoneNumber == \"\" ||\n                this.contactObj.phoneNumber == null ||\n                this.licencePlate === \"\" ||\n                this.licencePlate === null\n                ? false\n                : true;\n        },\n        timeFlag() {\n            return this.time == null ||\n                this.disableAddPaymentBtn ||\n                this.estimate === null ||\n                this.estimate === \"\" || (Object.hasOwnProperty.call(this.zoneDetails, 'timePickerConfiguration') && this.zoneDetails.timePickerConfiguration == \"1\" && format(this.time, 'yyyy-MM-dd') != format(this.minTimeDate, 'yyyy-MM-dd') && (this.beforeEstimate === null || this.beforeEstimate == \"\" || this.beforeEstimate == undefined)) ||\n                this.time === \"\" || this.time == undefined\n                ? false\n                : true;\n        },\n        paymentFlag() {\n            return this.estimate === null ||\n                this.estimate === \"\" ||\n                this.estimate.hasOwnProperty.call(\"grandTotal\") ||\n                this.estimate.hasOwnProperty.call(\"totalPrice\") ||\n                this.estimate.hasOwnProperty.call(\"totalFee\") ||\n                this.estimate.hasOwnProperty.call(\"totalTax\") || (this.zoneDetails?.timePickerConfiguration == '1' && this.beforeEstimate === null && this.beforeEstimate === \"\" && this.beforeEstimate === null && this.beforeEstimate.hasOwnProperty.call(\"totalPrice\") && this.beforeEstimate.hasOwnProperty.call(\"totalFee\") && this.beforeEstimate.hasOwnProperty.call(\"totalTax\"))\n                ? false\n                : true;\n        },\n        computedDateFormatted() {\n            return this.time != null && this.time != \"\" && this.time != undefined ? format(this.time, 'MM/dd/yyyy') : \"\"\n        },\n        disableSubmitBtn() {\n            let disabled =\n                this.contactObj == null ||\n                !this.contactObj.isValid ||\n                this.contactObj.phoneNumber == \"\" ||\n                this.contactObj.phoneNumber == null ||\n                this.licencePlate === \"\" ||\n                this.licencePlate === null ||\n                this.disableAddPaymentBtn ||\n                this.estimate === null ||\n                this.estimate === \"\"\n            this.exitDate === \"\";\n            let selectedMins = this.time !== null && this.time !== undefined && this.time !== \"\" ? format(this.time, 'mm') : new Date();\n            let selectedHours = this.time !== null && this.time !== undefined && this.time !== \"\" ? format(this.time, 'hh') : new Date();\n            let selectedAMPM = this.time !== null && this.time !== undefined && this.time !== \"\" ? format(this.time, 'aaa') : new Date();\n            disabled =\n                disabled ||\n                selectedMins == null ||\n                selectedMins === \"\" ||\n                selectedMins == undefined ||\n                selectedHours == null ||\n                selectedHours === \"\" ||\n                selectedHours == undefined || selectedAMPM == null ||\n                selectedAMPM === \"\" ||\n                selectedAMPM == undefined || this.time === null || this.time === \"\" || this.time === undefined\n            disabled =\n                this.licencePlate != \"\" && this.licencePlate != null\n                    ? disabled || /^[a-z0-9]+$/i.test(this.licencePlate) === false\n                    : disabled;\n            return disabled;\n        },\n        disableAddLicencePlateBtn() {\n            if (this.zoneDetails.lpr_status == \"0\") {\n                return this.isContactValid == false ? true : false;\n            } else {\n                return this.isContactValid == false ||\n                    this.licencePlate == \"\" ||\n                    this.licencePlate == null ||\n                    /^[a-z0-9]+$/i.test(this.licencePlate) === false\n                    ? true\n                    : false;\n            }\n        },\n    },\n    mounted() {\n        EventBus.$on('SET_TIME', () => {\n            this.onTimePickerChange();\n        })\n        // this.setDefaultDate();\n    },\n    methods: {\n        round(time) {\n            let exitdate = time !== null && time !== '' ? format(time, 'yyyy/MM/dd') : new Date();\n\n            let selectedMins = time !== null && time !== '' ? format(time, 'mm') : new Date();\n            let selectedHours = time !== null && time !== '' ? format(time, 'hh') : new Date();\n            let selectedAMPM = time !== null && time !== '' ? format(time, 'aaa') : new Date();\n            if (exitdate != null && selectedMins != '15' && selectedMins != '30' && selectedMins != '45' && selectedMins != '00' && selectedMins != null && selectedMins != \"\" && selectedHours != null && selectedHours != \"\" && selectedAMPM != null && selectedAMPM != \"\") {\n                let intervalMilliseconds = 900000\n                let datetime = new Date(exitdate + \" \" + selectedHours + \":\" + selectedMins + \" \" + selectedAMPM)\n                let interval = datetime.getTime() % intervalMilliseconds;\n                let delta = interval === 0 ? 0 : datetime.getTime() - interval;\n                delta += intervalMilliseconds;\n                // this.exitTimeSelected = Object.assign(this.exitTimeSelected, { hh: format(new Date(delta), 'hh'), mm: format(new Date(delta), 'mm'), a: format(new Date(delta), 'a'), })\n                return interval !== 0 ? new Date(delta) : datetime;\n            }\n        },\n        dateChange() {\n            this.dateTimeChange();\n            Object.hasOwnProperty.call(this.zoneDetails, 'timePickerConfiguration') && this.zoneDetails?.timePickerConfiguration == \"1\" ? this.beforeDateTimeChange() : \"\";\n        },\n        formatExitDateTime(time, val) {\n            if (time !== null && time !== undefined && time != '') {\n                let utcDate = new Date(time * 1000).toUTCString(); //\"Wed, 27 Jan 2021 13:59:04 GMT\"\n                let month = utcDate.split(\",\")[1].split(\" \")[2]; // Jan\n                let date = utcDate.split(\",\")[1].split(\" \")[1]; // 27\n                let year = utcDate.split(\",\")[1].split(\" \")[3];\n                let hr = utcDate.split(\",\")[1].split(\" \")[4].split(\":\")[0]; // 13\n                let min = utcDate.split(\",\")[1].split(\" \")[4].split(\":\")[1]; //59\n                let formatHr = Number(hr) > 12 ? Number(hr) - 12 : Number(hr); // 1\n                formatHr = Number(formatHr) >= 10 ? Number(formatHr) : formatHr; //01\n                let amOrpm = Number(hr) >= 12 ? \"p\" : \"a\"; //PM\n                let ampm = Number(hr) >= 12 ? \"PM\" : \"AM\";\n                switch (val) {\n                    case 'hour': {\n                        return formatHr + amOrpm;\n                    }\n                    case 'mins': {\n                        return min\n                    }\n                    case 'date': {\n                        return month + \" \" + date + \", \" + year + \" \" + formatHr + \":\" + min + \" \" + ampm;\n                    }\n                }\n            }\n            //Jan 27, 01:59 PM\n        },\n        reloadBooking() {\n            let url = window.location.origin + \"/g/\" + this.casinoDetails.userDetail.bid;\n            window.location.replace(url);\n        },\n        setDefaultDate() {\n            this.dateFormatted = this.zoneDetails.timezone ? format(\n                dateToTimeZoneDate(addMinutes(new Date(), 15),\n                    this.zoneDetails.timezone\n                ),\n                \"MM/dd/yyyy\"\n            )\n                : format(addMinutes(new Date(), 15), \"MM/dd/yyyy\");\n            this.time = this.zoneDetails.timezone\n                ?\n                dateToTimeZoneDate(\n                    addMinutes(new Date(), 15),\n                    this.zoneDetails.timezone\n                )\n                : addMinutes(new Date(), 15);\n            let fifteenTime = this.time;\n            this.time = format(this.time, 'mm') === '15' || format(this.time, 'mm') === '30' || format(this.time, 'mm') === '45' || format(this.time, 'mm') === '00' ? fifteenTime : this.round(this.time);\n            let selectedMins = this.time !== null && this.time !== undefined && this.time !== \"\" ? format(this.time, 'mm') : \"\";\n            let selectedHours = this.time !== null && this.time !== undefined && this.time !== \"\" ? format(this.time, 'HH') : \"\";\n            let selectedAMPM = this.time !== null && this.time !== undefined && this.time !== \"\" ? format(this.time, 'a') : \"\";\n            this.stopTime = selectedMins != null && selectedMins != \"\" && selectedHours != null && selectedHours != \"\" && selectedAMPM != null && selectedAMPM != \"\" ? selectedHours + \":\" + selectedMins + \":\" + \"00\" : \"\";\n            // this.dateTimeChange()\n            // Object.hasOwnProperty.call(this.zoneDetails, 'timePickerConfiguration') && this.zoneDetails?.timePickerConfiguration == \"1\" && format(this.time, 'yyyy-MM-dd') != format(dateToTimeZoneDate(new Date(), this.zoneDetails.timezone), 'yyyy-MM-dd') ? this.beforeDateTimeChange() : \"\";\n        },\n        onTimePickerChange() {\n            let exitdate = this.time !== null && this.time !== undefined && this.time !== \"\" ? format(this.time, 'yyyy/MM/dd') : \"\";\n            let selectedMins = this.time !== null && this.time !== undefined && this.time !== \"\" ? format(this.time, 'mm') : \"\";\n            let selectedHours = this.time !== null && this.time !== undefined && this.time !== \"\" ? format(this.time, 'HH') : \"\";\n            let selectedAMPM = this.time !== null && this.time !== undefined && this.time !== \"\" ? format(this.time, 'a') : \"\";\n            this.stopTime = selectedMins != null && selectedMins != \"\" && selectedHours != null && selectedHours != \"\" && selectedAMPM != null && selectedAMPM != \"\" ? selectedHours + \":\" + selectedMins + \":\" + \"00\" : \"\";\n            let currenTime = this.zoneDetails.timezone\n                ? format(\n                    dateToTimeZoneDate(new Date(),\n                        this.zoneDetails.timezone\n                    ),\n                    \"yyyy-MM-dd HH:mm:ss\"\n                )\n                : format(new Date(), \"yyyy-MM-dd  HH:mm:ss\");\n            if (\n                selectedMins != null && selectedMins != \"\" && selectedHours != null && selectedHours != \"\" && selectedAMPM != null && selectedAMPM != \"\" &&\n                new Date(exitdate + \" \" + this.stopTime).getTime() >\n                new Date(currenTime).getTime()\n            ) {\n                format(this.time, 'yyyy-MM-dd') != format(this.minTimeDate, 'yyyy-MM-dd') ? this.beforeDateTimeChange() : \"\";\n                this.dateTimeChange();\n\n            }\n        },\n        setDatePicker() {\n            //set the minimum date to today date(zone time zone date)\n            this.minTimeDate = this.zoneDetails.timezone ? this.round(this.zoneDetails.timezone\n                ?\n                dateToTimeZoneDate(addMinutes(new Date(), 15),\n                    this.zoneDetails.timezone\n                )\n                : addMinutes(new Date(), 15)) : this.zoneDetails.timezone\n                ?\n                dateToTimeZoneDate(addMinutes(new Date(), 15),\n                    this.zoneDetails.timezone\n                )\n                : addMinutes(new Date(), 15)\n            //calculate max parkign time in seconds\n            let maxPark = this.zoneDetails != null && this.zoneDetails !== undefined && this.zoneDetails != \"\" ? this.zoneDetails?.maxParkingTime : null;\n\n            let addeddays = addDays(new Date(), maxPark?.days);\n            let addedhours = addHours(addeddays, maxPark?.hours);\n            let addedmins = addMinutes(addedhours, maxPark?.minutes);\n\n            //get max date in seconds based on max parking time\n            let maxZoneDate = addedmins\n            this.maxTimeDate = this.zoneDetails.timezone\n                ?\n                dateToTimeZoneDate(\n                    new Date(maxZoneDate),\n                    this.zoneDetails.timezone\n                )\n                : new Date(maxZoneDate);\n            //get max date with time and set it to maxDateTime\n            this.maxDateTime = this.zoneDetails.timezone\n                ? format(\n                    dateToTimeZoneDate(\n                        new Date(maxZoneDate),\n                        this.zoneDetails.timezone\n                    ),\n                    \"yyyy-MM-dd hh:mm aaaaa\"\n                )\n                : format(new Date(), \"yyyy-MM-dd hh:mm aaaaa\");\n        },\n\n        /** @methods to find the estimate rate \n         @params startDate , stopDate,zcode, type , env_overRide\n         */\n\n        async dateTimeChange() {\n            if (!this.zoneDetails.zcode) {\n                return\n            }\n            try {\n                // format(new Date(this.checkinDate), \"yyyy-MM-dd'T'HH:mm:ss\");\n                let href = window.location.href;\n                let edtEntryTime = \"\"\n                if (href.includes('entrytime')) {\n                    let params = href.split('?');\n                    let timeparam = params[2].split('entrytime')[1];\n                    edtEntryTime = timeparam.substring(1, timeparam.length)\n                }\n\n                this.startDate = edtEntryTime !== null && edtEntryTime !== undefined && edtEntryTime !== \"\" ? format(new Date(this.formatExitDateTime(edtEntryTime, 'date')), \"yyyy-MM-dd'T'HH:mm:ss\") : this.zoneDetails.timezone\n                    ? format(\n                        dateToTimeZoneDate(\n                            new Date(),\n                            this.zoneDetails.timezone\n                        ),\n                        \"yyyy-MM-dd'T'HH:mm:ss\"\n                    )\n                    : format(new Date(), \"yyyy-MM-dd'T'HH:mm:ss\");\n                // console.log(this.exitTimeSelected?.hh+\":\"+this.exitTimeSelected.mm+\":00\")\n                // this.exitDate + \"T23:59:00\"\n                let stopTime = this.stopTime;\n                let exitdate = this.time !== null && this.time !== undefined && this.time !== \"\" ? format(this.time, 'yyyy-MM-dd') : \"\";\n                let exittime = Object.hasOwnProperty.call(this.zoneDetails, 'timePickerConfiguration') && this.zoneDetails?.timePickerConfiguration == '1' ? 'T' + stopTime : \"T23:59:00\";\n                let stopDate = exitdate + exittime;\n                let data = {\n                    startAt: this.startDate,\n                    stopAt: stopDate,\n                    zcode: this.zoneDetails.zcode,\n                };\n                this.addPaymentBtnLoading = true;\n                var getRate = await API.getRate(data);\n                //condition to check if the date time selected is lesser than current time\n                if (!getRate?.data?.status && !this.getRateCall) {\n                    this.disableAddPaymentBtn = true;\n                    this.alertDialog = true;\n                    this.alertMsg =\n                        getRate?.data?.message || \"Error in getting rate details\";\n                    this.openDatePicker = false;\n                    this.openTimePicker = false;\n                    EventBus.$emit('datetime-set');\n\n                } else {\n                    this.disableAddPaymentBtn = false;\n                    this.openDatePicker = false;\n                    this.openTimePicker = false;\n                    EventBus.$emit('datetime-set');\n\n                }\n                this.estimate = Object.assign({}, getRate?.data?.data);\n                // estimatedVal != \"\" &&\n                // estimatedVal != null &&\n                // estimatedVal != undefined\n                //   ? Number(estimatedVal).toFixed(2)\n                //   : estimatedVal;\n                this.openDatePicker = false;\n                this.openTimePicker = false;\n                this.addPaymentBtnLoading = false;\n            }\n            catch (error) {\n                this.addPaymentBtnLoading = false;\n                console.log(error);\n            }\n        },\n        async beforeDateTimeChange() {\n            if (!this.zoneDetails.zcode) {\n                return\n            }\n            try {\n                // format(new Date(this.checkinDate), \"yyyy-MM-dd'T'HH:mm:ss\");\n\n                let href = window.location.href;\n                let edtEntryTime = \"\"\n                if (href.includes('entrytime')) {\n                    let params = href.split('?');\n                    let timeparam = params[2].split('entrytime')[1];\n                    edtEntryTime = timeparam.substring(1, timeparam.length)\n                }\n                this.startDate = edtEntryTime !== null && edtEntryTime !== undefined && edtEntryTime !== \"\" ? format(new Date(this.formatExitDateTime(edtEntryTime, 'date')), \"yyyy-MM-dd'T'HH:mm:ss\") : this.zoneDetails.timezone\n                    ? format(\n                        dateToTimeZoneDate(\n                            new Date(),\n                            this.zoneDetails.timezone\n                        ),\n                        \"yyyy-MM-dd'T'HH:mm:ss\"\n                    )\n                    : format(new Date(), \"yyyy-MM-dd'T'HH:mm:ss\");\n                let stopTime = this.stopTime;\n                let selectedHours = this.casinoDetails.userDetail.entrytime != null && this.casinoDetails.userDetail.entrytime !== undefined && this.casinoDetails.userDetail.entrytime != \"\" ? format(new Date(this.casinoDetails.userDetail.entrytime), 'HH') : format(dateToTimeZoneDate(new Date(), this.zoneDetails.timezone), 'HH');\n                let selectedMins = this.casinoDetails.userDetail.entrytime != null && this.casinoDetails.userDetail.entrytime !== undefined && this.casinoDetails.userDetail.entrytime != \"\" ? format(new Date(this.casinoDetails.userDetail.entrytime), 'mm') : format(dateToTimeZoneDate(new Date(), this.zoneDetails.timezone), 'mm');\n                let exitdate = this.time !== null && this.time !== undefined && this.time !== \"\" ? format(this.time, 'yyyy-MM-dd') : \"\";\n                let exittime = Object.hasOwnProperty.call(this.zoneDetails, 'istimePickerConfigurationGated') && this.zoneDetails?.timePickerConfiguration == '0' ? 'T' + stopTime : 'T' + selectedHours + \":\" + selectedMins + \":00\";\n\n                let stopDate = exitdate + exittime;\n                let data = {\n                    startAt: this.startDate,\n                    stopAt: stopDate,\n                    zcode: this.zoneDetails.zcode,\n                };\n                this.addPaymentBtnLoading = true;\n                var getRate = await API.getRate(data);\n                //condition to check if the date time selected is lesser than current time\n                if (!getRate?.data?.status && !this.getRateCall) {\n                    this.disableAddPaymentBtn = true;\n                    this.alertDialog = true;\n                    this.alertMsg =\n                        getRate?.data?.message || \"Error in getting rate details\";\n                    this.openDatePicker = false;\n                    this.openTimePicker = false;\n                    EventBus.$emit('datetime-set');\n                } else {\n                    this.disableAddPaymentBtn = false;\n                    this.openDatePicker = false;\n                    this.openTimePicker = false;\n                    EventBus.$emit('datetime-set');\n                }\n                this.beforeEstimate = Object.assign({}, getRate?.data?.data);\n                // estimatedVal != \"\" &&\n                // estimatedVal != null &&\n                // estimatedVal != undefined\n                //   ? Number(estimatedVal).toFixed(2)\n                //   : estimatedVal;\n                this.addPaymentBtnLoading = false;\n            }\n            catch (error) {\n                this.addPaymentBtnLoading = false;\n                console.log(error);\n            }\n        },\n        formatDate(date) {\n            let stringdate = date.toString();\n            if (!date) return null;\n\n            const [year, month, day] = stringdate.split(\"-\");\n            return `${month}/${day}/${year}`;\n        },\n        parseDate(date) {\n            if (!date) return null;\n\n            const [month, day, year] = date.split(\"/\");\n            return `${year}-${month.padStart(2, \"0\")}-${day.padStart(2, \"0\")}`;\n        },\n        async addPayment() {\n            let exitDate = this.time != null || this.time !== undefined || this.time != \"\" ? format(this.time, 'yyyy-MM-dd') : format(new Date(), 'yyyy-MM-dd')\n            let exitTime = this.time != null || this.time !== undefined || this.time != \"\" ? Object.hasOwnProperty.call(this.zoneDetails, 'timePickerConfiguration') && this.zoneDetails.timePickerConfiguration == 1 ? format(this.time, 'hh:mm a') : \"11:59 PM\" : \"\";\n            let exitDateTime = exitDate + \" \" + exitTime\n            let entryDateTime = this.zoneDetails.timezone\n                ? format(\n                    dateToTimeZoneDate(new Date(), this.zoneDetails.timezone),\n                    \"yyyy-MM-dd hh:mm a\"\n                )\n                : format(new Date(), \"yyyy-MM-dd'T'HH:mm a\");\n            let commitData = {\n                plate: this.licencePlate,\n                contact: this.contactObj?.formattedNumber,\n                entryTime: entryDateTime,\n                edtParams: this.casinoDetails?.userDetail?.edtParams,\n                exitTime: exitDateTime,\n                estimate: this.estimate,\n            };\n            let details = await API.prepaidOpenTransaction({\n                vehicleNo: this.licencePlate,\n                contact: this.contactObj?.formattedNumber,\n                exitTime: exitDateTime, zcode: this.zoneDetails?.zcode,\n                mid: this.zoneDetails?.mid,\n                eventType: \"PaidHostPass\",\n            });\n\n            if (details?.data?.status) {\n                this.$store.commit(\"SET_CASINO_USERDETAILS\", commitData);\n                this.$router.push({ name: 'addpayment', query: { zcode: this.zoneDetails?.zcode, sessiontype: 'cico', state: 'addpayment' } });\n            } else {\n                if (details?.data?.message == \"Booking Already Exists\") {\n                    let commitData = {\n                        plate: this.licencePlate,\n                        contact: this.contactObj.formattedNumber,\n                        entryTime: entryDateTime,\n                        edtParams: this.casinoDetails?.userDetail?.edtParams,\n                        exitTime: exitDateTime,\n                        estimate: this.estimate,\n                        bid: details?.data?.data?.bid\n                    };\n                    if (details?.data?.data?.cardOnFile == 0 || details?.data?.data?.cardOnFile == 2) {\n                        this.$store.commit(\"SET_CASINO_USERDETAILS\", commitData);\n                        this.$router.push({ name: 'addpayment', query: { zcode: this.zoneDetails?.zcode, sessiontype: 'cico', state: 'addpayment' } });\n                    }\n                    else if (details?.data?.data?.cardOnFile == 1) {\n                        // this.$store.commit(\"SET_CASINO_USERDETAILS\", commitData);\n                        // this.$router.replace({ path: \"/prepaidhost/odReceipt\" });\n                        this.$router.replace({ query: { bid: details?.data?.data?.bid } });\n\n                    }\n                }\n                this.alertMsg = details?.data?.message ? details?.data?.message : \"\";\n\n                this.alertDialog = true;\n            }\n        },\n\n        uppercase() {\n            if (rules.alphaNumeric(this.licencePlate) === \"Must be alphanumeric\") {\n                this.licencePlate = this.licencePlate.replace(/[^\\w\\s]/gi, '')\n            }\n            this.licencePlate = this.licencePlate.trim()\n            this.licencePlate = this.licencePlate.toUpperCase();\n        },\n        /**\n         * @method getZoneDetails fetch the zone details and commit SET_ZONE_DETAILS mutation.\n         */\n        async getZoneDetails(searchParamKey, searchParamValue) {\n            try {\n                var zoneDetails = await API.getZoneDetails(searchParamKey, searchParamValue)\n                this.$store.commit(\"SET_ZONE_DETAILS\", zoneDetails?.data?.zone);\n            } catch (error) {\n                console.log(error);\n            }\n        },\n        /**\n         * @method getOnDemandZoneDetails fetch the ondemand zone details from Pcom and commit SET_ZONE_DETAILS mutation.\n         */\n        async getOnDemandZoneDetails(searchParamValue) {\n            this.loading = true;\n            try {\n                var zoneDetails = await API.getOnDemandZoneDetails(searchParamValue);\n                this.setDefaultDate();\n                this.loading = false;\n                if (zoneDetails.data?.lot) {\n                    this.$store.commit(\n                        \"SET_ON_DEMAND_ZONE_DETAILS\",\n                        zoneDetails.data?.lot\n                    );\n                    this.setDatePicker();\n                } else {\n                    this.alertMsg =\n                        zoneDetails?.data?.message || \"Error in loading location details.\";\n                    this.alertDialog = true;\n                }\n            } catch (error) {\n                this.loading = false;\n                console.log(error);\n            }\n        },\n        onContactInput(contactDetails) {\n            this.isContactValid = contactDetails?.isValid;\n            this.contactObj = Object.assign({}, contactDetails);\n        },\n        setReenterPlateFlag() {\n            this.licencePlate = this.selectedPlate || \"\";\n            this.reEnterPlate = true;\n            this.confirmCreateSessionDialog = false;\n        },\n        /**\n         * @method createSession Fetch booking id on add booking and fetch the booking info.\n         */\n        async createSession() {\n            this.addLicencePlateBtnLoading = true;\n            let postObj = {\n                contact: this.contactObj?.formattedNumber,\n                uniqueID: this.contactObj?.nationalNumber,\n                vehicleNo: this.licencePlate.toUpperCase(),\n                locationCode: this.zoneDetails.zcode,\n                zid: this.zoneDetails.zid,\n                entrytime: format(\n                    new Date(\n                        new Date().toLocaleString(\"en-US\", {\n                            timeZone: this.zoneDetails.timezone,\n                        })\n                    ),\n                    \"yyyy-MM-dd HH:mm:ss\"\n                ),\n                source: \"appclip\",\n                webView: \"1\",\n                type: \"2\",\n                state: 2,\n                payment_status: 0,\n                txnID_addCC: 0,\n            };\n            if (this.reEnterPlate) {\n                Object.assign(postObj, { createNewSession: 1 });\n            }\n            try {\n                var session = await API.createSession(postObj);\n                let bid = session?.data?.refno;\n                if (session.data.status === false) {\n                    this.errMsg = session?.data?.message ? session.data.message : \"\";\n                    if (\n                        session?.data?.showCreateNewSessionPopup &&\n                        session.data.showCreateNewSessionPopup == 1\n                    ) {\n                        this.postToLoggerAPI({\n                            phone: this.contactObj?.nationalNumber,\n                            plate: this.licencePlate.toUpperCase(),\n                            statusText: \"Parker session not found in the system.\",\n                        });\n                        this.confirmCreateSessionDialog = true;\n                        this.addLicencePlateBtnLoading = false;\n                        return;\n                    }\n                    this.errDialog = true;\n                    this.addLicencePlateBtnLoading = false;\n                    return;\n                }\n                await this.getBookingDetails(bid);\n                this.addLicencePlateBtnLoading = false;\n                this.reEnterPlate\n                    ? this.postToLoggerAPI({\n                        phone: this.contactObj?.nationalNumber,\n                        refId: bid,\n                        icon: \"login\",\n                        plate: this.licencePlate.toUpperCase(),\n                        statusText:\n                            \"Parker plate/contact number not found in the system. Parker created a new session using generic payment QR\",\n                    })\n                    : this.postToLoggerAPI({\n                        phone: this.contactObj?.nationalNumber,\n                        refId: bid,\n                        icon: \"login\",\n                        plate: this.licencePlate.toUpperCase(),\n                        statusText:\n                            \"Parker session found. Parker opened his/her session using generic payment QR\",\n                    });\n\n                this.$router.replace({ query: { bid: bid } });\n                window.location.reload();\n            } catch (error) {\n                this.addLicencePlateBtnLoading = false;\n                console.log(error);\n            }\n        },\n        /**\n         * @method getBookingDetails fetch the booking details and commit SET_BOOKING_DETAILS mutation.\n         */\n        async getBookingDetails(bookingId) {\n            try {\n                var bookingDetails = await API.getBookingState(bookingId)\n                this.$store.commit(\n                    \"SET_BOOKING_DETAILS\",\n                    bookingDetails.data?.data ? bookingDetails.data.data : null\n                );\n            } catch (error) {\n                console.log(error);\n            }\n        },\n        closeConfirmCreateSessionDialog() {\n            this.confirmCreateSessionDialog = false;\n            this.addLicencePlateBtnLoading = false;\n        },\n    },\n};\n</script>\n<style scoped>\n.date-text {\n    font-size: 15px !important;\n    font-weight: 700 !important;\n}\n</style>"]}]}