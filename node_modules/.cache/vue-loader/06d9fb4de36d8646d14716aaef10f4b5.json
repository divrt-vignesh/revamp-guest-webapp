{"remainingRequest":"/home/vignesh/DIVRT/revamp-guest-webapp/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/vignesh/DIVRT/revamp-guest-webapp/src/views/session/CheckedIn.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/vignesh/DIVRT/revamp-guest-webapp/src/views/session/CheckedIn.vue","mtime":1688986280458},{"path":"/home/vignesh/DIVRT/revamp-guest-webapp/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vignesh/DIVRT/revamp-guest-webapp/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vignesh/DIVRT/revamp-guest-webapp/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/vignesh/DIVRT/revamp-guest-webapp/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vignesh/DIVRT/revamp-guest-webapp/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCi8vIGltcG9ydCBDYWxlbmRhciBmcm9tICcuLi91aUNvbXBvbmVudHMvQ2FsZW5kYXIvQ2FsZW5kYXInOwppbXBvcnQgQm9pbGVyUGxhdGUgZnJvbSAnQC9jb21wb25lbnRzL0JvaWxlclBsYXRlJzsKLy8gaW1wb3J0IEVzdGltYXRlIGZyb20gJy4uL2NvbXBvbmVudHMvRXN0aW1hdGUudnVlJwppbXBvcnQgQVBJSGVscGVyIGZyb20gIkAvYXBpSGVscGVyIjsKaW1wb3J0ICJwcmltZXZ1ZS9yZXNvdXJjZXMvdGhlbWVzL3NhZ2EtYmx1ZS90aGVtZS5jc3MiICAgICAgIC8vdGhlbWUKaW1wb3J0ICJwcmltZXZ1ZS9yZXNvdXJjZXMvcHJpbWV2dWUubWluLmNzcyIgICAgICAgICAgICAgICAgIC8vY29yZSBjc3MKaW1wb3J0ICJwcmltZWljb25zL3ByaW1laWNvbnMuY3NzIgppbXBvcnQgR29vZ2xlUGF5IGZyb20gIkAvY29tcG9uZW50cy9Hb29nbGVQYXkudnVlIjsKLy8gaW1wb3J0IGxvZ2dlckhlbHBlciBmcm9tICIuLi9sb2dnZXJIZWxwZXIiOwppbXBvcnQgeyBtYXBHZXR0ZXJzIH0gZnJvbSAidnVleCI7Ci8vIGltcG9ydCB7IFFyY29kZVN0cmVhbSB9IGZyb20gInZ1ZS1xcmNvZGUtcmVhZGVyIjsKLy8gaW1wb3J0IFFyQ29kZVNjYW5uZXIgZnJvbSAiQC92aWV3cy9RckNvZGVTY2FubmVyLnZ1ZSI7Ci8vIGltcG9ydCBWYWxpZGF0aW9uUXJDb2RlU2Nhbm5lciBmcm9tICJAL3ZpZXdzL1ZhbGlkYXRpb25RckNvZGVTY2FubmVyLnZ1ZSI7CmltcG9ydCBBcHBsZVBheSBmcm9tICJAL2NvbXBvbmVudHMvQXBwbGVQYXkudnVlIjsKaW1wb3J0IHsgcm91bmQgfSBmcm9tICdAL3V0aWxzL3V0aWwnCmltcG9ydCB7IGZvcm1hdERhdGVUaW1lIH0gZnJvbSAiQC91dGlscy9mb3JtYXREYXRlVGltZSI7CmltcG9ydCB7IEV2ZW50QnVzIH0gZnJvbSAiQC9saWIvRXZlbnRCdXMiOwppbXBvcnQgewogICAgc2Vjb25kc1RvTXMsCiAgICBzZWNvbmRzVG9IbXMsCiAgICAvLyAgc2Vjb25kc1RvREhtcwp9IGZyb20gIkAvdXRpbHMvZm9ybWF0RGF0ZVRpbWUiOwppbXBvcnQgeyBhZGRNaW51dGVzLCBhZGREYXlzLCBhZGRIb3Vycywgc2V0IH0gZnJvbSAiZGF0ZS1mbnMiOwppbXBvcnQgeyBmb3JtYXQsIGlzVmFsaWQgfSBmcm9tICJkYXRlLWZucyI7CmltcG9ydCB7IGRhdGVUb1RpbWVab25lRGF0ZSB9IGZyb20gIkAvdXRpbHMvZm9ybWF0RGF0ZVRpbWUiOwovLyBpbXBvcnQgUXJTY2FubmVyIGZyb20gJ3FyLXNjYW5uZXInOwpleHBvcnQgZGVmYXVsdCB7CiAgICBuYW1lOiAiQ2hlY2tJbiIsCiAgICBjb21wb25lbnRzOiB7CiAgICAgICAgLy8gUXJDb2RlU2Nhbm5lciwKICAgICAgICAvLyAgVmFsaWRhdGlvblFyQ29kZVNjYW5uZXIsCiAgICAgICAgQXBwbGVQYXksCiAgICAgICAgR29vZ2xlUGF5LAogICAgICAgIC8vIENhbGVuZGFyLAogICAgICAgIC8vICBFc3RpbWF0ZSAKICAgICAgICBCb2lsZXJQbGF0ZQogICAgfSwKICAgIGRhdGE6ICgpID0+ICh7CiAgICAgICAgLy8gcnVsZXM6IHsKICAgICAgICAvLyAgIGNvdW50ZXI6IHZhbHVlID0+IHZhbHVlLmxlbmd0aCA8PSA2IHx8ICJNYXggNiBjaGFyYWN0ZXJzIgogICAgICAgIC8vIH0sCiAgICAgICAgdGltZTogIiIsCiAgICAgICAgb3BlblRpbWVQaWNrZXI6IGZhbHNlLAogICAgICAgIG9wZW5EYXRlUGlja2VyOiBmYWxzZSwKICAgICAgICBtaW5UaW1lRGF0ZTogbnVsbCwKICAgICAgICBtYXhUaW1lRGF0ZTogbnVsbCwKICAgICAgICBiZWZvcmVFc3RpbWF0ZTogbnVsbCwKICAgICAgICBjdXJyZW50RGF0ZTogZm9ybWF0KChuZXcgRGF0ZSgpKSwgJ3l5eXktTU0tZGQnKSwKICAgICAgICBsb3lhbHR5MjRrbnVtOiAiIiwKICAgICAgICBhbGVydEljb246ICJtZGktY2hlY2stY2lyY2xlIiwKICAgICAgICBhbGVydERpYWxvZzogZmFsc2UsCiAgICAgICAgYWxlcnRNc2c6ICIiLAogICAgICAgIGxveWFsdHk6IGZhbHNlLAogICAgICAgIGV4dERhdGVBbmRUaW1lOiBudWxsLAogICAgICAgIGV4dGVuZEJ0bkxvYWRpbmc6IGZhbHNlLAogICAgICAgIGxvYWRpbmc6IGZhbHNlLAogICAgICAgIGV4dGVuc2lvbkRpYWxvZzogZmFsc2UsCiAgICAgICAgc3RvcFRpbWU6ICIiLAogICAgICAgIGV4aXRUaW1lU2VsZWN0ZWQ6IHt9LAogICAgICAgIHRpbWVQaWNrZXJIclJhbmdlOiBudWxsLAogICAgICAgIHRpbWVFeGNlZWRlZDogZmFsc2UsCiAgICAgICAgdGltZVBpY2tlck1pblJhbmdlOiBudWxsLAogICAgICAgIG1pbkRhdGU6IG51bGwsCiAgICAgICAgbWF4RGF0ZTogbnVsbCwKICAgICAgICBUaW1lbWVudTogZmFsc2UsCiAgICAgICAgc3RhcnREYXRlOiAiIiwKICAgICAgICBtYXhEYXRlVGltZTogbnVsbCwKICAgICAgICBlc3RpbWF0ZTogbnVsbCwKICAgICAgICBEYXRlbWVudTogZmFsc2UsCiAgICAgICAgZXhpdERhdGU6IG51bGwsCiAgICAgICAgZGF0ZUZvcm1hdHRlZDogbnVsbCwKICAgICAgICBleGl0RGF0ZVRpbWU6IDAsCiAgICAgICAgZXhpdFRpbWVJbnRlcnZhbDogbnVsbCwKICAgICAgICBpb3NEZXZpY2U6IGZhbHNlLAogICAgICAgIGludmFsaWRWYWxpZGF0aW9uUVJEaWFsb2c6IGZhbHNlLAogICAgICAgIGNhbWVyYVN0YXR1czogZmFsc2UsCiAgICAgICAgdmFsaWRhdGlvbkNhbWVyYVN0YXR1czogZmFsc2UsCiAgICAgICAgdmFsaWRhdGVkRGF0ZVRpbWU6IDAsCiAgICAgICAgZ3JhY2VQZXJpb2RUaW1lOiAwLAogICAgICAgIHZhbGlkYXRlZEludGVydmFsOiAiIiwKICAgICAgICBkdXJhdGlvbjogMzAwLAogICAgICAgIG9mZnNldDogMCwKICAgICAgICBwZWRlc3RyaWFuQWNjZXNzRGlhbG9nOiBmYWxzZSwKICAgICAgICBwZWRlc3RyaWFuQWNjZXNzVGV4dDogIiIsCiAgICAgICAgZWFzaW5nOiAiZWFzZUluT3V0Q3ViaWMiLAogICAgICAgIHBhZ2VIZWlnaHQ6IHdpbmRvdy5vdXRlckhlaWdodCwKICAgICAgICBxckNvZGVEaWFsb2c6IGZhbHNlLAogICAgICAgIGNvdW50VXBUaW1lOiAiIiwKICAgICAgICBpbnRlcnZhbDogIiIsCiAgICAgICAgaXNWYWxpZDogdW5kZWZpbmVkLAogICAgICAgIGNhbWVyYTogImF1dG8iLAogICAgICAgIHNtc1RleHQ6ICIiLAogICAgICAgIHNtc0RpYWxvZzogZmFsc2UsCiAgICAgICAgZGlhbGVyRGlhbG9nOiBmYWxzZSwKICAgICAgICBpbnZhbGlkUVJNc2c6ICIiLAogICAgICAgIGludmFsaWRWYWxpZGF0aW9uUVJNc2c6ICIiLAogICAgICAgIGludmFsaWRRUkRpYWxvZzogZmFsc2UsCiAgICAgICAgaW52YWxpZFNNU01zZzogIiIsCgogICAgICAgIGludmFsaWRTTVNEaWFsb2c6IGZhbHNlLAogICAgICAgIHNtc1BlbmRpbmc6IGZhbHNlLAogICAgICAgIHZhbGlkYXRlQm9va2luZ1BlbmRpbmc6IGZhbHNlLAogICAgICAgIHZhbGlkYXRlQm9va2luZ0RpYWxvZzogZmFsc2UsCiAgICAgICAgdmFsaWRhdGVCb29raW5nVHh0OiAiIiwKICAgICAgICB2YWxpZGF0ZVFSQ29kZVBlbmRpbmc6IGZhbHNlLAogICAgICAgIHZhbGlkYXRlUVJDb2RlRGlhbG9nOiBmYWxzZSwKICAgIH0pLAogICAgY29tcHV0ZWQ6IHsKICAgICAgICAuLi5tYXBHZXR0ZXJzKHsKICAgICAgICAgICAgYm9va2luZ0lkOiAiZ2V0dGVyQm9va2luZ0lkIiwKICAgICAgICAgICAgYm9va2luZ0RldGFpbHM6ICJnZXR0ZXJCb29raW5nRGV0YWlscyIsCiAgICAgICAgICAgIHpvbmVEZXRhaWxzOiAiZ2V0dGVyWm9uZURldGFpbHMiLAogICAgICAgICAgICBlbnRyeVRpbWU6ICJnZXR0ZXJFbnRyeVRpbWUiLAogICAgICAgICAgICBleGl0R2F0ZUNvZGVzOiAiZ2V0dGVyRXhpdEdhdGVDb2RlcyIsCiAgICAgICAgICAgIGlzUFFSRW5kUmVzZXJ2YXRpb246ICJnZXR0ZXJab25lSXNQUVJFbmRSZXNlcnZhdGlvbiIsCgogICAgICAgIH0pLAogICAgICAgIGxvZ29IZWlnaHQoKSB7CiAgICAgICAgICAgIHJldHVybiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbCh0aGlzLmJvb2tpbmdEZXRhaWxzLCAnYm9va2luZycpICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKHRoaXMuYm9va2luZ0RldGFpbHMuYm9va2luZywgJ1R5cGVPZkJvb2tpbmcnKSAmJiB0aGlzLmJvb2tpbmdEZXRhaWxzLmJvb2tpbmcuVHlwZU9mQm9va2luZyA9PSAnU2VsZiByZXNlcnZhdGlvbicgPyAnMTAwcHgnIDogJzE1MHB4JzsKICAgICAgICB9LAogICAgICAgIGNvbXB1dGVkRGF0ZUZvcm1hdHRlZCgpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMudGltZSAhPT0gbnVsbCAmJiB0aGlzLnRpbWUgIT09ICIiICYmIHRoaXMudGltZSAhPT0gdW5kZWZpbmVkID8gZm9ybWF0KHRoaXMudGltZSwgJ3l5eXkvTU0vZGQnKSA6IG5ldyBEYXRlKCkKICAgICAgICB9LAogICAgICAgIGZvcm1hdHRlZFRpbWUoKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLnRpbWUgPyBmb3JtYXQodGhpcy50aW1lLCAnaGg6bW0gYWEnKSA6ICIiCiAgICAgICAgfSwKICAgICAgICBmb3JtYXR0ZWREYXRlVGltZSgpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMudGltZSAhPT0gbnVsbCAmJiB0aGlzLnRpbWUgIT09ICIiID8gZm9ybWF0KHRoaXMudGltZSwgJ2lpaSwgTExMIGRkJykgOiAiIgogICAgICAgIH0sCiAgICAgICAgZm9ybWF0dGVkWWVhcigpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMudGltZSAhPT0gbnVsbCAmJiB0aGlzLnRpbWUgIT09ICIiID8gZm9ybWF0KHRoaXMudGltZSwgJ3l5eXknKSA6ICIiCiAgICAgICAgfSwKICAgICAgICBmb3JtYXR0ZWRFbnRyeURpc3BsYXlUaW1lKCkgewogICAgICAgICAgICByZXR1cm4gT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwodGhpcy5ib29raW5nRGV0YWlscywgJ2Jvb2tpbmcnKSAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbCh0aGlzLmJvb2tpbmdEZXRhaWxzLmJvb2tpbmcsICdlbnRyeXRpbWUnKSAmJiB0aGlzLmJvb2tpbmdEZXRhaWxzLmJvb2tpbmcuZW50cnl0aW1lICE9PSBudWxsICYmIHRoaXMuYm9va2luZ0RldGFpbHMuYm9va2luZy5lbnRyeXRpbWUgIT09IHVuZGVmaW5lZCAmJiB0aGlzLmJvb2tpbmdEZXRhaWxzLmJvb2tpbmcuZW50cnl0aW1lICE9PSAiIiA/IGZvcm1hdChuZXcgRGF0ZSh0aGlzLmZvcm1hdERhdGVUaW1lKHRoaXMuYm9va2luZ0RldGFpbHM/LmJvb2tpbmc/LmVudHJ5dGltZSwgJ2RhdGUnKSksICJoaDptbSBhIikgOiBmb3JtYXQoZGF0ZVRvVGltZVpvbmVEYXRlKG5ldyBEYXRlKCksIHRoaXMuYm9va2luZ0RldGFpbHM/LnpvbmU/LnRpbWV6b25lKSwgJ2hoOm1tIGEnKTsKICAgICAgICB9LAogICAgICAgIHNpbmdsZVF1b3RlcygpIHsKCiAgICAgICAgICAgIHJldHVybiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbCh0aGlzLmJvb2tpbmdEZXRhaWxzLCAnem9uZScpICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKHRoaXMuYm9va2luZ0RldGFpbHMuem9uZSwgJ3RpbWVQaWNrZXJDb25maWd1cmF0aW9uJykgJiYgdGhpcy5ib29raW5nRGV0YWlscy56b25lLnRpbWVQaWNrZXJDb25maWd1cmF0aW9uID09ICIwIiA/ICgodGhpcy50aW1lICE9PSBudWxsICYmIHRoaXMudGltZSAhPT0gdW5kZWZpbmVkICYmIHRoaXMudGltZSAhPT0gIiIgJiYgdGhpcy5taW5EYXRlICE9PSBudWxsICYmIHRoaXMubWluRGF0ZSAhPT0gdW5kZWZpbmVkICYmIHRoaXMubWluRGF0ZSAhPT0gIiIgJiYgZm9ybWF0KHRoaXMudGltZSwgJ3l5eXktTU0tZGQnKSA9PSBmb3JtYXQodGhpcy5taW5EYXRlLCAneXl5eS1NTS1kZCcpKSB8fCAodGhpcy5iZWZvcmVFc3RpbWF0ZSAhPT0gbnVsbCAmJiB0aGlzLmJlZm9yZUVzdGltYXRlICE9PSB1bmRlZmluZWQgJiYgdGhpcy5iZWZvcmVFc3RpbWF0ZSAhPT0gIiIgJiYgdGhpcy5lc3RpbWF0ZSAhPT0gbnVsbCAmJiB0aGlzLmVzdGltYXRlICE9PSB1bmRlZmluZWQgJiYgdGhpcy5lc3RpbWF0ZSAhPT0gIiIgJiYgdGhpcy5iZWZvcmVFc3RpbWF0ZS5ncmFuZFRvdGFsID09IHRoaXMuZXN0aW1hdGUuZ3JhbmRUb3RhbCkpIDogdHJ1ZQogICAgICAgIH0sCiAgICAgICAgZG91YmxlUXVvdGVzKCkgewogICAgICAgICAgICByZXR1cm4gT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwodGhpcy5ib29raW5nRGV0YWlscywgJ3pvbmUnKSAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbCh0aGlzLmJvb2tpbmdEZXRhaWxzLnpvbmUsICd0aW1lUGlja2VyQ29uZmlndXJhdGlvbicpICYmIHRoaXMuYm9va2luZ0RldGFpbHMuem9uZS50aW1lUGlja2VyQ29uZmlndXJhdGlvbiA9PSAiMCIgPyAoKHRoaXMudGltZSAhPT0gbnVsbCAmJiB0aGlzLnRpbWUgIT09IHVuZGVmaW5lZCAmJiB0aGlzLnRpbWUgIT09ICIiICYmIHRoaXMubWluRGF0ZSAhPT0gbnVsbCAmJiB0aGlzLm1pbkRhdGUgIT09IHVuZGVmaW5lZCAmJiB0aGlzLm1pbkRhdGUgIT09ICIiICYmIGZvcm1hdCh0aGlzLnRpbWUsICd5eXl5LU1NLWRkJykgIT0gZm9ybWF0KHRoaXMubWluRGF0ZSwgJ3l5eXktTU0tZGQnKSkgJiYgKHRoaXMuYmVmb3JlRXN0aW1hdGUgIT09IG51bGwgJiYgdGhpcy5iZWZvcmVFc3RpbWF0ZSAhPT0gdW5kZWZpbmVkICYmIHRoaXMuYmVmb3JlRXN0aW1hdGUgIT09ICIiICYmIHRoaXMuZXN0aW1hdGUgIT09IG51bGwgJiYgdGhpcy5lc3RpbWF0ZSAhPT0gdW5kZWZpbmVkICYmIHRoaXMuZXN0aW1hdGUgIT09ICIiICYmIHRoaXMuYmVmb3JlRXN0aW1hdGUuZ3JhbmRUb3RhbCAhPSB0aGlzLmVzdGltYXRlLmdyYW5kVG90YWwpKSA6IGZhbHNlCiAgICAgICAgfSwKICAgICAgICBkaXNhYmxlTG95YWx0eSgpIHsKICAgICAgICAgICAgbGV0IGRpc2FibGVkID0gdGhpcy5sb3lhbHR5MjRrbnVtID09PSB1bmRlZmluZWQgfHwgdGhpcy5sb3lhbHR5MjRrbnVtID09PSBudWxsIHx8IHRoaXMubG95YWx0eTI0a251bSA9PSAiIgogICAgICAgICAgICByZXR1cm4gZGlzYWJsZWQKICAgICAgICB9LAogICAgICAgIGRpc2FibGVFeHRlbmQoKSB7CiAgICAgICAgICAgIGxldCBkaXNhYmxlZCA9ICgKICAgICAgICAgICAgICAgIHRoaXMudGltZSA9PT0gbnVsbCB8fCB0aGlzLnRpbWUgPT09ICIiIHx8IHRoaXMudGltZSA9PT0gdW5kZWZpbmVkIHx8IHRoaXMuZXN0aW1hdGUgPT09IG51bGwgfHwgdGhpcy5lc3RpbWF0ZSA9PT0gdW5kZWZpbmVkIHx8IE9iamVjdC5rZXlzKHRoaXMuZXN0aW1hdGUpLmxlbmd0aCA9PT0gMCkgfHwgKHRoaXMuYm9va2luZ0RldGFpbHM/LnpvbmU/LnRpbWVQaWNrZXJDb25maWd1cmF0aW9uID09ICcwJyAmJiAoZm9ybWF0KHRoaXMudGltZSwgJ3l5eXktTU0tZGQnKSA9PSBmb3JtYXQodGhpcy5tYXhEYXRlLCAneXl5eS1NTS1kZCcpKSA/IHRydWUgOiBmYWxzZSkKICAgICAgICAgICAgcmV0dXJuIGRpc2FibGVkOwogICAgICAgIH0sCiAgICAgICAgY291bnREb3duRXhpdFRpbWUoKSB7CiAgICAgICAgICAgIGlmICh0aGlzLmV4aXREYXRlVGltZSA8IDApIHsKICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgiU0VUX1ZBTElEQVRFRF9USU1FX1NUQVRVUyIsIHRydWUpOwogICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLmV4aXRUaW1lSW50ZXJ2YWwpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBzZWNvbmRzVG9IbXModGhpcy5leGl0RGF0ZVRpbWUgLyAxMDAwICsgNTkpOwogICAgICAgIH0sCiAgICAgICAgY291bnREb3duRXN0aW1hdGVUaW1lKCkgewogICAgICAgICAgICBpZiAodGhpcy5leGl0RGF0ZVRpbWUgPCAwKSB7CiAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoIlNFVF9WQUxJREFURURfVElNRV9TVEFUVVMiLCB0cnVlKTsKICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5leGl0VGltZUludGVydmFsKTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gc2Vjb25kc1RvSG1zKHRoaXMuZXhpdERhdGVUaW1lIC8gMTAwMCArIDU5KTsKICAgICAgICB9LAogICAgICAgIGlzRXh0cmEoKSB7CiAgICAgICAgICAgIHJldHVybiB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUuaW5jbHVkZXMoIi9neC8iKTsKICAgICAgICB9LAogICAgICAgIG9wdGlvbnMoKSB7CiAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICBkdXJhdGlvbjogdGhpcy5kdXJhdGlvbiwKICAgICAgICAgICAgICAgIG9mZnNldDogdGhpcy5vZmZzZXQsCiAgICAgICAgICAgICAgICBlYXNpbmc6IHRoaXMuZWFzaW5nLAogICAgICAgICAgICB9OwogICAgICAgIH0sCiAgICAgICAgc2hvd1BheW1lbnRDYXJkQWRkZWQ6IGZ1bmN0aW9uIGdldENhcmRTdGF0dXMoKSB7CiAgICAgICAgICAgIHZhciBjYXJkT25GaWxlID0gdGhpcy5ib29raW5nRGV0YWlscz8uYm9va2luZz8uY2FyZE9uZmlsZQogICAgICAgICAgICAgICAgPyB0aGlzLmJvb2tpbmdEZXRhaWxzLmJvb2tpbmcuY2FyZE9uZmlsZQogICAgICAgICAgICAgICAgOiBudWxsOwogICAgICAgICAgICB2YXIgdmFsaWRhdGVkU3RhdGUgPSB0aGlzLmJvb2tpbmdEZXRhaWxzPy5ib29raW5nPy52YWxpZGF0ZWQKICAgICAgICAgICAgICAgID8gdGhpcy5ib29raW5nRGV0YWlscy5ib29raW5nLnZhbGlkYXRlZAogICAgICAgICAgICAgICAgOiBudWxsOwogICAgICAgICAgICB2YXIgc3RhdGUgPQogICAgICAgICAgICAgICAgY2FyZE9uRmlsZSA9PSAiMSIKICAgICAgICAgICAgICAgICAgICA/IHRydWUKICAgICAgICAgICAgICAgICAgICA6IGNhcmRPbkZpbGUgPT0gIjIiICYmCiAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGVkU3RhdGUgPT0gIjEiICYmCiAgICAgICAgICAgICAgICAgICAgdGhpcy52YWxpZGF0ZWREYXRlVGltZSA+IDA7CiAgICAgICAgICAgIHJldHVybiBzdGF0ZTsKICAgICAgICB9LAogICAgICAgIGRheXMoKSB7CiAgICAgICAgICAgIGlmICh0aGlzLnRpbWVBZ29bMF0gIT09ICcnICYmIHRoaXMudGltZUFnb1swXSAhPSBudWxsICYmIHRoaXMudGltZUFnb1swXSAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy50aW1lQWdvWzBdCiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuICcnOwogICAgICAgIH0sCiAgICAgICAgaG91cnMoKSB7CiAgICAgICAgICAgIC8vIGlmICh0aGlzLmJvb2tpbmdEZXRhaWxzPy5ib29raW5nPy5UeXBlT2ZCb29raW5nICE9PSAnU2VsZiByZXNlcnZhdGlvbicpIHsKICAgICAgICAgICAgLy8gICAgIHJldHVybiB0aGlzLnRpbWVBZ28uaW5jbHVkZXMoJ2gnKSA/IHRoaXMudGltZUFnby5zcGxpdCgnaCcpWzBdIDogJycKICAgICAgICAgICAgLy8gfQogICAgICAgICAgICAvLyBlbHNlIHsKICAgICAgICAgICAgaWYgKHRoaXMudGltZUFnb1sxXSAhPT0gJycgJiYgdGhpcy50aW1lQWdvWzFdICE9IG51bGwgJiYgdGhpcy50aW1lQWdvWzFdICE9PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnRpbWVBZ29bMV0KICAgICAgICAgICAgfQogICAgICAgICAgICAvLyB9CiAgICAgICAgICAgIHJldHVybiAnJzsKICAgICAgICB9LAogICAgICAgIG1pbnMoKSB7CiAgICAgICAgICAgIC8vIGlmICh0aGlzLmJvb2tpbmdEZXRhaWxzPy5ib29raW5nPy5UeXBlT2ZCb29raW5nICE9PSAnU2VsZiByZXNlcnZhdGlpb24nKSB7CiAgICAgICAgICAgIC8vICAgICBsZXQgaCA9IHRoaXMudGltZUFnby5pbmNsdWRlcygnaCcpID8gdGhpcy50aW1lQWdvLnNwbGl0KCdoJylbMV0gOiB0aGlzLnRpbWVBZ287CiAgICAgICAgICAgIC8vICAgICByZXR1cm4gaC5zcGxpdCgnbWluJylbMF0KICAgICAgICAgICAgLy8gfQoKICAgICAgICAgICAgLy8gZWxzZSB7CiAgICAgICAgICAgIGlmICh0aGlzLnRpbWVBZ29bMl0gIT09ICcnICYmIHRoaXMudGltZUFnb1syXSAhPSBudWxsICYmIHRoaXMudGltZUFnb1syXSAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy50aW1lQWdvWzJdLmluY2x1ZGVzKCdtaW5zJykgPyBbdGhpcy50aW1lQWdvWzJdLnNwbGl0KCdtaW5zJylbMF0sICdtaW5zJ10gOiBbdGhpcy50aW1lQWdvWzJdLnNwbGl0KCdtaW4nKVswXSwgJ21pbiddCiAgICAgICAgICAgIH0KICAgICAgICAgICAgLy8gfQogICAgICAgICAgICByZXR1cm4gJyc7CiAgICAgICAgfSwKCiAgICAgICAgdGltZUFnbzogZnVuY3Rpb24gZ2V0VGltZUFnbygpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuY291bnRVcFRpbWU7CiAgICAgICAgfSwKICAgICAgICB2YWxpZGF0aW9uUGVuZGluZzogZnVuY3Rpb24gcXJWYWxpZGF0aW9uKCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID09PSB1bmRlZmluZWQgJiYgdGhpcy5jYW1lcmEgPT09ICJvZmYiOwogICAgICAgIH0sCiAgICAgICAgYm9va2luZ19jb250ZW50KCkgewogICAgICAgICAgICBsZXQgZGF0ZVRpbWUgPSBmb3JtYXREYXRlVGltZSgKICAgICAgICAgICAgICAgIE51bWJlcih0aGlzLmJvb2tpbmdEZXRhaWxzLmJvb2tpbmcuZW50cnl0aW1lKQogICAgICAgICAgICApOwogICAgICAgICAgICByZXR1cm4gIiBvbiAiICsgZGF0ZVRpbWVbMV0gKyAiICIgKyBkYXRlVGltZVsyXSArICIgIiArIGRhdGVUaW1lWzBdOwogICAgICAgIH0sCiAgICAgICAgY2hlY2tpbl9jb250ZW50KCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy5mb3JtYXREYXRlVGltZSh0aGlzLmJvb2tpbmdEZXRhaWxzLmJvb2tpbmcuZW50cnl0aW1lLCAnY2hlY2tpbicpOwogICAgICAgIH0sCiAgICAgICAgY2hlY2tvdXRfY29udGVudCgpIHsKICAgICAgICAgICAgcmV0dXJuICdDaGVja291dCBiZWZvcmUgJyArIHRoaXMuZm9ybWF0RGF0ZVRpbWUodGhpcy5ib29raW5nRGV0YWlscy5ib29raW5nLnJldkVuZCwgJ2V4cGlyZScpCiAgICAgICAgfSwKICAgICAgICB2YWxpZGF0ZWRfY29udGVudCgpIHsKICAgICAgICAgICAgaWYgKHRoaXMuYm9va2luZ0RldGFpbHM/LnpvbmU/LnRpbWV6b25lb2Zmc2V0KSB7CiAgICAgICAgICAgICAgICBsZXQgZGF0ZVRpbWUgPSB0aGlzLmJvb2tpbmdEZXRhaWxzLmJvb2tpbmcudHlwZSA9PSAiMTMiID8gZm9ybWF0RGF0ZVRpbWUoCiAgICAgICAgICAgICAgICAgICAgTnVtYmVyKHRoaXMuYm9va2luZ0RldGFpbHMuYm9va2luZy5yZXZTdGFydCkgKwogICAgICAgICAgICAgICAgICAgIE51bWJlcih0aGlzLmJvb2tpbmdEZXRhaWxzLmJvb2tpbmcuY291cG9uVmFsaWRUaW1lKQogICAgICAgICAgICAgICAgKSA6IGZvcm1hdERhdGVUaW1lKAogICAgICAgICAgICAgICAgICAgIE51bWJlcih0aGlzLmJvb2tpbmdEZXRhaWxzLmJvb2tpbmcuZW50cnl0aW1lKSArCiAgICAgICAgICAgICAgICAgICAgTnVtYmVyKHRoaXMuYm9va2luZ0RldGFpbHMuYm9va2luZy5jb3Vwb25WYWxpZFRpbWUpCiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgcmV0dXJuIGRhdGVUaW1lWzBdICsgIiwgIiArIGRhdGVUaW1lWzFdICsgIiAiICsgZGF0ZVRpbWVbMl07CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuICIiOwogICAgICAgIH0sCiAgICAgICAgY291bnREb3duVmFsaWRhdGVkVGltZSgpIHsKICAgICAgICAgICAgaWYgKHRoaXMudmFsaWRhdGVkRGF0ZVRpbWUgPCAwKSB7CiAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoIlNFVF9WQUxJREFURURfVElNRV9TVEFUVVMiLCB0cnVlKTsKICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy52YWxpZGF0ZWRJbnRlcnZhbCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIHNlY29uZHNUb0htcyh0aGlzLnZhbGlkYXRlZERhdGVUaW1lIC8gMTAwMCArIDU5KTsKICAgICAgICB9LAogICAgICAgIGNvdW50RG93bkdyYWNlUGVyaW9kVGltZSgpIHsKICAgICAgICAgICAgaWYgKHRoaXMuZ3JhY2VQZXJpb2RUaW1lIDwgMCkgewogICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCJTRVRfR1JBQ0VfUEVSSU9EX1RJTUVfU1RBVFVTIiwgdHJ1ZSk7CiAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKHRoaXMuZ3JhY2VQZXJpb2RJbnRlcnZhbCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgLy9hZGQgNTkgc2VjIHRvIGdyYWNlcGVyaW9kIHRpbWUgdG8gc2tpcCAwIG1pbi4KICAgICAgICAgICAgcmV0dXJuIHNlY29uZHNUb0htcyh0aGlzLmdyYWNlUGVyaW9kVGltZSAvIDEwMDAgKyA1OSk7CiAgICAgICAgfSwKICAgICAgICAvLyBncmFjZVBlcmlvZENvdW50RG93blRpbWUsCiAgICAgICAgLy8gY291bnREb3duVmFsaWRhdGlvbnRpbWUoKXsKICAgICAgICAvLyAgIHJldHVybgogICAgICAgIC8vIH0KICAgIH0sCiAgICB3YXRjaDogewogICAgICAgIHRpbWUobmV3VmFsLCBvbGRWYWwpIHsKICAgICAgICAgICAgaWYgKG9sZFZhbCAhPSBudWxsICYmIG5ld1ZhbCAhPSBudWxsICYmIG9sZFZhbCAhPSBuZXdWYWwgJiYgb2xkVmFsICE9ICIiICYmIG5ld1ZhbCAhPSAiIiAmJiAoaXNWYWxpZChuZXdWYWwpKSkgewogICAgICAgICAgICAgICAgdGhpcy5ib29raW5nRGV0YWlscz8uem9uZT8udGltZVBpY2tlckNvbmZpZ3VyYXRpb24gPT0gJzEnID8gcm91bmQobmV3VmFsKSA6IHNldChuZXdWYWwsIHsgaG91cjogMjMsIG1pbnV0ZXM6IDU5LCBzZWNvbmRzOiA1OSB9KQogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgIH0sCiAgICBjcmVhdGVkKCkgeyB9LAogICAgbW91bnRlZDogZnVuY3Rpb24gKCkgewogICAgICAgIEV2ZW50QnVzLiRvbignU0VUX1RJTUUnLCAoKSA9PiB7CiAgICAgICAgICAgIHRoaXMub25UaW1lUGlja2VyQ2hhbmdlKCk7CiAgICAgICAgfSkKICAgICAgICB0aGlzLmV4aXREYXRlVGltZSA9IHRoaXMuY2FsY3VsYXRlRXhpdERhdGVUaW1lKCk7CiAgICAgICAgdGhpcy5leGl0VGltZUludGVydmFsID0gc2V0SW50ZXJ2YWwoKCkgPT4gewogICAgICAgICAgICBpZiAoCiAgICAgICAgICAgICAgICB0aGlzLmJvb2tpbmdEZXRhaWxzPy56b25lPy50aW1lem9uZQoKICAgICAgICAgICAgKSB7CiAgICAgICAgICAgICAgICB0aGlzLmV4aXREYXRlVGltZSA9IHRoaXMuY2FsY3VsYXRlRXhpdERhdGVUaW1lKCk7CiAgICAgICAgICAgIH0KICAgICAgICB9LCAxMDAwKTsKICAgICAgICBpZiAoCiAgICAgICAgICAgIHRoaXMuZW50cnlUaW1lICE9IG51bGwgJiYKICAgICAgICAgICAgIXRoaXMuYm9va2luZ0RldGFpbHM/LmJvb2tpbmc/LmV4aXR0aW1lICYmCiAgICAgICAgICAgIHRoaXMuYm9va2luZ0RldGFpbHM/LnpvbmU/LnRpbWV6b25lICYmCiAgICAgICAgICAgIHRoaXMuYm9va2luZ0RldGFpbHM/LmJvb2tpbmc/LmdyYWNlUGVyaW9kCiAgICAgICAgKSB7CiAgICAgICAgICAgIHRoaXMuY291bnRVcFRpbWUgPSB0aGlzLmNhbGN1bGF0ZVBhcmtpbmdUaW1lKAogICAgICAgICAgICAgICAgdGhpcy5lbnRyeVRpbWUsCiAgICAgICAgICAgICAgICB0aGlzLmJvb2tpbmdEZXRhaWxzLmJvb2tpbmcuZ3JhY2VQZXJpb2QsCiAgICAgICAgICAgICAgICB0aGlzLmJvb2tpbmdEZXRhaWxzLnpvbmUudGltZXpvbmUKICAgICAgICAgICAgKTsKICAgICAgICB9CiAgICAgICAgdGhpcy5pbnRlcnZhbCA9IHNldEludGVydmFsKCgpID0+IHsKICAgICAgICAgICAgaWYgKAogICAgICAgICAgICAgICAgdGhpcy5lbnRyeVRpbWUgIT0gbnVsbCAmJgogICAgICAgICAgICAgICAgIXRoaXMuYm9va2luZ0RldGFpbHM/LmJvb2tpbmc/LmV4aXR0aW1lICYmCiAgICAgICAgICAgICAgICB0aGlzLmJvb2tpbmdEZXRhaWxzPy56b25lPy50aW1lem9uZSAmJgogICAgICAgICAgICAgICAgdGhpcy5ib29raW5nRGV0YWlscz8uYm9va2luZz8uZ3JhY2VQZXJpb2QKICAgICAgICAgICAgKSB7CiAgICAgICAgICAgICAgICB0aGlzLmNvdW50VXBUaW1lID0gdGhpcy5jYWxjdWxhdGVQYXJraW5nVGltZSgKICAgICAgICAgICAgICAgICAgICB0aGlzLmVudHJ5VGltZSwKICAgICAgICAgICAgICAgICAgICB0aGlzLmJvb2tpbmdEZXRhaWxzLmJvb2tpbmcuZ3JhY2VQZXJpb2QsCiAgICAgICAgICAgICAgICAgICAgdGhpcy5ib29raW5nRGV0YWlscy56b25lLnRpbWV6b25lCiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICB9CiAgICAgICAgfSwgMTAwMCk7CiAgICAgICAgaWYgKAogICAgICAgICAgICB0aGlzLmJvb2tpbmdEZXRhaWxzPy5ib29raW5nPy5leGl0dGltZSAmJgogICAgICAgICAgICB0aGlzLmJvb2tpbmdEZXRhaWxzLmJvb2tpbmcuZXhpdHRpbWUgIT0gbnVsbCAmJgogICAgICAgICAgICB0aGlzLmJvb2tpbmdEZXRhaWxzLmJvb2tpbmcuZXhpdHRpbWUgIT0gIiIKICAgICAgICApIHsKICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLmludGVydmFsKTsKICAgICAgICB9CiAgICAgICAgaWYgKAogICAgICAgICAgICB0aGlzLmJvb2tpbmdEZXRhaWxzPy5ib29raW5nPy52YWxpZGF0ZWQgJiYKICAgICAgICAgICAgdGhpcy5ib29raW5nRGV0YWlscy5ib29raW5nLnZhbGlkYXRlZCA9PSAiMSIgJiYKICAgICAgICAgICAgdGhpcy5ib29raW5nRGV0YWlscz8uYm9va2luZz8udmFsaWRhdGlvblR5cGUgJiYKICAgICAgICAgICAgdGhpcy5ib29raW5nRGV0YWlscy5ib29raW5nLnZhbGlkYXRpb25UeXBlID09ICJESVZSVCIKICAgICAgICApIHsKICAgICAgICAgICAgdGhpcy52YWxpZGF0ZWREYXRlVGltZSA9IHRoaXMuY2FsY3VsYXRlVmFsaWRhdGVkVGltZSgpOwogICAgICAgIH0KCiAgICAgICAgdGhpcy52YWxpZGF0ZWRJbnRlcnZhbCA9IHNldEludGVydmFsKCgpID0+IHsKICAgICAgICAgICAgaWYgKAogICAgICAgICAgICAgICAgdGhpcy5ib29raW5nRGV0YWlscz8uem9uZT8udGltZXpvbmUgJiYKICAgICAgICAgICAgICAgIHRoaXMuYm9va2luZ0RldGFpbHM/LmJvb2tpbmc/LnZhbGlkYXRlZCAmJgogICAgICAgICAgICAgICAgdGhpcy5ib29raW5nRGV0YWlscy5ib29raW5nLnZhbGlkYXRlZCA9PSAiMSIgJiYKICAgICAgICAgICAgICAgIHRoaXMuYm9va2luZ0RldGFpbHM/LmJvb2tpbmc/LnZhbGlkYXRpb25UeXBlICYmCiAgICAgICAgICAgICAgICB0aGlzLmJvb2tpbmdEZXRhaWxzLmJvb2tpbmcudmFsaWRhdGlvblR5cGUgPT0gIkRJVlJUIgogICAgICAgICAgICApIHsKICAgICAgICAgICAgICAgIHRoaXMudmFsaWRhdGVkRGF0ZVRpbWUgPSB0aGlzLmNhbGN1bGF0ZVZhbGlkYXRlZFRpbWUoKTsKICAgICAgICAgICAgfQogICAgICAgIH0sIDEwMDApOwogICAgICAgIGlmICgKICAgICAgICAgICAgdGhpcy5ib29raW5nRGV0YWlscz8uYm9va2luZz8udmFsaWRhdGVkICYmCiAgICAgICAgICAgIHRoaXMuYm9va2luZ0RldGFpbHMuYm9va2luZy52YWxpZGF0ZWQgPT0gIjEiICYmCiAgICAgICAgICAgIHRoaXMuYm9va2luZ0RldGFpbHM/LmJvb2tpbmc/LnZhbGlkYXRpb25UeXBlICYmCiAgICAgICAgICAgIHRoaXMuYm9va2luZ0RldGFpbHMuYm9va2luZy52YWxpZGF0aW9uVHlwZSA9PSAiRElWUlQiCiAgICAgICAgKSB7CiAgICAgICAgICAgIGlmICh0aGlzLnZhbGlkYXRlZERhdGVUaW1lIDwgMCkgewogICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCJTRVRfVkFMSURBVEVEX1RJTUVfU1RBVFVTIiwgdHJ1ZSk7CiAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKHRoaXMudmFsaWRhdGVkSW50ZXJ2YWwpOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBpZiAodGhpcy5ib29raW5nRGV0YWlscz8uYm9va2luZz8uZ3JhY2VQZXJpb2QgPiAwKSB7CiAgICAgICAgICAgIHRoaXMuZ3JhY2VQZXJpb2RUaW1lID0gdGhpcy5jYWxjdWxhdGVHcmFjZVBlcmlvZFRpbWUoKTsKICAgICAgICB9CgogICAgICAgIHRoaXMuZ3JhY2VQZXJpb2RJbnRlcnZhbCA9IHNldEludGVydmFsKCgpID0+IHsKICAgICAgICAgICAgaWYgKHRoaXMuYm9va2luZ0RldGFpbHM/LnpvbmU/LnRpbWV6b25lKSB7CiAgICAgICAgICAgICAgICB0aGlzLmdyYWNlUGVyaW9kVGltZSA9IHRoaXMuY2FsY3VsYXRlR3JhY2VQZXJpb2RUaW1lKCk7CiAgICAgICAgICAgIH0KICAgICAgICB9LCAxMDAwKTsKICAgICAgICBpZiAodGhpcy5ib29raW5nRGV0YWlscz8uYm9va2luZz8uZ3JhY2VQZXJpb2QgPiAwKSB7CiAgICAgICAgICAgIGlmICh0aGlzLmdyYWNlUGVyaW9kVGltZSA8IDApIHsKICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgiU0VUX0dSQUNFX1BFUklPRF9USU1FX1NUQVRVUyIsIHRydWUpOwogICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLmdyYWNlUGVyaW9kSW50ZXJ2YWwpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIEV2ZW50QnVzLiRvbigic21zLXFyLXJlc3VsdCIsIChyZXN1bHQpID0+IHsKICAgICAgICAgICAgdGhpcy5vbkRlY29kZShyZXN1bHQpOwogICAgICAgIH0pOwogICAgICAgIEV2ZW50QnVzLiRvbigidmFsaWRhdGlvbi1xci1yZXN1bHQiLCAocmVzdWx0KSA9PiB7CiAgICAgICAgICAgIHRoaXMub25WYWxpZGF0ZVFSQ29kZShyZXN1bHQpOwogICAgICAgIH0pOwoKICAgICAgICAvLyBpZih0aGlzLmJvb2tpbmdEZXRhaWxzPy56b25lPy5pc1BlZGVzdHJpYW49PScxJyl7CiAgICAgICAgLy8gICB0aGlzLnBlZGVzdHJpYW5BY2Nlc3M9dHJ1ZQogICAgICAgIC8vIH0KICAgIH0sCiAgICBkZXN0cm95ZWQoKSB7CiAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLmludGVydmFsKTsKICAgICAgICBjbGVhckludGVydmFsKHRoaXMudmFsaWRhdGVkSW50ZXJ2YWwpOwogICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5ncmFjZVBlcmlvZEludGVydmFsKTsKICAgIH0sCiAgICBiZWZvcmVSb3V0ZUVudGVyKHRvLCBmcm9tLCBuZXh0KSB7CiAgICAgICAgbmV4dChhc3luYyAodm0pID0+IHsKICAgICAgICAgICAgdm0uZ2V0TW9iaWxlT3BlcmF0aW5nU3lzdGVtKCkgPT09ICdpT1MnID8gdm0uaW9zRGV2aWNlID0gdHJ1ZSA6IHZtLmlvc0RldmljZSA9IGZhbHNlOwogICAgICAgICAgICBpZiAoCiAgICAgICAgICAgICAgICB2bS5ib29raW5nRGV0YWlscz8uYm9va2luZz8uZXhpdHRpbWUgJiYKICAgICAgICAgICAgICAgIHZtLmJvb2tpbmdEZXRhaWxzLmJvb2tpbmcuZXhpdHRpbWUgIT0gbnVsbCAmJgogICAgICAgICAgICAgICAgdm0uYm9va2luZ0RldGFpbHMuYm9va2luZy5leGl0dGltZSAhPSAiIgogICAgICAgICAgICApIHsKICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodm0uaW50ZXJ2YWwpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmICh2bS5ib29raW5nRGV0YWlscz8uYm9va2luZz8udmFsaWRhdGVkID09ICIwIikgewogICAgICAgICAgICAgICAgaWYgKHZtLnZhbGlkYXRlZERhdGVUaW1lIDwgMCkgewogICAgICAgICAgICAgICAgICAgIHZtLiRzdG9yZS5jb21taXQoIlNFVF9WQUxJREFURURfVElNRV9TVEFUVVMiLCB0cnVlKTsKICAgICAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKHZtLnZhbGlkYXRlZEludGVydmFsKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0pOwogICAgfSwKICAgIG1ldGhvZHM6IHsKICAgICAgICBsb3lhbHR5VmFsaWQoKSB7CiAgICAgICAgICAgIGlmICghKC9eW2EtejAtOV0rJC9pKS50ZXN0KHRoaXMubG95YWx0eTI0a251bSkpIHsKICAgICAgICAgICAgICAgIHRoaXMubG95YWx0eTI0a251bSA9IHRoaXMubG95YWx0eTI0a251bS5yZXBsYWNlKC9bXlx3XHNdL2dpLCAnJykKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgYXN5bmMgc3VibWl0TG95YWx0eShjb2RlKSB7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICB0aGlzLnZhbGlkYXRlQm9va2luZ1BlbmRpbmcgPSB0cnVlOwogICAgICAgICAgICAgICAgbGV0IHJlc3VsdCA9IGF3YWl0IHRoaXMudmFsaWRhdGVCb29raW5nKGNvZGUpOwogICAgICAgICAgICAgICAgaWYgKCFyZXN1bHQuZGF0YS5zdGF0dXMpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLmludmFsaWRTTVNNc2cgPSByZXN1bHQ/LmRhdGE/Lm1lc3NhZ2UKICAgICAgICAgICAgICAgICAgICAgICAgPyByZXN1bHQuZGF0YS5tZXNzYWdlCiAgICAgICAgICAgICAgICAgICAgICAgIDogIlZhbGlkYXRpb24gbm90IHJlY29nbml6ZWQuIFBsZWFzZSB0cnkgYWdhaW4iOwogICAgICAgICAgICAgICAgICAgIHRoaXMuaW52YWxpZFNNU0RpYWxvZyA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgdGhpcy52YWxpZGF0ZUJvb2tpbmdQZW5kaW5nID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5wb3N0VG9Mb2dnZXJBUEkoewogICAgICAgICAgICAgICAgICAgICAgICBwaG9uZTogdGhpcy5ib29raW5nRGV0YWlscy51c2VyLmNvbnRhY3QsCiAgICAgICAgICAgICAgICAgICAgICAgIHJlZklkOiB0aGlzLmJvb2tpbmdJZCwKICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3I6IHRoaXMuaW52YWxpZFNNU01zZywKICAgICAgICAgICAgICAgICAgICAgICAgaWNvbjogInJlZGVlbSIsCiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1c1RleHQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAiRXJyb3IgaW4gdmFsaWRhdGluZyB0aGUgc2Vzc2lvbiBvbiBlbnRlcmluZyB2YWxpZGF0aW9uIGNvZGUgLSAiICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudmFsaWRhdGVCb29raW5nVHh0LAogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLnBvc3RUb0xvZ2dlckFQSSh7CiAgICAgICAgICAgICAgICAgICAgICAgIHBob25lOiB0aGlzLmJvb2tpbmdEZXRhaWxzLnVzZXIuY29udGFjdCwKICAgICAgICAgICAgICAgICAgICAgICAgcmVmSWQ6IHRoaXMuYm9va2luZ0lkLAogICAgICAgICAgICAgICAgICAgICAgICBpY29uOiAicmVkZWVtIiwKICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzVGV4dDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICJQYXJrZXIgdmFsaWRhdGVkIHRoZSBzZXNzaW9uIHN1Y2Nlc3NmdWxseSBieSBlbnRlcmluZyB2YWxpZGF0aW9uIGNvZGUgLSAiICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudmFsaWRhdGVCb29raW5nVHh0LAogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIHRoaXMudmFsaWRhdGVCb29raW5nUGVuZGluZyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIHRoaXMudmFsaWRhdGVCb29raW5nRGlhbG9nID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KAogICAgICAgICAgICAgICAgICAgICAgICAiU0VUX1ZBTElEQVRFRF9NRVJDSEFOVCIsCiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdD8uZGF0YT8ubWVyY2hhbnROYW1lCiAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgICB0aGlzLiRyb3V0ZXIucmVwbGFjZSh7IHBhdGg6ICIvdmFsaWRhdGVzdWNjZXNzIiB9KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgICAgICAgICAgICAgIHRoaXMudmFsaWRhdGVCb29raW5nUGVuZGluZyA9IGZhbHNlOwogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBjbG9zZUFsZXJ0RGlhbG9nKCkgewogICAgICAgICAgICB0aGlzLmFsZXJ0RGlhbG9nID0gZmFsc2U7CgogICAgICAgIH0sCiAgICAgICAgZ2V0UGF5bWVudFR5cGUodHlwZSkgewogICAgICAgICAgICBzd2l0Y2ggKHR5cGUpIHsKICAgICAgICAgICAgICAgIGNhc2UgJ0FQUExFX1BBWSc6IHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ0FwcGxlIFBheSc7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjYXNlICdHT09HTEVfUEFZJzogewogICAgICAgICAgICAgICAgICAgIHJldHVybiAnR29vZ2xlIFBheScKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGNhc2UgJ0NhcmQnOiB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdDYXJkJwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfSwKCiAgICAgICAgLyoqIEBtZXRob2RzIHRvIGZpbmQgdGhlIHRoZSBVVEMgZGF0ZSAKICAgIEBwYXJhbXMgdGhlIGJvb2tpbmdzIGRhdGUgdmFsdWUgLCB0eXBlICdleGl0ICgyMDIzLTEyLTAyKScgb3IgJ2Zvcm1hdGRhdGUgKDEyLzAyLzIwMjMpJwogICAgKi8KICAgICAgICBmb3JtYXRVVENEZWZhdWx0RGF0ZShkZWZhdWx0RGF0ZSwgdHlwZSkgewogICAgICAgICAgICBsZXQgdXRjRGF0ZSA9IG5ldyBEYXRlKGRlZmF1bHREYXRlICogMTAwMCkudG9VVENTdHJpbmcoKTsKICAgICAgICAgICAgbGV0IG1vbnRoID0gdXRjRGF0ZS5zcGxpdCgiLCIpWzFdLnNwbGl0KCIgIilbMl07IC8vIEphbgogICAgICAgICAgICBsZXQgZGF0ZSA9IHV0Y0RhdGUuc3BsaXQoIiwiKVsxXS5zcGxpdCgiICIpWzFdOyAvLyAyNwogICAgICAgICAgICBsZXQgeWVhciA9IHV0Y0RhdGUuc3BsaXQoIiwiKVsxXS5zcGxpdCgiICIpWzNdOyAvLzIwMjMKICAgICAgICAgICAgbGV0IGV4aXRmb3JtYXQgPSBmb3JtYXQobmV3IERhdGUobW9udGggKyAiICIgKyBkYXRlICsgIiAiICsgeWVhciksICd5eXl5LU1NLWRkJyk7CiAgICAgICAgICAgIGxldCBkYXRlZm9ybWF0ID0gZm9ybWF0KG5ldyBEYXRlKG1vbnRoICsgIiAiICsgZGF0ZSArICIgIiArIHllYXIpLCAiTU0vZGQveXl5eSIpOwogICAgICAgICAgICByZXR1cm4gdHlwZSA9PT0gImV4aXQiID8gZXhpdGZvcm1hdCA6IGRhdGVmb3JtYXQ7CgogICAgICAgIH0sCiAgICAgICAgYXN5bmMgZXh0ZW5kRURUKCkgewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgLy9mb3JtYXQobmV3IERhdGUodGhpcy5jaGVja2luRGF0ZSksICJ5eXl5LU1NLWRkJ1QnSEg6bW06c3MiKTsKICAgICAgICAgICAgICAgIHRoaXMuZXh0ZW5kQnRuTG9hZGluZyA9IHRydWU7CiAgICAgICAgICAgICAgICBsZXQgdGltZWNvbmZpZyA9IGZvcm1hdCh0aGlzLnRpbWUsICd5eXl5L01NL2RkJykgKyAiICIgKyAiMTE6NTkgUE0iOwogICAgICAgICAgICAgICAgbGV0IHRpbWUgPSB0aGlzLmJvb2tpbmdEZXRhaWxzPy56b25lPy50aW1lUGlja2VyQ29uZmlndXJhdGlvbiA9PSAnMCcgPyBuZXcgRGF0ZSh0aW1lY29uZmlnKSA6IHRoaXMudGltZQogICAgICAgICAgICAgICAgbGV0IGV4aXREYXRlVGltZSA9IHRpbWUgIT0gbnVsbCB8fCB0aW1lICE9PSB1bmRlZmluZWQgfHwgdGltZSAhPSAiIiA/CiAgICAgICAgICAgICAgICAgICAgZm9ybWF0KHRpbWUsICd5eXl5L01NL2RkJykKICAgICAgICAgICAgICAgICAgICArCiAgICAgICAgICAgICAgICAgICAgIiAiICsKICAgICAgICAgICAgICAgICAgICBmb3JtYXQodGltZSwgJ2hoOm1tIGEnKSA6IG5ldyBEYXRlKCk7CiAgICAgICAgICAgICAgICBsZXQgZGF0YSA9IHsKICAgICAgICAgICAgICAgICAgICBiaWQ6IHRoaXMuYm9va2luZ0RldGFpbHM/LmJvb2tpbmc/LmJpZCwKICAgICAgICAgICAgICAgICAgICBleHRlbmRlZFRpbWU6IGZvcm1hdChuZXcgRGF0ZShleGl0RGF0ZVRpbWUpLCAieXl5eS1NTS1kZCBISDptbTpzcyIpLy8iMjAyMi0xMi0yOVQwMjoyNjowMC4wMDAiLAogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIHZhciBleHRlbmRTZXNzaW9uUmVzID0gYXdhaXQgQVBJSGVscGVyKAogICAgICAgICAgICAgICAgICAgICJQT1NUIiwKICAgICAgICAgICAgICAgICAgICAiL2FwaS92MS9wcmVwYWlkL2V4dGVuZFJlc2VydmF0aW9uIiwgZGF0YQogICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgIGlmIChleHRlbmRTZXNzaW9uUmVzPy5kYXRhPy5tZXNzYWdlID09ICJTdWNjZXNzZnVsbHkgdXBkYXRlZCEhIikgewogICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuZ2V0Qm9va2luZ0RldGFpbHMoKTsKICAgICAgICAgICAgICAgICAgICB0aGlzLmV4dGVuZEJ0bkxvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICB0aGlzLmV4dGVuc2lvbkRpYWxvZyA9IGZhbHNlOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLmFsZXJ0RGlhbG9nID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICB0aGlzLmFsZXJ0TXNnID0gZXh0ZW5kU2Vzc2lvblJlcz8uZGF0YT8ubWVzc2FnZSB8fCAiRXJyb3IgaW4gZXh0ZW5kaW5nIHRoZSBzZXNzaW9uIgogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICAgICAgICAgIHRoaXMuZXh0ZW5kQnRuTG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpOwogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBmb3JtYXREYXRlKGRhdGUpIHsKICAgICAgICAgICAgbGV0IHN0cmluZ2RhdGUgPSBkYXRlLnRvU3RyaW5nKCk7CiAgICAgICAgICAgIGlmICghZGF0ZSkgcmV0dXJuIG51bGw7CgogICAgICAgICAgICBjb25zdCBbeWVhciwgbW9udGgsIGRheV0gPSBzdHJpbmdkYXRlLnNwbGl0KCItIik7CiAgICAgICAgICAgIHJldHVybiBgJHttb250aH0vJHtkYXl9LyR7eWVhcn1gOwogICAgICAgIH0sCiAgICAgICAgcGFyc2VEYXRlKGRhdGUpIHsKICAgICAgICAgICAgaWYgKCFkYXRlKSByZXR1cm4gbnVsbDsKCiAgICAgICAgICAgIGNvbnN0IFttb250aCwgZGF5LCB5ZWFyXSA9IGRhdGUuc3BsaXQoIi8iKTsKICAgICAgICAgICAgcmV0dXJuIGAke3llYXJ9LSR7bW9udGgucGFkU3RhcnQoMiwgIjAiKX0tJHtkYXkucGFkU3RhcnQoMiwgIjAiKX1gOwogICAgICAgIH0sCiAgICAgICAgYXN5bmMgb3BlbkV4dERpYWxvZygpIHsKCiAgICAgICAgICAgIC8vIGF3YWl0IGF4aW9zLmdldCgKICAgICAgICAgICAgLy8gICBwcm9jZXNzLmVudi5WVUVfQVBQX09OX0RFTUFORF9VUkwgKyAiLyIgKyAiMzI4OTkiKyAiLmpzb24iCiAgICAgICAgICAgIC8vICk7CiAgICAgICAgICAgIHRoaXMuc2V0RGVmYXVsdERhdGUoKTsKICAgICAgICAgICAgdGhpcy5zZXREYXRlUGlja2VyKCk7CiAgICAgICAgICAgIC8vIHRoaXMuc2V0VGltZVBpY2tlcigpOwogICAgICAgICAgICB0aGlzLmV4dGVuc2lvbkRpYWxvZyA9IHRydWU7CiAgICAgICAgICAgIHRoaXMuZXh0ZW5kQnRuTG9hZGluZyA9IGZhbHNlOwogICAgICAgIH0sCgogICAgICAgIHNldERlZmF1bHREYXRlKCkgewogICAgICAgICAgICAvL2Zvcm1hdHRlZCBleGl0IGRhdGUgdmFsdWUgdG8gZGlzcGxheQogICAgICAgICAgICB0aGlzLmRhdGVGb3JtYXR0ZWQgPQogICAgICAgICAgICAgICAgdGhpcy5ib29raW5nRGV0YWlscz8uYm9va2luZz8ucmVzZXJ2YXRpb25FbmREYXRlID8gdGhpcy5mb3JtYXRVVENEZWZhdWx0RGF0ZSh0aGlzLmJvb2tpbmdEZXRhaWxzPy5ib29raW5nPy5yZXZFbmQKICAgICAgICAgICAgICAgICAgICAsICdmb3JtYXQnKSA6ICIiOwogICAgICAgICAgICB0aGlzLnRpbWUgPSBuZXcgRGF0ZSh0aGlzLmZvcm1hdERhdGVUaW1lKHRoaXMuYm9va2luZ0RldGFpbHM/LmJvb2tpbmc/LnJldkVuZCwgJ2RhdGUnKSkKICAgICAgICAgICAgdGhpcy5leGl0RGF0ZSA9IHRoaXMudGltZTsKICAgICAgICAgICAgbGV0IGZpZnRlZW5UaW1lID0gdGhpcy50aW1lOwoKICAgICAgICAgICAgdGhpcy50aW1lID0gZm9ybWF0KHRoaXMudGltZSwgJ21tJykgPT0gJzE1JyB8fCBmb3JtYXQodGhpcy50aW1lLCAnbW0nKSA9PSAnMzAnIHx8IGZvcm1hdCh0aGlzLnRpbWUsICdtbScpID09ICc0NScgfHwgZm9ybWF0KHRoaXMudGltZSwgJ21tJykgPT0gJzAwJyA/IGZpZnRlZW5UaW1lIDogdGhpcy5ib29raW5nRGV0YWlscz8uem9uZT8udGltZVBpY2tlckNvbmZpZ3VyYXRpb24gPT0gJzEnID8gcm91bmQodGhpcy50aW1lKSA6IHNldCh0aGlzLnRpbWUsIHsgaG91cjogMjMsIG1pbnV0ZXM6IDU5LCBzZWNvbmRzOiA1OSB9KTsKICAgICAgICAgICAgLy8gdGhpcy5kYXRlVGltZUNoYW5nZSgpCiAgICAgICAgICAgIC8vIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKHRoaXMuYm9va2luZ0RldGFpbHMuYm9va2luZywgJ2lzR2F0ZWQnKSAmJiB0aGlzLmJvb2tpbmdEZXRhaWxzLmJvb2tpbmc/LmlzR2F0ZWQgPT0gIjEiICYmIGZvcm1hdCh0aGlzLnRpbWUsICd5eXl5LU1NLWRkJykgIT0gZm9ybWF0KGRhdGVUb1RpbWVab25lRGF0ZShuZXcgRGF0ZSgpLCB0aGlzLmJvb2tpbmdEZXRhaWxzPy56b25lPy50aW1lem9uZSksICd5eXl5LU1NLWRkJykgPyB0aGlzLmJlZm9yZURhdGVUaW1lQ2hhbmdlKCkgOiAiIjsKCiAgICAgICAgfSwKICAgICAgICBvblRpbWVQaWNrZXJDaGFuZ2UoKSB7CiAgICAgICAgICAgIGxldCBleGl0ZGF0ZSA9IHRoaXMudGltZSAhPT0gbnVsbCAmJiB0aGlzLnRpbWUgIT09IHVuZGVmaW5lZCAmJiB0aGlzLnRpbWUgIT09ICIiID8gZm9ybWF0KHRoaXMudGltZSwgJ3l5eXkvTU0vZGQnKSA6ICIiOwogICAgICAgICAgICBsZXQgc2VsZWN0ZWRNaW5zID0gdGhpcy50aW1lICE9PSBudWxsICYmIHRoaXMudGltZSAhPT0gdW5kZWZpbmVkICYmIHRoaXMudGltZSAhPT0gIiIgPyBmb3JtYXQodGhpcy50aW1lLCAnbW0nKSA6ICIiOwogICAgICAgICAgICBsZXQgc2VsZWN0ZWRIb3VycyA9IHRoaXMudGltZSAhPT0gbnVsbCAmJiB0aGlzLnRpbWUgIT09IHVuZGVmaW5lZCAmJiB0aGlzLnRpbWUgIT09ICIiID8gZm9ybWF0KHRoaXMudGltZSwgJ0hIJykgOiAiIjsKICAgICAgICAgICAgbGV0IHNlbGVjdGVkQU1QTSA9IHRoaXMudGltZSAhPT0gbnVsbCAmJiB0aGlzLnRpbWUgIT09IHVuZGVmaW5lZCAmJiB0aGlzLnRpbWUgIT09ICIiID8gZm9ybWF0KHRoaXMudGltZSwgJ2EnKSA6ICIiOwogICAgICAgICAgICB0aGlzLnN0b3BUaW1lID0gc2VsZWN0ZWRNaW5zICE9IG51bGwgJiYgc2VsZWN0ZWRNaW5zICE9ICIiICYmIHNlbGVjdGVkSG91cnMgIT0gbnVsbCAmJiBzZWxlY3RlZEhvdXJzICE9ICIiICYmIHNlbGVjdGVkQU1QTSAhPSBudWxsICYmIHNlbGVjdGVkQU1QTSAhPSAiIiA/IHNlbGVjdGVkSG91cnMgKyAiOiIgKyBzZWxlY3RlZE1pbnMgKyAiOiIgKyAiMDAiIDogIiI7CiAgICAgICAgICAgIGxldCBjdXJyZW5UaW1lID0gdGhpcy5ib29raW5nRGV0YWlscy56b25lLnRpbWV6b25lCiAgICAgICAgICAgICAgICA/IGZvcm1hdCgKICAgICAgICAgICAgICAgICAgICBkYXRlVG9UaW1lWm9uZURhdGUobmV3IERhdGUoKSwKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ib29raW5nRGV0YWlscy56b25lLnRpbWV6b25lCiAgICAgICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgICAgICAieXl5eS1NTS1kZCBISDptbTpzcyIKICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIDogZm9ybWF0KG5ldyBEYXRlKCksICJ5eXl5LU1NLWRkICBISDptbTpzcyIpOwogICAgICAgICAgICBpZiAoCiAgICAgICAgICAgICAgICBzZWxlY3RlZE1pbnMgIT0gbnVsbCAmJiBzZWxlY3RlZE1pbnMgIT0gIiIgJiYgc2VsZWN0ZWRIb3VycyAhPSBudWxsICYmIHNlbGVjdGVkSG91cnMgIT0gIiIgJiYgc2VsZWN0ZWRBTVBNICE9IG51bGwgJiYgc2VsZWN0ZWRBTVBNICE9ICIiICYmCiAgICAgICAgICAgICAgICBuZXcgRGF0ZShleGl0ZGF0ZSArICIgIiArIHRoaXMuc3RvcFRpbWUpLmdldFRpbWUoKSA+CiAgICAgICAgICAgICAgICBuZXcgRGF0ZShjdXJyZW5UaW1lKS5nZXRUaW1lKCkKICAgICAgICAgICAgKSB7CiAgICAgICAgICAgICAgICBmb3JtYXQodGhpcy50aW1lLCAneXl5eS1NTS1kZCcpICE9IGZvcm1hdCh0aGlzLm1pbkRhdGUsICd5eXl5LU1NLWRkJykgPyB0aGlzLmJlZm9yZURhdGVUaW1lQ2hhbmdlKCkgOiAiIjsKICAgICAgICAgICAgICAgIHRoaXMuZGF0ZVRpbWVDaGFuZ2UoKTsKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgc2V0RGF0ZVBpY2tlcigpIHsKICAgICAgICAgICAgLy9zZXQgdGhlIG1pbmltdW0gZGF0ZSB0byB0b2RheSBkYXRlKHpvbmUgdGltZSB6b25lIGRhdGUpCiAgICAgICAgICAgIHRoaXMubWluRGF0ZSA9IHRoaXMuYm9va2luZ0RldGFpbHMuem9uZS50aW1lem9uZQogICAgICAgICAgICAgICAgPwogICAgICAgICAgICAgICAgbmV3IERhdGUodGhpcy5mb3JtYXREYXRlVGltZSh0aGlzLmJvb2tpbmdEZXRhaWxzPy5ib29raW5nPy5yZXZFbmQsICdkYXRlJykpCiAgICAgICAgICAgICAgICA6CiAgICAgICAgICAgICAgICBkYXRlVG9UaW1lWm9uZURhdGUoCiAgICAgICAgICAgICAgICAgICAgbmV3IERhdGUoTnVtYmVyKHRoaXMuYm9va2luZ0RldGFpbHM/LmJvb2tpbmc/LnJldkVuZCkgKiAxMDAwIC0gTnVtYmVyKHRoaXMuYm9va2luZ0RldGFpbHMuem9uZS50aW1lem9uZW9mZnNldCkgKiAxMDAwKQogICAgICAgICAgICAgICAgICAgICwgdGhpcy5ib29raW5nRGV0YWlscy56b25lLnRpbWV6b25lCiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAvL2NhbGN1bGF0ZSBtYXggcGFya2lnbiB0aW1lIGluIHNlY29uZHMKICAgICAgICAgICAgbGV0IG1heFBhcmsgPSB0aGlzLmJvb2tpbmdEZXRhaWxzICE9IG51bGwgPyB0aGlzLmJvb2tpbmdEZXRhaWxzPy56b25lPy5tYXhQYXJraW5nVGltZSA6IG51bGw7CgogICAgICAgICAgICBsZXQgYWRkZWRkYXlzID0gYWRkRGF5cyhuZXcgRGF0ZSgpLCBtYXhQYXJrPy5kYXlzKTsKICAgICAgICAgICAgbGV0IGFkZGVkaG91cnMgPSBhZGRIb3VycyhhZGRlZGRheXMsIG1heFBhcms/LmhvdXJzKTsKICAgICAgICAgICAgbGV0IGFkZGVkbWlucyA9IGFkZE1pbnV0ZXMoYWRkZWRob3VycywgbWF4UGFyaz8ubWludXRlcyk7CiAgICAgICAgICAgIC8vZ2V0IG1heCBkYXRlIGluIHNlY29uZHMgYmFzZWQgb24gbWF4IHBhcmtpbmcgdGltZQogICAgICAgICAgICBsZXQgbWF4Wm9uZURhdGUgPSBhZGRlZG1pbnM7CiAgICAgICAgICAgIHRoaXMubWF4RGF0ZSA9IHRoaXMuYm9va2luZ0RldGFpbHM/LnpvbmUudGltZXpvbmUKICAgICAgICAgICAgICAgID8KICAgICAgICAgICAgICAgIGRhdGVUb1RpbWVab25lRGF0ZSgKICAgICAgICAgICAgICAgICAgICBtYXhab25lRGF0ZSwKICAgICAgICAgICAgICAgICAgICB0aGlzLmJvb2tpbmdEZXRhaWxzPy56b25lPy50aW1lem9uZQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgOiBuZXcgRGF0ZShtYXhab25lRGF0ZSk7CiAgICAgICAgICAgIC8vZ2V0IG1heCBkYXRlIHdpdGggdGltZSBhbmQgc2V0IGl0IHRvIG1heERhdGVUaW1lCiAgICAgICAgICAgIHRoaXMubWF4RGF0ZVRpbWUgPSB0aGlzLmJvb2tpbmdEZXRhaWxzPy56b25lPy50aW1lem9uZQogICAgICAgICAgICAgICAgPyBmb3JtYXQoCiAgICAgICAgICAgICAgICAgICAgZGF0ZVRvVGltZVpvbmVEYXRlKAogICAgICAgICAgICAgICAgICAgICAgICBuZXcgRGF0ZShtYXhab25lRGF0ZSksCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYm9va2luZ0RldGFpbHM/LnpvbmU/LnRpbWV6b25lCiAgICAgICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgICAgICAieXl5eS1NTS1kZCBoaDptbSBhYWFhYSIKICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIDogZm9ybWF0KG5ldyBEYXRlKCksICJ5eXl5LU1NLWRkIGhoOm1tIGFhYWFhIik7CiAgICAgICAgfSwKICAgICAgICAvLyBvbk9wZW4oKSB7CiAgICAgICAgLy8gICB0aGlzLnNldFRpbWVQaWNrZXIodGhpcy5leGl0VGltZVNlbGVjdGVkKTsKICAgICAgICAvLyB9LAogICAgICAgIC8qKiBAbWV0aG9kcyB0byBmaW5kIHRoZSBlc3RpbWF0ZSByYXRlIAogICAgICAgQHBhcmFtcyBzdGFydERhdGUgLCBzdG9wRGF0ZSx6Y29kZSwgdHlwZSAsIGVudl9vdmVyUmlkZQogICAgICAgKi8KICAgICAgICBhc3luYyBiZWZvcmVEYXRlVGltZUNoYW5nZSgpIHsKICAgICAgICAgICAgaWYgKCF0aGlzLmJvb2tpbmdEZXRhaWxzLnpvbmUuemNvZGUpIHsKICAgICAgICAgICAgICAgIHJldHVybgogICAgICAgICAgICB9CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAvLyBmb3JtYXQobmV3IERhdGUodGhpcy5jaGVja2luRGF0ZSksICJ5eXl5LU1NLWRkJ1QnSEg6bW06c3MiKTsKCiAgICAgICAgICAgICAgICBsZXQgZWR0RW50cnlUaW1lID0gdGhpcy5ib29raW5nRGV0YWlscz8uYm9va2luZz8uZW50cnl0aW1lCiAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0RGF0ZSA9IGVkdEVudHJ5VGltZSAhPT0gbnVsbCAmJiBlZHRFbnRyeVRpbWUgIT09IHVuZGVmaW5lZCAmJiBlZHRFbnRyeVRpbWUgIT09ICIiID8gZm9ybWF0KG5ldyBEYXRlKHRoaXMuZm9ybWF0RGF0ZVRpbWUoZWR0RW50cnlUaW1lLCAnZGF0ZScpKSwgInl5eXktTU0tZGQnVCdISDptbTpzcyIpIDogdGhpcy5ib29raW5nRGV0YWlscy56b25lLnRpbWV6b25lCiAgICAgICAgICAgICAgICAgICAgPyBmb3JtYXQoCiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGVUb1RpbWVab25lRGF0ZSgKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBEYXRlKCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmJvb2tpbmdEZXRhaWxzLnpvbmUudGltZXpvbmUKICAgICAgICAgICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgICAgICAgICAgInl5eXktTU0tZGQnVCdISDptbTpzcyIKICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgOiBmb3JtYXQobmV3IERhdGUoKSwgInl5eXktTU0tZGQnVCdISDptbTpzcyIpOwogICAgICAgICAgICAgICAgbGV0IHN0b3BUaW1lID0gdGhpcy5zdG9wVGltZQogICAgICAgICAgICAgICAgbGV0IHNlbGVjdGVkSG91cnMgPSB0aGlzLmJvb2tpbmdEZXRhaWxzLmJvb2tpbmcuZW50cnl0aW1lICE9IG51bGwgJiYgdGhpcy5ib29raW5nRGV0YWlscy5ib29raW5nLmVudHJ5dGltZSAhPT0gdW5kZWZpbmVkICYmIHRoaXMuYm9va2luZ0RldGFpbHMuYm9va2luZy5lbnRyeXRpbWUgIT0gIiIgPyBmb3JtYXQobmV3IERhdGUodGhpcy5mb3JtYXREYXRlVGltZSh0aGlzLmJvb2tpbmdEZXRhaWxzPy5ib29raW5nPy5lbnRyeXRpbWUsICdkYXRlJykpLCAiSEgiKSA6IGZvcm1hdChkYXRlVG9UaW1lWm9uZURhdGUobmV3IERhdGUoKSwgdGhpcy5ib29raW5nRGV0YWlscy56b25lLnRpbWV6b25lKSwgJ0hIJyk7CiAgICAgICAgICAgICAgICBsZXQgc2VsZWN0ZWRNaW5zID0gdGhpcy5ib29raW5nRGV0YWlscy5ib29raW5nLmVudHJ5dGltZSAhPSBudWxsICYmIHRoaXMuYm9va2luZ0RldGFpbHMuYm9va2luZy5lbnRyeXRpbWUgIT09IHVuZGVmaW5lZCAmJiB0aGlzLmJvb2tpbmdEZXRhaWxzLmJvb2tpbmcuZW50cnl0aW1lICE9ICIiID8gZm9ybWF0KG5ldyBEYXRlKHRoaXMuZm9ybWF0RGF0ZVRpbWUodGhpcy5ib29raW5nRGV0YWlscz8uYm9va2luZz8uZW50cnl0aW1lLCAnZGF0ZScpKSwgIm1tIikgOiBmb3JtYXQoZGF0ZVRvVGltZVpvbmVEYXRlKG5ldyBEYXRlKCksIHRoaXMuYm9va2luZ0RldGFpbHMuem9uZS50aW1lem9uZSksICdtbScpOwogICAgICAgICAgICAgICAgbGV0IGV4aXR0aW1lID0gT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwodGhpcy5ib29raW5nRGV0YWlscywgJ3pvbmUnKSAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbCh0aGlzLmJvb2tpbmdEZXRhaWxzLnpvbmUsICd0aW1lUGlja2VyQ29uZmlndXJhdGlvbicpICYmIHRoaXMuYm9va2luZ0RldGFpbHMuem9uZS50aW1lUGlja2VyQ29uZmlndXJhdGlvbiA9PSAnMScgPyAnVCcgKyBzdG9wVGltZSA6ICdUJyArIHNlbGVjdGVkSG91cnMgKyAiOiIgKyBzZWxlY3RlZE1pbnMgKyAiOjAwIjsKICAgICAgICAgICAgICAgIGxldCBleGl0ZGF0ZSA9IGZvcm1hdCh0aGlzLnRpbWUsICd5eXl5LU1NLWRkJyk7CiAgICAgICAgICAgICAgICBsZXQgc3RvcERhdGUgPSBleGl0ZGF0ZSArIGV4aXR0aW1lOwogICAgICAgICAgICAgICAgbGV0IGRhdGEgPSB7CiAgICAgICAgICAgICAgICAgICAgc3RhcnRBdDogdGhpcy5zdGFydERhdGUsCiAgICAgICAgICAgICAgICAgICAgc3RvcEF0OiBzdG9wRGF0ZSwKICAgICAgICAgICAgICAgICAgICB6Y29kZTogdGhpcy5ib29raW5nRGV0YWlscy56b25lLnpjb2RlLAogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIHRoaXMuYWRkUGF5bWVudEJ0bkxvYWRpbmcgPSB0cnVlOwogICAgICAgICAgICAgICAgdmFyIGdldFJhdGUgPSBhd2FpdCBBUElIZWxwZXIoIlBPU1QiLCAiL2FwaS92Mi9nZXRSYXRlIiwgZGF0YSk7CiAgICAgICAgICAgICAgICAvL2NvbmRpdGlvbiB0byBjaGVjayBpZiB0aGUgZGF0ZSB0aW1lIHNlbGVjdGVkIGlzIGxlc3NlciB0aGFuIGN1cnJlbnQgdGltZQogICAgICAgICAgICAgICAgaWYgKCFnZXRSYXRlPy5kYXRhPy5zdGF0dXMgJiYgIXRoaXMuZ2V0UmF0ZUNhbGwpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc2FibGVBZGRQYXltZW50QnRuID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICB0aGlzLmFsZXJ0RGlhbG9nID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICB0aGlzLmFsZXJ0TXNnID0KICAgICAgICAgICAgICAgICAgICAgICAgZ2V0UmF0ZT8uZGF0YT8ubWVzc2FnZSB8fCAiRXJyb3IgaW4gZ2V0dGluZyByYXRlIGRldGFpbHMiOwogICAgICAgICAgICAgICAgICAgIHRoaXMub3BlbkRhdGVQaWNrZXIgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICB0aGlzLm9wZW5UaW1lUGlja2VyID0gZmFsc2U7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzYWJsZUFkZFBheW1lbnRCdG4gPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICB0aGlzLm9wZW5EYXRlUGlja2VyID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5vcGVuVGltZVBpY2tlciA9IGZhbHNlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdGhpcy5iZWZvcmVFc3RpbWF0ZSA9IE9iamVjdC5hc3NpZ24oe30sIGdldFJhdGU/LmRhdGE/LmRhdGEpOwogICAgICAgICAgICAgICAgLy8gZXN0aW1hdGVkVmFsICE9ICIiICYmCiAgICAgICAgICAgICAgICAvLyBlc3RpbWF0ZWRWYWwgIT0gbnVsbCAmJgogICAgICAgICAgICAgICAgLy8gZXN0aW1hdGVkVmFsICE9IHVuZGVmaW5lZAogICAgICAgICAgICAgICAgLy8gICA/IE51bWJlcihlc3RpbWF0ZWRWYWwpLnRvRml4ZWQoMikKICAgICAgICAgICAgICAgIC8vICAgOiBlc3RpbWF0ZWRWYWw7CiAgICAgICAgICAgICAgICB0aGlzLmFkZFBheW1lbnRCdG5Mb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgICAgICAgICB0aGlzLmFkZFBheW1lbnRCdG5Mb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7CiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIGFzeW5jIGRhdGVUaW1lQ2hhbmdlKCkgewogICAgICAgICAgICBpZiAoIXRoaXMuYm9va2luZ0RldGFpbHMuem9uZS56Y29kZSkgewogICAgICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgICAgIH0KICAgICAgICAgICAgdGhpcy5leHRlbmRCdG5Mb2FkaW5nID0gdHJ1ZTsKCiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAvLyBmb3JtYXQobmV3IERhdGUodGhpcy5jaGVja2luRGF0ZSksICJ5eXl5LU1NLWRkJ1QnSEg6bW06c3MiKTsKICAgICAgICAgICAgICAgIGxldCBlZHRFbnRyeVRpbWUgPSB0aGlzLmJvb2tpbmdEZXRhaWxzPy5ib29raW5nPy5lbnRyeXRpbWUKICAgICAgICAgICAgICAgIHRoaXMuc3RhcnREYXRlID0gZWR0RW50cnlUaW1lICE9PSBudWxsICYmIGVkdEVudHJ5VGltZSAhPT0gdW5kZWZpbmVkICYmIGVkdEVudHJ5VGltZSAhPT0gIiIgPyBmb3JtYXQobmV3IERhdGUodGhpcy5mb3JtYXREYXRlVGltZShlZHRFbnRyeVRpbWUsICdkYXRlJykpLCAieXl5eS1NTS1kZCdUJ0hIOm1tOnNzIikgOiB0aGlzLmJvb2tpbmdEZXRhaWxzLnpvbmUudGltZXpvbmUKICAgICAgICAgICAgICAgICAgICA/IGZvcm1hdCgKICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZVRvVGltZVpvbmVEYXRlKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IERhdGUoKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYm9va2luZ0RldGFpbHMuem9uZS50aW1lem9uZQogICAgICAgICAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgICAgICAgICAieXl5eS1NTS1kZCdUJ0hIOm1tOnNzIgogICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICA6IGZvcm1hdChkYXRlVG9UaW1lWm9uZURhdGUobmV3IERhdGUoKSwgdGhpcy5ib29raW5nRGV0YWlscy56b25lLnRpbWV6b25lKSwgInl5eXktTU0tZGQnVCdISDptbTpzcyIpOwogICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2codGhpcy5leGl0VGltZVNlbGVjdGVkPy5oaCsiOiIrdGhpcy5leGl0VGltZVNlbGVjdGVkLm1tKyI6MDAiKQogICAgICAgICAgICAgICAgLy8gdGhpcy5leGl0RGF0ZSArICJUMjM6NTk6MDAiOwogICAgICAgICAgICAgICAgbGV0IHNlbGVjdGVkSG91cnMgPSB0aGlzLnRpbWUgIT09IG51bGwgJiYgdGhpcy50aW1lICE9PSAiIiAmJiB0aGlzLnRpbWUgIT09IHVuZGVmaW5lZCA/IGZvcm1hdCh0aGlzLnRpbWUsICdISCcpIDogZm9ybWF0KGRhdGVUb1RpbWVab25lRGF0ZShuZXcgRGF0ZSgpLCB0aGlzLmJvb2tpbmdEZXRhaWxzLnpvbmUudGltZXpvbmUpLCAnSEgnKQogICAgICAgICAgICAgICAgbGV0IHNlbGVjdGVkTWlucyA9IHRoaXMudGltZSAhPT0gbnVsbCAmJiB0aGlzLnRpbWUgIT09ICIiICYmIHRoaXMudGltZSAhPT0gdW5kZWZpbmVkID8gZm9ybWF0KHRoaXMudGltZSwgJ21tJykgOiBmb3JtYXQoZGF0ZVRvVGltZVpvbmVEYXRlKG5ldyBEYXRlKCksIHRoaXMuYm9va2luZ0RldGFpbHMuem9uZS50aW1lem9uZSksICdtbScpCiAgICAgICAgICAgICAgICBsZXQgZXhpdGRhdGUgPSB0aGlzLnRpbWUgIT09IG51bGwgJiYgdGhpcy50aW1lICE9PSAiIiAmJiB0aGlzLnRpbWUgIT09IHVuZGVmaW5lZCA/IGZvcm1hdCh0aGlzLnRpbWUsICd5eXl5LU1NLWRkJykgOiAiIjsKICAgICAgICAgICAgICAgIGxldCBleGl0dGltZSA9IE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKHRoaXMuYm9va2luZ0RldGFpbHMsICd6b25lJykgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwodGhpcy5ib29raW5nRGV0YWlscy56b25lLCAndGltZVBpY2tlckNvbmZpZ3VyYXRpb24nKSAmJiB0aGlzLmJvb2tpbmdEZXRhaWxzPy56b25lPy50aW1lUGlja2VyQ29uZmlndXJhdGlvbiA9PSAnMScgPyAnVCcgKyBzZWxlY3RlZEhvdXJzICsgIjoiICsgc2VsZWN0ZWRNaW5zICsgIjowMCIgOiAiVDIzOjU5OjAwIgogICAgICAgICAgICAgICAgbGV0IHN0b3BEYXRlID0gZXhpdGRhdGUgKyBleGl0dGltZTsKCiAgICAgICAgICAgICAgICBsZXQgZGF0YSA9IHsKICAgICAgICAgICAgICAgICAgICBzdGFydEF0OiB0aGlzLnN0YXJ0RGF0ZSwKICAgICAgICAgICAgICAgICAgICBzdG9wQXQ6IHN0b3BEYXRlLAogICAgICAgICAgICAgICAgICAgIHpjb2RlOiB0aGlzLmJvb2tpbmdEZXRhaWxzPy56b25lPy56Y29kZSwKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB0aGlzLmFkZFBheW1lbnRCdG5Mb2FkaW5nID0gdHJ1ZTsKICAgICAgICAgICAgICAgIHZhciBnZXRSYXRlID0gYXdhaXQgQVBJSGVscGVyKCJQT1NUIiwgIi9hcGkvdjIvZ2V0UmF0ZSIsIGRhdGEpOwogICAgICAgICAgICAgICAgdGhpcy5leHRlbmRCdG5Mb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICAgICAgICB0aGlzLmV4dERhdGVBbmRUaW1lID0gc3RvcERhdGU7CiAgICAgICAgICAgICAgICAvL2NvbmRpdGlvbiB0byBjaGVjayBpZiB0aGUgZGF0ZSB0aW1lIHNlbGVjdGVkIGlzIGxlc3NlciB0aGFuIGN1cnJlbnQgdGltZQogICAgICAgICAgICAgICAgaWYgKCFnZXRSYXRlPy5kYXRhPy5zdGF0dXMgJiYgIXRoaXMuZ2V0UmF0ZUNhbGwpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc2FibGVBZGRQYXltZW50QnRuID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICB0aGlzLmFsZXJ0RGlhbG9nID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICB0aGlzLmFsZXJ0TXNnID0KICAgICAgICAgICAgICAgICAgICAgICAgZ2V0UmF0ZT8uZGF0YT8ubWVzc2FnZSB8fCAiRXJyb3IgaW4gZ2V0dGluZyByYXRlIGRldGFpbHMiOwogICAgICAgICAgICAgICAgICAgIHRoaXMub3BlbkRhdGVQaWNrZXIgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICB0aGlzLm9wZW5UaW1lUGlja2VyID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgRXZlbnRCdXMuJGVtaXQoJ2RhdGV0aW1lLXNldCcpOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc2FibGVBZGRQYXltZW50QnRuID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5vcGVuRGF0ZVBpY2tlciA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIHRoaXMub3BlblRpbWVQaWNrZXIgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICBFdmVudEJ1cy4kZW1pdCgnZGF0ZXRpbWUtc2V0Jyk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB0aGlzLmVzdGltYXRlID0gT2JqZWN0LmFzc2lnbih7fSwgZ2V0UmF0ZT8uZGF0YT8uZGF0YSk7CiAgICAgICAgICAgICAgICAvLyBlc3RpbWF0ZWRWYWwgIT0gIiIgJiYKICAgICAgICAgICAgICAgIC8vIGVzdGltYXRlZFZhbCAhPSBudWxsICYmCiAgICAgICAgICAgICAgICAvLyBlc3RpbWF0ZWRWYWwgIT0gdW5kZWZpbmVkCiAgICAgICAgICAgICAgICAvLyAgID8gTnVtYmVyKGVzdGltYXRlZFZhbCkudG9GaXhlZCgyKQogICAgICAgICAgICAgICAgLy8gICA6IGVzdGltYXRlZFZhbDsKICAgICAgICAgICAgICAgIHRoaXMuYWRkUGF5bWVudEJ0bkxvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgfQogICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHsKICAgICAgICAgICAgICAgIHRoaXMuYWRkUGF5bWVudEJ0bkxvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgY2FsY3VsYXRlRXhpdERhdGVUaW1lKCkgewogICAgICAgICAgICBpZiAodGhpcy5ib29raW5nRGV0YWlscz8uem9uZT8udGltZXpvbmUpIHsKICAgICAgICAgICAgICAgIC8vICAgdmFyIGN1cnJlbnRUaW1lID0KICAgICAgICAgICAgICAgIC8vIG5ldyBEYXRlKCkuZ2V0VGltZSgpICsKICAgICAgICAgICAgICAgIC8vIChOdW1iZXIodGhpcy5ib29raW5nRGV0YWlscy56b25lLnRpbWV6b25lb2Zmc2V0KSAqIDEwMDAgKwogICAgICAgICAgICAgICAgLy8gICBOdW1iZXIodGhpcy5ib29raW5nRGV0YWlscy56b25lLnRpbWV6b25lZHN0b2Zmc2V0KSAqIDEwMDApOwogICAgICAgICAgICAgICAgdmFyIGN1cnJlbnRUaW1lID0KICAgICAgICAgICAgICAgICAgICBuZXcgRGF0ZSgpLmdldFRpbWUoKSArCiAgICAgICAgICAgICAgICAgICAgKE51bWJlcih0aGlzLmJvb2tpbmdEZXRhaWxzLnpvbmUudGltZXpvbmVvZmZzZXQpICogMTAwMCArCiAgICAgICAgICAgICAgICAgICAgICAgIE51bWJlcih0aGlzLmJvb2tpbmdEZXRhaWxzLnpvbmUudGltZXpvbmVkc3RvZmZzZXQpICogMTAwMCk7CiAgICAgICAgICAgICAgICB2YXIgZXhpdFRpbWUgPQogICAgICAgICAgICAgICAgICAgIG5ldyBEYXRlKHRoaXMuYm9va2luZ0RldGFpbHMuYm9va2luZy5yZXNlcnZhdGlvbkVuZERhdGUpLmdldFRpbWUoKTsKICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgiU0VUX0VYSVRfVElNRV9USU1FX1NUQVRVUyIsIHRoaXMuZXhpdERhdGVUaW1lIDwgMCk7CiAgICAgICAgICAgICAgICBleGl0VGltZSAtIGN1cnJlbnRUaW1lIDwgMAogICAgICAgICAgICAgICAgICAgID8gY2xlYXJJbnRlcnZhbCh0aGlzLmV4aXRJbnRlcnZhbCkKICAgICAgICAgICAgICAgICAgICA6ICIiOwogICAgICAgICAgICAgICAgcmV0dXJuIGV4aXRUaW1lIC0gY3VycmVudFRpbWU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIDAKCiAgICAgICAgfSwKICAgICAgICBob3RlbEd1ZXN0KCkgewogICAgICAgICAgICBsZXQgdXJsID0gd2luZG93LmxvY2F0aW9uLm9yaWdpbiArICc/emNvZGU9JyArIHRoaXMuYm9va2luZ0RldGFpbHM/LnpvbmU/LmxvY2F0aW9uQ29kZSArICcjL2NyZWF0ZXNlc3Npb24nOwogICAgICAgICAgICBsZXQgcGxhdGUgPSB0aGlzLmJvb2tpbmdEZXRhaWxzPy5ib29raW5nPy52ZWhpY2xlTm8gfHwgIiI7CiAgICAgICAgICAgIGxldCBwaG9uZSA9IHRoaXMuYm9va2luZ0RldGFpbHM/LnVzZXI/LmNvbnRhY3QgfHwgIiI7CiAgICAgICAgICAgIGxldCBiaWQgPSB0aGlzLmJvb2tpbmdEZXRhaWxzPy5ib29raW5nPy5iaWQgfHwgIiI7CiAgICAgICAgICAgIGxldCBjaGVja2luZGF0ZSA9IHRoaXMuYm9va2luZ0RldGFpbHM/LmJvb2tpbmc/LmVudHJ5dGltZSB8fCAiIjsKICAgICAgICAgICAgbGV0IHBhcmFtcyA9ICcvP3Bob25lPScgKyBwaG9uZSArICcmYmlkPScgKyBiaWQgKyAnJnBsYXRlPScgKyBwbGF0ZSArICcmZW50cnl0aW1lPScgKyBjaGVja2luZGF0ZTsKICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlcGxhY2UodXJsICsgcGFyYW1zKTsKICAgICAgICAgICAgLy8gdGhpcy4kcm91dGVyLnJlcGxhY2Uoe3BhdGg6Jy8nfSk7CgogICAgICAgIH0sCiAgICAgICAgY2xvc2VRUkNvZGVEaWFsb2coKSB7CiAgICAgICAgICAgIHRoaXMucXJDb2RlRGlhbG9nID0gZmFsc2U7CiAgICAgICAgICAgIHRoaXMuY2FtZXJhU3RhdHVzID0gZmFsc2U7CiAgICAgICAgfSwKICAgICAgICBjbG9zZVZhbGlkYXRpb25RUkRpYWxvZygpIHsKICAgICAgICAgICAgdGhpcy52YWxpZGF0aW9uQ2FtZXJhU3RhdHVzID0gZmFsc2U7CiAgICAgICAgICAgIHRoaXMudmFsaWRhdGVCb29raW5nRGlhbG9nID0gdHJ1ZTsKICAgICAgICAgICAgdGhpcy52YWxpZGF0ZVFSQ29kZURpYWxvZyA9IGZhbHNlOwogICAgICAgIH0sCiAgICAgICAgcmVTY2FuUVIoKSB7CiAgICAgICAgICAgIHRoaXMuaW52YWxpZFFSRGlhbG9nID0gZmFsc2U7CiAgICAgICAgICAgIHRoaXMuY2FtZXJhU3RhdHVzID0gdHJ1ZTsKICAgICAgICB9LAogICAgICAgIHJlU2NhblZhbGlkYXRpb25RUigpIHsKICAgICAgICAgICAgdGhpcy5pbnZhbGlkVmFsaWRhdGlvblFSRGlhbG9nID0gZmFsc2U7CiAgICAgICAgICAgIHRoaXMudmFsaWRhdGlvbkNhbWVyYVN0YXR1cyA9IHRydWU7CiAgICAgICAgfSwKICAgICAgICBvcGVuU21zUXJTY2FubmVyKCkgewogICAgICAgICAgICB0aGlzLnFyQ29kZURpYWxvZyA9IHRydWU7CiAgICAgICAgICAgIHRoaXMuY2FtZXJhU3RhdHVzID0gdHJ1ZTsKICAgICAgICB9LAogICAgICAgIG9wZW5TTVNEaWFsb2coKSB7CiAgICAgICAgICAgIHRoaXMuc21zRGlhbG9nID0gdHJ1ZTsKICAgICAgICAgICAgbGV0IGV4aXRMYW5lcyA9CiAgICAgICAgICAgICAgICB0aGlzLmV4aXRHYXRlQ29kZXMubGVuZ3RoID4gMAogICAgICAgICAgICAgICAgICAgID8gdGhpcy5leGl0R2F0ZUNvZGVzLmZpbHRlcigoYSkgPT4gYS5pc1BlZGVzdHJpYW4gPT0gIjAiKQogICAgICAgICAgICAgICAgICAgIDogW107CiAgICAgICAgICAgIGlmICgKICAgICAgICAgICAgICAgIHRoaXMuYm9va2luZ0RldGFpbHM/LmJvb2tpbmc/LnByZVBvcHVsYXRlR2F0ZUNvZGVzICYmCiAgICAgICAgICAgICAgICB0aGlzLmJvb2tpbmdEZXRhaWxzLmJvb2tpbmcucHJlUG9wdWxhdGVHYXRlQ29kZXMgPT0gIjEiCiAgICAgICAgICAgICkgewogICAgICAgICAgICAgICAgdGhpcy5zbXNUZXh0ID0gZXhpdExhbmVzLmxlbmd0aCA9PSAxID8gZXhpdExhbmVzWzBdLnNtc19jb2RlIDogIiI7CiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIHNjcm9sbFRvU3VibWl0KCkgewogICAgICAgICAgICBjb25zdCBlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiNzdWJtaXRzbXNidG4iKTsKICAgICAgICAgICAgaWYgKGVsKSB7CiAgICAgICAgICAgICAgICBlbC5zY3JvbGxJbnRvVmlldyh0aGlzLm9wdGlvbnMpOwogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBzY3JvbGxUb1ZhbGlkYXRlQnRuKCkgewogICAgICAgICAgICBjb25zdCBlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiN2YWxpZGF0ZWJvb2tpbmdidG4iKTsKICAgICAgICAgICAgaWYgKGVsKSB7CiAgICAgICAgICAgICAgICBlbC5zY3JvbGxJbnRvVmlldyh0aGlzLm9wdGlvbnMpOwogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBjYWxjdWxhdGVHcmFjZVBlcmlvZFRpbWUoKSB7CiAgICAgICAgICAgIHZhciBjdXJyZW50VGltZSA9CiAgICAgICAgICAgICAgICBuZXcgRGF0ZSgpLmdldFRpbWUoKSArCiAgICAgICAgICAgICAgICAoTnVtYmVyKHRoaXMuYm9va2luZ0RldGFpbHMuem9uZS50aW1lem9uZW9mZnNldCkgKiAxMDAwICsKICAgICAgICAgICAgICAgICAgICBOdW1iZXIodGhpcy5ib29raW5nRGV0YWlscy56b25lLnRpbWV6b25lZHN0b2Zmc2V0KSAqIDEwMDApOwogICAgICAgICAgICB2YXIgZ3JhY2VQZXJpb2RUaW1lID0KICAgICAgICAgICAgICAgIChOdW1iZXIodGhpcy5ib29raW5nRGV0YWlscy5ib29raW5nLmVudHJ5dGltZSkgKwogICAgICAgICAgICAgICAgICAgIE51bWJlcih0aGlzLmJvb2tpbmdEZXRhaWxzLmJvb2tpbmcuZ3JhY2VQZXJpb2QpKSAqCiAgICAgICAgICAgICAgICAxMDAwOyAvLwogICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoCiAgICAgICAgICAgICAgICAiU0VUX0dSQUNFX1BFUklPRF9USU1FX1NUQVRVUyIsCiAgICAgICAgICAgICAgICB0aGlzLmdyYWNlUGVyaW9kVGltZSA8PSAwCiAgICAgICAgICAgICk7CiAgICAgICAgICAgIHJldHVybiBncmFjZVBlcmlvZFRpbWUgLSBjdXJyZW50VGltZTsKICAgICAgICB9LAogICAgICAgIGNhbGN1bGF0ZVZhbGlkYXRlZFRpbWUoKSB7CiAgICAgICAgICAgIHZhciBjdXJyZW50VGltZSA9CiAgICAgICAgICAgICAgICBuZXcgRGF0ZSgpLmdldFRpbWUoKSArCiAgICAgICAgICAgICAgICAoTnVtYmVyKHRoaXMuYm9va2luZ0RldGFpbHMuem9uZS50aW1lem9uZW9mZnNldCkgKiAxMDAwICsKICAgICAgICAgICAgICAgICAgICBOdW1iZXIodGhpcy5ib29raW5nRGV0YWlscy56b25lLnRpbWV6b25lZHN0b2Zmc2V0KSAqIDEwMDApOwogICAgICAgICAgICB2YXIgdmFsaWRhdGVkVGltZSA9IHRoaXMuYm9va2luZ0RldGFpbHMuYm9va2luZy50eXBlID09ICIxMyIgPwogICAgICAgICAgICAgICAgKE51bWJlcih0aGlzLmJvb2tpbmdEZXRhaWxzLmJvb2tpbmcucmV2U3RhcnQpICsKICAgICAgICAgICAgICAgICAgICBOdW1iZXIodGhpcy5ib29raW5nRGV0YWlscy5ib29raW5nLmNvdXBvblZhbGlkVGltZSkpICoKICAgICAgICAgICAgICAgIDEwMDAgOiAoTnVtYmVyKHRoaXMuYm9va2luZ0RldGFpbHMuYm9va2luZy5lbnRyeXRpbWUpICsKICAgICAgICAgICAgICAgICAgICBOdW1iZXIodGhpcy5ib29raW5nRGV0YWlscy5ib29raW5nLmNvdXBvblZhbGlkVGltZSkpICoKICAgICAgICAgICAgICAgIDEwMDAKICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCJTRVRfVkFMSURBVEVEX1RJTUVfU1RBVFVTIiwgdGhpcy52YWxpZGF0ZWRUaW1lIDwgMCk7CiAgICAgICAgICAgIHZhbGlkYXRlZFRpbWUgLSBjdXJyZW50VGltZSA8IDAKICAgICAgICAgICAgICAgID8gY2xlYXJJbnRlcnZhbCh0aGlzLnZhbGlkYXRlZEludGVydmFsKQogICAgICAgICAgICAgICAgOiAiIjsKICAgICAgICAgICAgcmV0dXJuIHZhbGlkYXRlZFRpbWUgLSBjdXJyZW50VGltZTsKICAgICAgICB9LAogICAgICAgIGNhbGN1bGF0ZVBhcmtpbmdUaW1lKHBhcmtpbmdTdGFydFRpbWUsIGdyYWNlUGVyaW9kLCB6b25lKSB7CiAgICAgICAgICAgIHZhciBjdXJyZW50VGltZSA9IG5ldyBEYXRlKCk7CiAgICAgICAgICAgIGN1cnJlbnRUaW1lLnRvTG9jYWxlU3RyaW5nKCJlbi1VUyIsIHsgdGltZVpvbmU6IHpvbmUgfSk7CiAgICAgICAgICAgIHZhciBkaWZmZXJlbmNlVGltZSA9CiAgICAgICAgICAgICAgICBncmFjZVBlcmlvZCA+IDAKICAgICAgICAgICAgICAgICAgICA/IGN1cnJlbnRUaW1lLmdldFRpbWUoKSAtIHBhcmtpbmdTdGFydFRpbWUgKiAxMDAwIC8vIC0gZ3JhY2VQZXJpb2QgKiAxMDAwIHRvIGV4Y2x1ZGUgZ3JhY2UgcGVyaW9kCiAgICAgICAgICAgICAgICAgICAgOiBjdXJyZW50VGltZS5nZXRUaW1lKCkgLSBwYXJraW5nU3RhcnRUaW1lICogMTAwMDsKICAgICAgICAgICAgbGV0IHBhcmtlZFRpbWUgPSBzZWNvbmRzVG9NcyhkaWZmZXJlbmNlVGltZSAvIDEwMDApOwogICAgICAgICAgICByZXR1cm4gcGFya2VkVGltZTsKICAgICAgICB9LAogICAgICAgIGlzQ2hlY2tvdXRFbmFibGVkKHR5cGUpIHsKICAgICAgICAgICAgaWYgKE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKHRoaXMuYm9va2luZ0RldGFpbHMsICdleGl0T3B0aW9ucycpICYmIHRoaXMuYm9va2luZ0RldGFpbHMuZXhpdE9wdGlvbnMubGVuZ3RoICE9IDApIHsKICAgICAgICAgICAgICAgIGxldCBvcHRpb24gPSB0aGlzLmJvb2tpbmdEZXRhaWxzLmV4aXRPcHRpb25zLnNvbWUoCiAgICAgICAgICAgICAgICAgICAgKHQpID0+IHQudGVjaFR5cGUgPT0gdHlwZQogICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgIHJldHVybiBvcHRpb247CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoKICAgICAgICB9LAogICAgICAgIGFzeW5jIGdldEJvb2tpbmdEZXRhaWxzKCkgewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgbGV0IGJvb2tpbmdJZCA9IHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZS5zdWJzdHJpbmcoMyk7CiAgICAgICAgICAgICAgICB2YXIgYm9va2luZ0RldGFpbHMgPSBhd2FpdCBBUElIZWxwZXIoCiAgICAgICAgICAgICAgICAgICAgIkdFVCIsCiAgICAgICAgICAgICAgICAgICAgIi9hcGkvdjEvYm9va2luZy9jb25maWcvIiArIGJvb2tpbmdJZAogICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgKICAgICAgICAgICAgICAgICAgICAiU0VUX0JPT0tJTkdfREVUQUlMUyIsCiAgICAgICAgICAgICAgICAgICAgYm9va2luZ0RldGFpbHMuZGF0YT8uZGF0YSA/IGJvb2tpbmdEZXRhaWxzLmRhdGEuZGF0YSA6IG51bGwKICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7CiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIGFzeW5jIGdldHBlZGVzdHJpYW5BY2Nlc3MoKSB7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAvLyBsZXQgYm9va2luZ0lkID0gd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lLnN1YnN0cmluZygzKTsKICAgICAgICAgICAgICAgIHZhciBwZWRlc0FjY2VzcyA9IGF3YWl0IEFQSUhlbHBlcigKICAgICAgICAgICAgICAgICAgICAiUE9TVCIsCiAgICAgICAgICAgICAgICAgICAgImFwaS92MS9vcGVuLyIgKyB0aGlzLmJvb2tpbmdJZCwKICAgICAgICAgICAgICAgICAgICB7IHNvdXJjZTogIndlYlZpZXciIH0KICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhwZWRlc0FjY2VzcykKICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHBlZGVzQWNjZXNzPy5kYXRhPy5zdGF0dXMpCiAgICAgICAgICAgICAgICBpZiAocGVkZXNBY2Nlc3M/LmRhdGE/LnN0YXR1cykgewogICAgICAgICAgICAgICAgICAgIHRoaXMucG9zdFRvTG9nZ2VyQVBJKHsKICAgICAgICAgICAgICAgICAgICAgICAgcGhvbmU6IHRoaXMuYm9va2luZ0RldGFpbHMudXNlci5jb250YWN0LAogICAgICAgICAgICAgICAgICAgICAgICByZWZJZDogdGhpcy5ib29raW5nSWQsCiAgICAgICAgICAgICAgICAgICAgICAgIGltYWdlOiAiaHR0cHM6Ly9zcHBsLWRldi5kaXZydC5jby9pbWcvcGVkZXN0cmFpbl9kb29yLjA0MmYwOTI3LnBuZyIsCiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1c1RleHQ6ICJQYXJrZXIgYWNjZXNzZWQgcGVkZXN0cmlhbiBkb29yIHN1Y2Nlc3NmdWxseS4iLAogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIHRoaXMuJHJvdXRlci5yZXBsYWNlKHsgcGF0aDogIi9wZWRlc3RyaWFuYWNjZXNzIiB9KTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5wZWRlc3RyaWFuQWNjZXNzVGV4dCA9IHBlZGVzQWNjZXNzLmRhdGEubWVzc2FnZTsKICAgICAgICAgICAgICAgICAgICB0aGlzLnBvc3RUb0xvZ2dlckFQSSh7CiAgICAgICAgICAgICAgICAgICAgICAgIHBob25lOiB0aGlzLmJvb2tpbmdEZXRhaWxzLnVzZXIuY29udGFjdCwKICAgICAgICAgICAgICAgICAgICAgICAgcmVmSWQ6IHRoaXMuYm9va2luZ0lkLAogICAgICAgICAgICAgICAgICAgICAgICBlcnJvcjogdGhpcy5wZWRlc3RyaWFuQWNjZXNzVGV4dCwKICAgICAgICAgICAgICAgICAgICAgICAgaW1hZ2U6ICJodHRwczovL3NwcGwtZGV2LmRpdnJ0LmNvL2ltZy9wZWRlc3RyYWluX2Rvb3IuMDQyZjA5MjcucG5nIiwKICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzVGV4dDogIkVycm9yIGluIG9wZW5pbmcgdGhlIHBlZGVzdHJpYW4gZG9vci4iLAogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIHRoaXMucGVkZXN0cmlhbkFjY2Vzc0RpYWxvZyA9IHRydWU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgLy8gdGhpcy4kcm91dGVyLnJlcGxhY2UoeyBwYXRoOiAiL3BlZGVzdHJpYW5hY2Nlc3MvIit0cnVlIH0pOwogICAgICAgIH0sCiAgICAgICAgbmF2aWdhdGVUb0FkZFBheW1lbnQoKSB7CiAgICAgICAgICAgIHRoaXMucG9zdFRvTG9nZ2VyQVBJKHsKICAgICAgICAgICAgICAgIHBob25lOiB0aGlzLmJvb2tpbmdEZXRhaWxzLnVzZXIuY29udGFjdCwKICAgICAgICAgICAgICAgIHJlZklkOiB0aGlzLmJvb2tpbmdJZCwKICAgICAgICAgICAgICAgIHN0YXR1c1RleHQ6ICJQYXJrZXIgY2xpY2tlZCBvbiBBREQgQ1JFRElUIENBUkQgYnRuLiIsCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICB0aGlzLiRyb3V0ZXIucmVwbGFjZSh7IHBhdGg6ICIvYWRkcGF5bWVudCIgfSk7CiAgICAgICAgfSwKICAgICAgICBvcGVuVmFsaWRhdGlvbkRpYWxvZygpIHsKICAgICAgICAgICAgdGhpcy52YWxpZGF0ZUJvb2tpbmdEaWFsb2cgPSB0cnVlOwogICAgICAgIH0sCiAgICAgICAgYXN5bmMgb3BlblNNU0FwcCgpIHsKICAgICAgICAgICAgdGhpcy5wb3N0VG9Mb2dnZXJBUEkoewogICAgICAgICAgICAgICAgcGhvbmU6IHRoaXMuYm9va2luZ0RldGFpbHMudXNlci5jb250YWN0LAogICAgICAgICAgICAgICAgcmVmSWQ6IHRoaXMuYm9va2luZ0lkLAogICAgICAgICAgICAgICAgc3RhdHVzVGV4dDogIlBhcmtlciBjbGlja2VkIG9uIFNNUyBzdWJtaXQgYnRuLiIsCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBpZiAodGhpcy5zbXNUZXh0ID09IG51bGwgfHwgdGhpcy5zbXNUZXh0ID09ICIiKSB7CiAgICAgICAgICAgICAgICB0aGlzLmludmFsaWRTTVNNc2cgPSAiR2F0ZSBjb2RlIGNhbm5vdCBiZSBlbXB0eSI7CiAgICAgICAgICAgICAgICB0aGlzLmludmFsaWRTTVNEaWFsb2cgPSB0cnVlOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICB0aGlzLnNtc1BlbmRpbmcgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIHZhciBwcmVWYWxpZGF0ZVNlbmRTTVMgPSBhd2FpdCBBUElIZWxwZXIoIlBPU1QiLCAiL3JlY2VpdmVfc21zIiwgewogICAgICAgICAgICAgICAgICAgICAgICBiaWQ6IHRoaXMuYm9va2luZ0lkLAogICAgICAgICAgICAgICAgICAgICAgICBGcm9tOiB0aGlzLmJvb2tpbmdEZXRhaWxzLnVzZXIuY29udGFjdCwKICAgICAgICAgICAgICAgICAgICAgICAgVGV4dDogdGhpcy5zbXNUZXh0LAogICAgICAgICAgICAgICAgICAgICAgICBUbzogdGhpcy5ib29raW5nRGV0YWlscy56b25lLlRvTW9iaWxlTm8sCiAgICAgICAgICAgICAgICAgICAgICAgIE1vZGU6ICJTTVMiLAogICAgICAgICAgICAgICAgICAgICAgICB3ZWJWaWV3OiAiMSIsCiAgICAgICAgICAgICAgICAgICAgICAgIHByZVZhbGlkYXRlOiAxLAogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIHRoaXMuc21zUGVuZGluZyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIGlmICgKICAgICAgICAgICAgICAgICAgICAgICAgcHJlVmFsaWRhdGVTZW5kU01TPy5kYXRhPy5zdGF0dXMgJiYKICAgICAgICAgICAgICAgICAgICAgICAgcHJlVmFsaWRhdGVTZW5kU01TLmRhdGEuc3RhdHVzCiAgICAgICAgICAgICAgICAgICAgKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc21zRGlhbG9nID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHJvdXRlci5yZXBsYWNlKHsgcGF0aDogIi9zdWNjZXNzIiB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzZW5kU01TID0gYXdhaXQgQVBJSGVscGVyKCJQT1NUIiwgIi9yZWNlaXZlX3NtcyIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiaWQ6IHRoaXMuYm9va2luZ0lkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEZyb206IHRoaXMuYm9va2luZ0RldGFpbHMudXNlci5jb250YWN0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRleHQ6IHRoaXMuc21zVGV4dCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUbzogdGhpcy5ib29raW5nRGV0YWlscy56b25lLlRvTW9iaWxlTm8sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTW9kZTogIlNNUyIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2ViVmlldzogIjEiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2VuZFNNUz8uZGF0YT8uc3RhdHVzICYmIHNlbmRTTVMuZGF0YS5zdGF0dXMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNtc0RpYWxvZyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucG9zdFRvTG9nZ2VyQVBJKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGhvbmU6IHRoaXMuYm9va2luZ0RldGFpbHMudXNlci5jb250YWN0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWZJZDogdGhpcy5ib29raW5nSWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb246ICJsb2dvdXQiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXNUZXh0OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIlBhcmtlciBjaGVja2VkIG91dCBzdWNjZXNzZnVsbHkgdXNpbmcgU01TIC0gIiArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNtc1RleHQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW52YWxpZFNNU01zZyA9IHNlbmRTTVM/LmRhdGE/Lm1lc3NhZ2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBzZW5kU01TLmRhdGEubWVzc2FnZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6ICJQbGVhc2UgdHJ5IGFnYWluIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmludmFsaWRTTVNEaWFsb2cgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucG9zdFRvTG9nZ2VyQVBJKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGhvbmU6IHRoaXMuYm9va2luZ0RldGFpbHMudXNlci5jb250YWN0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWZJZDogdGhpcy5ib29raW5nSWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yOiB0aGlzLmludmFsaWRTTVNNc2csCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb246ICJsb2dvdXQiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXNUZXh0OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIkVycm9yIG9jY3VyZWQgd2hpbGUgY2hlY2tpbmcgb3V0IHVzaW5nIFNNUyAtICIgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zbXNUZXh0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbnZhbGlkU01TTXNnID0gcHJlVmFsaWRhdGVTZW5kU01TPy5kYXRhPy5tZXNzYWdlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHByZVZhbGlkYXRlU2VuZFNNUy5kYXRhLm1lc3NhZ2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogIlBsZWFzZSB0cnkgYWdhaW4iOwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmludmFsaWRTTVNEaWFsb2cgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBvc3RUb0xvZ2dlckFQSSh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwaG9uZTogdGhpcy5ib29raW5nRGV0YWlscy51c2VyLmNvbnRhY3QsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWZJZDogdGhpcy5ib29raW5nSWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvcjogdGhpcy5pbnZhbGlkU01TTXNnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvbjogImxvZ291dCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXNUZXh0OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJFcnJvciBvY2N1cmVkIHdoaWxlIGNoZWNraW5nIG91dCB1c2luZyBTTVMgLSAiICsgdGhpcy5zbXNUZXh0LAogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgZ2V0TW9iaWxlT3BlcmF0aW5nU3lzdGVtKCkgewogICAgICAgICAgICB2YXIgdXNlckFnZW50ID0gbmF2aWdhdG9yLnVzZXJBZ2VudCB8fCBuYXZpZ2F0b3IudmVuZG9yIHx8IHdpbmRvdy5vcGVyYTsKICAgICAgICAgICAgLy8gV2luZG93cyBQaG9uZSBtdXN0IGNvbWUgZmlyc3QgYmVjYXVzZSBpdHMgVUEgYWxzbyBjb250YWlucyAiQW5kcm9pZCIKICAgICAgICAgICAgaWYgKC93aW5kb3dzIHBob25lL2kudGVzdCh1c2VyQWdlbnQpKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gIldpbmRvd3MgUGhvbmUiOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoL2FuZHJvaWQvaS50ZXN0KHVzZXJBZ2VudCkpIHsKICAgICAgICAgICAgICAgIHJldHVybiAiQW5kcm9pZCI7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vIGlPUyBkZXRlY3Rpb24gZnJvbTogaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL2EvOTAzOTg4NS8xNzc3MTAKICAgICAgICAgICAgaWYgKC9pUGFkfGlQaG9uZXxpUG9kLy50ZXN0KHVzZXJBZ2VudCkgJiYgIXdpbmRvdy5NU1N0cmVhbSkgewogICAgICAgICAgICAgICAgcmV0dXJuICJpT1MiOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiAidW5rbm93biI7CiAgICAgICAgfSwKICAgICAgICBnZXRFeGl0SWNvbihleGl0SWQpIHsKICAgICAgICAgICAgbGV0IGV4aXREZXRhaWxzID0gdGhpcy5ib29raW5nRGV0YWlscy5leGl0T3B0aW9ucy5maW5kKAogICAgICAgICAgICAgICAgKHApID0+IHAudGVjaFR5cGUgPT0gZXhpdElkCiAgICAgICAgICAgICk7CiAgICAgICAgICAgIHJldHVybiBleGl0RGV0YWlscy5pY29uOwogICAgICAgIH0sCiAgICAgICAgZ2V0RXhpdFRleHQoZXhpdElkKSB7CiAgICAgICAgICAgIGxldCBleGl0RGV0YWlscyA9IHRoaXMuYm9va2luZ0RldGFpbHMuZXhpdE9wdGlvbnMuZmluZCgKICAgICAgICAgICAgICAgIChwKSA9PiBwLnRlY2hUeXBlID09IGV4aXRJZAogICAgICAgICAgICApOwogICAgICAgICAgICByZXR1cm4gZXhpdERldGFpbHMubmFtZTsKICAgICAgICB9LAogICAgICAgIG9wZW5EaWFsZXJBcHAoKSB7CiAgICAgICAgICAgIHRoaXMucG9zdFRvTG9nZ2VyQVBJKHsKICAgICAgICAgICAgICAgIHBob25lOiB0aGlzLmJvb2tpbmdEZXRhaWxzLnVzZXIuY29udGFjdCwKICAgICAgICAgICAgICAgIHJlZklkOiB0aGlzLmJvb2tpbmdJZCwKICAgICAgICAgICAgICAgIHN0YXR1c1RleHQ6ICJQYXJrZXIgY2xpY2tlZCBvbiBkaWFsZXIgc3VibWl0IGJ0bi4iLAogICAgICAgICAgICB9KTsKICAgICAgICAgICAgdGhpcy5kaWFsZXJEaWFsb2cgPSBmYWxzZTsKICAgICAgICAgICAgdmFyIHVybCA9ICJ0ZWw6IiArIHRoaXMuYm9va2luZ0RldGFpbHMuem9uZS5Ub01vYmlsZU5vOwogICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IHVybDsKICAgICAgICAgICAgaWYgKHRoaXMuZ2V0TW9iaWxlT3BlcmF0aW5nU3lzdGVtKCkgPT0gIkFuZHJvaWQiKSB7CiAgICAgICAgICAgICAgICB3aW5kb3cuY2xvc2UoKTsKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgdHVybkNhbWVyYU9uKCkgewogICAgICAgICAgICB0aGlzLmNhbWVyYSA9ICJhdXRvIjsKICAgICAgICB9LAoKICAgICAgICB0dXJuQ2FtZXJhT2ZmKCkgewogICAgICAgICAgICB0aGlzLmNhbWVyYSA9ICJvZmYiOwogICAgICAgIH0sCiAgICAgICAgdmFsaWRhdGVEZWNvZGVkU3RyaW5nKHN0cikgewogICAgICAgICAgICBsZXQgdmFsaWRhdGVEaXZydFN0ciA9IHN0ci5zdGFydHNXaXRoKCJkaXZydDovLyIpOwogICAgICAgICAgICBsZXQgdmFsaWRhdGVNTUlEID0gc3RyLnNwbGl0KCIvIilbMl0gPT0gdGhpcy5ib29raW5nRGV0YWlscy5ib29raW5nLm1taWQ7CiAgICAgICAgICAgIGxldCB2YWxpZGF0ZU1ham9ySWQgPQogICAgICAgICAgICAgICAgc3RyLnNwbGl0KCIvIilbM10gPT0gdGhpcy5ib29raW5nRGV0YWlscy5ib29raW5nLm1ham9yaWQ7CiAgICAgICAgICAgIGxldCB2YWxpZGF0ZU1pbm9ySWQgPSB0aGlzLmJvb2tpbmdEZXRhaWxzLmJvb2tpbmcubWlub3JfaWRzLmluY2x1ZGVzKAogICAgICAgICAgICAgICAgc3RyLnNwbGl0KCIvIilbNF0KICAgICAgICAgICAgKTsKICAgICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgICAgIHZhbGlkYXRlRGl2cnRTdHIgJiYgdmFsaWRhdGVNTUlEICYmIHZhbGlkYXRlTWFqb3JJZCAmJiB2YWxpZGF0ZU1pbm9ySWQKICAgICAgICAgICAgKTsKICAgICAgICB9LAogICAgICAgIGFzeW5jIG9uRGVjb2RlKGRlY29kZWRTdHJpbmcpIHsKICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwogICAgICAgICAgICB0aGlzLnFyQ29kZSA9IGRlY29kZWRTdHJpbmc7CiAgICAgICAgICAgIHRoaXMuY2FtZXJhU3RhdHVzID0gZmFsc2U7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICB2YXIgcHJlVmFsaWRhdGVRclJlc3VsdCA9IGF3YWl0IEFQSUhlbHBlcigKICAgICAgICAgICAgICAgICAgICAiUE9TVCIsCiAgICAgICAgICAgICAgICAgICAgIi9hcGkvdjEvY2hlY2tvdXQvIiArIHRoaXMuYm9va2luZ0lkLAogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgYmVhY29uSWQ6IGRlY29kZWRTdHJpbmcsCiAgICAgICAgICAgICAgICAgICAgICAgIHByZVZhbGlkYXRlOiAxLAogICAgICAgICAgICAgICAgICAgICAgICB6aWQ6IHRoaXMuYm9va2luZ0RldGFpbHMuem9uZS5sb2NhdGlvbkNvZGUKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgaWYgKHByZVZhbGlkYXRlUXJSZXN1bHQuZGF0YS5zdGF0dXMpIHsKICAgICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLiRyb3V0ZXIucmVwbGFjZSh7IHBhdGg6ICIvc3VjY2VzcyIgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBxclJlc3VsdCA9IGF3YWl0IEFQSUhlbHBlcigKICAgICAgICAgICAgICAgICAgICAgICAgICAgICJQT1NUIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICIvYXBpL3YxL2NoZWNrb3V0LyIgKyB0aGlzLmJvb2tpbmdJZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiZWFjb25JZDogZGVjb2RlZFN0cmluZywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB6aWQ6IHRoaXMuYm9va2luZ0RldGFpbHMuem9uZS5sb2NhdGlvbkNvZGUKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHFyUmVzdWx0LmRhdGEuc3RhdHVzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBvc3RUb0xvZ2dlckFQSSh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGhvbmU6IHNlbGYuYm9va2luZ0RldGFpbHMudXNlci5jb250YWN0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZklkOiBzZWxmLmJvb2tpbmdJZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpY29uOiAibG9nb3V0IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXNUZXh0OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiUGFya2VyIHN1Y2Nlc3NmdWxseSBjaGVja2VkIG91dCB1c2luZyBRUiAtICIgKyBkZWNvZGVkU3RyaW5nLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoIlNFVF9DSEVDS09VVCIsIHRydWUpOwogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbnZhbGlkUVJNc2cgPSBxclJlc3VsdD8uZGF0YT8ubWVzc2FnZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gcXJSZXN1bHQuZGF0YS5tZXNzYWdlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiAiUGxlYXNlIHRyeSBhZ2FpbiI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmludmFsaWRRUkRpYWxvZyA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBvc3RUb0xvZ2dlckFQSSh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGhvbmU6IHNlbGYuYm9va2luZ0RldGFpbHMudXNlci5jb250YWN0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZklkOiBzZWxmLmJvb2tpbmdJZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvcjogc2VsZi5pbnZhbGlkUVJNc2csCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvbjogImxvZ291dCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzVGV4dDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIkVycm9yIE9jY3VyZWQgd2hpbGUgY2hlY2tpbmcgb3V0IHVzaW5nIFFSIC0gIiArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlY29kZWRTdHJpbmcsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHRoaXMuaW52YWxpZFFSTXNnID0gcHJlVmFsaWRhdGVRclJlc3VsdD8uZGF0YT8ubWVzc2FnZQogICAgICAgICAgICAgICAgICAgICAgICA/IHByZVZhbGlkYXRlUXJSZXN1bHQuZGF0YS5tZXNzYWdlCiAgICAgICAgICAgICAgICAgICAgICAgIDogIlBsZWFzZSB0cnkgYWdhaW4iOwogICAgICAgICAgICAgICAgICAgIHRoaXMuaW52YWxpZFFSRGlhbG9nID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICB0aGlzLnBvc3RUb0xvZ2dlckFQSSh7CiAgICAgICAgICAgICAgICAgICAgICAgIHBob25lOiBzZWxmLmJvb2tpbmdEZXRhaWxzLnVzZXIuY29udGFjdCwKICAgICAgICAgICAgICAgICAgICAgICAgcmVmSWQ6IHNlbGYuYm9va2luZ0lkLAogICAgICAgICAgICAgICAgICAgICAgICBpY29uOiAibG9nb3V0IiwKICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3I6IHNlbGYuaW52YWxpZFFSTXNnLAogICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXNUZXh0OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgIkVycm9yIE9jY3VyZWQgd2hpbGUgY2hlY2tpbmcgb3V0IHVzaW5nIFFSIC0gIiArIGRlY29kZWRTdHJpbmcsCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7CiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIGFzeW5jIG9uSW5pdChwcm9taXNlKSB7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBhd2FpdCBwcm9taXNlOwogICAgICAgICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgICAgICAgICAgaWYgKGVycm9yLm5hbWUgPT09ICJOb3RBbGxvd2VkRXJyb3IiKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbnZhbGlkUVJNc2cgPSAiUGxlYXNlIGdyYW50IGNhbWVyYSBhY2Nlc3MgcGVybWlzc29uIjsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZXJyb3IubmFtZSA9PT0gIk5vdEZvdW5kRXJyb3IiKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbnZhbGlkUVJNc2cgPSAiTm8gY2FtZXJhIGZvdW5kIG9uIHRoaXMgZGV2aWNlIjsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZXJyb3IubmFtZSA9PT0gIk5vdFN1cHBvcnRlZEVycm9yIikgewogICAgICAgICAgICAgICAgICAgIHRoaXMuaW52YWxpZFFSTXNnID0gIlNlY3VyZSBjb250ZXh0IHJlcXVpcmVkIChIVFRQUywgbG9jYWxob3N0KSI7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGVycm9yLm5hbWUgPT09ICJOb3RSZWFkYWJsZUVycm9yIikgewogICAgICAgICAgICAgICAgICAgIHRoaXMuaW52YWxpZFFSTXNnID0gIklzIHRoZSBjYW1lcmEgYWxyZWFkeSBpbiB1c2U/IFBsZWFzZSBjaGVjay4iOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChlcnJvci5uYW1lID09PSAiT3ZlcmNvbnN0cmFpbmVkRXJyb3IiKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbnZhbGlkUVJNc2cgPSAiSW5zdGFsbGVkIGNhbWVyYSBpcyBub3Qgc3VpdGFibGUiOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChlcnJvci5uYW1lID09PSAiU3RyZWFtQXBpTm90U3VwcG9ydGVkRXJyb3IiKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbnZhbGlkUVJNc2cgPSAiU3RyZWFtIEFQSSBpcyBub3Qgc3VwcG9ydGVkIGluIHRoaXMgYnJvd3NlciI7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB0aGlzLmludmFsaWRRUkRpYWxvZyA9IHRydWU7CiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIGFzeW5jIG9uVmFsaWRhdGVUZXh0KCkgewogICAgICAgICAgICB0aGlzLnZhbGlkYXRlQm9va2luZ1BlbmRpbmcgPSB0cnVlOwogICAgICAgICAgICBsZXQgcmVzdWx0ID0gYXdhaXQgdGhpcy52YWxpZGF0ZUJvb2tpbmcodGhpcy52YWxpZGF0ZUJvb2tpbmdUeHQpOwogICAgICAgICAgICBpZiAoIXJlc3VsdC5kYXRhLnN0YXR1cykgewogICAgICAgICAgICAgICAgdGhpcy5pbnZhbGlkU01TTXNnID0gcmVzdWx0Py5kYXRhPy5tZXNzYWdlCiAgICAgICAgICAgICAgICAgICAgPyByZXN1bHQuZGF0YS5tZXNzYWdlCiAgICAgICAgICAgICAgICAgICAgOiAiVmFsaWRhdGlvbiBub3QgcmVjb2duaXplZC4gUGxlYXNlIHRyeSBhZ2FpbiI7CiAgICAgICAgICAgICAgICB0aGlzLmludmFsaWRTTVNEaWFsb2cgPSB0cnVlOwogICAgICAgICAgICAgICAgdGhpcy52YWxpZGF0ZUJvb2tpbmdQZW5kaW5nID0gZmFsc2U7CiAgICAgICAgICAgICAgICB0aGlzLnBvc3RUb0xvZ2dlckFQSSh7CiAgICAgICAgICAgICAgICAgICAgcGhvbmU6IHRoaXMuYm9va2luZ0RldGFpbHMudXNlci5jb250YWN0LAogICAgICAgICAgICAgICAgICAgIHJlZklkOiB0aGlzLmJvb2tpbmdJZCwKICAgICAgICAgICAgICAgICAgICBlcnJvcjogdGhpcy5pbnZhbGlkU01TTXNnLAogICAgICAgICAgICAgICAgICAgIGljb246ICJyZWRlZW0iLAogICAgICAgICAgICAgICAgICAgIHN0YXR1c1RleHQ6CiAgICAgICAgICAgICAgICAgICAgICAgICJFcnJvciBpbiB2YWxpZGF0aW5nIHRoZSBzZXNzaW9uIG9uIGVudGVyaW5nIHZhbGlkYXRpb24gY29kZSAtICIgKwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnZhbGlkYXRlQm9va2luZ1R4dCwKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgdGhpcy5wb3N0VG9Mb2dnZXJBUEkoewogICAgICAgICAgICAgICAgICAgIHBob25lOiB0aGlzLmJvb2tpbmdEZXRhaWxzLnVzZXIuY29udGFjdCwKICAgICAgICAgICAgICAgICAgICByZWZJZDogdGhpcy5ib29raW5nSWQsCiAgICAgICAgICAgICAgICAgICAgaWNvbjogInJlZGVlbSIsCiAgICAgICAgICAgICAgICAgICAgc3RhdHVzVGV4dDoKICAgICAgICAgICAgICAgICAgICAgICAgIlBhcmtlciB2YWxpZGF0ZWQgdGhlIHNlc3Npb24gc3VjY2Vzc2Z1bGx5IGJ5IGVudGVyaW5nIHZhbGlkYXRpb24gY29kZSAtICIgKwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnZhbGlkYXRlQm9va2luZ1R4dCwKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgdGhpcy5nb2xkZW5OdWdnZXQgPSBmYWxzZTsKICAgICAgICAgICAgICAgIHRoaXMudmFsaWRhdGVCb29raW5nUGVuZGluZyA9IGZhbHNlOwogICAgICAgICAgICAgICAgdGhpcy52YWxpZGF0ZUJvb2tpbmdEaWFsb2cgPSBmYWxzZTsKICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgKICAgICAgICAgICAgICAgICAgICAiU0VUX1ZBTElEQVRFRF9NRVJDSEFOVCIsCiAgICAgICAgICAgICAgICAgICAgcmVzdWx0Py5kYXRhPy5tZXJjaGFudE5hbWUKICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICB0aGlzLiRyb3V0ZXIucmVwbGFjZSh7IHBhdGg6ICIvdmFsaWRhdGVzdWNjZXNzIiB9KTsKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgYXN5bmMgdmFsaWRhdGVCb29raW5nKGNvZGUpIHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIGxldCB2YWxpZGF0ZVJlc3VsdCA9IGF3YWl0IEFQSUhlbHBlcigKICAgICAgICAgICAgICAgICAgICAiUE9TVCIsCiAgICAgICAgICAgICAgICAgICAgIi9hcGkvdjEvdmFsaWRhdGUvIiArIHRoaXMuYm9va2luZ0lkLAogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgY291cG9uOiBjb2RlLAogICAgICAgICAgICAgICAgICAgICAgICB6aWQ6IHRoaXMuYm9va2luZ0RldGFpbHMuem9uZS5sb2NhdGlvbkNvZGUKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgcmV0dXJuIHZhbGlkYXRlUmVzdWx0OwogICAgICAgICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpOwogICAgICAgICAgICAgICAgcmV0dXJuIGVycm9yOwogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBhc3luYyBvcGVuU2NhblZhbGlkYXRpb25Db2RlKCkgewogICAgICAgICAgICB0aGlzLnZhbGlkYXRlQm9va2luZ0RpYWxvZyA9IGZhbHNlOwogICAgICAgICAgICB0aGlzLnZhbGlkYXRlQm9va2luZ1R4dCA9ICIiOwogICAgICAgICAgICB0aGlzLnZhbGlkYXRlUVJDb2RlRGlhbG9nID0gdHJ1ZTsKICAgICAgICAgICAgdGhpcy52YWxpZGF0aW9uQ2FtZXJhU3RhdHVzID0gdHJ1ZTsKICAgICAgICB9LAogICAgICAgIGFzeW5jIG9uVmFsaWRhdGVRUkNvZGUoZGVjb2RlZFN0cmluZykgewogICAgICAgICAgICB0aGlzLnZhbGlkYXRpb25DYW1lcmFTdGF0dXMgPSBmYWxzZTsKICAgICAgICAgICAgdGhpcy52YWxpZGF0ZVFSQ29kZVBlbmRpbmcgPSB0cnVlOwogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgbGV0IHJlc3VsdCA9IGF3YWl0IHRoaXMudmFsaWRhdGVCb29raW5nKGRlY29kZWRTdHJpbmcpOwogICAgICAgICAgICAgICAgaWYgKCFyZXN1bHQuZGF0YS5zdGF0dXMpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLmludmFsaWRWYWxpZGF0aW9uUVJNc2cgPSByZXN1bHQ/LmRhdGE/Lm1lc3NhZ2UKICAgICAgICAgICAgICAgICAgICAgICAgPyByZXN1bHQuZGF0YS5tZXNzYWdlCiAgICAgICAgICAgICAgICAgICAgICAgIDogIlZhbGlkYXRpb24gbm90IHJlY29nbml6ZWQuIFBsZWFzZSB0cnkgYWdhaW4iOwogICAgICAgICAgICAgICAgICAgIHRoaXMuaW52YWxpZFZhbGlkYXRpb25RUkRpYWxvZyA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgdGhpcy52YWxpZGF0ZVFSQ29kZVBlbmRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICB0aGlzLnBvc3RUb0xvZ2dlckFQSSh7CiAgICAgICAgICAgICAgICAgICAgICAgIHBob25lOiB0aGlzLmJvb2tpbmdEZXRhaWxzLnVzZXIuY29udGFjdCwKICAgICAgICAgICAgICAgICAgICAgICAgcmVmSWQ6IHRoaXMuYm9va2luZ0lkLAogICAgICAgICAgICAgICAgICAgICAgICBlcnJvcjogdGhpcy5pbnZhbGlkUVJNc2csCiAgICAgICAgICAgICAgICAgICAgICAgIGljb246ICJyZWRlZW0iLAogICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXNUZXh0OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgIkVycm9yIGluIHZhbGlkYXRpbmcgdGhlIHNlc3Npb24gb24gc2Nhbm5pbmcgdmFsaWRhdGlvbiBRUiAtICIgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVjb2RlZFN0cmluZywKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5wb3N0VG9Mb2dnZXJBUEkoewogICAgICAgICAgICAgICAgICAgICAgICBwaG9uZTogdGhpcy5ib29raW5nRGV0YWlscy51c2VyLmNvbnRhY3QsCiAgICAgICAgICAgICAgICAgICAgICAgIHJlZklkOiB0aGlzLmJvb2tpbmdJZCwKICAgICAgICAgICAgICAgICAgICAgICAgaWNvbjogInJlZGVlbSIsCiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1c1RleHQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAiUGFya2VyIHZhbGlkYXRlZCB0aGUgc2Vzc2lvbiBzdWNjZXNzZnVsbHkgYnkgc2Nhbm5pbmcgdmFsaWRhdGlvbiBRUiAtICIgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVjb2RlZFN0cmluZywKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB0aGlzLnZhbGlkYXRlUVJDb2RlUGVuZGluZyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIHRoaXMudmFsaWRhdGVRUkNvZGVEaWFsb2cgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoCiAgICAgICAgICAgICAgICAgICAgICAgICJTRVRfVkFMSURBVEVEX01FUkNIQU5UIiwKICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0Py5kYXRhPy5tZXJjaGFudE5hbWUKICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICAgIHRoaXMuJHJvdXRlci5yZXBsYWNlKHsgcGF0aDogIi92YWxpZGF0ZXN1Y2Nlc3MiIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpOwogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgIH0sCn0K"},{"version":3,"sources":["CheckedIn.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4QA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"CheckedIn.vue","sourceRoot":"src/views/session","sourcesContent":["<template>\n    <v-container fluid pa-0> <v-dialog v-model=\"loading\" persistent>\n            <v-card class=\"pa-4\">\n                <v-progress-circular indeterminate color=\"red\"></v-progress-circular>\n                <span class=\"ml-4\" style=\"font-size: 14px\">Please wait...</span>\n            </v-card>\n        </v-dialog>\n        <boiler-plate>\n            <div class=\"timing-values\">\n                <v-container pa-0>\n                    <v-row no-gutters class=\"parking-time\">\n                        <v-col cols=\"12\" class=\" pb-0\">\n                            <v-container pl-10>\n                                <v-row class=\"mx-0 pb-0\" no-gutters v-if=\"bookingDetails.hasOwnProperty('booking') &&\n                                    bookingDetails.booking.hasOwnProperty('TypeOfBooking') &&\n                                    bookingDetails.booking.TypeOfBooking != 'Self reservation'\">\n                                    <v-col cols=\"10\" class=\"pl-1\">\n                                        <v-row no-gutters>\n                                            <v-col cols=\"12\" class=\"pa-0\">\n                                                <v-skeleton-loader v-show=\"!bookingDetails.hasOwnProperty('booking') ||\n                                                    timeAgo == '' ||\n                                                    timeAgo == null\n                                                    \" height=\"40px\" max-width=\"200\" type=\"heading\"></v-skeleton-loader>\n                                                <p v-show=\"!(validatedDateTime > 0)\">\n                                                    <span style=\"font-size: 50px;font-weight: 700;\">{{\n                                                        timeAgo.split('min')[0] }}</span><span style=\"font-size: 36px;\">{{\n        timeAgo.split('min')[0] == '1' ||\n        timeAgo.split('min')[0] == '0' ? 'Minute' : 'Minutes'\n    }}</span>\n                                                    <!-- <span style=\"font-size:96px;font-weight: 700;\">{{ hours }} <span\n                                                            style=\"font-size: 36px;font-weight: 400; \"\n                                                            v-if=\"hours !== ''\">{{ hours == 1 ? 'Hour' :\n                                                                'Hours' }}</span></span>\n                                                    <span style=\"font-size:96px;font-weight: 700;\"> {{ mins }} <span\n                                                            style=\"font-size: 36px;font-weight: 400; \"\n                                                            v-if=\"mins !== ''\">{{ mins == '1' ? 'Minute' : 'Minutes'\n                                                            }}</span></span> -->\n                                                </p>\n                                                <!-- <span\n                          class=\"grey--text text--darken-1 time_ago\"\n                          v-show=\"gracePeriodTime > 0\"\n                          >{{ countDownGracePeriodTime }}</span\n                        >-->\n                                                <span v-show=\"bookingDetails.hasOwnProperty('booking') &&\n                                                    bookingDetails.booking.hasOwnProperty('validated') &&\n                                                    bookingDetails.booking.validated == '1' &&\n                                                    validatedDateTime > 0\n                                                    \">{{ countDownValidatedTime }}</span>\n                                            </v-col>\n                                            <v-col cols=\"12\" style=\"margin-top: -60px;\" v-if=\"bookingDetails.hasOwnProperty('booking') &&\n                                                validatedDateTime <= 0\n                                                \">\n                                                <span style=\"font-size:36px;\">Parked</span>\n                                            </v-col>\n                                            <!-- <v-col cols=\"12\" v-else-if=\"bookingDetails.hasOwnProperty('booking') && gracePeriodTime > 0\">\n                        <span class=\"grey--text text--darken-1 time_ago_context\"\n                          >Grace period remaining</span\n                        >\n                      </v-col>-->\n                                            <v-col cols=\"12\" v-else-if=\"bookingDetails.hasOwnProperty('booking') &&\n                                                bookingDetails.booking.hasOwnProperty('validated') &&\n                                                bookingDetails.booking.validated == '1' &&\n                                                validatedDateTime > 0\n                                                \">\n                                                <span>Validation time\n                                                    remaining</span>\n                                            </v-col>\n                                            <v-col cols=\"12\" v-show=\"bookingDetails.hasOwnProperty('booking') &&\n                                                bookingDetails.booking.hasOwnProperty('validated') &&\n                                                bookingDetails.booking.validated == '1' &&\n                                                bookingDetails.booking.hasOwnProperty(\n                                                    'validationType'\n                                                ) &&\n                                                bookingDetails.booking.validationType == 'DIVRT'\n                                                \">\n                                                <span>Validated until {{\n                                                    validated_content\n                                                }}</span>\n                                            </v-col>\n                                        </v-row>\n                                    </v-col>\n                                    <!-- <v-col cols class=\"align-self-center text-center\" v-show=\"bookingDetails.hasOwnProperty('booking') &&\n                                            bookingDetails.booking.hasOwnProperty('TypeOfBooking') &&\n                                            bookingDetails.booking.TypeOfBooking == 'Monthly'\n                                            \">\n                                        <v-btn class=\"elevation-0 white--text\" tile x-small\n                                            color=\"green darken-2\">Monthly</v-btn>\n                                    </v-col>\n                                    <v-col cols class=\"align-self-center text-center\" v-show=\"bookingDetails.hasOwnProperty('booking') &&\n                                        bookingDetails.booking.hasOwnProperty('TypeOfBooking') &&\n                                        bookingDetails.booking.TypeOfBooking == 'Employee'\n                                        \">\n                                        <v-btn class=\"elevation-0 white--text\" tile x-small\n                                            color=\"green darken-2\">Employee</v-btn>\n                                     </v-col> -->\n                                </v-row>\n                            </v-container>\n                            <v-row no-gutters align=\"center\" class=\"my-1\">\n                                <v-col cols=\"12\" class=\"pa-0 align-self-center text-center\">\n                                    <v-btn class=\"elevation-0 white--text\" tile x-small color=\"green darken-2\" v-show=\"bookingDetails.hasOwnProperty('booking') &&\n                                            bookingDetails.booking.hasOwnProperty('validated') &&\n                                            bookingDetails.booking.validated == '1'\n                                            \">VALIDATED</v-btn>\n                                    <!-- <v-icon color=\"red\" class=\"ml-2\" v-show=\"(bookingDetails.hasOwnProperty('booking') && bookingDetails.booking.validated == '1' && showPaymentCardAdded == '1')\" >approval</v-icon> -->\n                                </v-col>\n                            </v-row>\n                            <v-row class=\"justify-center mb-3\" no-gutters v-show=\"Object.hasOwnProperty.call(bookingDetails, 'zone') &&\n                                !(bookingDetails.zone.isGated == '0')\n                                \">\n                                <span class=\"grey--text text--darken-1 font-weight-bold\"\n                                    v-if=\"showPaymentCardAdded && (isCheckoutEnabled(1) || isCheckoutEnabled(2) || isCheckoutEnabled(3))\">Click\n                                    an option below to exit</span>\n                            </v-row>\n                            <v-row class=\"justify-center my-3\" no-gutters\n                                v-show=\"!(isCheckoutEnabled(1) || isCheckoutEnabled(2) || isCheckoutEnabled(3))\">\n                                <span class=\"black--text text--darken-1 font-weight-bold text-h5\">Checked In</span>\n                            </v-row>\n                        </v-col>\n                    </v-row>\n                </v-container>\n            </div>\n            <v-container fluid class=\"text-center px-10\" elevation=\"20\">\n                <v-card class=\"dialog-card\">\n                    <v-card-text v-if=\"bookingDetails.hasOwnProperty('booking') &&\n                        bookingDetails.booking.hasOwnProperty('TypeOfBooking') &&\n                        bookingDetails.booking.TypeOfBooking != 'Self reservation'\">\n                        <v-container>\n                            <v-form>\n                                <v-row no-gutters>\n                                    <v-col class=\"text-left mb-5\">\n                                        <p style=\"font-weight: 700;font-size: 16px;\"\n                                            v-if=\"Object.hasOwnProperty.call(bookingDetails, 'zone') && Object.hasOwnProperty.call(bookingDetails.zone, 'zoneName')\">\n                                            <span style=\"font-weight:400\">You\n                                                have entered</span> <span>{{\n                                                    bookingDetails.zone.zoneName }}</span><span style=\"font-weight: 400;\"> with\n                                                plate </span><span\n                                                v-if=\"Object.hasOwnProperty.call(bookingDetails, 'booking') && Object.hasOwnProperty.call(bookingDetails.booking, 'vehicleNo')\">{{\n                                                    bookingDetails.booking.vehicleNo }}</span> <span>{{ booking_content\n    }}</span>\n                                        </p>\n                                    </v-col>\n                                </v-row>\n\n                            </v-form>\n\n                        </v-container>\n                        <v-card-actions class=\"text-center justify-center px-0 pb-0 pa-0 rounded-lg\" v-if=\"Object.hasOwnProperty.call(bookingDetails, 'booking') &&\n                            !showPaymentCardAdded\n                            \">\n                            <v-container class=\"pa-0\" pa-0 fluid>\n                                <v-row no-gutters>\n                                    <v-col cols=\"12\">\n                                        <v-btn elevation=\"20\" width=\"100%\" height=\"43px\" class=\"add_credit_card_btn mb-5\"\n                                            @click=\"navigateToAddPayment\"> Add\n                                            Credit\n                                            Card</v-btn>\n                                    </v-col>\n                                    <v-col cols=\"12\" class=\"mb-5\"\n                                        v-if=\"iosDevice && Object.hasOwnProperty.call(bookingDetails, 'zone') && Object.hasOwnProperty.call(bookingDetails.zone, 'paymentServices') && Object.hasOwnProperty.call(bookingDetails.zone.paymentServices, 'apple_pay') && bookingDetails.zone.paymentServices.apple_pay == '1'\">\n                                        <apple-pay width='100%' height=\"43px\"\n                                            :ios-device=\"iosDevice && Object.hasOwnProperty.call(bookingDetails, 'zone') && Object.hasOwnProperty.call(bookingDetails.zone, 'paymentServices') && Object.hasOwnProperty.call(bookingDetails.zone.paymentServices, 'apple_pay') && bookingDetails.zone.paymentServices.apple_pay == '1'\"></apple-pay>\n                                    </v-col>\n                                    <v-col cols=\"12\" class=\"mb-5\"\n                                        v-if=\"!iosDevice && Object.hasOwnProperty.call(bookingDetails, 'zone') && Object.hasOwnProperty.call(bookingDetails.zone, 'paymentServices') && Object.hasOwnProperty.call(bookingDetails.zone.paymentServices, 'google_pay') && bookingDetails.zone.paymentServices.google_pay == '1'\">\n                                        <google-pay width=\"100%\" height=\"43px\"></google-pay>\n                                    </v-col>\n                                    <!-- <v-col cols=\"12\" class=\"px-4 mt-4 color-black text-center\" style=\"font-size: 12px\"\n                                    v-show=\"iosDevice\">\n                                    <p>\n                                        You're only authorizing payment now. We'll charge you automatically when you\n                                        checkout based on the\n                                        duration of stay.\n                                    </p>\n                                </v-col> -->\n                                    <v-col cols=\"12\" class=\"mt-4 pb-2\"\n                                        v-if=\"bookingDetails.zone.isPQREndReservation == 1 && (bookingDetails.booking.TypeOfBooking == 'Guest' || bookingDetails.booking.TypeOfBooking == 'Transient')\">\n                                        <v-btn text color=\"primary\" width=\"100%\"\n                                            style=\"font-size: 12px;font-weight: bolder;text-decoration: underline;\"\n                                            @click=\"hotelGuest\">\n                                            <font-awesome-icon class=\"mr-1\" icon=\"fa-solid fa-hotel\"\n                                                style=\"font-size: 1.5rem; color: #1E3050;\" /> I am an\n                                            overnight\n                                            hotel guest</v-btn>\n\n                                    </v-col>\n\n                                </v-row>\n                                <v-col cols=\"12\" class=\"mt-2 pa-0\"\n                                    v-if=\"(bookingDetails.hasOwnProperty('booking') &&\n                                        bookingDetails.booking.hasOwnProperty('validated') &&\n                                        bookingDetails.booking.validated != '1' &&\n                                        bookingDetails.booking.isValidationEnabled == '1') || Object.hasOwnProperty.call(bookingDetails, 'zone') && Object.hasOwnProperty.call(bookingDetails.zone, 'isLoyaltySupported') && bookingDetails.zone.isLoyaltySupported == '1' && bookingDetails.booking.validated != '1' && (bookingDetails.booking.TypeOfBooking == 'Guest' || bookingDetails.booking.TypeOfBooking == 'Transient' || bookingDetails.booking.TypeOfBooking == 'Self reservation')\">\n                                    <v-card flat color=\"#F4F4F4\" class=\"ma-0 rounded-lg \" tile max-width=\"100%\" >\n                                        <v-card-text class=\"pb-0\">\n                                            <v-row class=\"text-center pt-0\" no-gutters>\n                                                <v-col cols=\"12\" class=\"pa-0\">\n                                                    <p style=\"font-size: 15px;color:#0000008C;font-weight: bolder;\">\n                                                        CLAIM\n                                                        YOUR PARKING DISCOUNT</p>\n                                                </v-col>\n                                                <v-col cols=\"12\"\n                                                    v-if=\"Object.hasOwnProperty.call(bookingDetails, 'zone') && Object.hasOwnProperty.call(bookingDetails.zone, 'isLoyaltySupported') && bookingDetails.zone.isLoyaltySupported == '1' && bookingDetails.booking.validated != '1' && (bookingDetails.booking.TypeOfBooking == 'Guest' || bookingDetails.booking.TypeOfBooking == 'Transient' || bookingDetails.booking.TypeOfBooking == 'Self reservation')\">\n                                                    <v-btn color=\"black\" rounded class=\"pa-0 ma-0\" width=\"230\" height=\"50\"\n                                                        elevation=\"20\" @click=\"loyalty = true\">\n                                                        <v-img src=\"@/assets/newGoldenNugget.jpg\"\n                                                            style=\"border-radius: 1.2rem;\" class max-width=\"230\"\n                                                            height=\"60\"></v-img>\n                                                    </v-btn>\n                                                </v-col>\n                                            </v-row>\n                                            <v-col cols=\"12\" class=\"mt-1 px-4\" v-show=\"bookingDetails.hasOwnProperty('booking') &&\n                                                bookingDetails.booking.hasOwnProperty('validated') &&\n                                                bookingDetails.booking.validated != '1' &&\n                                                bookingDetails.booking.isValidationEnabled == '1'\n                                                \">\n                                                <v-btn text style=\"font-size:15px;text-transform: none;text-decoration: underline;\" color=\"#3D4C56\n\" class=\"no-upper-case\" @click=\"openValidationDialog()\">Apply\n                                                    Your Validation</v-btn>\n                                            </v-col>\n                                        </v-card-text>\n                                    </v-card>\n                                </v-col>\n                            </v-container>\n                        </v-card-actions>\n                    </v-card-text>\n                </v-card>\n            </v-container>\n            <footer>\n                <v-row class=\"text-center parking.com pb-3 px-5\" no-gutters>\n                    <v-col cols=\"12\" class=\"mt-4 text-center color-black px-4\" style=\"font-size: 12px;\" v-show=\"Object.hasOwnProperty.call(bookingDetails, 'zone') &&\n                        !(bookingDetails.zone.isGated == '0')\n                        \">\n                        <p>\n                            You won't be able to exit the garage until your payment method is on file.\n                            Please\n                            enter your payment method now to avoid slow down at exit.\n                        </p>\n                    </v-col>\n                    <v-col cols=\"12\" class=\"mt-4 text-center color-black px-4\" style=\"font-size: 12px\" v-show=\"Object.hasOwnProperty.call(bookingDetails, 'zone') &&\n                        !(bookingDetails.zone.isGated == '1') &&\n                        validatedDateTime <= 0\n                        \">\n                        <p>\n                            A valid credit card is required to park. Without one, you\n                            could be subject to a parking violation and issued a\n                            citation.\n                        </p>\n                    </v-col>\n                    <v-col cols=\"12\" class=\"mt-4 color-black  text-center px-4\" style=\"font-size: 10px\" v-show=\"bookingDetails.hasOwnProperty('booking') &&\n                        bookingDetails.booking.hasOwnProperty('validated') &&\n                        bookingDetails.booking.validated == '1' &&\n                        validatedDateTime > 0\n                        \">\n                        <p>\n                            Exiting after the validated time period will require a valid\n                            credit card to continue parking. Without one, you could be\n                            subject to a parking violation and issued a citation.\n                        </p>\n                    </v-col>\n                    <v-col cols=\"12\">\n                        <v-img alt=\"PARKING.COM\" class=\"my-3\" height=\"42\" contain src=\"@/assets/logo_huge_drk.png\" />\n                    </v-col>\n                </v-row>\n            </footer>\n        </boiler-plate>\n    </v-container>\n</template>\n<script>\n// import Calendar from '../uiComponents/Calendar/Calendar';\nimport BoilerPlate from '@/components/BoilerPlate';\n// import Estimate from '../components/Estimate.vue'\nimport APIHelper from \"@/apiHelper\";\nimport \"primevue/resources/themes/saga-blue/theme.css\"       //theme\nimport \"primevue/resources/primevue.min.css\"                 //core css\nimport \"primeicons/primeicons.css\"\nimport GooglePay from \"@/components/GooglePay.vue\";\n// import loggerHelper from \"../loggerHelper\";\nimport { mapGetters } from \"vuex\";\n// import { QrcodeStream } from \"vue-qrcode-reader\";\n// import QrCodeScanner from \"@/views/QrCodeScanner.vue\";\n// import ValidationQrCodeScanner from \"@/views/ValidationQrCodeScanner.vue\";\nimport ApplePay from \"@/components/ApplePay.vue\";\nimport { round } from '@/utils/util'\nimport { formatDateTime } from \"@/utils/formatDateTime\";\nimport { EventBus } from \"@/lib/EventBus\";\nimport {\n    secondsToMs,\n    secondsToHms,\n    //  secondsToDHms\n} from \"@/utils/formatDateTime\";\nimport { addMinutes, addDays, addHours, set } from \"date-fns\";\nimport { format, isValid } from \"date-fns\";\nimport { dateToTimeZoneDate } from \"@/utils/formatDateTime\";\n// import QrScanner from 'qr-scanner';\nexport default {\n    name: \"CheckIn\",\n    components: {\n        // QrCodeScanner,\n        //  ValidationQrCodeScanner,\n        ApplePay,\n        GooglePay,\n        // Calendar,\n        //  Estimate \n        BoilerPlate\n    },\n    data: () => ({\n        // rules: {\n        //   counter: value => value.length <= 6 || \"Max 6 characters\"\n        // },\n        time: \"\",\n        openTimePicker: false,\n        openDatePicker: false,\n        minTimeDate: null,\n        maxTimeDate: null,\n        beforeEstimate: null,\n        currentDate: format((new Date()), 'yyyy-MM-dd'),\n        loyalty24knum: \"\",\n        alertIcon: \"mdi-check-circle\",\n        alertDialog: false,\n        alertMsg: \"\",\n        loyalty: false,\n        extDateAndTime: null,\n        extendBtnLoading: false,\n        loading: false,\n        extensionDialog: false,\n        stopTime: \"\",\n        exitTimeSelected: {},\n        timePickerHrRange: null,\n        timeExceeded: false,\n        timePickerMinRange: null,\n        minDate: null,\n        maxDate: null,\n        Timemenu: false,\n        startDate: \"\",\n        maxDateTime: null,\n        estimate: null,\n        Datemenu: false,\n        exitDate: null,\n        dateFormatted: null,\n        exitDateTime: 0,\n        exitTimeInterval: null,\n        iosDevice: false,\n        invalidValidationQRDialog: false,\n        cameraStatus: false,\n        validationCameraStatus: false,\n        validatedDateTime: 0,\n        gracePeriodTime: 0,\n        validatedInterval: \"\",\n        duration: 300,\n        offset: 0,\n        pedestrianAccessDialog: false,\n        pedestrianAccessText: \"\",\n        easing: \"easeInOutCubic\",\n        pageHeight: window.outerHeight,\n        qrCodeDialog: false,\n        countUpTime: \"\",\n        interval: \"\",\n        isValid: undefined,\n        camera: \"auto\",\n        smsText: \"\",\n        smsDialog: false,\n        dialerDialog: false,\n        invalidQRMsg: \"\",\n        invalidValidationQRMsg: \"\",\n        invalidQRDialog: false,\n        invalidSMSMsg: \"\",\n\n        invalidSMSDialog: false,\n        smsPending: false,\n        validateBookingPending: false,\n        validateBookingDialog: false,\n        validateBookingTxt: \"\",\n        validateQRCodePending: false,\n        validateQRCodeDialog: false,\n    }),\n    computed: {\n        ...mapGetters({\n            bookingId: \"getterBookingId\",\n            bookingDetails: \"getterBookingDetails\",\n            zoneDetails: \"getterZoneDetails\",\n            entryTime: \"getterEntryTime\",\n            exitGateCodes: \"getterExitGateCodes\",\n            isPQREndReservation: \"getterZoneIsPQREndReservation\",\n\n        }),\n        logoHeight() {\n            return Object.hasOwnProperty.call(this.bookingDetails, 'booking') && Object.hasOwnProperty.call(this.bookingDetails.booking, 'TypeOfBooking') && this.bookingDetails.booking.TypeOfBooking == 'Self reservation' ? '100px' : '150px';\n        },\n        computedDateFormatted() {\n            return this.time !== null && this.time !== \"\" && this.time !== undefined ? format(this.time, 'yyyy/MM/dd') : new Date()\n        },\n        formattedTime() {\n            return this.time ? format(this.time, 'hh:mm aa') : \"\"\n        },\n        formattedDateTime() {\n            return this.time !== null && this.time !== \"\" ? format(this.time, 'iii, LLL dd') : \"\"\n        },\n        formattedYear() {\n            return this.time !== null && this.time !== \"\" ? format(this.time, 'yyyy') : \"\"\n        },\n        formattedEntryDisplayTime() {\n            return Object.hasOwnProperty.call(this.bookingDetails, 'booking') && Object.hasOwnProperty.call(this.bookingDetails.booking, 'entrytime') && this.bookingDetails.booking.entrytime !== null && this.bookingDetails.booking.entrytime !== undefined && this.bookingDetails.booking.entrytime !== \"\" ? format(new Date(this.formatDateTime(this.bookingDetails?.booking?.entrytime, 'date')), \"hh:mm a\") : format(dateToTimeZoneDate(new Date(), this.bookingDetails?.zone?.timezone), 'hh:mm a');\n        },\n        singleQuotes() {\n\n            return Object.hasOwnProperty.call(this.bookingDetails, 'zone') && Object.hasOwnProperty.call(this.bookingDetails.zone, 'timePickerConfiguration') && this.bookingDetails.zone.timePickerConfiguration == \"0\" ? ((this.time !== null && this.time !== undefined && this.time !== \"\" && this.minDate !== null && this.minDate !== undefined && this.minDate !== \"\" && format(this.time, 'yyyy-MM-dd') == format(this.minDate, 'yyyy-MM-dd')) || (this.beforeEstimate !== null && this.beforeEstimate !== undefined && this.beforeEstimate !== \"\" && this.estimate !== null && this.estimate !== undefined && this.estimate !== \"\" && this.beforeEstimate.grandTotal == this.estimate.grandTotal)) : true\n        },\n        doubleQuotes() {\n            return Object.hasOwnProperty.call(this.bookingDetails, 'zone') && Object.hasOwnProperty.call(this.bookingDetails.zone, 'timePickerConfiguration') && this.bookingDetails.zone.timePickerConfiguration == \"0\" ? ((this.time !== null && this.time !== undefined && this.time !== \"\" && this.minDate !== null && this.minDate !== undefined && this.minDate !== \"\" && format(this.time, 'yyyy-MM-dd') != format(this.minDate, 'yyyy-MM-dd')) && (this.beforeEstimate !== null && this.beforeEstimate !== undefined && this.beforeEstimate !== \"\" && this.estimate !== null && this.estimate !== undefined && this.estimate !== \"\" && this.beforeEstimate.grandTotal != this.estimate.grandTotal)) : false\n        },\n        disableLoyalty() {\n            let disabled = this.loyalty24knum === undefined || this.loyalty24knum === null || this.loyalty24knum == \"\"\n            return disabled\n        },\n        disableExtend() {\n            let disabled = (\n                this.time === null || this.time === \"\" || this.time === undefined || this.estimate === null || this.estimate === undefined || Object.keys(this.estimate).length === 0) || (this.bookingDetails?.zone?.timePickerConfiguration == '0' && (format(this.time, 'yyyy-MM-dd') == format(this.maxDate, 'yyyy-MM-dd')) ? true : false)\n            return disabled;\n        },\n        countDownExitTime() {\n            if (this.exitDateTime < 0) {\n                this.$store.commit(\"SET_VALIDATED_TIME_STATUS\", true);\n                clearInterval(this.exitTimeInterval);\n            }\n            return secondsToHms(this.exitDateTime / 1000 + 59);\n        },\n        countDownEstimateTime() {\n            if (this.exitDateTime < 0) {\n                this.$store.commit(\"SET_VALIDATED_TIME_STATUS\", true);\n                clearInterval(this.exitTimeInterval);\n            }\n            return secondsToHms(this.exitDateTime / 1000 + 59);\n        },\n        isExtra() {\n            return window.location.pathname.includes(\"/gx/\");\n        },\n        options() {\n            return {\n                duration: this.duration,\n                offset: this.offset,\n                easing: this.easing,\n            };\n        },\n        showPaymentCardAdded: function getCardStatus() {\n            var cardOnFile = this.bookingDetails?.booking?.cardOnfile\n                ? this.bookingDetails.booking.cardOnfile\n                : null;\n            var validatedState = this.bookingDetails?.booking?.validated\n                ? this.bookingDetails.booking.validated\n                : null;\n            var state =\n                cardOnFile == \"1\"\n                    ? true\n                    : cardOnFile == \"2\" &&\n                    validatedState == \"1\" &&\n                    this.validatedDateTime > 0;\n            return state;\n        },\n        days() {\n            if (this.timeAgo[0] !== '' && this.timeAgo[0] != null && this.timeAgo[0] !== undefined) {\n                return this.timeAgo[0]\n            }\n            return '';\n        },\n        hours() {\n            // if (this.bookingDetails?.booking?.TypeOfBooking !== 'Self reservation') {\n            //     return this.timeAgo.includes('h') ? this.timeAgo.split('h')[0] : ''\n            // }\n            // else {\n            if (this.timeAgo[1] !== '' && this.timeAgo[1] != null && this.timeAgo[1] !== undefined) {\n                return this.timeAgo[1]\n            }\n            // }\n            return '';\n        },\n        mins() {\n            // if (this.bookingDetails?.booking?.TypeOfBooking !== 'Self reservatiion') {\n            //     let h = this.timeAgo.includes('h') ? this.timeAgo.split('h')[1] : this.timeAgo;\n            //     return h.split('min')[0]\n            // }\n\n            // else {\n            if (this.timeAgo[2] !== '' && this.timeAgo[2] != null && this.timeAgo[2] !== undefined) {\n                return this.timeAgo[2].includes('mins') ? [this.timeAgo[2].split('mins')[0], 'mins'] : [this.timeAgo[2].split('min')[0], 'min']\n            }\n            // }\n            return '';\n        },\n\n        timeAgo: function getTimeAgo() {\n            return this.countUpTime;\n        },\n        validationPending: function qrValidation() {\n            return this.isValid === undefined && this.camera === \"off\";\n        },\n        booking_content() {\n            let dateTime = formatDateTime(\n                Number(this.bookingDetails.booking.entrytime)\n            );\n            return \" on \" + dateTime[1] + \" \" + dateTime[2] + \" \" + dateTime[0];\n        },\n        checkin_content() {\n            return this.formatDateTime(this.bookingDetails.booking.entrytime, 'checkin');\n        },\n        checkout_content() {\n            return 'Checkout before ' + this.formatDateTime(this.bookingDetails.booking.revEnd, 'expire')\n        },\n        validated_content() {\n            if (this.bookingDetails?.zone?.timezoneoffset) {\n                let dateTime = this.bookingDetails.booking.type == \"13\" ? formatDateTime(\n                    Number(this.bookingDetails.booking.revStart) +\n                    Number(this.bookingDetails.booking.couponValidTime)\n                ) : formatDateTime(\n                    Number(this.bookingDetails.booking.entrytime) +\n                    Number(this.bookingDetails.booking.couponValidTime)\n                );\n                return dateTime[0] + \", \" + dateTime[1] + \" \" + dateTime[2];\n            }\n            return \"\";\n        },\n        countDownValidatedTime() {\n            if (this.validatedDateTime < 0) {\n                this.$store.commit(\"SET_VALIDATED_TIME_STATUS\", true);\n                clearInterval(this.validatedInterval);\n            }\n            return secondsToHms(this.validatedDateTime / 1000 + 59);\n        },\n        countDownGracePeriodTime() {\n            if (this.gracePeriodTime < 0) {\n                this.$store.commit(\"SET_GRACE_PERIOD_TIME_STATUS\", true);\n                clearInterval(this.gracePeriodInterval);\n            }\n            //add 59 sec to graceperiod time to skip 0 min.\n            return secondsToHms(this.gracePeriodTime / 1000 + 59);\n        },\n        // gracePeriodCountDownTime,\n        // countDownValidationtime(){\n        //   return\n        // }\n    },\n    watch: {\n        time(newVal, oldVal) {\n            if (oldVal != null && newVal != null && oldVal != newVal && oldVal != \"\" && newVal != \"\" && (isValid(newVal))) {\n                this.bookingDetails?.zone?.timePickerConfiguration == '1' ? round(newVal) : set(newVal, { hour: 23, minutes: 59, seconds: 59 })\n            }\n        },\n    },\n    created() { },\n    mounted: function () {\n        EventBus.$on('SET_TIME', () => {\n            this.onTimePickerChange();\n        })\n        this.exitDateTime = this.calculateExitDateTime();\n        this.exitTimeInterval = setInterval(() => {\n            if (\n                this.bookingDetails?.zone?.timezone\n\n            ) {\n                this.exitDateTime = this.calculateExitDateTime();\n            }\n        }, 1000);\n        if (\n            this.entryTime != null &&\n            !this.bookingDetails?.booking?.exittime &&\n            this.bookingDetails?.zone?.timezone &&\n            this.bookingDetails?.booking?.gracePeriod\n        ) {\n            this.countUpTime = this.calculateParkingTime(\n                this.entryTime,\n                this.bookingDetails.booking.gracePeriod,\n                this.bookingDetails.zone.timezone\n            );\n        }\n        this.interval = setInterval(() => {\n            if (\n                this.entryTime != null &&\n                !this.bookingDetails?.booking?.exittime &&\n                this.bookingDetails?.zone?.timezone &&\n                this.bookingDetails?.booking?.gracePeriod\n            ) {\n                this.countUpTime = this.calculateParkingTime(\n                    this.entryTime,\n                    this.bookingDetails.booking.gracePeriod,\n                    this.bookingDetails.zone.timezone\n                );\n            }\n        }, 1000);\n        if (\n            this.bookingDetails?.booking?.exittime &&\n            this.bookingDetails.booking.exittime != null &&\n            this.bookingDetails.booking.exittime != \"\"\n        ) {\n            clearInterval(this.interval);\n        }\n        if (\n            this.bookingDetails?.booking?.validated &&\n            this.bookingDetails.booking.validated == \"1\" &&\n            this.bookingDetails?.booking?.validationType &&\n            this.bookingDetails.booking.validationType == \"DIVRT\"\n        ) {\n            this.validatedDateTime = this.calculateValidatedTime();\n        }\n\n        this.validatedInterval = setInterval(() => {\n            if (\n                this.bookingDetails?.zone?.timezone &&\n                this.bookingDetails?.booking?.validated &&\n                this.bookingDetails.booking.validated == \"1\" &&\n                this.bookingDetails?.booking?.validationType &&\n                this.bookingDetails.booking.validationType == \"DIVRT\"\n            ) {\n                this.validatedDateTime = this.calculateValidatedTime();\n            }\n        }, 1000);\n        if (\n            this.bookingDetails?.booking?.validated &&\n            this.bookingDetails.booking.validated == \"1\" &&\n            this.bookingDetails?.booking?.validationType &&\n            this.bookingDetails.booking.validationType == \"DIVRT\"\n        ) {\n            if (this.validatedDateTime < 0) {\n                this.$store.commit(\"SET_VALIDATED_TIME_STATUS\", true);\n                clearInterval(this.validatedInterval);\n            }\n        }\n\n        if (this.bookingDetails?.booking?.gracePeriod > 0) {\n            this.gracePeriodTime = this.calculateGracePeriodTime();\n        }\n\n        this.gracePeriodInterval = setInterval(() => {\n            if (this.bookingDetails?.zone?.timezone) {\n                this.gracePeriodTime = this.calculateGracePeriodTime();\n            }\n        }, 1000);\n        if (this.bookingDetails?.booking?.gracePeriod > 0) {\n            if (this.gracePeriodTime < 0) {\n                this.$store.commit(\"SET_GRACE_PERIOD_TIME_STATUS\", true);\n                clearInterval(this.gracePeriodInterval);\n            }\n        }\n        EventBus.$on(\"sms-qr-result\", (result) => {\n            this.onDecode(result);\n        });\n        EventBus.$on(\"validation-qr-result\", (result) => {\n            this.onValidateQRCode(result);\n        });\n\n        // if(this.bookingDetails?.zone?.isPedestrian=='1'){\n        //   this.pedestrianAccess=true\n        // }\n    },\n    destroyed() {\n        clearInterval(this.interval);\n        clearInterval(this.validatedInterval);\n        clearInterval(this.gracePeriodInterval);\n    },\n    beforeRouteEnter(to, from, next) {\n        next(async (vm) => {\n            vm.getMobileOperatingSystem() === 'iOS' ? vm.iosDevice = true : vm.iosDevice = false;\n            if (\n                vm.bookingDetails?.booking?.exittime &&\n                vm.bookingDetails.booking.exittime != null &&\n                vm.bookingDetails.booking.exittime != \"\"\n            ) {\n                clearInterval(vm.interval);\n            }\n            if (vm.bookingDetails?.booking?.validated == \"0\") {\n                if (vm.validatedDateTime < 0) {\n                    vm.$store.commit(\"SET_VALIDATED_TIME_STATUS\", true);\n                    clearInterval(vm.validatedInterval);\n                }\n            }\n        });\n    },\n    methods: {\n        loyaltyValid() {\n            if (!(/^[a-z0-9]+$/i).test(this.loyalty24knum)) {\n                this.loyalty24knum = this.loyalty24knum.replace(/[^\\w\\s]/gi, '')\n            }\n        },\n        async submitLoyalty(code) {\n            try {\n                this.validateBookingPending = true;\n                let result = await this.validateBooking(code);\n                if (!result.data.status) {\n                    this.invalidSMSMsg = result?.data?.message\n                        ? result.data.message\n                        : \"Validation not recognized. Please try again\";\n                    this.invalidSMSDialog = true;\n                    this.validateBookingPending = false;\n                    this.postToLoggerAPI({\n                        phone: this.bookingDetails.user.contact,\n                        refId: this.bookingId,\n                        error: this.invalidSMSMsg,\n                        icon: \"redeem\",\n                        statusText:\n                            \"Error in validating the session on entering validation code - \" +\n                            this.validateBookingTxt,\n                    });\n                } else {\n                    this.postToLoggerAPI({\n                        phone: this.bookingDetails.user.contact,\n                        refId: this.bookingId,\n                        icon: \"redeem\",\n                        statusText:\n                            \"Parker validated the session successfully by entering validation code - \" +\n                            this.validateBookingTxt,\n                    });\n                    this.validateBookingPending = false;\n                    this.validateBookingDialog = false;\n                    this.$store.commit(\n                        \"SET_VALIDATED_MERCHANT\",\n                        result?.data?.merchantName\n                    );\n                    this.$router.replace({ path: \"/validatesuccess\" });\n                }\n            } catch (error) {\n                console.log(error);\n                this.validateBookingPending = false;\n            }\n        },\n        closeAlertDialog() {\n            this.alertDialog = false;\n\n        },\n        getPaymentType(type) {\n            switch (type) {\n                case 'APPLE_PAY': {\n                    return 'Apple Pay';\n                }\n                case 'GOOGLE_PAY': {\n                    return 'Google Pay'\n                }\n                case 'Card': {\n                    return 'Card'\n                }\n            }\n        },\n\n        /** @methods to find the the UTC date \n    @params the bookings date value , type 'exit (2023-12-02)' or 'formatdate (12/02/2023)'\n    */\n        formatUTCDefaultDate(defaultDate, type) {\n            let utcDate = new Date(defaultDate * 1000).toUTCString();\n            let month = utcDate.split(\",\")[1].split(\" \")[2]; // Jan\n            let date = utcDate.split(\",\")[1].split(\" \")[1]; // 27\n            let year = utcDate.split(\",\")[1].split(\" \")[3]; //2023\n            let exitformat = format(new Date(month + \" \" + date + \" \" + year), 'yyyy-MM-dd');\n            let dateformat = format(new Date(month + \" \" + date + \" \" + year), \"MM/dd/yyyy\");\n            return type === \"exit\" ? exitformat : dateformat;\n\n        },\n        async extendEDT() {\n            try {\n                //format(new Date(this.checkinDate), \"yyyy-MM-dd'T'HH:mm:ss\");\n                this.extendBtnLoading = true;\n                let timeconfig = format(this.time, 'yyyy/MM/dd') + \" \" + \"11:59 PM\";\n                let time = this.bookingDetails?.zone?.timePickerConfiguration == '0' ? new Date(timeconfig) : this.time\n                let exitDateTime = time != null || time !== undefined || time != \"\" ?\n                    format(time, 'yyyy/MM/dd')\n                    +\n                    \" \" +\n                    format(time, 'hh:mm a') : new Date();\n                let data = {\n                    bid: this.bookingDetails?.booking?.bid,\n                    extendedTime: format(new Date(exitDateTime), \"yyyy-MM-dd HH:mm:ss\")//\"2022-12-29T02:26:00.000\",\n                };\n                var extendSessionRes = await APIHelper(\n                    \"POST\",\n                    \"/api/v1/prepaid/extendReservation\", data\n                );\n                if (extendSessionRes?.data?.message == \"Successfully updated!!\") {\n                    await this.getBookingDetails();\n                    this.extendBtnLoading = false;\n                    this.extensionDialog = false;\n                } else {\n                    this.alertDialog = true;\n                    this.alertMsg = extendSessionRes?.data?.message || \"Error in extending the session\"\n                }\n\n            } catch (error) {\n                this.extendBtnLoading = false;\n                console.log(error);\n            }\n        },\n        formatDate(date) {\n            let stringdate = date.toString();\n            if (!date) return null;\n\n            const [year, month, day] = stringdate.split(\"-\");\n            return `${month}/${day}/${year}`;\n        },\n        parseDate(date) {\n            if (!date) return null;\n\n            const [month, day, year] = date.split(\"/\");\n            return `${year}-${month.padStart(2, \"0\")}-${day.padStart(2, \"0\")}`;\n        },\n        async openExtDialog() {\n\n            // await axios.get(\n            //   process.env.VUE_APP_ON_DEMAND_URL + \"/\" + \"32899\"+ \".json\"\n            // );\n            this.setDefaultDate();\n            this.setDatePicker();\n            // this.setTimePicker();\n            this.extensionDialog = true;\n            this.extendBtnLoading = false;\n        },\n\n        setDefaultDate() {\n            //formatted exit date value to display\n            this.dateFormatted =\n                this.bookingDetails?.booking?.reservationEndDate ? this.formatUTCDefaultDate(this.bookingDetails?.booking?.revEnd\n                    , 'format') : \"\";\n            this.time = new Date(this.formatDateTime(this.bookingDetails?.booking?.revEnd, 'date'))\n            this.exitDate = this.time;\n            let fifteenTime = this.time;\n\n            this.time = format(this.time, 'mm') == '15' || format(this.time, 'mm') == '30' || format(this.time, 'mm') == '45' || format(this.time, 'mm') == '00' ? fifteenTime : this.bookingDetails?.zone?.timePickerConfiguration == '1' ? round(this.time) : set(this.time, { hour: 23, minutes: 59, seconds: 59 });\n            // this.dateTimeChange()\n            // Object.hasOwnProperty.call(this.bookingDetails.booking, 'isGated') && this.bookingDetails.booking?.isGated == \"1\" && format(this.time, 'yyyy-MM-dd') != format(dateToTimeZoneDate(new Date(), this.bookingDetails?.zone?.timezone), 'yyyy-MM-dd') ? this.beforeDateTimeChange() : \"\";\n\n        },\n        onTimePickerChange() {\n            let exitdate = this.time !== null && this.time !== undefined && this.time !== \"\" ? format(this.time, 'yyyy/MM/dd') : \"\";\n            let selectedMins = this.time !== null && this.time !== undefined && this.time !== \"\" ? format(this.time, 'mm') : \"\";\n            let selectedHours = this.time !== null && this.time !== undefined && this.time !== \"\" ? format(this.time, 'HH') : \"\";\n            let selectedAMPM = this.time !== null && this.time !== undefined && this.time !== \"\" ? format(this.time, 'a') : \"\";\n            this.stopTime = selectedMins != null && selectedMins != \"\" && selectedHours != null && selectedHours != \"\" && selectedAMPM != null && selectedAMPM != \"\" ? selectedHours + \":\" + selectedMins + \":\" + \"00\" : \"\";\n            let currenTime = this.bookingDetails.zone.timezone\n                ? format(\n                    dateToTimeZoneDate(new Date(),\n                        this.bookingDetails.zone.timezone\n                    ),\n                    \"yyyy-MM-dd HH:mm:ss\"\n                )\n                : format(new Date(), \"yyyy-MM-dd  HH:mm:ss\");\n            if (\n                selectedMins != null && selectedMins != \"\" && selectedHours != null && selectedHours != \"\" && selectedAMPM != null && selectedAMPM != \"\" &&\n                new Date(exitdate + \" \" + this.stopTime).getTime() >\n                new Date(currenTime).getTime()\n            ) {\n                format(this.time, 'yyyy-MM-dd') != format(this.minDate, 'yyyy-MM-dd') ? this.beforeDateTimeChange() : \"\";\n                this.dateTimeChange();\n            }\n        },\n        setDatePicker() {\n            //set the minimum date to today date(zone time zone date)\n            this.minDate = this.bookingDetails.zone.timezone\n                ?\n                new Date(this.formatDateTime(this.bookingDetails?.booking?.revEnd, 'date'))\n                :\n                dateToTimeZoneDate(\n                    new Date(Number(this.bookingDetails?.booking?.revEnd) * 1000 - Number(this.bookingDetails.zone.timezoneoffset) * 1000)\n                    , this.bookingDetails.zone.timezone\n                );\n            //calculate max parkign time in seconds\n            let maxPark = this.bookingDetails != null ? this.bookingDetails?.zone?.maxParkingTime : null;\n\n            let addeddays = addDays(new Date(), maxPark?.days);\n            let addedhours = addHours(addeddays, maxPark?.hours);\n            let addedmins = addMinutes(addedhours, maxPark?.minutes);\n            //get max date in seconds based on max parking time\n            let maxZoneDate = addedmins;\n            this.maxDate = this.bookingDetails?.zone.timezone\n                ?\n                dateToTimeZoneDate(\n                    maxZoneDate,\n                    this.bookingDetails?.zone?.timezone\n                )\n                : new Date(maxZoneDate);\n            //get max date with time and set it to maxDateTime\n            this.maxDateTime = this.bookingDetails?.zone?.timezone\n                ? format(\n                    dateToTimeZoneDate(\n                        new Date(maxZoneDate),\n                        this.bookingDetails?.zone?.timezone\n                    ),\n                    \"yyyy-MM-dd hh:mm aaaaa\"\n                )\n                : format(new Date(), \"yyyy-MM-dd hh:mm aaaaa\");\n        },\n        // onOpen() {\n        //   this.setTimePicker(this.exitTimeSelected);\n        // },\n        /** @methods to find the estimate rate \n       @params startDate , stopDate,zcode, type , env_overRide\n       */\n        async beforeDateTimeChange() {\n            if (!this.bookingDetails.zone.zcode) {\n                return\n            }\n            try {\n                // format(new Date(this.checkinDate), \"yyyy-MM-dd'T'HH:mm:ss\");\n\n                let edtEntryTime = this.bookingDetails?.booking?.entrytime\n                this.startDate = edtEntryTime !== null && edtEntryTime !== undefined && edtEntryTime !== \"\" ? format(new Date(this.formatDateTime(edtEntryTime, 'date')), \"yyyy-MM-dd'T'HH:mm:ss\") : this.bookingDetails.zone.timezone\n                    ? format(\n                        dateToTimeZoneDate(\n                            new Date(),\n                            this.bookingDetails.zone.timezone\n                        ),\n                        \"yyyy-MM-dd'T'HH:mm:ss\"\n                    )\n                    : format(new Date(), \"yyyy-MM-dd'T'HH:mm:ss\");\n                let stopTime = this.stopTime\n                let selectedHours = this.bookingDetails.booking.entrytime != null && this.bookingDetails.booking.entrytime !== undefined && this.bookingDetails.booking.entrytime != \"\" ? format(new Date(this.formatDateTime(this.bookingDetails?.booking?.entrytime, 'date')), \"HH\") : format(dateToTimeZoneDate(new Date(), this.bookingDetails.zone.timezone), 'HH');\n                let selectedMins = this.bookingDetails.booking.entrytime != null && this.bookingDetails.booking.entrytime !== undefined && this.bookingDetails.booking.entrytime != \"\" ? format(new Date(this.formatDateTime(this.bookingDetails?.booking?.entrytime, 'date')), \"mm\") : format(dateToTimeZoneDate(new Date(), this.bookingDetails.zone.timezone), 'mm');\n                let exittime = Object.hasOwnProperty.call(this.bookingDetails, 'zone') && Object.hasOwnProperty.call(this.bookingDetails.zone, 'timePickerConfiguration') && this.bookingDetails.zone.timePickerConfiguration == '1' ? 'T' + stopTime : 'T' + selectedHours + \":\" + selectedMins + \":00\";\n                let exitdate = format(this.time, 'yyyy-MM-dd');\n                let stopDate = exitdate + exittime;\n                let data = {\n                    startAt: this.startDate,\n                    stopAt: stopDate,\n                    zcode: this.bookingDetails.zone.zcode,\n                };\n                this.addPaymentBtnLoading = true;\n                var getRate = await APIHelper(\"POST\", \"/api/v2/getRate\", data);\n                //condition to check if the date time selected is lesser than current time\n                if (!getRate?.data?.status && !this.getRateCall) {\n                    this.disableAddPaymentBtn = true;\n                    this.alertDialog = true;\n                    this.alertMsg =\n                        getRate?.data?.message || \"Error in getting rate details\";\n                    this.openDatePicker = false;\n                    this.openTimePicker = false;\n                } else {\n                    this.disableAddPaymentBtn = false;\n                    this.openDatePicker = false;\n                    this.openTimePicker = false;\n                }\n                this.beforeEstimate = Object.assign({}, getRate?.data?.data);\n                // estimatedVal != \"\" &&\n                // estimatedVal != null &&\n                // estimatedVal != undefined\n                //   ? Number(estimatedVal).toFixed(2)\n                //   : estimatedVal;\n                this.addPaymentBtnLoading = false;\n            }\n            catch (error) {\n                this.addPaymentBtnLoading = false;\n                console.log(error);\n            }\n        },\n        async dateTimeChange() {\n            if (!this.bookingDetails.zone.zcode) {\n                return\n            }\n            this.extendBtnLoading = true;\n\n            try {\n                // format(new Date(this.checkinDate), \"yyyy-MM-dd'T'HH:mm:ss\");\n                let edtEntryTime = this.bookingDetails?.booking?.entrytime\n                this.startDate = edtEntryTime !== null && edtEntryTime !== undefined && edtEntryTime !== \"\" ? format(new Date(this.formatDateTime(edtEntryTime, 'date')), \"yyyy-MM-dd'T'HH:mm:ss\") : this.bookingDetails.zone.timezone\n                    ? format(\n                        dateToTimeZoneDate(\n                            new Date(),\n                            this.bookingDetails.zone.timezone\n                        ),\n                        \"yyyy-MM-dd'T'HH:mm:ss\"\n                    )\n                    : format(dateToTimeZoneDate(new Date(), this.bookingDetails.zone.timezone), \"yyyy-MM-dd'T'HH:mm:ss\");\n                // console.log(this.exitTimeSelected?.hh+\":\"+this.exitTimeSelected.mm+\":00\")\n                // this.exitDate + \"T23:59:00\";\n                let selectedHours = this.time !== null && this.time !== \"\" && this.time !== undefined ? format(this.time, 'HH') : format(dateToTimeZoneDate(new Date(), this.bookingDetails.zone.timezone), 'HH')\n                let selectedMins = this.time !== null && this.time !== \"\" && this.time !== undefined ? format(this.time, 'mm') : format(dateToTimeZoneDate(new Date(), this.bookingDetails.zone.timezone), 'mm')\n                let exitdate = this.time !== null && this.time !== \"\" && this.time !== undefined ? format(this.time, 'yyyy-MM-dd') : \"\";\n                let exittime = Object.hasOwnProperty.call(this.bookingDetails, 'zone') && Object.hasOwnProperty.call(this.bookingDetails.zone, 'timePickerConfiguration') && this.bookingDetails?.zone?.timePickerConfiguration == '1' ? 'T' + selectedHours + \":\" + selectedMins + \":00\" : \"T23:59:00\"\n                let stopDate = exitdate + exittime;\n\n                let data = {\n                    startAt: this.startDate,\n                    stopAt: stopDate,\n                    zcode: this.bookingDetails?.zone?.zcode,\n                };\n                this.addPaymentBtnLoading = true;\n                var getRate = await APIHelper(\"POST\", \"/api/v2/getRate\", data);\n                this.extendBtnLoading = false;\n                this.extDateAndTime = stopDate;\n                //condition to check if the date time selected is lesser than current time\n                if (!getRate?.data?.status && !this.getRateCall) {\n                    this.disableAddPaymentBtn = true;\n                    this.alertDialog = true;\n                    this.alertMsg =\n                        getRate?.data?.message || \"Error in getting rate details\";\n                    this.openDatePicker = false;\n                    this.openTimePicker = false;\n                    EventBus.$emit('datetime-set');\n                } else {\n                    this.disableAddPaymentBtn = false;\n                    this.openDatePicker = false;\n                    this.openTimePicker = false;\n                    EventBus.$emit('datetime-set');\n                }\n                this.estimate = Object.assign({}, getRate?.data?.data);\n                // estimatedVal != \"\" &&\n                // estimatedVal != null &&\n                // estimatedVal != undefined\n                //   ? Number(estimatedVal).toFixed(2)\n                //   : estimatedVal;\n                this.addPaymentBtnLoading = false;\n            }\n            catch (error) {\n                this.addPaymentBtnLoading = false;\n                console.log(error);\n            }\n        },\n        calculateExitDateTime() {\n            if (this.bookingDetails?.zone?.timezone) {\n                //   var currentTime =\n                // new Date().getTime() +\n                // (Number(this.bookingDetails.zone.timezoneoffset) * 1000 +\n                //   Number(this.bookingDetails.zone.timezonedstoffset) * 1000);\n                var currentTime =\n                    new Date().getTime() +\n                    (Number(this.bookingDetails.zone.timezoneoffset) * 1000 +\n                        Number(this.bookingDetails.zone.timezonedstoffset) * 1000);\n                var exitTime =\n                    new Date(this.bookingDetails.booking.reservationEndDate).getTime();\n                this.$store.commit(\"SET_EXIT_TIME_TIME_STATUS\", this.exitDateTime < 0);\n                exitTime - currentTime < 0\n                    ? clearInterval(this.exitInterval)\n                    : \"\";\n                return exitTime - currentTime;\n            }\n            return 0\n\n        },\n        hotelGuest() {\n            let url = window.location.origin + '?zcode=' + this.bookingDetails?.zone?.locationCode + '#/createsession';\n            let plate = this.bookingDetails?.booking?.vehicleNo || \"\";\n            let phone = this.bookingDetails?.user?.contact || \"\";\n            let bid = this.bookingDetails?.booking?.bid || \"\";\n            let checkindate = this.bookingDetails?.booking?.entrytime || \"\";\n            let params = '/?phone=' + phone + '&bid=' + bid + '&plate=' + plate + '&entrytime=' + checkindate;\n            window.location.replace(url + params);\n            // this.$router.replace({path:'/'});\n\n        },\n        closeQRCodeDialog() {\n            this.qrCodeDialog = false;\n            this.cameraStatus = false;\n        },\n        closeValidationQRDialog() {\n            this.validationCameraStatus = false;\n            this.validateBookingDialog = true;\n            this.validateQRCodeDialog = false;\n        },\n        reScanQR() {\n            this.invalidQRDialog = false;\n            this.cameraStatus = true;\n        },\n        reScanValidationQR() {\n            this.invalidValidationQRDialog = false;\n            this.validationCameraStatus = true;\n        },\n        openSmsQrScanner() {\n            this.qrCodeDialog = true;\n            this.cameraStatus = true;\n        },\n        openSMSDialog() {\n            this.smsDialog = true;\n            let exitLanes =\n                this.exitGateCodes.length > 0\n                    ? this.exitGateCodes.filter((a) => a.isPedestrian == \"0\")\n                    : [];\n            if (\n                this.bookingDetails?.booking?.prePopulateGateCodes &&\n                this.bookingDetails.booking.prePopulateGateCodes == \"1\"\n            ) {\n                this.smsText = exitLanes.length == 1 ? exitLanes[0].sms_code : \"\";\n            }\n        },\n        scrollToSubmit() {\n            const el = document.querySelector(\"#submitsmsbtn\");\n            if (el) {\n                el.scrollIntoView(this.options);\n            }\n        },\n        scrollToValidateBtn() {\n            const el = document.querySelector(\"#validatebookingbtn\");\n            if (el) {\n                el.scrollIntoView(this.options);\n            }\n        },\n        calculateGracePeriodTime() {\n            var currentTime =\n                new Date().getTime() +\n                (Number(this.bookingDetails.zone.timezoneoffset) * 1000 +\n                    Number(this.bookingDetails.zone.timezonedstoffset) * 1000);\n            var gracePeriodTime =\n                (Number(this.bookingDetails.booking.entrytime) +\n                    Number(this.bookingDetails.booking.gracePeriod)) *\n                1000; //\n            this.$store.commit(\n                \"SET_GRACE_PERIOD_TIME_STATUS\",\n                this.gracePeriodTime <= 0\n            );\n            return gracePeriodTime - currentTime;\n        },\n        calculateValidatedTime() {\n            var currentTime =\n                new Date().getTime() +\n                (Number(this.bookingDetails.zone.timezoneoffset) * 1000 +\n                    Number(this.bookingDetails.zone.timezonedstoffset) * 1000);\n            var validatedTime = this.bookingDetails.booking.type == \"13\" ?\n                (Number(this.bookingDetails.booking.revStart) +\n                    Number(this.bookingDetails.booking.couponValidTime)) *\n                1000 : (Number(this.bookingDetails.booking.entrytime) +\n                    Number(this.bookingDetails.booking.couponValidTime)) *\n                1000\n            this.$store.commit(\"SET_VALIDATED_TIME_STATUS\", this.validatedTime < 0);\n            validatedTime - currentTime < 0\n                ? clearInterval(this.validatedInterval)\n                : \"\";\n            return validatedTime - currentTime;\n        },\n        calculateParkingTime(parkingStartTime, gracePeriod, zone) {\n            var currentTime = new Date();\n            currentTime.toLocaleString(\"en-US\", { timeZone: zone });\n            var differenceTime =\n                gracePeriod > 0\n                    ? currentTime.getTime() - parkingStartTime * 1000 // - gracePeriod * 1000 to exclude grace period\n                    : currentTime.getTime() - parkingStartTime * 1000;\n            let parkedTime = secondsToMs(differenceTime / 1000);\n            return parkedTime;\n        },\n        isCheckoutEnabled(type) {\n            if (Object.hasOwnProperty.call(this.bookingDetails, 'exitOptions') && this.bookingDetails.exitOptions.length != 0) {\n                let option = this.bookingDetails.exitOptions.some(\n                    (t) => t.techType == type\n                );\n                return option;\n            }\n            return false;\n\n        },\n        async getBookingDetails() {\n            try {\n                let bookingId = window.location.pathname.substring(3);\n                var bookingDetails = await APIHelper(\n                    \"GET\",\n                    \"/api/v1/booking/config/\" + bookingId\n                );\n                this.$store.commit(\n                    \"SET_BOOKING_DETAILS\",\n                    bookingDetails.data?.data ? bookingDetails.data.data : null\n                );\n            } catch (error) {\n                console.log(error);\n            }\n        },\n        async getpedestrianAccess() {\n            try {\n                // let bookingId = window.location.pathname.substring(3);\n                var pedesAccess = await APIHelper(\n                    \"POST\",\n                    \"api/v1/open/\" + this.bookingId,\n                    { source: \"webView\" }\n                );\n                // console.log(pedesAccess)\n                // console.log(pedesAccess?.data?.status)\n                if (pedesAccess?.data?.status) {\n                    this.postToLoggerAPI({\n                        phone: this.bookingDetails.user.contact,\n                        refId: this.bookingId,\n                        image: \"https://sppl-dev.divrt.co/img/pedestrain_door.042f0927.png\",\n                        statusText: \"Parker accessed pedestrian door successfully.\",\n                    });\n                    this.$router.replace({ path: \"/pedestrianaccess\" });\n                } else {\n                    this.pedestrianAccessText = pedesAccess.data.message;\n                    this.postToLoggerAPI({\n                        phone: this.bookingDetails.user.contact,\n                        refId: this.bookingId,\n                        error: this.pedestrianAccessText,\n                        image: \"https://sppl-dev.divrt.co/img/pedestrain_door.042f0927.png\",\n                        statusText: \"Error in opening the pedestrian door.\",\n                    });\n                    this.pedestrianAccessDialog = true;\n                }\n            } catch (error) {\n                console.log(error);\n            }\n            // this.$router.replace({ path: \"/pedestrianaccess/\"+true });\n        },\n        navigateToAddPayment() {\n            this.postToLoggerAPI({\n                phone: this.bookingDetails.user.contact,\n                refId: this.bookingId,\n                statusText: \"Parker clicked on ADD CREDIT CARD btn.\",\n            });\n            this.$router.replace({ path: \"/addpayment\" });\n        },\n        openValidationDialog() {\n            this.validateBookingDialog = true;\n        },\n        async openSMSApp() {\n            this.postToLoggerAPI({\n                phone: this.bookingDetails.user.contact,\n                refId: this.bookingId,\n                statusText: \"Parker clicked on SMS submit btn.\",\n            });\n            if (this.smsText == null || this.smsText == \"\") {\n                this.invalidSMSMsg = \"Gate code cannot be empty\";\n                this.invalidSMSDialog = true;\n            } else {\n                try {\n                    this.smsPending = true;\n                    var preValidateSendSMS = await APIHelper(\"POST\", \"/receive_sms\", {\n                        bid: this.bookingId,\n                        From: this.bookingDetails.user.contact,\n                        Text: this.smsText,\n                        To: this.bookingDetails.zone.ToMobileNo,\n                        Mode: \"SMS\",\n                        webView: \"1\",\n                        preValidate: 1,\n                    });\n                    this.smsPending = false;\n                    if (\n                        preValidateSendSMS?.data?.status &&\n                        preValidateSendSMS.data.status\n                    ) {\n                        this.smsDialog = false;\n                        this.$router.replace({ path: \"/success\" });\n                        try {\n                            var sendSMS = await APIHelper(\"POST\", \"/receive_sms\", {\n                                bid: this.bookingId,\n                                From: this.bookingDetails.user.contact,\n                                Text: this.smsText,\n                                To: this.bookingDetails.zone.ToMobileNo,\n                                Mode: \"SMS\",\n                                webView: \"1\",\n                            });\n                            if (sendSMS?.data?.status && sendSMS.data.status) {\n                                this.smsDialog = false;\n                                this.postToLoggerAPI({\n                                    phone: this.bookingDetails.user.contact,\n                                    refId: this.bookingId,\n                                    icon: \"logout\",\n                                    statusText:\n                                        \"Parker checked out successfully using SMS - \" +\n                                        this.smsText,\n                                });\n                            } else {\n                                this.invalidSMSMsg = sendSMS?.data?.message\n                                    ? sendSMS.data.message\n                                    : \"Please try again\";\n                                this.invalidSMSDialog = true;\n                                this.postToLoggerAPI({\n                                    phone: this.bookingDetails.user.contact,\n                                    refId: this.bookingId,\n                                    error: this.invalidSMSMsg,\n                                    icon: \"logout\",\n                                    statusText:\n                                        \"Error occured while checking out using SMS - \" +\n                                        this.smsText,\n                                });\n                            }\n                        } catch (error) {\n                            console.log(error);\n                        }\n                    } else {\n                        this.invalidSMSMsg = preValidateSendSMS?.data?.message\n                            ? preValidateSendSMS.data.message\n                            : \"Please try again\";\n                        this.invalidSMSDialog = true;\n                        this.postToLoggerAPI({\n                            phone: this.bookingDetails.user.contact,\n                            refId: this.bookingId,\n                            error: this.invalidSMSMsg,\n                            icon: \"logout\",\n                            statusText:\n                                \"Error occured while checking out using SMS - \" + this.smsText,\n                        });\n                    }\n                } catch (error) {\n                    console.log(error);\n                }\n            }\n        },\n        getMobileOperatingSystem() {\n            var userAgent = navigator.userAgent || navigator.vendor || window.opera;\n            // Windows Phone must come first because its UA also contains \"Android\"\n            if (/windows phone/i.test(userAgent)) {\n                return \"Windows Phone\";\n            }\n\n            if (/android/i.test(userAgent)) {\n                return \"Android\";\n            }\n\n            // iOS detection from: http://stackoverflow.com/a/9039885/177710\n            if (/iPad|iPhone|iPod/.test(userAgent) && !window.MSStream) {\n                return \"iOS\";\n            }\n            return \"unknown\";\n        },\n        getExitIcon(exitId) {\n            let exitDetails = this.bookingDetails.exitOptions.find(\n                (p) => p.techType == exitId\n            );\n            return exitDetails.icon;\n        },\n        getExitText(exitId) {\n            let exitDetails = this.bookingDetails.exitOptions.find(\n                (p) => p.techType == exitId\n            );\n            return exitDetails.name;\n        },\n        openDialerApp() {\n            this.postToLoggerAPI({\n                phone: this.bookingDetails.user.contact,\n                refId: this.bookingId,\n                statusText: \"Parker clicked on dialer submit btn.\",\n            });\n            this.dialerDialog = false;\n            var url = \"tel:\" + this.bookingDetails.zone.ToMobileNo;\n            window.location.href = url;\n            if (this.getMobileOperatingSystem() == \"Android\") {\n                window.close();\n            }\n        },\n        turnCameraOn() {\n            this.camera = \"auto\";\n        },\n\n        turnCameraOff() {\n            this.camera = \"off\";\n        },\n        validateDecodedString(str) {\n            let validateDivrtStr = str.startsWith(\"divrt://\");\n            let validateMMID = str.split(\"/\")[2] == this.bookingDetails.booking.mmid;\n            let validateMajorId =\n                str.split(\"/\")[3] == this.bookingDetails.booking.majorid;\n            let validateMinorId = this.bookingDetails.booking.minor_ids.includes(\n                str.split(\"/\")[4]\n            );\n            return (\n                validateDivrtStr && validateMMID && validateMajorId && validateMinorId\n            );\n        },\n        async onDecode(decodedString) {\n            var self = this;\n            this.qrCode = decodedString;\n            this.cameraStatus = false;\n            try {\n                var preValidateQrResult = await APIHelper(\n                    \"POST\",\n                    \"/api/v1/checkout/\" + this.bookingId,\n                    {\n                        beaconId: decodedString,\n                        preValidate: 1,\n                        zid: this.bookingDetails.zone.locationCode\n                    }\n                );\n                if (preValidateQrResult.data.status) {\n                    try {\n                        self.$router.replace({ path: \"/success\" });\n                        var qrResult = await APIHelper(\n                            \"POST\",\n                            \"/api/v1/checkout/\" + this.bookingId,\n                            {\n                                beaconId: decodedString,\n                                zid: this.bookingDetails.zone.locationCode\n                            }\n                        );\n                        if (qrResult.data.status) {\n                            this.postToLoggerAPI({\n                                phone: self.bookingDetails.user.contact,\n                                refId: self.bookingId,\n                                icon: \"logout\",\n                                statusText:\n                                    \"Parker successfully checked out using QR - \" + decodedString,\n                            });\n                            this.$store.commit(\"SET_CHECKOUT\", true);\n                        } else {\n                            this.invalidQRMsg = qrResult?.data?.message\n                                ? qrResult.data.message\n                                : \"Please try again\";\n                            this.invalidQRDialog = true;\n                            this.postToLoggerAPI({\n                                phone: self.bookingDetails.user.contact,\n                                refId: self.bookingId,\n                                error: self.invalidQRMsg,\n                                icon: \"logout\",\n                                statusText:\n                                    \"Error Occured while checking out using QR - \" +\n                                    decodedString,\n                            });\n                        }\n                    } catch (error) {\n                        console.log(error);\n                    }\n                } else {\n                    this.invalidQRMsg = preValidateQrResult?.data?.message\n                        ? preValidateQrResult.data.message\n                        : \"Please try again\";\n                    this.invalidQRDialog = true;\n                    this.postToLoggerAPI({\n                        phone: self.bookingDetails.user.contact,\n                        refId: self.bookingId,\n                        icon: \"logout\",\n                        error: self.invalidQRMsg,\n                        statusText:\n                            \"Error Occured while checking out using QR - \" + decodedString,\n                    });\n                }\n            } catch (error) {\n                console.log(error);\n            }\n        },\n        async onInit(promise) {\n            try {\n                await promise;\n            } catch (error) {\n                if (error.name === \"NotAllowedError\") {\n                    this.invalidQRMsg = \"Please grant camera access permisson\";\n                } else if (error.name === \"NotFoundError\") {\n                    this.invalidQRMsg = \"No camera found on this device\";\n                } else if (error.name === \"NotSupportedError\") {\n                    this.invalidQRMsg = \"Secure context required (HTTPS, localhost)\";\n                } else if (error.name === \"NotReadableError\") {\n                    this.invalidQRMsg = \"Is the camera already in use? Please check.\";\n                } else if (error.name === \"OverconstrainedError\") {\n                    this.invalidQRMsg = \"Installed camera is not suitable\";\n                } else if (error.name === \"StreamApiNotSupportedError\") {\n                    this.invalidQRMsg = \"Stream API is not supported in this browser\";\n                }\n                this.invalidQRDialog = true;\n            }\n        },\n        async onValidateText() {\n            this.validateBookingPending = true;\n            let result = await this.validateBooking(this.validateBookingTxt);\n            if (!result.data.status) {\n                this.invalidSMSMsg = result?.data?.message\n                    ? result.data.message\n                    : \"Validation not recognized. Please try again\";\n                this.invalidSMSDialog = true;\n                this.validateBookingPending = false;\n                this.postToLoggerAPI({\n                    phone: this.bookingDetails.user.contact,\n                    refId: this.bookingId,\n                    error: this.invalidSMSMsg,\n                    icon: \"redeem\",\n                    statusText:\n                        \"Error in validating the session on entering validation code - \" +\n                        this.validateBookingTxt,\n                });\n            } else {\n                this.postToLoggerAPI({\n                    phone: this.bookingDetails.user.contact,\n                    refId: this.bookingId,\n                    icon: \"redeem\",\n                    statusText:\n                        \"Parker validated the session successfully by entering validation code - \" +\n                        this.validateBookingTxt,\n                });\n                this.goldenNugget = false;\n                this.validateBookingPending = false;\n                this.validateBookingDialog = false;\n                this.$store.commit(\n                    \"SET_VALIDATED_MERCHANT\",\n                    result?.data?.merchantName\n                );\n                this.$router.replace({ path: \"/validatesuccess\" });\n            }\n        },\n        async validateBooking(code) {\n            try {\n                let validateResult = await APIHelper(\n                    \"POST\",\n                    \"/api/v1/validate/\" + this.bookingId,\n                    {\n                        coupon: code,\n                        zid: this.bookingDetails.zone.locationCode\n                    }\n                );\n                return validateResult;\n            } catch (error) {\n                console.log(error);\n                return error;\n            }\n        },\n        async openScanValidationCode() {\n            this.validateBookingDialog = false;\n            this.validateBookingTxt = \"\";\n            this.validateQRCodeDialog = true;\n            this.validationCameraStatus = true;\n        },\n        async onValidateQRCode(decodedString) {\n            this.validationCameraStatus = false;\n            this.validateQRCodePending = true;\n            try {\n                let result = await this.validateBooking(decodedString);\n                if (!result.data.status) {\n                    this.invalidValidationQRMsg = result?.data?.message\n                        ? result.data.message\n                        : \"Validation not recognized. Please try again\";\n                    this.invalidValidationQRDialog = true;\n                    this.validateQRCodePending = false;\n                    this.postToLoggerAPI({\n                        phone: this.bookingDetails.user.contact,\n                        refId: this.bookingId,\n                        error: this.invalidQRMsg,\n                        icon: \"redeem\",\n                        statusText:\n                            \"Error in validating the session on scanning validation QR - \" +\n                            decodedString,\n                    });\n                } else {\n                    this.postToLoggerAPI({\n                        phone: this.bookingDetails.user.contact,\n                        refId: this.bookingId,\n                        icon: \"redeem\",\n                        statusText:\n                            \"Parker validated the session successfully by scanning validation QR - \" +\n                            decodedString,\n                    });\n                    this.validateQRCodePending = false;\n                    this.validateQRCodeDialog = false;\n                    this.$store.commit(\n                        \"SET_VALIDATED_MERCHANT\",\n                        result?.data?.merchantName\n                    );\n                    this.$router.replace({ path: \"/validatesuccess\" });\n                }\n            } catch (error) {\n                console.log(error);\n            }\n        },\n    },\n}\n</script>\n<style>\n.timing-values {\n    color: white;\n    font-size: 52px;\n\n}\n</style>"]}]}