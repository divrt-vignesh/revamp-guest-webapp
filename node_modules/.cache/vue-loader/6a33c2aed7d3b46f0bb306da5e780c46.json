{"remainingRequest":"/home/vignesh/DIVRT/guest-webapp/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/vignesh/DIVRT/guest-webapp/src/views/Create.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/vignesh/DIVRT/guest-webapp/src/views/Create.vue","mtime":1688372853737},{"path":"/home/vignesh/DIVRT/guest-webapp/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vignesh/DIVRT/guest-webapp/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/vignesh/DIVRT/guest-webapp/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vignesh/DIVRT/guest-webapp/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCi8vIGltcG9ydCBWdWUgZnJvbSAidnVlIjsKaW1wb3J0IEVzdGltYXRlIGZyb20gJy4uL2NvbXBvbmVudHMvRXN0aW1hdGUudnVlJwppbXBvcnQgeyBFdmVudEJ1cyB9IGZyb20gIkAvbGliL0V2ZW50QnVzIjsKaW1wb3J0IHsgbWFwR2V0dGVycyB9IGZyb20gInZ1ZXgiOwppbXBvcnQgeyBhZGRNaW51dGVzLCBhZGREYXlzLCBhZGRIb3VycyB9IGZyb20gImRhdGUtZm5zIjsKaW1wb3J0IHsgZm9ybWF0LCBpc1ZhbGlkIH0gZnJvbSAiZGF0ZS1mbnMiOwppbXBvcnQgInByaW1ldnVlL3Jlc291cmNlcy90aGVtZXMvc2FnYS1ibHVlL3RoZW1lLmNzcyIgICAgICAgLy90aGVtZQppbXBvcnQgInByaW1ldnVlL3Jlc291cmNlcy9wcmltZXZ1ZS5taW4uY3NzIiAgICAgICAgICAgICAgICAgLy9jb3JlIGNzcwppbXBvcnQgInByaW1laWNvbnMvcHJpbWVpY29ucy5jc3MiICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9pY29ucwppbXBvcnQgeyBkYXRlVG9UaW1lWm9uZURhdGUgfSBmcm9tICJAL3V0aWxzL2Zvcm1hdERhdGVUaW1lIjsKLy8gaW1wb3J0IGF4aW9zIGZyb20gImF4aW9zIjsKaW1wb3J0IENhbGVuZGFyIGZyb20gJy4uL3VpQ29tcG9uZW50cy9DYWxlbmRhci9DYWxlbmRhci52dWUnCmltcG9ydCBBUElIZWxwZXIgZnJvbSAiLi4vYXBpSGVscGVyIjsKaW1wb3J0IFZ1ZVBob25lTnVtYmVySW5wdXQgZnJvbSAidnVlLXBob25lLW51bWJlci1pbnB1dCI7CmltcG9ydCAidnVlLXBob25lLW51bWJlci1pbnB1dC9kaXN0L3Z1ZS1waG9uZS1udW1iZXItaW5wdXQuY3NzIjsKLy8gaW1wb3J0IG1vbWVudCBmcm9tICJtb21lbnQiOwovLyBWdWUudXNlKG1vbWVudCk7CmltcG9ydCBydWxlcyBmcm9tICJAL3V0aWxzL3J1bGVzIjsKZXhwb3J0IGRlZmF1bHQgewogIGRhdGE6ICgpID0+ICh7CiAgICBkYXRlOiAiIiwKICAgIHRpbWU6ICIiLAogICAgb3BlblRpbWVQaWNrZXI6IGZhbHNlLAogICAgb3BlbkRhdGVQaWNrZXI6IGZhbHNlLAogICAgbWluVGltZURhdGU6IG51bGwsCiAgICBtYXhUaW1lRGF0ZTogbnVsbCwKICAgIC8vIGlzUFFSRW5kUmVzZXJ2YXRpb246IHRydWUsCiAgICBjdXJyZW50RGF0ZTogZm9ybWF0KG5ldyBEYXRlKCksICd5eXl5LU1NLWRkJyksCiAgICBlZHRFbnRyeVRpbWU6IG51bGwsCiAgICBlZHRQaG9uZUlucHV0OiBmYWxzZSwKICAgIGNvbnRhY3REaXNhYmxlZDogZmFsc2UsCiAgICBzZWxlY3RlZFBsYXRlOiAiIiwKICAgIHJlRW50ZXJQbGF0ZTogZmFsc2UsCiAgICBlZHRCaWQ6IG51bGwsCiAgICBjb25maXJtQ3JlYXRlU2Vzc2lvbkRpYWxvZzogZmFsc2UsCiAgICBhZGRMaWNlbmNlUGxhdGVCdG5Mb2FkaW5nOiBmYWxzZSwKICAgIGVyckRpYWxvZzogZmFsc2UsCiAgICBlcnJNc2c6ICIiLAogICAgYWxlcnREaWFsb2c6IGZhbHNlLAogICAgYWxlcnRNc2c6ICIiLAogICAgc3RvcFRpbWU6ICIiLAogICAgZXhpdFRpbWVTZWxlY3RlZDoge30sCiAgICB0aW1lUGlja2VySHJSYW5nZTogbnVsbCwKICAgIHRpbWVFeGNlZWRlZDogZmFsc2UsCiAgICB0aW1lUGlja2VyTWluUmFuZ2U6IG51bGwsCgogICAgZGlzYWJsZUFkZFBheW1lbnRCdG46IGZhbHNlLAogICAgbWF4RGF0ZVRpbWU6IG51bGwsCiAgICBnZXRSYXRlQ2FsbDogZmFsc2UsCiAgICBnZXRSYXRlVGV4dDogIiIsCiAgICBUaW1lbWVudTogZmFsc2UsCiAgICBzdGFydERhdGU6ICIiLAogICAgZXN0aW1hdGU6IG51bGwsCiAgICBiZWZvcmVFc3RpbWF0ZTogbnVsbCwKICAgIERhdGVtZW51OiBmYWxzZSwKICAgIGV4aXREYXRlOiBudWxsLAogICAgZGF0ZUZvcm1hdHRlZDogbnVsbCwKICAgIHJ1bGVzOiBydWxlcywKICAgIGlzQ29udGFjdFZhbGlkOiB0cnVlLAogICAgbGljZW5jZVBsYXRlOiAiIiwKICAgIGNvbnRhY3RPYmo6IHt9LAogICAgbG9hZGluZzogZmFsc2UsCiAgICBjb250YWN0T3B0aW9uczogewogICAgICBjb2xvcjogIiMwMjg4RDEiLAogICAgICB2YWxpZENvbG9yOiAiIzAyODhEMSIsCiAgICAgIGNvbnRhY3RCb3JkZXJSYWRpdXM6IDAsCiAgICAgIGVycm9yQ29sb3I6ICIjRkY1MjUyIiwKICAgICAgZGVmYXVsdENvdW50cnk6ICJVUyIsCiAgICAgIHRyYW5zbGF0aW9uczogewogICAgICAgIHBob25lTnVtYmVyTGFiZWw6ICJDb250YWN0IE5vIiwKICAgICAgfSwKICAgIH0sCiAgICBhZGRQYXltZW50QnRuTG9hZGluZzogZmFsc2UsCiAgfSksCiAgY29tcG9uZW50czogewogICAgVnVlUGhvbmVOdW1iZXJJbnB1dCwgQ2FsZW5kYXIsIEVzdGltYXRlCiAgfSwKICBiZWZvcmVSb3V0ZUVudGVyKHRvLCBmcm9tLCBuZXh0KSB7CiAgICBuZXh0KGFzeW5jICh2bSkgPT4gewogICAgICBsZXQgc2VhcmNoUGFyYW1zID0gd2luZG93LmxvY2F0aW9uLnNlYXJjaC5zcGxpdCgiPSIpOwogICAgICBsZXQgc2VhcmNoUGFyYW1LZXkgPSBzZWFyY2hQYXJhbXMubGVuZ3RoID4gMCA/IHNlYXJjaFBhcmFtc1swXSA6ICIiOwogICAgICBsZXQgc2VhcmNoUGFyYW1WYWx1ZSA9IHNlYXJjaFBhcmFtcy5sZW5ndGggPiAwID8gc2VhcmNoUGFyYW1zWzFdIDogIiI7CiAgICAgIHN3aXRjaCAoc2VhcmNoUGFyYW1LZXkpIHsKICAgICAgICBjYXNlICI/emNvZGUiOgogICAgICAgICAgYXdhaXQgdm0uZ2V0Wm9uZURldGFpbHMoc2VhcmNoUGFyYW1LZXksIHNlYXJjaFBhcmFtVmFsdWUpOwogICAgICAgICAgaWYgKHZtLmlzUFFSRW5kUmVzZXJ2YXRpb24pIHsKICAgICAgICAgICAgYXdhaXQgdm0uZ2V0T25EZW1hbmRab25lRGV0YWlscyhzZWFyY2hQYXJhbVZhbHVlKTsKICAgICAgICAgICAgdm0uc2V0RGVmYXVsdERhdGUoKTsKICAgICAgICAgIH0KICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgIj9nYXRlaWQiOgogICAgICAgICAgLy9hd2FpdCBzZWxmLmdldFpvbmVEZXRhaWxzKHNlYXJjaFBhcmFtS2V5LCBzZWFyY2hQYXJhbVZhbHVlKTsKICAgICAgICAgIGJyZWFrOwogICAgICB9CiAgICAgIGlmICh2bS5pc1BRUkVuZFJlc2VydmF0aW9uKSB7CiAgICAgICAgdm0uY29udGFjdE9iaiA9CiAgICAgICAgICB2bS5jYXNpbm9EZXRhaWxzICE9IG51bGwgJiYKICAgICAgICAgICAgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwodm0uY2FzaW5vRGV0YWlscywgInVzZXJEZXRhaWwiKSAmJgogICAgICAgICAgICBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbCh2bS5jYXNpbm9EZXRhaWxzPy51c2VyRGV0YWlsLCAiY29udGFjdCIpICYmCiAgICAgICAgICAgIHZtLmNhc2lub0RldGFpbHM/LnVzZXJEZXRhaWw/LmNvbnRhY3QgIT0gdW5kZWZpbmVkICYmCiAgICAgICAgICAgIHZtLmNhc2lub0RldGFpbHM/LnVzZXJEZXRhaWw/LmNvbnRhY3QgIT0gbnVsbAogICAgICAgICAgICA/IE9iamVjdC5hc3NpZ24odm0uY29udGFjdE9iaiwgewogICAgICAgICAgICAgIGNvdW50cnlDb2RlOgogICAgICAgICAgICAgICAgdm0uY2FzaW5vRGV0YWlscz8udXNlckRldGFpbD8uY29udGFjdC5zbGljZSgwLCAtMTApID09ICIrOTEiCiAgICAgICAgICAgICAgICAgID8gIklOIgogICAgICAgICAgICAgICAgICA6IHZtLmNhc2lub0RldGFpbHM/LnVzZXJEZXRhaWw/LmNvbnRhY3Quc2xpY2UoMCwgLTEwKSA9PQogICAgICAgICAgICAgICAgICAgICIrMSIKICAgICAgICAgICAgICAgICAgICA/ICJVUyIKICAgICAgICAgICAgICAgICAgICA6ICIiLAogICAgICAgICAgICAgIHBob25lTnVtYmVyOiB2bS5jYXNpbm9EZXRhaWxzPy51c2VyRGV0YWlsPy5jb250YWN0LAogICAgICAgICAgICAgIGZvcm1hdHRlZE51bWJlcjogIisiICsgdm0uY2FzaW5vRGV0YWlscy51c2VyRGV0YWlsLmNvbnRhY3QsCiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIDoge307CiAgICAgICAgdm0ubGljZW5jZVBsYXRlID0gdm0uY2FzaW5vRGV0YWlscz8udXNlckRldGFpbC5wbGF0ZQogICAgICAgICAgPyB2bS5jYXNpbm9EZXRhaWxzPy51c2VyRGV0YWlsLnBsYXRlCiAgICAgICAgICA6ICIiOwogICAgICAgIGlmICh3aW5kb3cubG9jYXRpb24uaHJlZi5pbmNsdWRlcygnYmlkJykpIHsKICAgICAgICAgIGxldCBocmVmUGFyYW1zID0gd2luZG93LmxvY2F0aW9uLmhyZWYuc3BsaXQoJ2NyZWF0ZXNlc3Npb24nKTsKICAgICAgICAgIGxldCBwYXJhbUFycmF5ID0gaHJlZlBhcmFtc1sxXS5zcGxpdCgnJicpCiAgICAgICAgICBsZXQgcGhvbmVQYXJhbSA9IHBhcmFtQXJyYXkubGVuZ3RoID49IDEgPyBwYXJhbUFycmF5WzBdLnNwbGl0KCc9JylbMV0gOiAiIjsKICAgICAgICAgIGxldCBiaWRQYXJhbSA9IHBhcmFtQXJyYXkubGVuZ3RoID49IDIgPyBwYXJhbUFycmF5WzFdLnNwbGl0KCc9JylbMV0gOiAiIjsKICAgICAgICAgIGxldCBwbGF0ZVBhcmFtID0gcGFyYW1BcnJheS5sZW5ndGggPj0gMyA/IHBhcmFtQXJyYXlbMl0uc3BsaXQoJz0nKVsxXSA6ICIiOwogICAgICAgICAgbGV0IGVudHJ5dGltZXBhcmFtID0gcGFyYW1BcnJheS5sZW5ndGggPj0gNCA/IHBhcmFtQXJyYXlbM10uc3BsaXQoJz0nKVsxXSA6ICIiOyAgICAgICAgICAvLyB2bS5jb250YWN0T2JqLnBob25lTnVtYmVyID0gcGhvbmVQYXJhbTsKICAgICAgICAgIHZtLmVkdEVudHJ5VGltZSA9IGVudHJ5dGltZXBhcmFtICE9IG51bGwgJiYgZW50cnl0aW1lcGFyYW0gIT09ICIiICYmIGVudHJ5dGltZXBhcmFtICE9IHVuZGVmaW5lZCA/IGZvcm1hdChuZXcgRGF0ZSh2bS5mb3JtYXRFeGl0RGF0ZVRpbWUoZW50cnl0aW1lcGFyYW0sICdkYXRlJykpLCAieXl5eS1NTS1kZCdUJ0hIOm1tOnNzIikgOiBmb3JtYXQoZGF0ZVRvVGltZVpvbmVEYXRlKG5ldyBEYXRlKCksIHZtLnpvbmVEZXRhaWxzLnRpbWV6b25lKSwgInl5eXktTU0tZGQnVCdISDptbTpzcyIpCiAgICAgICAgICB2bS5saWNlbmNlUGxhdGUgPSBwbGF0ZVBhcmFtOwogICAgICAgICAgdm0uZWR0QmlkID0gYmlkUGFyYW07CiAgICAgICAgICBsZXQgZ3Vlc3RDb250YWN0ID0gcGhvbmVQYXJhbSA/IHsKICAgICAgICAgICAgY291bnRyeUNvZGU6CiAgICAgICAgICAgICAgcGhvbmVQYXJhbS5zbGljZSgwLCAtMTApID09ICI5MSIKICAgICAgICAgICAgICAgID8gIklOIgogICAgICAgICAgICAgICAgOiBwaG9uZVBhcmFtLnNsaWNlKDAsIC0xMCkgPT0gIjEiCiAgICAgICAgICAgICAgICAgID8gIlVTIgogICAgICAgICAgICAgICAgICA6ICIiLAogICAgICAgICAgICBwaG9uZU51bWJlcjogcGhvbmVQYXJhbSwKICAgICAgICAgICAgZm9ybWF0dGVkTnVtYmVyOiAiKyIgKyBwaG9uZVBhcmFtLAogICAgICAgICAgfSA6IHZtLmNvbnRhY3RPYmo7CiAgICAgICAgICBpZiAocGhvbmVQYXJhbSAhPT0gIiIgJiYgcGhvbmVQYXJhbSAhPT0gbnVsbCAmJiBwaG9uZVBhcmFtICE9IHVuZGVmaW5lZCkgewogICAgICAgICAgICB2bS5lZHRQaG9uZUlucHV0ID0gdHJ1ZTsKICAgICAgICAgICAgdm0uY29udGFjdE9iaiA9IE9iamVjdC5hc3NpZ24oe30sIGd1ZXN0Q29udGFjdCk7CiAgICAgICAgICAgIHZtLmNvbnRhY3REaXNhYmxlZCA9IHRydWU7CiAgICAgICAgICAgIHZtLmNvbnRhY3RPYmouaXNWYWxpZCA9IHRydWU7CiAgICAgICAgICB9CiAgICAgICAgICBsZXQgY29tbWl0RGF0YSA9IHsKICAgICAgICAgICAgcGxhdGU6IHZtLmxpY2VuY2VQbGF0ZSwKICAgICAgICAgICAgY29udGFjdDogdm0uY29udGFjdE9iaj8uZm9ybWF0dGVkTnVtYmVyLAogICAgICAgICAgICBiaWQ6IHZtLmVkdEJpZCwKICAgICAgICAgICAgZW50cnl0aW1lOiB2bS5lZHRFbnRyeVRpbWUsCiAgICAgICAgICAgIGVkdFBhcmFtczogaHJlZlBhcmFtc1sxXQogICAgICAgICAgfQogICAgICAgICAgdm0uJHN0b3JlLmNvbW1pdCgiU0VUX0NBU0lOT19VU0VSREVUQUlMUyIsIGNvbW1pdERhdGEpOwogICAgICAgICAgdm0uJHN0b3JlLmNvbW1pdCgiU0VUX1RFTVBMQVRFX0ZMQUdTIiwgJ2F0bGFudGljLWZsYWcnKTsKCiAgICAgICAgfQogICAgICB9CiAgICAgIGVsc2UgewogICAgICAgIHZtLmVkdFBob25lSW5wdXQgPSBmYWxzZTsKICAgICAgfQogICAgfSk7CiAgfSwKICB3YXRjaDogewogICAgdGltZShuZXdWYWwsIG9sZFZhbCkgewogICAgICBpZiAob2xkVmFsICE9IG51bGwgJiYgbmV3VmFsICE9IG51bGwgJiYgb2xkVmFsICE9IG5ld1ZhbCAmJiBvbGRWYWwgIT0gIiIgJiYgbmV3VmFsICE9ICIiICYmIChpc1ZhbGlkKG5ld1ZhbCkpKSB7CiAgICAgICAgdGhpcy5yb3VuZChuZXdWYWwpOwogICAgICB9CiAgICAgIC8vIHRoaXMuc2V0VGltZVBpY2tlcihuZXdWYWwpOwogICAgfSwKICB9LAogIGNvbXB1dGVkOiB7CiAgICBmb3JtYXR0ZWREYXRlVGltZSgpIHsKICAgICAgcmV0dXJuIHRoaXMudGltZSAhPT0gbnVsbCAmJiB0aGlzLnRpbWUgIT09IHVuZGVmaW5lZCAmJiB0aGlzLnRpbWUgIT09ICIiID8gZm9ybWF0KHRoaXMudGltZSwgJ2lpaSwgTExMIGRkJykgOiAiIgogICAgfSwKICAgIGZvcm1hdHRlZFllYXIoKSB7CiAgICAgIHJldHVybiB0aGlzLnRpbWUgIT09IG51bGwgJiYgdGhpcy50aW1lICE9PSB1bmRlZmluZWQgJiYgdGhpcy50aW1lICE9PSAiIiA/IGZvcm1hdCh0aGlzLnRpbWUsICd5eXl5JykgOiAiIgogICAgfSwKICAgIGZvcm1hdHRlZFRpbWUoKSB7CiAgICAgIHJldHVybiB0aGlzLnRpbWUgIT09IG51bGwgJiYgdGhpcy50aW1lICE9PSB1bmRlZmluZWQgJiYgdGhpcy50aW1lICE9PSAiIiA/IGZvcm1hdCh0aGlzLnRpbWUsICdoaDptbSBhYScpIDogIiIKICAgIH0sCiAgICAuLi5tYXBHZXR0ZXJzKHsKICAgICAgY2FzaW5vRGV0YWlsczogImdldHRlckNhc2lub0RldGFpbHMiLAogICAgICB6b25lRGV0YWlsczogImdldHRlclpvbmVEZXRhaWxzIiwKICAgICAgb25EZW1hbmRab25lRGV0YWlsczogImdldHRlck9uRGVtYW5kWm9uZURldGFpbHMiLAogICAgICB0ZW1wbGF0ZUZsYWdzOiAiZ2V0dGVyVGVtcGxhdGVGbGFncyIsCiAgICAgIGlzUFFSRW5kUmVzZXJ2YXRpb246ICJnZXR0ZXJab25lSXNQUVJFbmRSZXNlcnZhdGlvbiIsCiAgICB9KSwKICAgIHNpbmdsZVF1b3RlcygpIHsKICAgICAgcmV0dXJuIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKHRoaXMuem9uZURldGFpbHMsICd0aW1lUGlja2VyQ29uZmlndXJhdGlvbicpICYmIHRoaXMuem9uZURldGFpbHMudGltZVBpY2tlckNvbmZpZ3VyYXRpb24gPT0gIjAiID8gKGZvcm1hdCh0aGlzLnRpbWUsICd5eXl5LU1NLWRkJykgPT0gdGhpcy5jdXJyZW50RGF0ZSB8fCAodGhpcy5iZWZvcmVFc3RpbWF0ZSAhPT0gbnVsbCAmJiB0aGlzLmJlZm9yZUVzdGltYXRlICE9PSB1bmRlZmluZWQgJiYgdGhpcy5iZWZvcmVFc3RpbWF0ZSAhPT0gIiIgJiYgdGhpcy5lc3RpbWF0ZSAhPT0gbnVsbCAmJiB0aGlzLmVzdGltYXRlICE9PSB1bmRlZmluZWQgJiYgdGhpcy5lc3RpbWF0ZSAhPT0gIiIgJiYgdGhpcy5iZWZvcmVFc3RpbWF0ZS5ncmFuZFRvdGFsID09IHRoaXMuZXN0aW1hdGUuZ3JhbmRUb3RhbCkpIDogdHJ1ZQogICAgfSwKICAgIGRvdWJsZVF1b3RlcygpIHsKICAgICAgcmV0dXJuIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKHRoaXMuem9uZURldGFpbHMsICd0aW1lUGlja2VyQ29uZmlndXJhdGlvbicpICYmIHRoaXMuem9uZURldGFpbHMudGltZVBpY2tlckNvbmZpZ3VyYXRpb24gPT0gIjAiID8gKGZvcm1hdCh0aGlzLnRpbWUsICd5eXl5LU1NLWRkJykgIT0gdGhpcy5jdXJyZW50RGF0ZSAmJiAodGhpcy5iZWZvcmVFc3RpbWF0ZSAhPT0gbnVsbCAmJiB0aGlzLmJlZm9yZUVzdGltYXRlICE9PSB1bmRlZmluZWQgJiYgdGhpcy5iZWZvcmVFc3RpbWF0ZSAhPT0gIiIgJiYgdGhpcy5lc3RpbWF0ZSAhPT0gbnVsbCAmJiB0aGlzLmVzdGltYXRlICE9PSB1bmRlZmluZWQgJiYgdGhpcy5lc3RpbWF0ZSAhPT0gIiIgJiYgdGhpcy5iZWZvcmVFc3RpbWF0ZS5ncmFuZFRvdGFsICE9IHRoaXMuZXN0aW1hdGUuZ3JhbmRUb3RhbCkpIDogZmFsc2UKICAgIH0sCiAgICBmb3JtYXR0ZWRFbnRyeURpc3BsYXlUaW1lKCkgewogICAgICByZXR1cm4gdGhpcy5jYXNpbm9EZXRhaWxzLnVzZXJEZXRhaWwuZW50cnl0aW1lICE9PSBudWxsICYmIHRoaXMuY2FzaW5vRGV0YWlscy51c2VyRGV0YWlsLmVudHJ5dGltZSAhPT0gdW5kZWZpbmVkICYmIHRoaXMuY2FzaW5vRGV0YWlscy51c2VyRGV0YWlsLmVudHJ5dGltZSAhPT0gIiIgPyBmb3JtYXQoKG5ldyBEYXRlKHRoaXMuY2FzaW5vRGV0YWlscy51c2VyRGV0YWlsLmVudHJ5dGltZSkpLCAnaGg6bW0gYScpIDogZm9ybWF0KGRhdGVUb1RpbWVab25lRGF0ZShuZXcgRGF0ZSgpLCB0aGlzLnpvbmVEZXRhaWxzLnRpbWV6b25lKSwgJ2hoOm1tIGEnKTsKICAgIH0sCiAgICBpbmZvRmxhZygpIHsKICAgICAgcmV0dXJuIHRoaXMuY29udGFjdE9iaiA9PSBudWxsIHx8CiAgICAgICAgIXRoaXMuY29udGFjdE9iai5pc1ZhbGlkIHx8CiAgICAgICAgdGhpcy5jb250YWN0T2JqLnBob25lTnVtYmVyID09ICIiIHx8CiAgICAgICAgdGhpcy5jb250YWN0T2JqLnBob25lTnVtYmVyID09IG51bGwgfHwKICAgICAgICB0aGlzLmxpY2VuY2VQbGF0ZSA9PT0gIiIgfHwKICAgICAgICB0aGlzLmxpY2VuY2VQbGF0ZSA9PT0gbnVsbAogICAgICAgID8gZmFsc2UKICAgICAgICA6IHRydWU7CiAgICB9LAogICAgdGltZUZsYWcoKSB7CiAgICAgIHJldHVybiB0aGlzLnRpbWUgPT0gbnVsbCB8fAogICAgICAgIHRoaXMuZGlzYWJsZUFkZFBheW1lbnRCdG4gfHwKICAgICAgICB0aGlzLmVzdGltYXRlID09PSBudWxsIHx8CiAgICAgICAgdGhpcy5lc3RpbWF0ZSA9PT0gIiIgfHwgKE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKHRoaXMuem9uZURldGFpbHMsICd0aW1lUGlja2VyQ29uZmlndXJhdGlvbicpICYmIHRoaXMuem9uZURldGFpbHMudGltZVBpY2tlckNvbmZpZ3VyYXRpb24gPT0gIjEiICYmIGZvcm1hdCh0aGlzLnRpbWUsICd5eXl5LU1NLWRkJykgIT0gZm9ybWF0KHRoaXMubWluVGltZURhdGUsICd5eXl5LU1NLWRkJykgJiYgKHRoaXMuYmVmb3JlRXN0aW1hdGUgPT09IG51bGwgfHwgdGhpcy5iZWZvcmVFc3RpbWF0ZSA9PSAiIiB8fCB0aGlzLmJlZm9yZUVzdGltYXRlID09IHVuZGVmaW5lZCkpIHx8CiAgICAgICAgdGhpcy50aW1lID09PSAiIiB8fCB0aGlzLnRpbWUgPT0gdW5kZWZpbmVkCiAgICAgICAgPyBmYWxzZQogICAgICAgIDogdHJ1ZTsKICAgIH0sCiAgICBwYXltZW50RmxhZygpIHsKICAgICAgcmV0dXJuIHRoaXMuZXN0aW1hdGUgPT09IG51bGwgfHwKICAgICAgICB0aGlzLmVzdGltYXRlID09PSAiIiB8fAogICAgICAgIHRoaXMuZXN0aW1hdGUuaGFzT3duUHJvcGVydHkuY2FsbCgiZ3JhbmRUb3RhbCIpIHx8CiAgICAgICAgdGhpcy5lc3RpbWF0ZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKCJ0b3RhbFByaWNlIikgfHwKICAgICAgICB0aGlzLmVzdGltYXRlLmhhc093blByb3BlcnR5LmNhbGwoInRvdGFsRmVlIikgfHwKICAgICAgICB0aGlzLmVzdGltYXRlLmhhc093blByb3BlcnR5LmNhbGwoInRvdGFsVGF4IikgfHwgKHRoaXMuem9uZURldGFpbHM/LnRpbWVQaWNrZXJDb25maWd1cmF0aW9uID09ICcxJyAmJiB0aGlzLmJlZm9yZUVzdGltYXRlID09PSBudWxsICYmIHRoaXMuYmVmb3JlRXN0aW1hdGUgPT09ICIiICYmIHRoaXMuYmVmb3JlRXN0aW1hdGUgPT09IG51bGwgJiYgdGhpcy5iZWZvcmVFc3RpbWF0ZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKCJ0b3RhbFByaWNlIikgJiYgdGhpcy5iZWZvcmVFc3RpbWF0ZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKCJ0b3RhbEZlZSIpICYmIHRoaXMuYmVmb3JlRXN0aW1hdGUuaGFzT3duUHJvcGVydHkuY2FsbCgidG90YWxUYXgiKSkKICAgICAgICA/IGZhbHNlCiAgICAgICAgOiB0cnVlOwogICAgfSwKICAgIGNvbXB1dGVkRGF0ZUZvcm1hdHRlZCgpIHsKICAgICAgcmV0dXJuIHRoaXMudGltZSAhPSBudWxsICYmIHRoaXMudGltZSAhPSAiIiAmJiB0aGlzLnRpbWUgIT0gdW5kZWZpbmVkID8gZm9ybWF0KHRoaXMudGltZSwgJ01NL2RkL3l5eXknKSA6ICIiCiAgICB9LAogICAgZGlzYWJsZVN1Ym1pdEJ0bigpIHsKICAgICAgbGV0IGRpc2FibGVkID0KICAgICAgICB0aGlzLmNvbnRhY3RPYmogPT0gbnVsbCB8fAogICAgICAgICF0aGlzLmNvbnRhY3RPYmouaXNWYWxpZCB8fAogICAgICAgIHRoaXMuY29udGFjdE9iai5waG9uZU51bWJlciA9PSAiIiB8fAogICAgICAgIHRoaXMuY29udGFjdE9iai5waG9uZU51bWJlciA9PSBudWxsIHx8CiAgICAgICAgdGhpcy5saWNlbmNlUGxhdGUgPT09ICIiIHx8CiAgICAgICAgdGhpcy5saWNlbmNlUGxhdGUgPT09IG51bGwgfHwKICAgICAgICB0aGlzLmRpc2FibGVBZGRQYXltZW50QnRuIHx8CiAgICAgICAgdGhpcy5lc3RpbWF0ZSA9PT0gbnVsbCB8fAogICAgICAgIHRoaXMuZXN0aW1hdGUgPT09ICIiCiAgICAgIHRoaXMuZXhpdERhdGUgPT09ICIiOwogICAgICBsZXQgc2VsZWN0ZWRNaW5zID0gdGhpcy50aW1lICE9PSBudWxsICYmIHRoaXMudGltZSAhPT0gdW5kZWZpbmVkICYmIHRoaXMudGltZSAhPT0gIiIgPyBmb3JtYXQodGhpcy50aW1lLCAnbW0nKSA6IG5ldyBEYXRlKCk7CiAgICAgIGxldCBzZWxlY3RlZEhvdXJzID0gdGhpcy50aW1lICE9PSBudWxsICYmIHRoaXMudGltZSAhPT0gdW5kZWZpbmVkICYmIHRoaXMudGltZSAhPT0gIiIgPyBmb3JtYXQodGhpcy50aW1lLCAnaGgnKSA6IG5ldyBEYXRlKCk7CiAgICAgIGxldCBzZWxlY3RlZEFNUE0gPSB0aGlzLnRpbWUgIT09IG51bGwgJiYgdGhpcy50aW1lICE9PSB1bmRlZmluZWQgJiYgdGhpcy50aW1lICE9PSAiIiA/IGZvcm1hdCh0aGlzLnRpbWUsICdhYWEnKSA6IG5ldyBEYXRlKCk7CiAgICAgIGRpc2FibGVkID0KICAgICAgICBkaXNhYmxlZCB8fAogICAgICAgIHNlbGVjdGVkTWlucyA9PSBudWxsIHx8CiAgICAgICAgc2VsZWN0ZWRNaW5zID09PSAiIiB8fAogICAgICAgIHNlbGVjdGVkTWlucyA9PSB1bmRlZmluZWQgfHwKICAgICAgICBzZWxlY3RlZEhvdXJzID09IG51bGwgfHwKICAgICAgICBzZWxlY3RlZEhvdXJzID09PSAiIiB8fAogICAgICAgIHNlbGVjdGVkSG91cnMgPT0gdW5kZWZpbmVkIHx8IHNlbGVjdGVkQU1QTSA9PSBudWxsIHx8CiAgICAgICAgc2VsZWN0ZWRBTVBNID09PSAiIiB8fAogICAgICAgIHNlbGVjdGVkQU1QTSA9PSB1bmRlZmluZWQgfHwgdGhpcy50aW1lID09PSBudWxsIHx8IHRoaXMudGltZSA9PT0gIiIgfHwgdGhpcy50aW1lID09PSB1bmRlZmluZWQKICAgICAgZGlzYWJsZWQgPQogICAgICAgIHRoaXMubGljZW5jZVBsYXRlICE9ICIiICYmIHRoaXMubGljZW5jZVBsYXRlICE9IG51bGwKICAgICAgICAgID8gZGlzYWJsZWQgfHwgL15bYS16MC05XSskL2kudGVzdCh0aGlzLmxpY2VuY2VQbGF0ZSkgPT09IGZhbHNlCiAgICAgICAgICA6IGRpc2FibGVkOwogICAgICByZXR1cm4gZGlzYWJsZWQ7CiAgICB9LAogICAgZGlzYWJsZUFkZExpY2VuY2VQbGF0ZUJ0bigpIHsKICAgICAgaWYgKHRoaXMuem9uZURldGFpbHMubHByX3N0YXR1cyA9PSAiMCIpIHsKICAgICAgICByZXR1cm4gdGhpcy5pc0NvbnRhY3RWYWxpZCA9PSBmYWxzZSA/IHRydWUgOiBmYWxzZTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gdGhpcy5pc0NvbnRhY3RWYWxpZCA9PSBmYWxzZSB8fAogICAgICAgICAgdGhpcy5saWNlbmNlUGxhdGUgPT0gIiIgfHwKICAgICAgICAgIHRoaXMubGljZW5jZVBsYXRlID09IG51bGwgfHwKICAgICAgICAgIC9eW2EtejAtOV0rJC9pLnRlc3QodGhpcy5saWNlbmNlUGxhdGUpID09PSBmYWxzZQogICAgICAgICAgPyB0cnVlCiAgICAgICAgICA6IGZhbHNlOwogICAgICB9CiAgICB9LAogIH0sCiAgbW91bnRlZCgpIHsKICAgIEV2ZW50QnVzLiRvbignU0VUX1RJTUUnLCAoKSA9PiB7CiAgICAgIHRoaXMub25UaW1lUGlja2VyQ2hhbmdlKCk7CiAgICB9KQogICAgdGhpcy5zZXREZWZhdWx0RGF0ZSgpOwogIH0sCiAgbWV0aG9kczogewogICAgcm91bmQodGltZSkgewogICAgICBsZXQgZXhpdGRhdGUgPSB0aW1lICE9PSBudWxsICYmIHRpbWUgIT09ICcnID8gZm9ybWF0KHRpbWUsICd5eXl5L01NL2RkJykgOiBuZXcgRGF0ZSgpOwoKICAgICAgbGV0IHNlbGVjdGVkTWlucyA9IHRpbWUgIT09IG51bGwgJiYgdGltZSAhPT0gJycgPyBmb3JtYXQodGltZSwgJ21tJykgOiBuZXcgRGF0ZSgpOwogICAgICBsZXQgc2VsZWN0ZWRIb3VycyA9IHRpbWUgIT09IG51bGwgJiYgdGltZSAhPT0gJycgPyBmb3JtYXQodGltZSwgJ2hoJykgOiBuZXcgRGF0ZSgpOwogICAgICBsZXQgc2VsZWN0ZWRBTVBNID0gdGltZSAhPT0gbnVsbCAmJiB0aW1lICE9PSAnJyA/IGZvcm1hdCh0aW1lLCAnYWFhJykgOiBuZXcgRGF0ZSgpOwogICAgICBpZiAoZXhpdGRhdGUgIT0gbnVsbCAmJiBzZWxlY3RlZE1pbnMgIT0gJzE1JyAmJiBzZWxlY3RlZE1pbnMgIT0gJzMwJyAmJiBzZWxlY3RlZE1pbnMgIT0gJzQ1JyAmJiBzZWxlY3RlZE1pbnMgIT0gJzAwJyAmJiBzZWxlY3RlZE1pbnMgIT0gbnVsbCAmJiBzZWxlY3RlZE1pbnMgIT0gIiIgJiYgc2VsZWN0ZWRIb3VycyAhPSBudWxsICYmIHNlbGVjdGVkSG91cnMgIT0gIiIgJiYgc2VsZWN0ZWRBTVBNICE9IG51bGwgJiYgc2VsZWN0ZWRBTVBNICE9ICIiKSB7CiAgICAgICAgbGV0IGludGVydmFsTWlsbGlzZWNvbmRzID0gOTAwMDAwCiAgICAgICAgbGV0IGRhdGV0aW1lID0gbmV3IERhdGUoZXhpdGRhdGUgKyAiICIgKyBzZWxlY3RlZEhvdXJzICsgIjoiICsgc2VsZWN0ZWRNaW5zICsgIiAiICsgc2VsZWN0ZWRBTVBNKQogICAgICAgIGxldCBpbnRlcnZhbCA9IGRhdGV0aW1lLmdldFRpbWUoKSAlIGludGVydmFsTWlsbGlzZWNvbmRzOwogICAgICAgIGxldCBkZWx0YSA9IGludGVydmFsID09PSAwID8gMCA6IGRhdGV0aW1lLmdldFRpbWUoKSAtIGludGVydmFsOwogICAgICAgIGRlbHRhICs9IGludGVydmFsTWlsbGlzZWNvbmRzOwogICAgICAgIC8vIHRoaXMuZXhpdFRpbWVTZWxlY3RlZCA9IE9iamVjdC5hc3NpZ24odGhpcy5leGl0VGltZVNlbGVjdGVkLCB7IGhoOiBmb3JtYXQobmV3IERhdGUoZGVsdGEpLCAnaGgnKSwgbW06IGZvcm1hdChuZXcgRGF0ZShkZWx0YSksICdtbScpLCBhOiBmb3JtYXQobmV3IERhdGUoZGVsdGEpLCAnYScpLCB9KQogICAgICAgIHJldHVybiBpbnRlcnZhbCAhPT0gMCA/IG5ldyBEYXRlKGRlbHRhKSA6IGRhdGV0aW1lOwogICAgICB9CiAgICB9LAogICAgZGF0ZUNoYW5nZSgpIHsKICAgICAgdGhpcy5kYXRlVGltZUNoYW5nZSgpOwogICAgICBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbCh0aGlzLnpvbmVEZXRhaWxzLCAndGltZVBpY2tlckNvbmZpZ3VyYXRpb24nKSAmJiB0aGlzLnpvbmVEZXRhaWxzPy50aW1lUGlja2VyQ29uZmlndXJhdGlvbiA9PSAiMSIgPyB0aGlzLmJlZm9yZURhdGVUaW1lQ2hhbmdlKCkgOiAiIjsKICAgIH0sCiAgICBmb3JtYXRFeGl0RGF0ZVRpbWUodGltZSwgdmFsKSB7CiAgICAgIGlmICh0aW1lICE9PSBudWxsICYmIHRpbWUgIT09IHVuZGVmaW5lZCAmJiB0aW1lICE9ICcnKSB7CiAgICAgICAgbGV0IHV0Y0RhdGUgPSBuZXcgRGF0ZSh0aW1lICogMTAwMCkudG9VVENTdHJpbmcoKTsgLy8iV2VkLCAyNyBKYW4gMjAyMSAxMzo1OTowNCBHTVQiCiAgICAgICAgbGV0IG1vbnRoID0gdXRjRGF0ZS5zcGxpdCgiLCIpWzFdLnNwbGl0KCIgIilbMl07IC8vIEphbgogICAgICAgIGxldCBkYXRlID0gdXRjRGF0ZS5zcGxpdCgiLCIpWzFdLnNwbGl0KCIgIilbMV07IC8vIDI3CiAgICAgICAgbGV0IHllYXIgPSB1dGNEYXRlLnNwbGl0KCIsIilbMV0uc3BsaXQoIiAiKVszXTsKICAgICAgICBsZXQgaHIgPSB1dGNEYXRlLnNwbGl0KCIsIilbMV0uc3BsaXQoIiAiKVs0XS5zcGxpdCgiOiIpWzBdOyAvLyAxMwogICAgICAgIGxldCBtaW4gPSB1dGNEYXRlLnNwbGl0KCIsIilbMV0uc3BsaXQoIiAiKVs0XS5zcGxpdCgiOiIpWzFdOyAvLzU5CiAgICAgICAgbGV0IGZvcm1hdEhyID0gTnVtYmVyKGhyKSA+IDEyID8gTnVtYmVyKGhyKSAtIDEyIDogTnVtYmVyKGhyKTsgLy8gMQogICAgICAgIGZvcm1hdEhyID0gTnVtYmVyKGZvcm1hdEhyKSA+PSAxMCA/IE51bWJlcihmb3JtYXRIcikgOiBmb3JtYXRIcjsgLy8wMQogICAgICAgIGxldCBhbU9ycG0gPSBOdW1iZXIoaHIpID49IDEyID8gInAiIDogImEiOyAvL1BNCiAgICAgICAgbGV0IGFtcG0gPSBOdW1iZXIoaHIpID49IDEyID8gIlBNIiA6ICJBTSI7CiAgICAgICAgc3dpdGNoICh2YWwpIHsKICAgICAgICAgIGNhc2UgJ2hvdXInOiB7CiAgICAgICAgICAgIHJldHVybiBmb3JtYXRIciArIGFtT3JwbTsKICAgICAgICAgIH0KICAgICAgICAgIGNhc2UgJ21pbnMnOiB7CiAgICAgICAgICAgIHJldHVybiBtaW4KICAgICAgICAgIH0KICAgICAgICAgIGNhc2UgJ2RhdGUnOiB7CiAgICAgICAgICAgIHJldHVybiBtb250aCArICIgIiArIGRhdGUgKyAiLCAiICsgeWVhciArICIgIiArIGZvcm1hdEhyICsgIjoiICsgbWluICsgIiAiICsgYW1wbTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgICAgLy9KYW4gMjcsIDAxOjU5IFBNCiAgICB9LAogICAgcmVsb2FkQm9va2luZygpIHsKICAgICAgbGV0IHVybCA9IHdpbmRvdy5sb2NhdGlvbi5vcmlnaW4gKyAiL2cvIiArIHRoaXMuY2FzaW5vRGV0YWlscy51c2VyRGV0YWlsLmJpZDsKICAgICAgd2luZG93LmxvY2F0aW9uLnJlcGxhY2UodXJsKTsKICAgIH0sCiAgICBzZXREZWZhdWx0RGF0ZSgpIHsKICAgICAgdGhpcy5kYXRlRm9ybWF0dGVkID0gdGhpcy56b25lRGV0YWlscy50aW1lem9uZSA/IGZvcm1hdCgKICAgICAgICBkYXRlVG9UaW1lWm9uZURhdGUoYWRkTWludXRlcyhuZXcgRGF0ZSgpLCAxNSksCiAgICAgICAgICB0aGlzLnpvbmVEZXRhaWxzLnRpbWV6b25lCiAgICAgICAgKSwKICAgICAgICAiTU0vZGQveXl5eSIKICAgICAgKQogICAgICAgIDogZm9ybWF0KGFkZE1pbnV0ZXMobmV3IERhdGUoKSwgMTUpLCAiTU0vZGQveXl5eSIpOwogICAgICB0aGlzLnRpbWUgPSB0aGlzLnpvbmVEZXRhaWxzLnRpbWV6b25lCiAgICAgICAgPwogICAgICAgIGRhdGVUb1RpbWVab25lRGF0ZSgKICAgICAgICAgIGFkZE1pbnV0ZXMobmV3IERhdGUoKSwgMTUpLAogICAgICAgICAgdGhpcy56b25lRGV0YWlscy50aW1lem9uZQogICAgICAgICkKICAgICAgICA6IGFkZE1pbnV0ZXMobmV3IERhdGUoKSwgMTUpOwogICAgICBsZXQgZmlmdGVlblRpbWUgPSB0aGlzLnRpbWU7CiAgICAgIHRoaXMudGltZSA9IGZvcm1hdCh0aGlzLnRpbWUsICdtbScpID09PSAnMTUnIHx8IGZvcm1hdCh0aGlzLnRpbWUsICdtbScpID09PSAnMzAnIHx8IGZvcm1hdCh0aGlzLnRpbWUsICdtbScpID09PSAnNDUnIHx8IGZvcm1hdCh0aGlzLnRpbWUsICdtbScpID09PSAnMDAnID8gZmlmdGVlblRpbWUgOiB0aGlzLnJvdW5kKHRoaXMudGltZSk7CiAgICAgIGxldCBzZWxlY3RlZE1pbnMgPSB0aGlzLnRpbWUgIT09IG51bGwgJiYgdGhpcy50aW1lICE9PSB1bmRlZmluZWQgJiYgdGhpcy50aW1lICE9PSAiIiA/IGZvcm1hdCh0aGlzLnRpbWUsICdtbScpIDogIiI7CiAgICAgIGxldCBzZWxlY3RlZEhvdXJzID0gdGhpcy50aW1lICE9PSBudWxsICYmIHRoaXMudGltZSAhPT0gdW5kZWZpbmVkICYmIHRoaXMudGltZSAhPT0gIiIgPyBmb3JtYXQodGhpcy50aW1lLCAnSEgnKSA6ICIiOwogICAgICBsZXQgc2VsZWN0ZWRBTVBNID0gdGhpcy50aW1lICE9PSBudWxsICYmIHRoaXMudGltZSAhPT0gdW5kZWZpbmVkICYmIHRoaXMudGltZSAhPT0gIiIgPyBmb3JtYXQodGhpcy50aW1lLCAnYScpIDogIiI7CiAgICAgIHRoaXMuc3RvcFRpbWUgPSBzZWxlY3RlZE1pbnMgIT0gbnVsbCAmJiBzZWxlY3RlZE1pbnMgIT0gIiIgJiYgc2VsZWN0ZWRIb3VycyAhPSBudWxsICYmIHNlbGVjdGVkSG91cnMgIT0gIiIgJiYgc2VsZWN0ZWRBTVBNICE9IG51bGwgJiYgc2VsZWN0ZWRBTVBNICE9ICIiID8gc2VsZWN0ZWRIb3VycyArICI6IiArIHNlbGVjdGVkTWlucyArICI6IiArICIwMCIgOiAiIjsKICAgICAgLy8gdGhpcy5kYXRlVGltZUNoYW5nZSgpCiAgICAgIC8vIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKHRoaXMuem9uZURldGFpbHMsICd0aW1lUGlja2VyQ29uZmlndXJhdGlvbicpICYmIHRoaXMuem9uZURldGFpbHM/LnRpbWVQaWNrZXJDb25maWd1cmF0aW9uID09ICIxIiAmJiBmb3JtYXQodGhpcy50aW1lLCAneXl5eS1NTS1kZCcpICE9IGZvcm1hdChkYXRlVG9UaW1lWm9uZURhdGUobmV3IERhdGUoKSwgdGhpcy56b25lRGV0YWlscy50aW1lem9uZSksICd5eXl5LU1NLWRkJykgPyB0aGlzLmJlZm9yZURhdGVUaW1lQ2hhbmdlKCkgOiAiIjsKICAgIH0sCiAgICBvblRpbWVQaWNrZXJDaGFuZ2UoKSB7CiAgICAgIGxldCBleGl0ZGF0ZSA9IHRoaXMudGltZSAhPT0gbnVsbCAmJiB0aGlzLnRpbWUgIT09IHVuZGVmaW5lZCAmJiB0aGlzLnRpbWUgIT09ICIiID8gZm9ybWF0KHRoaXMudGltZSwgJ3l5eXkvTU0vZGQnKSA6ICIiOwogICAgICBsZXQgc2VsZWN0ZWRNaW5zID0gdGhpcy50aW1lICE9PSBudWxsICYmIHRoaXMudGltZSAhPT0gdW5kZWZpbmVkICYmIHRoaXMudGltZSAhPT0gIiIgPyBmb3JtYXQodGhpcy50aW1lLCAnbW0nKSA6ICIiOwogICAgICBsZXQgc2VsZWN0ZWRIb3VycyA9IHRoaXMudGltZSAhPT0gbnVsbCAmJiB0aGlzLnRpbWUgIT09IHVuZGVmaW5lZCAmJiB0aGlzLnRpbWUgIT09ICIiID8gZm9ybWF0KHRoaXMudGltZSwgJ0hIJykgOiAiIjsKICAgICAgbGV0IHNlbGVjdGVkQU1QTSA9IHRoaXMudGltZSAhPT0gbnVsbCAmJiB0aGlzLnRpbWUgIT09IHVuZGVmaW5lZCAmJiB0aGlzLnRpbWUgIT09ICIiID8gZm9ybWF0KHRoaXMudGltZSwgJ2EnKSA6ICIiOwogICAgICB0aGlzLnN0b3BUaW1lID0gc2VsZWN0ZWRNaW5zICE9IG51bGwgJiYgc2VsZWN0ZWRNaW5zICE9ICIiICYmIHNlbGVjdGVkSG91cnMgIT0gbnVsbCAmJiBzZWxlY3RlZEhvdXJzICE9ICIiICYmIHNlbGVjdGVkQU1QTSAhPSBudWxsICYmIHNlbGVjdGVkQU1QTSAhPSAiIiA/IHNlbGVjdGVkSG91cnMgKyAiOiIgKyBzZWxlY3RlZE1pbnMgKyAiOiIgKyAiMDAiIDogIiI7CiAgICAgIGxldCBjdXJyZW5UaW1lID0gdGhpcy56b25lRGV0YWlscy50aW1lem9uZQogICAgICAgID8gZm9ybWF0KAogICAgICAgICAgZGF0ZVRvVGltZVpvbmVEYXRlKG5ldyBEYXRlKCksCiAgICAgICAgICAgIHRoaXMuem9uZURldGFpbHMudGltZXpvbmUKICAgICAgICAgICksCiAgICAgICAgICAieXl5eS1NTS1kZCBISDptbTpzcyIKICAgICAgICApCiAgICAgICAgOiBmb3JtYXQobmV3IERhdGUoKSwgInl5eXktTU0tZGQgIEhIOm1tOnNzIik7CiAgICAgIGlmICgKICAgICAgICBzZWxlY3RlZE1pbnMgIT0gbnVsbCAmJiBzZWxlY3RlZE1pbnMgIT0gIiIgJiYgc2VsZWN0ZWRIb3VycyAhPSBudWxsICYmIHNlbGVjdGVkSG91cnMgIT0gIiIgJiYgc2VsZWN0ZWRBTVBNICE9IG51bGwgJiYgc2VsZWN0ZWRBTVBNICE9ICIiICYmCiAgICAgICAgbmV3IERhdGUoZXhpdGRhdGUgKyAiICIgKyB0aGlzLnN0b3BUaW1lKS5nZXRUaW1lKCkgPgogICAgICAgIG5ldyBEYXRlKGN1cnJlblRpbWUpLmdldFRpbWUoKQogICAgICApIHsKICAgICAgICBmb3JtYXQodGhpcy50aW1lLCAneXl5eS1NTS1kZCcpICE9IGZvcm1hdCh0aGlzLm1pblRpbWVEYXRlLCAneXl5eS1NTS1kZCcpID8gdGhpcy5iZWZvcmVEYXRlVGltZUNoYW5nZSgpIDogIiI7CiAgICAgICAgdGhpcy5kYXRlVGltZUNoYW5nZSgpOwoKICAgICAgfQogICAgfSwKICAgIHNldERhdGVQaWNrZXIoKSB7CiAgICAgIC8vc2V0IHRoZSBtaW5pbXVtIGRhdGUgdG8gdG9kYXkgZGF0ZSh6b25lIHRpbWUgem9uZSBkYXRlKQogICAgICB0aGlzLm1pblRpbWVEYXRlID0gdGhpcy56b25lRGV0YWlscy50aW1lem9uZSA/IHRoaXMucm91bmQodGhpcy56b25lRGV0YWlscy50aW1lem9uZQogICAgICAgID8KICAgICAgICBkYXRlVG9UaW1lWm9uZURhdGUoYWRkTWludXRlcyhuZXcgRGF0ZSgpLCAxNSksCiAgICAgICAgICB0aGlzLnpvbmVEZXRhaWxzLnRpbWV6b25lCiAgICAgICAgKQogICAgICAgIDogYWRkTWludXRlcyhuZXcgRGF0ZSgpLCAxNSkpIDogdGhpcy56b25lRGV0YWlscy50aW1lem9uZQogICAgICAgID8KICAgICAgICBkYXRlVG9UaW1lWm9uZURhdGUoYWRkTWludXRlcyhuZXcgRGF0ZSgpLCAxNSksCiAgICAgICAgICB0aGlzLnpvbmVEZXRhaWxzLnRpbWV6b25lCiAgICAgICAgKQogICAgICAgIDogYWRkTWludXRlcyhuZXcgRGF0ZSgpLCAxNSkKICAgICAgLy9jYWxjdWxhdGUgbWF4IHBhcmtpZ24gdGltZSBpbiBzZWNvbmRzCiAgICAgIGxldCBtYXhQYXJrID0gdGhpcy56b25lRGV0YWlscyAhPSBudWxsICYmIHRoaXMuem9uZURldGFpbHMgIT09IHVuZGVmaW5lZCAmJiB0aGlzLnpvbmVEZXRhaWxzICE9ICIiID8gdGhpcy56b25lRGV0YWlscz8ubWF4UGFya2luZ1RpbWUgOiBudWxsOwoKICAgICAgbGV0IGFkZGVkZGF5cyA9IGFkZERheXMobmV3IERhdGUoKSwgbWF4UGFyaz8uZGF5cyk7CiAgICAgIGxldCBhZGRlZGhvdXJzID0gYWRkSG91cnMoYWRkZWRkYXlzLCBtYXhQYXJrPy5ob3Vycyk7CiAgICAgIGxldCBhZGRlZG1pbnMgPSBhZGRNaW51dGVzKGFkZGVkaG91cnMsIG1heFBhcms/Lm1pbnV0ZXMpOwoKICAgICAgLy9nZXQgbWF4IGRhdGUgaW4gc2Vjb25kcyBiYXNlZCBvbiBtYXggcGFya2luZyB0aW1lCiAgICAgIGxldCBtYXhab25lRGF0ZSA9IGFkZGVkbWlucwogICAgICB0aGlzLm1heFRpbWVEYXRlID0gdGhpcy56b25lRGV0YWlscy50aW1lem9uZQogICAgICAgID8KICAgICAgICBkYXRlVG9UaW1lWm9uZURhdGUoCiAgICAgICAgICBuZXcgRGF0ZShtYXhab25lRGF0ZSksCiAgICAgICAgICB0aGlzLnpvbmVEZXRhaWxzLnRpbWV6b25lCiAgICAgICAgKQogICAgICAgIDogbmV3IERhdGUobWF4Wm9uZURhdGUpOwogICAgICAvL2dldCBtYXggZGF0ZSB3aXRoIHRpbWUgYW5kIHNldCBpdCB0byBtYXhEYXRlVGltZQogICAgICB0aGlzLm1heERhdGVUaW1lID0gdGhpcy56b25lRGV0YWlscy50aW1lem9uZQogICAgICAgID8gZm9ybWF0KAogICAgICAgICAgZGF0ZVRvVGltZVpvbmVEYXRlKAogICAgICAgICAgICBuZXcgRGF0ZShtYXhab25lRGF0ZSksCiAgICAgICAgICAgIHRoaXMuem9uZURldGFpbHMudGltZXpvbmUKICAgICAgICAgICksCiAgICAgICAgICAieXl5eS1NTS1kZCBoaDptbSBhYWFhYSIKICAgICAgICApCiAgICAgICAgOiBmb3JtYXQobmV3IERhdGUoKSwgInl5eXktTU0tZGQgaGg6bW0gYWFhYWEiKTsKICAgIH0sCgogICAgLyoqIEBtZXRob2RzIHRvIGZpbmQgdGhlIGVzdGltYXRlIHJhdGUgCiAgICAgQHBhcmFtcyBzdGFydERhdGUgLCBzdG9wRGF0ZSx6Y29kZSwgdHlwZSAsIGVudl9vdmVyUmlkZQogICAgICovCgogICAgYXN5bmMgZGF0ZVRpbWVDaGFuZ2UoKSB7CiAgICAgIGlmICghdGhpcy56b25lRGV0YWlscy56Y29kZSkgewogICAgICAgIHJldHVybgogICAgICB9CiAgICAgIHRyeSB7CiAgICAgICAgLy8gZm9ybWF0KG5ldyBEYXRlKHRoaXMuY2hlY2tpbkRhdGUpLCAieXl5eS1NTS1kZCdUJ0hIOm1tOnNzIik7CiAgICAgICAgbGV0IGhyZWYgPSB3aW5kb3cubG9jYXRpb24uaHJlZjsKICAgICAgICBsZXQgZWR0RW50cnlUaW1lID0gIiIKICAgICAgICBpZiAoaHJlZi5pbmNsdWRlcygnZW50cnl0aW1lJykpIHsKICAgICAgICAgIGxldCBwYXJhbXMgPSBocmVmLnNwbGl0KCc/Jyk7CiAgICAgICAgICBsZXQgdGltZXBhcmFtID0gcGFyYW1zWzJdLnNwbGl0KCdlbnRyeXRpbWUnKVsxXTsKICAgICAgICAgIGVkdEVudHJ5VGltZSA9IHRpbWVwYXJhbS5zdWJzdHJpbmcoMSwgdGltZXBhcmFtLmxlbmd0aCkKICAgICAgICB9CgogICAgICAgIHRoaXMuc3RhcnREYXRlID0gZWR0RW50cnlUaW1lICE9PSBudWxsICYmIGVkdEVudHJ5VGltZSAhPT0gdW5kZWZpbmVkICYmIGVkdEVudHJ5VGltZSAhPT0gIiIgPyBmb3JtYXQobmV3IERhdGUodGhpcy5mb3JtYXRFeGl0RGF0ZVRpbWUoZWR0RW50cnlUaW1lLCAnZGF0ZScpKSwgInl5eXktTU0tZGQnVCdISDptbTpzcyIpIDogdGhpcy56b25lRGV0YWlscy50aW1lem9uZQogICAgICAgICAgPyBmb3JtYXQoCiAgICAgICAgICAgIGRhdGVUb1RpbWVab25lRGF0ZSgKICAgICAgICAgICAgICBuZXcgRGF0ZSgpLAogICAgICAgICAgICAgIHRoaXMuem9uZURldGFpbHMudGltZXpvbmUKICAgICAgICAgICAgKSwKICAgICAgICAgICAgInl5eXktTU0tZGQnVCdISDptbTpzcyIKICAgICAgICAgICkKICAgICAgICAgIDogZm9ybWF0KG5ldyBEYXRlKCksICJ5eXl5LU1NLWRkJ1QnSEg6bW06c3MiKTsKICAgICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLmV4aXRUaW1lU2VsZWN0ZWQ/LmhoKyI6Iit0aGlzLmV4aXRUaW1lU2VsZWN0ZWQubW0rIjowMCIpCiAgICAgICAgLy8gdGhpcy5leGl0RGF0ZSArICJUMjM6NTk6MDAiCiAgICAgICAgbGV0IHN0b3BUaW1lID0gdGhpcy5zdG9wVGltZTsKICAgICAgICBsZXQgZXhpdGRhdGUgPSB0aGlzLnRpbWUgIT09IG51bGwgJiYgdGhpcy50aW1lICE9PSB1bmRlZmluZWQgJiYgdGhpcy50aW1lICE9PSAiIiA/IGZvcm1hdCh0aGlzLnRpbWUsICd5eXl5LU1NLWRkJykgOiAiIjsKICAgICAgICBsZXQgZXhpdHRpbWUgPSBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbCh0aGlzLnpvbmVEZXRhaWxzLCAndGltZVBpY2tlckNvbmZpZ3VyYXRpb24nKSAmJiB0aGlzLnpvbmVEZXRhaWxzPy50aW1lUGlja2VyQ29uZmlndXJhdGlvbiA9PSAnMScgPyAnVCcgKyBzdG9wVGltZSA6ICJUMjM6NTk6MDAiOwogICAgICAgIGxldCBzdG9wRGF0ZSA9IGV4aXRkYXRlICsgZXhpdHRpbWU7CiAgICAgICAgbGV0IGRhdGEgPSB7CiAgICAgICAgICBzdGFydEF0OiB0aGlzLnN0YXJ0RGF0ZSwKICAgICAgICAgIHN0b3BBdDogc3RvcERhdGUsCiAgICAgICAgICB6Y29kZTogdGhpcy56b25lRGV0YWlscy56Y29kZSwKICAgICAgICB9OwogICAgICAgIHRoaXMuYWRkUGF5bWVudEJ0bkxvYWRpbmcgPSB0cnVlOwogICAgICAgIHZhciBnZXRSYXRlID0gYXdhaXQgQVBJSGVscGVyKCJQT1NUIiwgIi9hcGkvdjIvZ2V0UmF0ZSIsIGRhdGEpOwogICAgICAgIC8vY29uZGl0aW9uIHRvIGNoZWNrIGlmIHRoZSBkYXRlIHRpbWUgc2VsZWN0ZWQgaXMgbGVzc2VyIHRoYW4gY3VycmVudCB0aW1lCiAgICAgICAgaWYgKCFnZXRSYXRlPy5kYXRhPy5zdGF0dXMgJiYgIXRoaXMuZ2V0UmF0ZUNhbGwpIHsKICAgICAgICAgIHRoaXMuZGlzYWJsZUFkZFBheW1lbnRCdG4gPSB0cnVlOwogICAgICAgICAgdGhpcy5hbGVydERpYWxvZyA9IHRydWU7CiAgICAgICAgICB0aGlzLmFsZXJ0TXNnID0KICAgICAgICAgICAgZ2V0UmF0ZT8uZGF0YT8ubWVzc2FnZSB8fCAiRXJyb3IgaW4gZ2V0dGluZyByYXRlIGRldGFpbHMiOwogICAgICAgICAgdGhpcy5vcGVuRGF0ZVBpY2tlciA9IGZhbHNlOwogICAgICAgICAgdGhpcy5vcGVuVGltZVBpY2tlciA9IGZhbHNlOwogICAgICAgICAgRXZlbnRCdXMuJGVtaXQoJ2RhdGV0aW1lLXNldCcpOwoKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5kaXNhYmxlQWRkUGF5bWVudEJ0biA9IGZhbHNlOwogICAgICAgICAgdGhpcy5vcGVuRGF0ZVBpY2tlciA9IGZhbHNlOwogICAgICAgICAgdGhpcy5vcGVuVGltZVBpY2tlciA9IGZhbHNlOwogICAgICAgICAgRXZlbnRCdXMuJGVtaXQoJ2RhdGV0aW1lLXNldCcpOwoKICAgICAgICB9CiAgICAgICAgdGhpcy5lc3RpbWF0ZSA9IE9iamVjdC5hc3NpZ24oe30sIGdldFJhdGU/LmRhdGE/LmRhdGEpOwogICAgICAgIC8vIGVzdGltYXRlZFZhbCAhPSAiIiAmJgogICAgICAgIC8vIGVzdGltYXRlZFZhbCAhPSBudWxsICYmCiAgICAgICAgLy8gZXN0aW1hdGVkVmFsICE9IHVuZGVmaW5lZAogICAgICAgIC8vICAgPyBOdW1iZXIoZXN0aW1hdGVkVmFsKS50b0ZpeGVkKDIpCiAgICAgICAgLy8gICA6IGVzdGltYXRlZFZhbDsKICAgICAgICB0aGlzLm9wZW5EYXRlUGlja2VyID0gZmFsc2U7CiAgICAgICAgdGhpcy5vcGVuVGltZVBpY2tlciA9IGZhbHNlOwogICAgICAgIHRoaXMuYWRkUGF5bWVudEJ0bkxvYWRpbmcgPSBmYWxzZTsKICAgICAgfQogICAgICBjYXRjaCAoZXJyb3IpIHsKICAgICAgICB0aGlzLmFkZFBheW1lbnRCdG5Mb2FkaW5nID0gZmFsc2U7CiAgICAgICAgY29uc29sZS5sb2coZXJyb3IpOwogICAgICB9CiAgICB9LAogICAgYXN5bmMgYmVmb3JlRGF0ZVRpbWVDaGFuZ2UoKSB7CiAgICAgIGlmICghdGhpcy56b25lRGV0YWlscy56Y29kZSkgewogICAgICAgIHJldHVybgogICAgICB9CiAgICAgIHRyeSB7CiAgICAgICAgLy8gZm9ybWF0KG5ldyBEYXRlKHRoaXMuY2hlY2tpbkRhdGUpLCAieXl5eS1NTS1kZCdUJ0hIOm1tOnNzIik7CgogICAgICAgIGxldCBocmVmID0gd2luZG93LmxvY2F0aW9uLmhyZWY7CiAgICAgICAgbGV0IGVkdEVudHJ5VGltZSA9ICIiCiAgICAgICAgaWYgKGhyZWYuaW5jbHVkZXMoJ2VudHJ5dGltZScpKSB7CiAgICAgICAgICBsZXQgcGFyYW1zID0gaHJlZi5zcGxpdCgnPycpOwogICAgICAgICAgbGV0IHRpbWVwYXJhbSA9IHBhcmFtc1syXS5zcGxpdCgnZW50cnl0aW1lJylbMV07CiAgICAgICAgICBlZHRFbnRyeVRpbWUgPSB0aW1lcGFyYW0uc3Vic3RyaW5nKDEsIHRpbWVwYXJhbS5sZW5ndGgpCiAgICAgICAgfQogICAgICAgIHRoaXMuc3RhcnREYXRlID0gZWR0RW50cnlUaW1lICE9PSBudWxsICYmIGVkdEVudHJ5VGltZSAhPT0gdW5kZWZpbmVkICYmIGVkdEVudHJ5VGltZSAhPT0gIiIgPyBmb3JtYXQobmV3IERhdGUodGhpcy5mb3JtYXRFeGl0RGF0ZVRpbWUoZWR0RW50cnlUaW1lLCAnZGF0ZScpKSwgInl5eXktTU0tZGQnVCdISDptbTpzcyIpIDogdGhpcy56b25lRGV0YWlscy50aW1lem9uZQogICAgICAgICAgPyBmb3JtYXQoCiAgICAgICAgICAgIGRhdGVUb1RpbWVab25lRGF0ZSgKICAgICAgICAgICAgICBuZXcgRGF0ZSgpLAogICAgICAgICAgICAgIHRoaXMuem9uZURldGFpbHMudGltZXpvbmUKICAgICAgICAgICAgKSwKICAgICAgICAgICAgInl5eXktTU0tZGQnVCdISDptbTpzcyIKICAgICAgICAgICkKICAgICAgICAgIDogZm9ybWF0KG5ldyBEYXRlKCksICJ5eXl5LU1NLWRkJ1QnSEg6bW06c3MiKTsKICAgICAgICBsZXQgc3RvcFRpbWUgPSB0aGlzLnN0b3BUaW1lOwogICAgICAgIGxldCBzZWxlY3RlZEhvdXJzID0gdGhpcy5jYXNpbm9EZXRhaWxzLnVzZXJEZXRhaWwuZW50cnl0aW1lICE9IG51bGwgJiYgdGhpcy5jYXNpbm9EZXRhaWxzLnVzZXJEZXRhaWwuZW50cnl0aW1lICE9PSB1bmRlZmluZWQgJiYgdGhpcy5jYXNpbm9EZXRhaWxzLnVzZXJEZXRhaWwuZW50cnl0aW1lICE9ICIiID8gZm9ybWF0KG5ldyBEYXRlKHRoaXMuY2FzaW5vRGV0YWlscy51c2VyRGV0YWlsLmVudHJ5dGltZSksICdISCcpIDogZm9ybWF0KGRhdGVUb1RpbWVab25lRGF0ZShuZXcgRGF0ZSgpLCB0aGlzLnpvbmVEZXRhaWxzLnRpbWV6b25lKSwgJ0hIJyk7CiAgICAgICAgbGV0IHNlbGVjdGVkTWlucyA9IHRoaXMuY2FzaW5vRGV0YWlscy51c2VyRGV0YWlsLmVudHJ5dGltZSAhPSBudWxsICYmIHRoaXMuY2FzaW5vRGV0YWlscy51c2VyRGV0YWlsLmVudHJ5dGltZSAhPT0gdW5kZWZpbmVkICYmIHRoaXMuY2FzaW5vRGV0YWlscy51c2VyRGV0YWlsLmVudHJ5dGltZSAhPSAiIiA/IGZvcm1hdChuZXcgRGF0ZSh0aGlzLmNhc2lub0RldGFpbHMudXNlckRldGFpbC5lbnRyeXRpbWUpLCAnbW0nKSA6IGZvcm1hdChkYXRlVG9UaW1lWm9uZURhdGUobmV3IERhdGUoKSwgdGhpcy56b25lRGV0YWlscy50aW1lem9uZSksICdtbScpOwogICAgICAgIGxldCBleGl0ZGF0ZSA9IHRoaXMudGltZSAhPT0gbnVsbCAmJiB0aGlzLnRpbWUgIT09IHVuZGVmaW5lZCAmJiB0aGlzLnRpbWUgIT09ICIiID8gZm9ybWF0KHRoaXMudGltZSwgJ3l5eXktTU0tZGQnKSA6ICIiOwogICAgICAgIGxldCBleGl0dGltZSA9IE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKHRoaXMuem9uZURldGFpbHMsICdpc3RpbWVQaWNrZXJDb25maWd1cmF0aW9uR2F0ZWQnKSAmJiB0aGlzLnpvbmVEZXRhaWxzPy50aW1lUGlja2VyQ29uZmlndXJhdGlvbiA9PSAnMCcgPyAnVCcgKyBzdG9wVGltZSA6ICdUJyArIHNlbGVjdGVkSG91cnMgKyAiOiIgKyBzZWxlY3RlZE1pbnMgKyAiOjAwIjsKCiAgICAgICAgbGV0IHN0b3BEYXRlID0gZXhpdGRhdGUgKyBleGl0dGltZTsKICAgICAgICBsZXQgZGF0YSA9IHsKICAgICAgICAgIHN0YXJ0QXQ6IHRoaXMuc3RhcnREYXRlLAogICAgICAgICAgc3RvcEF0OiBzdG9wRGF0ZSwKICAgICAgICAgIHpjb2RlOiB0aGlzLnpvbmVEZXRhaWxzLnpjb2RlLAogICAgICAgIH07CiAgICAgICAgdGhpcy5hZGRQYXltZW50QnRuTG9hZGluZyA9IHRydWU7CiAgICAgICAgdmFyIGdldFJhdGUgPSBhd2FpdCBBUElIZWxwZXIoIlBPU1QiLCAiL2FwaS92Mi9nZXRSYXRlIiwgZGF0YSk7CiAgICAgICAgLy9jb25kaXRpb24gdG8gY2hlY2sgaWYgdGhlIGRhdGUgdGltZSBzZWxlY3RlZCBpcyBsZXNzZXIgdGhhbiBjdXJyZW50IHRpbWUKICAgICAgICBpZiAoIWdldFJhdGU/LmRhdGE/LnN0YXR1cyAmJiAhdGhpcy5nZXRSYXRlQ2FsbCkgewogICAgICAgICAgdGhpcy5kaXNhYmxlQWRkUGF5bWVudEJ0biA9IHRydWU7CiAgICAgICAgICB0aGlzLmFsZXJ0RGlhbG9nID0gdHJ1ZTsKICAgICAgICAgIHRoaXMuYWxlcnRNc2cgPQogICAgICAgICAgICBnZXRSYXRlPy5kYXRhPy5tZXNzYWdlIHx8ICJFcnJvciBpbiBnZXR0aW5nIHJhdGUgZGV0YWlscyI7CiAgICAgICAgICB0aGlzLm9wZW5EYXRlUGlja2VyID0gZmFsc2U7CiAgICAgICAgICB0aGlzLm9wZW5UaW1lUGlja2VyID0gZmFsc2U7CiAgICAgICAgICBFdmVudEJ1cy4kZW1pdCgnZGF0ZXRpbWUtc2V0Jyk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuZGlzYWJsZUFkZFBheW1lbnRCdG4gPSBmYWxzZTsKICAgICAgICAgIHRoaXMub3BlbkRhdGVQaWNrZXIgPSBmYWxzZTsKICAgICAgICAgIHRoaXMub3BlblRpbWVQaWNrZXIgPSBmYWxzZTsKICAgICAgICAgIEV2ZW50QnVzLiRlbWl0KCdkYXRldGltZS1zZXQnKTsKICAgICAgICB9CiAgICAgICAgdGhpcy5iZWZvcmVFc3RpbWF0ZSA9IE9iamVjdC5hc3NpZ24oe30sIGdldFJhdGU/LmRhdGE/LmRhdGEpOwogICAgICAgIC8vIGVzdGltYXRlZFZhbCAhPSAiIiAmJgogICAgICAgIC8vIGVzdGltYXRlZFZhbCAhPSBudWxsICYmCiAgICAgICAgLy8gZXN0aW1hdGVkVmFsICE9IHVuZGVmaW5lZAogICAgICAgIC8vICAgPyBOdW1iZXIoZXN0aW1hdGVkVmFsKS50b0ZpeGVkKDIpCiAgICAgICAgLy8gICA6IGVzdGltYXRlZFZhbDsKICAgICAgICB0aGlzLmFkZFBheW1lbnRCdG5Mb2FkaW5nID0gZmFsc2U7CiAgICAgIH0KICAgICAgY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgdGhpcy5hZGRQYXltZW50QnRuTG9hZGluZyA9IGZhbHNlOwogICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgICAgfQogICAgfSwKICAgIGZvcm1hdERhdGUoZGF0ZSkgewogICAgICBsZXQgc3RyaW5nZGF0ZSA9IGRhdGUudG9TdHJpbmcoKTsKICAgICAgaWYgKCFkYXRlKSByZXR1cm4gbnVsbDsKCiAgICAgIGNvbnN0IFt5ZWFyLCBtb250aCwgZGF5XSA9IHN0cmluZ2RhdGUuc3BsaXQoIi0iKTsKICAgICAgcmV0dXJuIGAke21vbnRofS8ke2RheX0vJHt5ZWFyfWA7CiAgICB9LAogICAgcGFyc2VEYXRlKGRhdGUpIHsKICAgICAgaWYgKCFkYXRlKSByZXR1cm4gbnVsbDsKCiAgICAgIGNvbnN0IFttb250aCwgZGF5LCB5ZWFyXSA9IGRhdGUuc3BsaXQoIi8iKTsKICAgICAgcmV0dXJuIGAke3llYXJ9LSR7bW9udGgucGFkU3RhcnQoMiwgIjAiKX0tJHtkYXkucGFkU3RhcnQoMiwgIjAiKX1gOwogICAgfSwKICAgIGFzeW5jIGFkZFBheW1lbnQoKSB7CiAgICAgIGxldCBleGl0RGF0ZSA9IHRoaXMudGltZSAhPSBudWxsIHx8IHRoaXMudGltZSAhPT0gdW5kZWZpbmVkIHx8IHRoaXMudGltZSAhPSAiIiA/IGZvcm1hdCh0aGlzLnRpbWUsICd5eXl5LU1NLWRkJykgOiBmb3JtYXQobmV3IERhdGUoKSwgJ3l5eXktTU0tZGQnKQogICAgICBsZXQgZXhpdFRpbWUgPSB0aGlzLnRpbWUgIT0gbnVsbCB8fCB0aGlzLnRpbWUgIT09IHVuZGVmaW5lZCB8fCB0aGlzLnRpbWUgIT0gIiIgPyBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbCh0aGlzLnpvbmVEZXRhaWxzLCAndGltZVBpY2tlckNvbmZpZ3VyYXRpb24nKSAmJiB0aGlzLnpvbmVEZXRhaWxzLnRpbWVQaWNrZXJDb25maWd1cmF0aW9uID09IDEgPyBmb3JtYXQodGhpcy50aW1lLCAnaGg6bW0gYScpIDogIjExOjU5IFBNIiA6ICIiOwogICAgICBsZXQgZXhpdERhdGVUaW1lID0gZXhpdERhdGUgKyAiICIgKyBleGl0VGltZQogICAgICBsZXQgZW50cnlEYXRlVGltZSA9IHRoaXMuem9uZURldGFpbHMudGltZXpvbmUKICAgICAgICA/IGZvcm1hdCgKICAgICAgICAgIGRhdGVUb1RpbWVab25lRGF0ZShuZXcgRGF0ZSgpLCB0aGlzLnpvbmVEZXRhaWxzLnRpbWV6b25lKSwKICAgICAgICAgICJ5eXl5LU1NLWRkIGhoOm1tIGEiCiAgICAgICAgKQogICAgICAgIDogZm9ybWF0KG5ldyBEYXRlKCksICJ5eXl5LU1NLWRkJ1QnSEg6bW0gYSIpOwogICAgICBsZXQgY29tbWl0RGF0YSA9IHsKICAgICAgICBwbGF0ZTogdGhpcy5saWNlbmNlUGxhdGUsCiAgICAgICAgY29udGFjdDogdGhpcy5jb250YWN0T2JqPy5mb3JtYXR0ZWROdW1iZXIsCiAgICAgICAgZW50cnlUaW1lOiBlbnRyeURhdGVUaW1lLAogICAgICAgIGVkdFBhcmFtczogdGhpcy5jYXNpbm9EZXRhaWxzPy51c2VyRGV0YWlsPy5lZHRQYXJhbXMsCiAgICAgICAgZXhpdFRpbWU6IGV4aXREYXRlVGltZSwKICAgICAgICBlc3RpbWF0ZTogdGhpcy5lc3RpbWF0ZSwKICAgICAgfTsKICAgICAgbGV0IGRldGFpbHMgPSBhd2FpdCBBUElIZWxwZXIoIlBPU1QiLCAiL2FwaS92MS9wcmVwYWlkL29wZW5UcmFuc2FjdGlvbiIsIHsKICAgICAgICB2ZWhpY2xlTm86IHRoaXMubGljZW5jZVBsYXRlLAogICAgICAgIGNvbnRhY3Q6IHRoaXMuY29udGFjdE9iaj8uZm9ybWF0dGVkTnVtYmVyLAogICAgICAgIGV4aXRUaW1lOiBleGl0RGF0ZVRpbWUsIHpjb2RlOiB0aGlzLnpvbmVEZXRhaWxzPy56Y29kZSwKICAgICAgICBtaWQ6IHRoaXMuem9uZURldGFpbHM/Lm1pZCwKICAgICAgICBldmVudFR5cGU6ICJQYWlkSG9zdFBhc3MiLAogICAgICB9KTsKCiAgICAgIGlmIChkZXRhaWxzPy5kYXRhPy5zdGF0dXMpIHsKICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoIlNFVF9DQVNJTk9fVVNFUkRFVEFJTFMiLCBjb21taXREYXRhKTsKICAgICAgICB0aGlzLiRyb3V0ZXIucmVwbGFjZSh7IHBhdGg6ICIvcHJlcGFpZGhvc3QvbWFrZXBheW1lbnQiIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIGlmIChkZXRhaWxzPy5kYXRhPy5tZXNzYWdlID09ICJCb29raW5nIEFscmVhZHkgRXhpc3RzIikgewogICAgICAgICAgbGV0IGNvbW1pdERhdGEgPSB7CiAgICAgICAgICAgIHBsYXRlOiB0aGlzLmxpY2VuY2VQbGF0ZSwKICAgICAgICAgICAgY29udGFjdDogdGhpcy5jb250YWN0T2JqLmZvcm1hdHRlZE51bWJlciwKICAgICAgICAgICAgZW50cnlUaW1lOiBlbnRyeURhdGVUaW1lLAogICAgICAgICAgICBlZHRQYXJhbXM6IHRoaXMuY2FzaW5vRGV0YWlscz8udXNlckRldGFpbD8uZWR0UGFyYW1zLAogICAgICAgICAgICBleGl0VGltZTogZXhpdERhdGVUaW1lLAogICAgICAgICAgICBlc3RpbWF0ZTogdGhpcy5lc3RpbWF0ZSwKICAgICAgICAgICAgYmlkOiBkZXRhaWxzPy5kYXRhPy5kYXRhPy5iaWQKICAgICAgICAgIH07CiAgICAgICAgICBpZiAoZGV0YWlscz8uZGF0YT8uZGF0YT8uY2FyZE9uRmlsZSA9PSAwIHx8IGRldGFpbHM/LmRhdGE/LmRhdGE/LmNhcmRPbkZpbGUgPT0gMikgewogICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoIlNFVF9DQVNJTk9fVVNFUkRFVEFJTFMiLCBjb21taXREYXRhKTsKICAgICAgICAgICAgdGhpcy4kcm91dGVyLnJlcGxhY2UoeyBwYXRoOiAiL3ByZXBhaWRob3N0L21ha2VwYXltZW50IiB9KTsKICAgICAgICAgIH0KICAgICAgICAgIGVsc2UgaWYgKGRldGFpbHM/LmRhdGE/LmRhdGE/LmNhcmRPbkZpbGUgPT0gMSkgewogICAgICAgICAgICAvLyB0aGlzLiRzdG9yZS5jb21taXQoIlNFVF9DQVNJTk9fVVNFUkRFVEFJTFMiLCBjb21taXREYXRhKTsKICAgICAgICAgICAgLy8gdGhpcy4kcm91dGVyLnJlcGxhY2UoeyBwYXRoOiAiL3ByZXBhaWRob3N0L29kUmVjZWlwdCIgfSk7CiAgICAgICAgICAgIGxldCB1cmwgPSB3aW5kb3cubG9jYXRpb24ub3JpZ2luICsgIi9nLyIgKyBkZXRhaWxzPy5kYXRhPy5kYXRhPy5iaWQ7CiAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZXBsYWNlKHVybCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHRoaXMuYWxlcnRNc2cgPSBkZXRhaWxzPy5kYXRhPy5tZXNzYWdlID8gZGV0YWlscz8uZGF0YT8ubWVzc2FnZSA6ICIiOwoKICAgICAgICB0aGlzLmFsZXJ0RGlhbG9nID0gdHJ1ZTsKICAgICAgfQogICAgfSwKCiAgICB1cHBlcmNhc2UoKSB7CiAgICAgIGlmIChydWxlcy5hbHBoYU51bWVyaWModGhpcy5saWNlbmNlUGxhdGUpID09PSAiTXVzdCBiZSBhbHBoYW51bWVyaWMiKSB7CiAgICAgICAgdGhpcy5saWNlbmNlUGxhdGUgPSB0aGlzLmxpY2VuY2VQbGF0ZS5yZXBsYWNlKC9bXlx3XHNdL2dpLCAnJykKICAgICAgfQogICAgICB0aGlzLmxpY2VuY2VQbGF0ZSA9IHRoaXMubGljZW5jZVBsYXRlLnRyaW0oKQogICAgICB0aGlzLmxpY2VuY2VQbGF0ZSA9IHRoaXMubGljZW5jZVBsYXRlLnRvVXBwZXJDYXNlKCk7CiAgICB9LAogICAgLyoqCiAgICAgKiBAbWV0aG9kIGdldFpvbmVEZXRhaWxzIGZldGNoIHRoZSB6b25lIGRldGFpbHMgYW5kIGNvbW1pdCBTRVRfWk9ORV9ERVRBSUxTIG11dGF0aW9uLgogICAgICovCiAgICBhc3luYyBnZXRab25lRGV0YWlscyhzZWFyY2hQYXJhbUtleSwgc2VhcmNoUGFyYW1WYWx1ZSkgewogICAgICB0cnkgewogICAgICAgIHZhciB6b25lRGV0YWlscyA9IGF3YWl0IEFQSUhlbHBlcigKICAgICAgICAgICJHRVQiLAogICAgICAgICAgIi9hcGkvdjEvdXNlci9jb25maWciICsgc2VhcmNoUGFyYW1LZXkgKyAiPSIgKyBzZWFyY2hQYXJhbVZhbHVlCiAgICAgICAgKTsKICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoIlNFVF9aT05FX0RFVEFJTFMiLCB6b25lRGV0YWlscy5kYXRhPy56b25lKTsKICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7CiAgICAgIH0KICAgIH0sCiAgICAvKioKICAgICAqIEBtZXRob2QgZ2V0T25EZW1hbmRab25lRGV0YWlscyBmZXRjaCB0aGUgb25kZW1hbmQgem9uZSBkZXRhaWxzIGZyb20gUGNvbSBhbmQgY29tbWl0IFNFVF9aT05FX0RFVEFJTFMgbXV0YXRpb24uCiAgICAgKi8KICAgIGFzeW5jIGdldE9uRGVtYW5kWm9uZURldGFpbHMoc2VhcmNoUGFyYW1WYWx1ZSkgewogICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlOwogICAgICB0cnkgewogICAgICAgIHZhciB6b25lRGV0YWlscyA9IGF3YWl0IEFQSUhlbHBlcigKICAgICAgICAgICJHRVQiLAogICAgICAgICAgIi9hcGkvdjEvZ2V0T25EZW1hbmQvIiArIHNlYXJjaFBhcmFtVmFsdWUKICAgICAgICApOwogICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOwogICAgICAgIGlmICh6b25lRGV0YWlscy5kYXRhPy5sb3QpIHsKICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgKICAgICAgICAgICAgIlNFVF9PTl9ERU1BTkRfWk9ORV9ERVRBSUxTIiwKICAgICAgICAgICAgem9uZURldGFpbHMuZGF0YT8ubG90CiAgICAgICAgICApOwogICAgICAgICAgdGhpcy5zZXREYXRlUGlja2VyKCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuYWxlcnRNc2cgPQogICAgICAgICAgICB6b25lRGV0YWlscz8uZGF0YT8ubWVzc2FnZSB8fCAiRXJyb3IgaW4gbG9hZGluZyBsb2NhdGlvbiBkZXRhaWxzLiI7CiAgICAgICAgICB0aGlzLmFsZXJ0RGlhbG9nID0gdHJ1ZTsKICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgY29uc29sZS5sb2coZXJyb3IpOwogICAgICB9CiAgICB9LAogICAgb25Db250YWN0SW5wdXQoY29udGFjdERldGFpbHMpIHsKICAgICAgdGhpcy5pc0NvbnRhY3RWYWxpZCA9IGNvbnRhY3REZXRhaWxzPy5pc1ZhbGlkOwogICAgICB0aGlzLmNvbnRhY3RPYmogPSBPYmplY3QuYXNzaWduKHt9LCBjb250YWN0RGV0YWlscyk7CiAgICB9LAogICAgc2V0UmVlbnRlclBsYXRlRmxhZygpIHsKICAgICAgdGhpcy5saWNlbmNlUGxhdGUgPSB0aGlzLnNlbGVjdGVkUGxhdGUgfHwgIiI7CiAgICAgIHRoaXMucmVFbnRlclBsYXRlID0gdHJ1ZTsKICAgICAgdGhpcy5jb25maXJtQ3JlYXRlU2Vzc2lvbkRpYWxvZyA9IGZhbHNlOwogICAgfSwKICAgIC8qKgogICAgICogQG1ldGhvZCBjcmVhdGVTZXNzaW9uIEZldGNoIGJvb2tpbmcgaWQgb24gYWRkIGJvb2tpbmcgYW5kIGZldGNoIHRoZSBib29raW5nIGluZm8uCiAgICAgKi8KICAgIGFzeW5jIGNyZWF0ZVNlc3Npb24oKSB7CiAgICAgIHRoaXMuYWRkTGljZW5jZVBsYXRlQnRuTG9hZGluZyA9IHRydWU7CiAgICAgIGxldCBwb3N0T2JqID0gewogICAgICAgIGNvbnRhY3Q6IHRoaXMuY29udGFjdE9iaj8uZm9ybWF0dGVkTnVtYmVyLAogICAgICAgIHVuaXF1ZUlEOiB0aGlzLmNvbnRhY3RPYmo/Lm5hdGlvbmFsTnVtYmVyLAogICAgICAgIHZlaGljbGVObzogdGhpcy5saWNlbmNlUGxhdGUudG9VcHBlckNhc2UoKSwKICAgICAgICBsb2NhdGlvbkNvZGU6IHRoaXMuem9uZURldGFpbHMuemNvZGUsCiAgICAgICAgemlkOiB0aGlzLnpvbmVEZXRhaWxzLnppZCwKICAgICAgICBlbnRyeXRpbWU6IGZvcm1hdCgKICAgICAgICAgIG5ldyBEYXRlKAogICAgICAgICAgICBuZXcgRGF0ZSgpLnRvTG9jYWxlU3RyaW5nKCJlbi1VUyIsIHsKICAgICAgICAgICAgICB0aW1lWm9uZTogdGhpcy56b25lRGV0YWlscy50aW1lem9uZSwKICAgICAgICAgICAgfSkKICAgICAgICAgICksCiAgICAgICAgICAieXl5eS1NTS1kZCBISDptbTpzcyIKICAgICAgICApLAogICAgICAgIHNvdXJjZTogImFwcGNsaXAiLAogICAgICAgIHdlYlZpZXc6ICIxIiwKICAgICAgICB0eXBlOiAiMiIsCiAgICAgICAgc3RhdGU6IDIsCiAgICAgICAgcGF5bWVudF9zdGF0dXM6IDAsCiAgICAgICAgdHhuSURfYWRkQ0M6IDAsCiAgICAgIH07CiAgICAgIGlmICh0aGlzLnJlRW50ZXJQbGF0ZSkgewogICAgICAgIE9iamVjdC5hc3NpZ24ocG9zdE9iaiwgeyBjcmVhdGVOZXdTZXNzaW9uOiAxIH0pOwogICAgICB9CiAgICAgIHRyeSB7CiAgICAgICAgdmFyIHNlc3Npb24gPSBhd2FpdCBBUElIZWxwZXIoIlBPU1QiLCAiL2FwaS92MS9hZGRCb29raW5nIiwgcG9zdE9iaik7CiAgICAgICAgbGV0IGJpZCA9IHNlc3Npb24/LmRhdGE/LnJlZm5vOwogICAgICAgIGlmIChzZXNzaW9uLmRhdGEuc3RhdHVzID09PSBmYWxzZSkgewogICAgICAgICAgdGhpcy5lcnJNc2cgPSBzZXNzaW9uPy5kYXRhPy5tZXNzYWdlID8gc2Vzc2lvbi5kYXRhLm1lc3NhZ2UgOiAiIjsKICAgICAgICAgIGlmICgKICAgICAgICAgICAgc2Vzc2lvbj8uZGF0YT8uc2hvd0NyZWF0ZU5ld1Nlc3Npb25Qb3B1cCAmJgogICAgICAgICAgICBzZXNzaW9uLmRhdGEuc2hvd0NyZWF0ZU5ld1Nlc3Npb25Qb3B1cCA9PSAxCiAgICAgICAgICApIHsKICAgICAgICAgICAgdGhpcy5wb3N0VG9Mb2dnZXJBUEkoewogICAgICAgICAgICAgIHBob25lOiB0aGlzLmNvbnRhY3RPYmo/Lm5hdGlvbmFsTnVtYmVyLAogICAgICAgICAgICAgIHBsYXRlOiB0aGlzLmxpY2VuY2VQbGF0ZS50b1VwcGVyQ2FzZSgpLAogICAgICAgICAgICAgIHN0YXR1c1RleHQ6ICJQYXJrZXIgc2Vzc2lvbiBub3QgZm91bmQgaW4gdGhlIHN5c3RlbS4iLAogICAgICAgICAgICB9KTsKICAgICAgICAgICAgdGhpcy5jb25maXJtQ3JlYXRlU2Vzc2lvbkRpYWxvZyA9IHRydWU7CiAgICAgICAgICAgIHRoaXMuYWRkTGljZW5jZVBsYXRlQnRuTG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CiAgICAgICAgICB0aGlzLmVyckRpYWxvZyA9IHRydWU7CiAgICAgICAgICB0aGlzLmFkZExpY2VuY2VQbGF0ZUJ0bkxvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgYXdhaXQgdGhpcy5nZXRCb29raW5nRGV0YWlscyhiaWQpOwogICAgICAgIGxldCB1cmwgPSB3aW5kb3cubG9jYXRpb24ub3JpZ2luICsgIi9nLyIgKyBiaWQ7CiAgICAgICAgdGhpcy5hZGRMaWNlbmNlUGxhdGVCdG5Mb2FkaW5nID0gZmFsc2U7CiAgICAgICAgdGhpcy5yZUVudGVyUGxhdGUKICAgICAgICAgID8gdGhpcy5wb3N0VG9Mb2dnZXJBUEkoewogICAgICAgICAgICBwaG9uZTogdGhpcy5jb250YWN0T2JqPy5uYXRpb25hbE51bWJlciwKICAgICAgICAgICAgcmVmSWQ6IGJpZCwKICAgICAgICAgICAgaWNvbjogImxvZ2luIiwKICAgICAgICAgICAgcGxhdGU6IHRoaXMubGljZW5jZVBsYXRlLnRvVXBwZXJDYXNlKCksCiAgICAgICAgICAgIHN0YXR1c1RleHQ6CiAgICAgICAgICAgICAgIlBhcmtlciBwbGF0ZS9jb250YWN0IG51bWJlciBub3QgZm91bmQgaW4gdGhlIHN5c3RlbS4gUGFya2VyIGNyZWF0ZWQgYSBuZXcgc2Vzc2lvbiB1c2luZyBnZW5lcmljIHBheW1lbnQgUVIiLAogICAgICAgICAgfSkKICAgICAgICAgIDogdGhpcy5wb3N0VG9Mb2dnZXJBUEkoewogICAgICAgICAgICBwaG9uZTogdGhpcy5jb250YWN0T2JqPy5uYXRpb25hbE51bWJlciwKICAgICAgICAgICAgcmVmSWQ6IGJpZCwKICAgICAgICAgICAgaWNvbjogImxvZ2luIiwKICAgICAgICAgICAgcGxhdGU6IHRoaXMubGljZW5jZVBsYXRlLnRvVXBwZXJDYXNlKCksCiAgICAgICAgICAgIHN0YXR1c1RleHQ6CiAgICAgICAgICAgICAgIlBhcmtlciBzZXNzaW9uIGZvdW5kLiBQYXJrZXIgb3BlbmVkIGhpcy9oZXIgc2Vzc2lvbiB1c2luZyBnZW5lcmljIHBheW1lbnQgUVIiLAogICAgICAgICAgfSk7CgogICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZXBsYWNlKHVybCk7CiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgdGhpcy5hZGRMaWNlbmNlUGxhdGVCdG5Mb2FkaW5nID0gZmFsc2U7CiAgICAgICAgY29uc29sZS5sb2coZXJyb3IpOwogICAgICB9CiAgICB9LAogICAgLyoqCiAgICAgKiBAbWV0aG9kIGdldEJvb2tpbmdEZXRhaWxzIGZldGNoIHRoZSBib29raW5nIGRldGFpbHMgYW5kIGNvbW1pdCBTRVRfQk9PS0lOR19ERVRBSUxTIG11dGF0aW9uLgogICAgICovCiAgICBhc3luYyBnZXRCb29raW5nRGV0YWlscyhib29raW5nSWQpIHsKICAgICAgdHJ5IHsKICAgICAgICB2YXIgYm9va2luZ0RldGFpbHMgPSBhd2FpdCBBUElIZWxwZXIoCiAgICAgICAgICAiR0VUIiwKICAgICAgICAgICIvYXBpL3YxL2Jvb2tpbmcvY29uZmlnLyIgKyBib29raW5nSWQKICAgICAgICApOwogICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgKICAgICAgICAgICJTRVRfQk9PS0lOR19ERVRBSUxTIiwKICAgICAgICAgIGJvb2tpbmdEZXRhaWxzLmRhdGE/LmRhdGEgPyBib29raW5nRGV0YWlscy5kYXRhLmRhdGEgOiBudWxsCiAgICAgICAgKTsKICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7CiAgICAgIH0KICAgIH0sCiAgICBjbG9zZUNvbmZpcm1DcmVhdGVTZXNzaW9uRGlhbG9nKCkgewogICAgICB0aGlzLmNvbmZpcm1DcmVhdGVTZXNzaW9uRGlhbG9nID0gZmFsc2U7CiAgICAgIHRoaXMuYWRkTGljZW5jZVBsYXRlQnRuTG9hZGluZyA9IGZhbHNlOwogICAgfSwKICB9LAp9Owo="},{"version":3,"sources":["Create.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8YA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Create.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <v-container class=\"pa-\" fluid>\n    <v-row class=\"text-center\" no-gutters>\n      <v-col cols=\"12\">\n        <v-img alt=\"PARKING.COM\" class=\"my-3\" height=\"42\" contain src=\"../assets/logo_huge_drk.png\" />\n      </v-col>\n    </v-row>\n    <v-row no-gutters>\n      <v-col>\n        <v-card class=\"mx-auto rounded-lg\" max-width=\"374\">\n          <v-dialog v-model=\"loading\" persistent>\n            <v-card class=\"pa-4\">\n              <v-progress-circular indeterminate color=\"red\"></v-progress-circular>\n              <span class=\"ml-4\" style=\"font-size: 14px\">Please wait...</span>\n            </v-card>\n          </v-dialog>\n          <template slot=\"progress\">\n            <v-progress-linear color=\"red\" height=\"10\" indeterminate></v-progress-linear>\n          </template>\n          <div style=\"position: relative\">\n            <v-img class=\"rounded-t-lg\" max-height=\"150px\" style=\"filter: brightness(50%)\" :src=\"zoneDetails.hasOwnProperty('image') &&\n              zoneDetails.image != '' &&\n              zoneDetails.image != null\n              ? zoneDetails.image\n              : zoneImgURL\n              \" :lazy-src=\"zoneDetails.hasOwnProperty('image') &&\n    zoneDetails.image != '' &&\n    zoneDetails.image != null\n    ? zoneDetails.image\n    : zoneImgURL\n    \" alt=\"Parking.com garage\">\n              <template v-slot:placeholder>\n                <v-row class=\"fill-height ma-0\" align=\"center\" justify=\"center\" no-gutters>\n                  <v-progress-circular indeterminate color=\"grey lighten-5\"></v-progress-circular>\n                </v-row>\n              </template>\n            </v-img>\n            <div class=\"booking_header white--text text-left mr-4\" v-if=\"isPQREndReservation\">\n              Welcome to\n              {{\n                onDemandZoneDetails.hasOwnProperty(\"name\")\n                ? onDemandZoneDetails.name\n                : \"\"\n              }}\n            </div>\n            <div class=\"booking_header white--text text-left mr-4\" v-else>\n              You are parked at\n              {{\n                zoneDetails.hasOwnProperty(\"zoneName\")\n                ? zoneDetails.zoneName\n                : \"\"\n              }}\n            </div>\n          </div>\n          <v-card-text class=\"pa-0\">\n            <v-form ref=\"detailsForm\">\n              <v-container fluid pa-0>\n                <v-row no-gutters class=\"pt-2 information pa-0\">\n                  <v-col cols=\"2\" class=\"align-self-center\">\n                    <v-img src=\"../assets/list_divider_step.imageset/list_divider_step.png\" width=\"45px\" v-if=\"!infoFlag\">\n                      <div class=\"row text-center align-self-center pl-5\">\n                        <div class=\"col-12 text-center\">\n                          <span style=\"\n                                                                          font-size: large;\n                                                                          font-weight: bold;\n                                                                          color: white;\n                                                                        \">1</span>\n                        </div>\n                      </div>\n                    </v-img>\n                    <v-img src=\"../assets/list_divider_step_completed.imageset/list_divider_step_completed.png\"\n                      width=\"45px\" v-if=\"infoFlag\">\n                      <div class=\"row text-center pl-5\">\n                        <div class=\"col-12 text-center\">\n                          <span style=\"\n                                                                          font-size: larger;\n                                                                          font-weight: bold;\n                                                                          color: white;\n                                                                        \">✓</span>\n                        </div>\n                      </div>\n                    </v-img>\n                  </v-col>\n                  <v-col cols=\"10\" class=\"mt-3\">\n                    <p style=\"color: #f2555c; font-weight: bolder\">\n                      Your Information\n                    </p>\n                  </v-col>\n                </v-row>\n                <v-row no-gutters v-if=\"!isPQREndReservation\">\n                  <v-col cols=\"12\" class=\"px-4 mt-2 text-center color-black\" style=\"font-size: 12px\">\n                    <p class=\"mb-0\" v-if=\"zoneDetails.lpr_status == '1'\">\n                      Enter your license plate and phone number for hassle-free\n                      parking\n                    </p>\n                    <p class=\"mb-0\" v-else>\n                      Enter your phone number for hassle-free parking\n                    </p>\n                  </v-col>\n                </v-row>\n                <v-row no-gutters>\n                  <v-col cols=\"12\" class=\"px-4 text-center color-black\" style=\"font-size: 12px\">\n                    <v-row no-gutters class=\"py-2\">\n                      <v-col cols=\"1\" class=\"text-right align-self-center\">\n                        <v-icon class=\"material-icons-outlined\">send_to_mobile</v-icon>\n                      </v-col>\n                      <v-col cols=\"11\" class=\"px-2\" v-if=\"!edtPhoneInput\">\n                        <VuePhoneNumberInput v-model=\"contactObj.phoneNumber\" size=\"md\" @update=\"onContactInput\"\n                          show-code-on-list :default-country-code=\"contactOptions.defaultCountry\"\n                          :disabled=\"contactDisabled\" :color=\"contactOptions.color\"\n                          :valid-color=\"contactOptions.validColor\" :error-color=\"contactOptions.errorColor\"\n                          :border-radius=\"contactOptions.contactBorderRadius\" :error=\"!isContactValid\" required\n                          :translations=\"contactOptions.translations\" />\n                      </v-col>\n                      <v-col cols=\"11\" class=\"px-2\" v-if=\"edtPhoneInput\">\n                        <v-text-field v-model=\"contactObj.phoneNumber\" disabled></v-text-field>\n                      </v-col>\n                      <v-col cols=\"1\"> </v-col>\n                      <v-col cols=\"11\" class=\"px-4\" v-if=\"!isPQREndReservation\">\n                        <span style=\"font-size: 10px; line-height: 1.5\">Phone number is mandatory for generating the\n                          receipt</span>\n                      </v-col>\n                    </v-row>\n                    <v-row no-gutters class=\"py-2\">\n                      <v-col cols=\"1\" class=\"text-right align-self-center\">\n                        <v-icon class=\"material-icons-outlined\">pin</v-icon>\n                      </v-col>\n                      <v-col cols=\"11\" class=\"px-2\">\n                        <v-text-field class=\"pt-0\" v-model=\"licencePlate\" hide-details=\"auto\" maxlength=\"8\" :rules=\"[rules.alphaNumeric]\"\n                          @keyup=\"uppercase\" label=\"License Plate *\" clearable></v-text-field>\n                      </v-col>\n                    </v-row>\n\n                    <v-row no-gutters class=\"pt-1\" v-if=\"isPQREndReservation\">\n                      <v-spacer></v-spacer>\n                      <v-col cols=\"11\" class=\"px-2 py-0 pb-3\">\n                        <p class=\"text-left mb-0\" style=\"font-size: 10px; line-height: 1.5\">\n                          Enter your full plate number to avoid citation. Max of\n                          8 characters. Do not include spaces or special\n                          characters.\n                        </p>\n                      </v-col>\n                    </v-row>\n                  </v-col>\n                </v-row>\n                <v-row no-gutters v-if=\"isPQREndReservation\">\n                  <v-col cols=\"12\">\n                    <v-row no-gutters class=\"pt-2 information pa-0\">\n                      <v-col cols=\"2\" class=\"align-self-center\">\n                        <v-img src=\"../assets/list_divider_step.imageset/list_divider_step.png\" width=\"45px\"\n                          v-if=\"!timeFlag\">\n                          <div class=\"row text-center align-self-center pl-5\">\n                            <div class=\"col-12 text-center\">\n                              <span style=\"\n                                                                              font-size: large;\n                                                                              font-weight: bold;\n                                                                              color: white;\n                                                                            \">2</span>\n                            </div>\n                          </div>\n                        </v-img>\n                        <v-img src=\"../assets/list_divider_step_completed.imageset/list_divider_step_completed.png\"\n                          width=\"45px\" v-if=\"timeFlag\">\n                          <div class=\"row text-center pl-5\">\n                            <div class=\"col-12 text-center\">\n                              <span style=\"\n                                        font-size: larger;\n                                        font-weight: bold;\n                                        color: white;\n                                      \">✓</span>\n                            </div>\n                          </div>\n                        </v-img>\n                      </v-col>\n                      <v-col cols=\"10\" class=\"mt-3\">\n                        <p style=\"color: #f2555c; font-weight: bolder\">\n                          Set Your Exit Date <span\n                            v-if=\"isPQREndReservation && Object.hasOwnProperty.call(zoneDetails, 'timePickerConfiguration') && zoneDetails.timePickerConfiguration == '1'\">and\n                            Time</span>\n                        </p>\n                      </v-col>\n                    </v-row>\n                    <v-row no-gutters class=\"pt-2 \">\n                      <v-spacer></v-spacer>\n                      <v-col cols=\"11\" class=\"px-2 py-0\">\n                        <p class=\"text-left ma-0\" v-if=\"isPQREndReservation\">\n                          If you're a hotel guest, this is your checkout date.\n                        </p>\n                      </v-col>\n                    </v-row>\n                    <v-row no-gutters>\n                      <v-col cols=\"12\" class=\"px-4 text-center color-black\" style=\"font-size: 12px\">\n\n                        <v-row no-gutters class=\"py-2\">\n                          <v-col cols=\"1\" class=\"text-right align-self-center\">\n                            <v-icon class=\"material-icons-outlined\">today</v-icon>\n                          </v-col>\n                          <v-col cols=\"11\" class=\"px-2\">\n                            <v-text-field v-model=\"computedDateFormatted\" @click=\"() => { openDatePicker = true }\"\n                              hide-details=\"auto\" readonly></v-text-field>\n                            <v-dialog v-model=\"openDatePicker\" max-width=\"450px\">\n                              <v-card style=\"background-color: #F2555C;color: white;\"><v-card-title>\n                                  <v-row no-gutters>\n                                    <v-col class=\"text-left\" cols=\"12\">\n                                      <span style=\"font-size:15px;color: #fabbbe;\">{{ time !== null && time !== \"\" ?\n                                        formattedYear : \"\" }}</span>\n                                    </v-col>\n                                    <v-col>\n                                      <span style=\"font-size:30px\"> {{ time !== null && time !== \"\" ? formattedDateTime :\n                                        \"\"\n                                      }}</span>\n                                    </v-col>\n                                  </v-row>\n                                </v-card-title></v-card>\n                              <Calendar inline class=\"text-left\" value :stepMinute=\"15\" hourFormat=\"12\"\n                                :minDate=\"minTimeDate\" @date-select=\"onTimePickerChange\" :maxDate=\"maxTimeDate\"\n                                v-model=\"time\" />\n                            </v-dialog>\n                          </v-col>\n                        </v-row>\n                        <v-row no-gutters class=\"pt-2 pb-4\"\n                          v-if=\"Object.hasOwnProperty.call(zoneDetails, 'timePickerConfiguration') && zoneDetails.timePickerConfiguration == '1'\">\n                          <v-col cols=\"1\" class=\"text-right align-self-center\">\n                            <v-icon class=\"material-icons-outlined\">schedule</v-icon>\n                          </v-col>\n                          <v-col cols=\"11\">\n                            <v-row no-gutters class=\"pb-0\">\n                              <v-col class=\"pb-0 px-2\">\n                                <v-text-field v-model=\"formattedTime\" @click=\"() => {\n                                  openTimePicker = true;\n                                }\" readonly></v-text-field>\n                                <v-dialog v-model=\"openTimePicker\" max-width=\"300px\"\n                                  @click:outside=\"() => { setDefaultDate(); onTimePickerChange() }\">\n                                  <v-card style=\"background-color: #F2555C;color: white;\"><v-card-title>What time will you\n                                      exit?</v-card-title></v-card>\n                                  <Calendar inline time-only show-time class=\"text-left \" value :stepMinute=\"15\"\n                                    hourFormat=\"12\" :minDate=\"minTimeDate\" :maxDate=\"maxTimeDate\" v-model=\"time\" />\n                                </v-dialog>\n                              </v-col>\n                            </v-row>\n                          </v-col>\n                        </v-row>\n                        <v-row class=\"text-left mt-0 px-2 py-0 pb-3\">\n                          <v-col cols=\"1\"></v-col>\n                          <v-col class=\"pt-0\">\n                            <p style=\"\n                              color: #1976d2;\n                              font-weight: bold;\n                              line-height: 16px;\n                            \" class=\"ma-0\">\n                              HOURS OF OPERATION\n                            </p>\n                            <p class=\"ma-0\">\n                              Today :\n                              {{\n                                onDemandZoneDetails.hasOwnProperty(\n                                  \"todaysHoursOfOperation\"\n                                ) &&\n                                onDemandZoneDetails.todaysHoursOfOperation.hasOwnProperty(\n                                  \"is24HourOpen\"\n                                ) &&\n                                onDemandZoneDetails.todaysHoursOfOperation\n                                  .is24HourOpen == true\n                                ? \"Open 24 / 7\"\n                                : \"\"\n                              }}\n                            </p>\n                          </v-col>\n                        </v-row>\n                      </v-col>\n                    </v-row>\n                    <v-row no-gutters class=\"pt-2 information pa-0\" v-if=\"estimate != null && Object.keys(estimate).length != 0\n                        \">\n                      <v-col cols=\"2\" class=\"align-self-center\">\n                        <v-img src=\"../assets/list_divider_step.imageset/list_divider_step.png\" width=\"45px\"\n                          v-if=\"!paymentFlag\">\n                          <div class=\"row text-center align-self-center pl-5\">\n                            <div class=\"col-12 text-center\">\n                              <span style=\"\n                                                                              font-size: large;\n                                                                              font-weight: bold;\n                                                                              color: white;\n                                                                            \">3</span>\n                            </div>\n                          </div>\n                        </v-img>\n                        <v-img src=\"../assets/list_divider_step_completed.imageset/list_divider_step_completed.png\"\n                          width=\"45px\" v-if=\"paymentFlag\">\n                          <div class=\"row text-center pl-5\">\n                            <div class=\"col-12 text-center\">\n                              <span style=\"\n                                                                              font-size: larger;\n                                                                              font-weight: bold;\n                                                                              color: white;\n                                                                            \">✓</span>\n                            </div>\n                          </div>\n                        </v-img>\n                      </v-col>\n                      <v-col cols=\"10\" class=\"mt-3\">\n                        <p style=\"color: #f2555c; font-weight: bolder\">\n                          Your Parking Fees\n                        </p>\n                      </v-col>\n                    </v-row>\n\n                    <Estimate :singleQuotes=\"singleQuotes\" :doubleQuotes=\"doubleQuotes\" :estimate=\"estimate\"\n                      :beforeEstimate=\"beforeEstimate\" :formattedEntryDisplayTime=\"formattedEntryDisplayTime\" ></Estimate>\n                  </v-col>\n                </v-row>\n              </v-container>\n            </v-form>\n          </v-card-text>\n          <v-card-actions class=\"pt-0 mt-4 pb-10\">\n            <v-container class=\"pa-0 text-center\" v-if=\"isPQREndReservation\">\n              <v-row no-gutters>\n                <v-col cols=\"12\" class=\"px-2\">\n                  <v-btn rounded elevation=\"20\" class=\"add_licence_plate_btn white--text\" :disabled=\"disableSubmitBtn\"\n                    :loading=\"addPaymentBtnLoading\" @click=\"addPayment\">Add Payment</v-btn>\n                </v-col>\n              </v-row>\n              <v-row no-gutters>\n                <v-col cols=\"12\" class=\"px-2 mt-4\">\n                  <v-btn rounded elevation=\"20\" width=\"50%\" class=\"white--text\" color=\"primary\"\n                    v-if=\"this.casinoDetails.userDetail.bid\" @click=\"reloadBooking\">Cancel</v-btn>\n                </v-col>\n              </v-row>\n            </v-container>\n            <v-container class=\"pa-0\" fluid v-else>\n              <v-row no-gutters>\n                <v-col cols=\"12\" class=\"px-2\">\n                  <v-btn rounded elevation=\"20\" class=\"add_licence_plate_btn white--text\"\n                    :loading=\"addLicencePlateBtnLoading\" :disabled=\"disableAddLicencePlateBtn\" @click=\"createSession()\">{{\n                      reEnterPlate ? \"Confirm\" : \"Continue\" }}</v-btn>\n                </v-col>\n              </v-row>\n              <v-row no-gutters>\n                <v-col cols=\"12\" class=\"mt-2 text-center color-black px-2\" style=\"font-size: 12px\">\n                  <p class=\"mb-0\" v-show=\"reEnterPlate\">\n                    Please provide correct license plate and phone number.\n                    Without one, you could be subject to a parking violation and\n                    issued a citation.\n                  </p>\n                  <p class=\"mb-0\">\n                    A valid credit card is required to park. Without one, you\n                    could be subject to a parking violation and issued a\n                    citation.\n                  </p>\n                </v-col>\n              </v-row>\n            </v-container>\n          </v-card-actions>\n        </v-card>\n      </v-col>\n    </v-row>\n    <v-dialog v-model=\"alertDialog\" persistent max-width=\"290\">\n      <v-card class=\"pa-0\">\n        <v-card-title class=\"justify-center\" style=\"position: relative\">\n          <v-icon x-large color=\"red accent-2\">mdi-alert-outline</v-icon>\n        </v-card-title>\n        <v-card-text class=\"text-center mt-5\">\n          <span style=\"font-size: 20px\">{{ alertMsg }}</span>\n        </v-card-text>\n        <v-card-actions class=\"text-center pb-6\">\n          <v-container pa-0 fluid>\n            <v-row no-gutters>\n              <v-col cols=\"12\">\n                <v-btn rounded block elevation=\"0\" class=\"white--text exit_dialog_btn\"\n                  @click=\"alertDialog = false\">Close</v-btn>\n              </v-col>\n            </v-row>\n          </v-container>\n        </v-card-actions>\n      </v-card>\n    </v-dialog>\n    <v-dialog v-model=\"confirmCreateSessionDialog\" max-width=\"fit-content\">\n      <v-card class=\"pa-0\">\n        <v-card-title class=\"justify-center\">\n          <v-icon x-large color=\"red accent-2\">mdi-alert-outline</v-icon>\n        </v-card-title>\n        <v-card-text class=\"text-center mt-5\" style=\"font-size: 15px\">\n          <span v-html=\"errMsg\"></span>\n        </v-card-text>\n        <v-card-actions class=\"text-center pb-6\">\n          <v-container pa-0 fluid>\n            <v-row no-gutters>\n              <v-col cols=\"12\">\n                <v-btn rounded block elevation=\"0\" class=\"white--text exit_dialog_btn\"\n                  @click=\"setReenterPlateFlag\">OK</v-btn>\n              </v-col>\n            </v-row>\n          </v-container>\n        </v-card-actions>\n      </v-card>\n    </v-dialog>\n  </v-container>\n</template>\n<script>\n// import Vue from \"vue\";\nimport Estimate from '../components/Estimate.vue'\nimport { EventBus } from \"@/lib/EventBus\";\nimport { mapGetters } from \"vuex\";\nimport { addMinutes, addDays, addHours } from \"date-fns\";\nimport { format, isValid } from \"date-fns\";\nimport \"primevue/resources/themes/saga-blue/theme.css\"       //theme\nimport \"primevue/resources/primevue.min.css\"                 //core css\nimport \"primeicons/primeicons.css\"                           //icons\nimport { dateToTimeZoneDate } from \"@/utils/formatDateTime\";\n// import axios from \"axios\";\nimport Calendar from '../uiComponents/Calendar/Calendar.vue'\nimport APIHelper from \"../apiHelper\";\nimport VuePhoneNumberInput from \"vue-phone-number-input\";\nimport \"vue-phone-number-input/dist/vue-phone-number-input.css\";\n// import moment from \"moment\";\n// Vue.use(moment);\nimport rules from \"@/utils/rules\";\nexport default {\n  data: () => ({\n    date: \"\",\n    time: \"\",\n    openTimePicker: false,\n    openDatePicker: false,\n    minTimeDate: null,\n    maxTimeDate: null,\n    // isPQREndReservation: true,\n    currentDate: format(new Date(), 'yyyy-MM-dd'),\n    edtEntryTime: null,\n    edtPhoneInput: false,\n    contactDisabled: false,\n    selectedPlate: \"\",\n    reEnterPlate: false,\n    edtBid: null,\n    confirmCreateSessionDialog: false,\n    addLicencePlateBtnLoading: false,\n    errDialog: false,\n    errMsg: \"\",\n    alertDialog: false,\n    alertMsg: \"\",\n    stopTime: \"\",\n    exitTimeSelected: {},\n    timePickerHrRange: null,\n    timeExceeded: false,\n    timePickerMinRange: null,\n\n    disableAddPaymentBtn: false,\n    maxDateTime: null,\n    getRateCall: false,\n    getRateText: \"\",\n    Timemenu: false,\n    startDate: \"\",\n    estimate: null,\n    beforeEstimate: null,\n    Datemenu: false,\n    exitDate: null,\n    dateFormatted: null,\n    rules: rules,\n    isContactValid: true,\n    licencePlate: \"\",\n    contactObj: {},\n    loading: false,\n    contactOptions: {\n      color: \"#0288D1\",\n      validColor: \"#0288D1\",\n      contactBorderRadius: 0,\n      errorColor: \"#FF5252\",\n      defaultCountry: \"US\",\n      translations: {\n        phoneNumberLabel: \"Contact No\",\n      },\n    },\n    addPaymentBtnLoading: false,\n  }),\n  components: {\n    VuePhoneNumberInput, Calendar, Estimate\n  },\n  beforeRouteEnter(to, from, next) {\n    next(async (vm) => {\n      let searchParams = window.location.search.split(\"=\");\n      let searchParamKey = searchParams.length > 0 ? searchParams[0] : \"\";\n      let searchParamValue = searchParams.length > 0 ? searchParams[1] : \"\";\n      switch (searchParamKey) {\n        case \"?zcode\":\n          await vm.getZoneDetails(searchParamKey, searchParamValue);\n          if (vm.isPQREndReservation) {\n            await vm.getOnDemandZoneDetails(searchParamValue);\n            vm.setDefaultDate();\n          }\n          break;\n        case \"?gateid\":\n          //await self.getZoneDetails(searchParamKey, searchParamValue);\n          break;\n      }\n      if (vm.isPQREndReservation) {\n        vm.contactObj =\n          vm.casinoDetails != null &&\n            Object.hasOwnProperty.call(vm.casinoDetails, \"userDetail\") &&\n            Object.hasOwnProperty.call(vm.casinoDetails?.userDetail, \"contact\") &&\n            vm.casinoDetails?.userDetail?.contact != undefined &&\n            vm.casinoDetails?.userDetail?.contact != null\n            ? Object.assign(vm.contactObj, {\n              countryCode:\n                vm.casinoDetails?.userDetail?.contact.slice(0, -10) == \"+91\"\n                  ? \"IN\"\n                  : vm.casinoDetails?.userDetail?.contact.slice(0, -10) ==\n                    \"+1\"\n                    ? \"US\"\n                    : \"\",\n              phoneNumber: vm.casinoDetails?.userDetail?.contact,\n              formattedNumber: \"+\" + vm.casinoDetails.userDetail.contact,\n            })\n            : {};\n        vm.licencePlate = vm.casinoDetails?.userDetail.plate\n          ? vm.casinoDetails?.userDetail.plate\n          : \"\";\n        if (window.location.href.includes('bid')) {\n          let hrefParams = window.location.href.split('createsession');\n          let paramArray = hrefParams[1].split('&')\n          let phoneParam = paramArray.length >= 1 ? paramArray[0].split('=')[1] : \"\";\n          let bidParam = paramArray.length >= 2 ? paramArray[1].split('=')[1] : \"\";\n          let plateParam = paramArray.length >= 3 ? paramArray[2].split('=')[1] : \"\";\n          let entrytimeparam = paramArray.length >= 4 ? paramArray[3].split('=')[1] : \"\";          // vm.contactObj.phoneNumber = phoneParam;\n          vm.edtEntryTime = entrytimeparam != null && entrytimeparam !== \"\" && entrytimeparam != undefined ? format(new Date(vm.formatExitDateTime(entrytimeparam, 'date')), \"yyyy-MM-dd'T'HH:mm:ss\") : format(dateToTimeZoneDate(new Date(), vm.zoneDetails.timezone), \"yyyy-MM-dd'T'HH:mm:ss\")\n          vm.licencePlate = plateParam;\n          vm.edtBid = bidParam;\n          let guestContact = phoneParam ? {\n            countryCode:\n              phoneParam.slice(0, -10) == \"91\"\n                ? \"IN\"\n                : phoneParam.slice(0, -10) == \"1\"\n                  ? \"US\"\n                  : \"\",\n            phoneNumber: phoneParam,\n            formattedNumber: \"+\" + phoneParam,\n          } : vm.contactObj;\n          if (phoneParam !== \"\" && phoneParam !== null && phoneParam != undefined) {\n            vm.edtPhoneInput = true;\n            vm.contactObj = Object.assign({}, guestContact);\n            vm.contactDisabled = true;\n            vm.contactObj.isValid = true;\n          }\n          let commitData = {\n            plate: vm.licencePlate,\n            contact: vm.contactObj?.formattedNumber,\n            bid: vm.edtBid,\n            entrytime: vm.edtEntryTime,\n            edtParams: hrefParams[1]\n          }\n          vm.$store.commit(\"SET_CASINO_USERDETAILS\", commitData);\n          vm.$store.commit(\"SET_TEMPLATE_FLAGS\", 'atlantic-flag');\n\n        }\n      }\n      else {\n        vm.edtPhoneInput = false;\n      }\n    });\n  },\n  watch: {\n    time(newVal, oldVal) {\n      if (oldVal != null && newVal != null && oldVal != newVal && oldVal != \"\" && newVal != \"\" && (isValid(newVal))) {\n        this.round(newVal);\n      }\n      // this.setTimePicker(newVal);\n    },\n  },\n  computed: {\n    formattedDateTime() {\n      return this.time !== null && this.time !== undefined && this.time !== \"\" ? format(this.time, 'iii, LLL dd') : \"\"\n    },\n    formattedYear() {\n      return this.time !== null && this.time !== undefined && this.time !== \"\" ? format(this.time, 'yyyy') : \"\"\n    },\n    formattedTime() {\n      return this.time !== null && this.time !== undefined && this.time !== \"\" ? format(this.time, 'hh:mm aa') : \"\"\n    },\n    ...mapGetters({\n      casinoDetails: \"getterCasinoDetails\",\n      zoneDetails: \"getterZoneDetails\",\n      onDemandZoneDetails: \"getterOnDemandZoneDetails\",\n      templateFlags: \"getterTemplateFlags\",\n      isPQREndReservation: \"getterZoneIsPQREndReservation\",\n    }),\n    singleQuotes() {\n      return Object.hasOwnProperty.call(this.zoneDetails, 'timePickerConfiguration') && this.zoneDetails.timePickerConfiguration == \"0\" ? (format(this.time, 'yyyy-MM-dd') == this.currentDate || (this.beforeEstimate !== null && this.beforeEstimate !== undefined && this.beforeEstimate !== \"\" && this.estimate !== null && this.estimate !== undefined && this.estimate !== \"\" && this.beforeEstimate.grandTotal == this.estimate.grandTotal)) : true\n    },\n    doubleQuotes() {\n      return Object.hasOwnProperty.call(this.zoneDetails, 'timePickerConfiguration') && this.zoneDetails.timePickerConfiguration == \"0\" ? (format(this.time, 'yyyy-MM-dd') != this.currentDate && (this.beforeEstimate !== null && this.beforeEstimate !== undefined && this.beforeEstimate !== \"\" && this.estimate !== null && this.estimate !== undefined && this.estimate !== \"\" && this.beforeEstimate.grandTotal != this.estimate.grandTotal)) : false\n    },\n    formattedEntryDisplayTime() {\n      return this.casinoDetails.userDetail.entrytime !== null && this.casinoDetails.userDetail.entrytime !== undefined && this.casinoDetails.userDetail.entrytime !== \"\" ? format((new Date(this.casinoDetails.userDetail.entrytime)), 'hh:mm a') : format(dateToTimeZoneDate(new Date(), this.zoneDetails.timezone), 'hh:mm a');\n    },\n    infoFlag() {\n      return this.contactObj == null ||\n        !this.contactObj.isValid ||\n        this.contactObj.phoneNumber == \"\" ||\n        this.contactObj.phoneNumber == null ||\n        this.licencePlate === \"\" ||\n        this.licencePlate === null\n        ? false\n        : true;\n    },\n    timeFlag() {\n      return this.time == null ||\n        this.disableAddPaymentBtn ||\n        this.estimate === null ||\n        this.estimate === \"\" || (Object.hasOwnProperty.call(this.zoneDetails, 'timePickerConfiguration') && this.zoneDetails.timePickerConfiguration == \"1\" && format(this.time, 'yyyy-MM-dd') != format(this.minTimeDate, 'yyyy-MM-dd') && (this.beforeEstimate === null || this.beforeEstimate == \"\" || this.beforeEstimate == undefined)) ||\n        this.time === \"\" || this.time == undefined\n        ? false\n        : true;\n    },\n    paymentFlag() {\n      return this.estimate === null ||\n        this.estimate === \"\" ||\n        this.estimate.hasOwnProperty.call(\"grandTotal\") ||\n        this.estimate.hasOwnProperty.call(\"totalPrice\") ||\n        this.estimate.hasOwnProperty.call(\"totalFee\") ||\n        this.estimate.hasOwnProperty.call(\"totalTax\") || (this.zoneDetails?.timePickerConfiguration == '1' && this.beforeEstimate === null && this.beforeEstimate === \"\" && this.beforeEstimate === null && this.beforeEstimate.hasOwnProperty.call(\"totalPrice\") && this.beforeEstimate.hasOwnProperty.call(\"totalFee\") && this.beforeEstimate.hasOwnProperty.call(\"totalTax\"))\n        ? false\n        : true;\n    },\n    computedDateFormatted() {\n      return this.time != null && this.time != \"\" && this.time != undefined ? format(this.time, 'MM/dd/yyyy') : \"\"\n    },\n    disableSubmitBtn() {\n      let disabled =\n        this.contactObj == null ||\n        !this.contactObj.isValid ||\n        this.contactObj.phoneNumber == \"\" ||\n        this.contactObj.phoneNumber == null ||\n        this.licencePlate === \"\" ||\n        this.licencePlate === null ||\n        this.disableAddPaymentBtn ||\n        this.estimate === null ||\n        this.estimate === \"\"\n      this.exitDate === \"\";\n      let selectedMins = this.time !== null && this.time !== undefined && this.time !== \"\" ? format(this.time, 'mm') : new Date();\n      let selectedHours = this.time !== null && this.time !== undefined && this.time !== \"\" ? format(this.time, 'hh') : new Date();\n      let selectedAMPM = this.time !== null && this.time !== undefined && this.time !== \"\" ? format(this.time, 'aaa') : new Date();\n      disabled =\n        disabled ||\n        selectedMins == null ||\n        selectedMins === \"\" ||\n        selectedMins == undefined ||\n        selectedHours == null ||\n        selectedHours === \"\" ||\n        selectedHours == undefined || selectedAMPM == null ||\n        selectedAMPM === \"\" ||\n        selectedAMPM == undefined || this.time === null || this.time === \"\" || this.time === undefined\n      disabled =\n        this.licencePlate != \"\" && this.licencePlate != null\n          ? disabled || /^[a-z0-9]+$/i.test(this.licencePlate) === false\n          : disabled;\n      return disabled;\n    },\n    disableAddLicencePlateBtn() {\n      if (this.zoneDetails.lpr_status == \"0\") {\n        return this.isContactValid == false ? true : false;\n      } else {\n        return this.isContactValid == false ||\n          this.licencePlate == \"\" ||\n          this.licencePlate == null ||\n          /^[a-z0-9]+$/i.test(this.licencePlate) === false\n          ? true\n          : false;\n      }\n    },\n  },\n  mounted() {\n    EventBus.$on('SET_TIME', () => {\n      this.onTimePickerChange();\n    })\n    this.setDefaultDate();\n  },\n  methods: {\n    round(time) {\n      let exitdate = time !== null && time !== '' ? format(time, 'yyyy/MM/dd') : new Date();\n\n      let selectedMins = time !== null && time !== '' ? format(time, 'mm') : new Date();\n      let selectedHours = time !== null && time !== '' ? format(time, 'hh') : new Date();\n      let selectedAMPM = time !== null && time !== '' ? format(time, 'aaa') : new Date();\n      if (exitdate != null && selectedMins != '15' && selectedMins != '30' && selectedMins != '45' && selectedMins != '00' && selectedMins != null && selectedMins != \"\" && selectedHours != null && selectedHours != \"\" && selectedAMPM != null && selectedAMPM != \"\") {\n        let intervalMilliseconds = 900000\n        let datetime = new Date(exitdate + \" \" + selectedHours + \":\" + selectedMins + \" \" + selectedAMPM)\n        let interval = datetime.getTime() % intervalMilliseconds;\n        let delta = interval === 0 ? 0 : datetime.getTime() - interval;\n        delta += intervalMilliseconds;\n        // this.exitTimeSelected = Object.assign(this.exitTimeSelected, { hh: format(new Date(delta), 'hh'), mm: format(new Date(delta), 'mm'), a: format(new Date(delta), 'a'), })\n        return interval !== 0 ? new Date(delta) : datetime;\n      }\n    },\n    dateChange() {\n      this.dateTimeChange();\n      Object.hasOwnProperty.call(this.zoneDetails, 'timePickerConfiguration') && this.zoneDetails?.timePickerConfiguration == \"1\" ? this.beforeDateTimeChange() : \"\";\n    },\n    formatExitDateTime(time, val) {\n      if (time !== null && time !== undefined && time != '') {\n        let utcDate = new Date(time * 1000).toUTCString(); //\"Wed, 27 Jan 2021 13:59:04 GMT\"\n        let month = utcDate.split(\",\")[1].split(\" \")[2]; // Jan\n        let date = utcDate.split(\",\")[1].split(\" \")[1]; // 27\n        let year = utcDate.split(\",\")[1].split(\" \")[3];\n        let hr = utcDate.split(\",\")[1].split(\" \")[4].split(\":\")[0]; // 13\n        let min = utcDate.split(\",\")[1].split(\" \")[4].split(\":\")[1]; //59\n        let formatHr = Number(hr) > 12 ? Number(hr) - 12 : Number(hr); // 1\n        formatHr = Number(formatHr) >= 10 ? Number(formatHr) : formatHr; //01\n        let amOrpm = Number(hr) >= 12 ? \"p\" : \"a\"; //PM\n        let ampm = Number(hr) >= 12 ? \"PM\" : \"AM\";\n        switch (val) {\n          case 'hour': {\n            return formatHr + amOrpm;\n          }\n          case 'mins': {\n            return min\n          }\n          case 'date': {\n            return month + \" \" + date + \", \" + year + \" \" + formatHr + \":\" + min + \" \" + ampm;\n          }\n        }\n      }\n      //Jan 27, 01:59 PM\n    },\n    reloadBooking() {\n      let url = window.location.origin + \"/g/\" + this.casinoDetails.userDetail.bid;\n      window.location.replace(url);\n    },\n    setDefaultDate() {\n      this.dateFormatted = this.zoneDetails.timezone ? format(\n        dateToTimeZoneDate(addMinutes(new Date(), 15),\n          this.zoneDetails.timezone\n        ),\n        \"MM/dd/yyyy\"\n      )\n        : format(addMinutes(new Date(), 15), \"MM/dd/yyyy\");\n      this.time = this.zoneDetails.timezone\n        ?\n        dateToTimeZoneDate(\n          addMinutes(new Date(), 15),\n          this.zoneDetails.timezone\n        )\n        : addMinutes(new Date(), 15);\n      let fifteenTime = this.time;\n      this.time = format(this.time, 'mm') === '15' || format(this.time, 'mm') === '30' || format(this.time, 'mm') === '45' || format(this.time, 'mm') === '00' ? fifteenTime : this.round(this.time);\n      let selectedMins = this.time !== null && this.time !== undefined && this.time !== \"\" ? format(this.time, 'mm') : \"\";\n      let selectedHours = this.time !== null && this.time !== undefined && this.time !== \"\" ? format(this.time, 'HH') : \"\";\n      let selectedAMPM = this.time !== null && this.time !== undefined && this.time !== \"\" ? format(this.time, 'a') : \"\";\n      this.stopTime = selectedMins != null && selectedMins != \"\" && selectedHours != null && selectedHours != \"\" && selectedAMPM != null && selectedAMPM != \"\" ? selectedHours + \":\" + selectedMins + \":\" + \"00\" : \"\";\n      // this.dateTimeChange()\n      // Object.hasOwnProperty.call(this.zoneDetails, 'timePickerConfiguration') && this.zoneDetails?.timePickerConfiguration == \"1\" && format(this.time, 'yyyy-MM-dd') != format(dateToTimeZoneDate(new Date(), this.zoneDetails.timezone), 'yyyy-MM-dd') ? this.beforeDateTimeChange() : \"\";\n    },\n    onTimePickerChange() {\n      let exitdate = this.time !== null && this.time !== undefined && this.time !== \"\" ? format(this.time, 'yyyy/MM/dd') : \"\";\n      let selectedMins = this.time !== null && this.time !== undefined && this.time !== \"\" ? format(this.time, 'mm') : \"\";\n      let selectedHours = this.time !== null && this.time !== undefined && this.time !== \"\" ? format(this.time, 'HH') : \"\";\n      let selectedAMPM = this.time !== null && this.time !== undefined && this.time !== \"\" ? format(this.time, 'a') : \"\";\n      this.stopTime = selectedMins != null && selectedMins != \"\" && selectedHours != null && selectedHours != \"\" && selectedAMPM != null && selectedAMPM != \"\" ? selectedHours + \":\" + selectedMins + \":\" + \"00\" : \"\";\n      let currenTime = this.zoneDetails.timezone\n        ? format(\n          dateToTimeZoneDate(new Date(),\n            this.zoneDetails.timezone\n          ),\n          \"yyyy-MM-dd HH:mm:ss\"\n        )\n        : format(new Date(), \"yyyy-MM-dd  HH:mm:ss\");\n      if (\n        selectedMins != null && selectedMins != \"\" && selectedHours != null && selectedHours != \"\" && selectedAMPM != null && selectedAMPM != \"\" &&\n        new Date(exitdate + \" \" + this.stopTime).getTime() >\n        new Date(currenTime).getTime()\n      ) {\n        format(this.time, 'yyyy-MM-dd') != format(this.minTimeDate, 'yyyy-MM-dd') ? this.beforeDateTimeChange() : \"\";\n        this.dateTimeChange();\n\n      }\n    },\n    setDatePicker() {\n      //set the minimum date to today date(zone time zone date)\n      this.minTimeDate = this.zoneDetails.timezone ? this.round(this.zoneDetails.timezone\n        ?\n        dateToTimeZoneDate(addMinutes(new Date(), 15),\n          this.zoneDetails.timezone\n        )\n        : addMinutes(new Date(), 15)) : this.zoneDetails.timezone\n        ?\n        dateToTimeZoneDate(addMinutes(new Date(), 15),\n          this.zoneDetails.timezone\n        )\n        : addMinutes(new Date(), 15)\n      //calculate max parkign time in seconds\n      let maxPark = this.zoneDetails != null && this.zoneDetails !== undefined && this.zoneDetails != \"\" ? this.zoneDetails?.maxParkingTime : null;\n\n      let addeddays = addDays(new Date(), maxPark?.days);\n      let addedhours = addHours(addeddays, maxPark?.hours);\n      let addedmins = addMinutes(addedhours, maxPark?.minutes);\n\n      //get max date in seconds based on max parking time\n      let maxZoneDate = addedmins\n      this.maxTimeDate = this.zoneDetails.timezone\n        ?\n        dateToTimeZoneDate(\n          new Date(maxZoneDate),\n          this.zoneDetails.timezone\n        )\n        : new Date(maxZoneDate);\n      //get max date with time and set it to maxDateTime\n      this.maxDateTime = this.zoneDetails.timezone\n        ? format(\n          dateToTimeZoneDate(\n            new Date(maxZoneDate),\n            this.zoneDetails.timezone\n          ),\n          \"yyyy-MM-dd hh:mm aaaaa\"\n        )\n        : format(new Date(), \"yyyy-MM-dd hh:mm aaaaa\");\n    },\n\n    /** @methods to find the estimate rate \n     @params startDate , stopDate,zcode, type , env_overRide\n     */\n\n    async dateTimeChange() {\n      if (!this.zoneDetails.zcode) {\n        return\n      }\n      try {\n        // format(new Date(this.checkinDate), \"yyyy-MM-dd'T'HH:mm:ss\");\n        let href = window.location.href;\n        let edtEntryTime = \"\"\n        if (href.includes('entrytime')) {\n          let params = href.split('?');\n          let timeparam = params[2].split('entrytime')[1];\n          edtEntryTime = timeparam.substring(1, timeparam.length)\n        }\n\n        this.startDate = edtEntryTime !== null && edtEntryTime !== undefined && edtEntryTime !== \"\" ? format(new Date(this.formatExitDateTime(edtEntryTime, 'date')), \"yyyy-MM-dd'T'HH:mm:ss\") : this.zoneDetails.timezone\n          ? format(\n            dateToTimeZoneDate(\n              new Date(),\n              this.zoneDetails.timezone\n            ),\n            \"yyyy-MM-dd'T'HH:mm:ss\"\n          )\n          : format(new Date(), \"yyyy-MM-dd'T'HH:mm:ss\");\n        // console.log(this.exitTimeSelected?.hh+\":\"+this.exitTimeSelected.mm+\":00\")\n        // this.exitDate + \"T23:59:00\"\n        let stopTime = this.stopTime;\n        let exitdate = this.time !== null && this.time !== undefined && this.time !== \"\" ? format(this.time, 'yyyy-MM-dd') : \"\";\n        let exittime = Object.hasOwnProperty.call(this.zoneDetails, 'timePickerConfiguration') && this.zoneDetails?.timePickerConfiguration == '1' ? 'T' + stopTime : \"T23:59:00\";\n        let stopDate = exitdate + exittime;\n        let data = {\n          startAt: this.startDate,\n          stopAt: stopDate,\n          zcode: this.zoneDetails.zcode,\n        };\n        this.addPaymentBtnLoading = true;\n        var getRate = await APIHelper(\"POST\", \"/api/v2/getRate\", data);\n        //condition to check if the date time selected is lesser than current time\n        if (!getRate?.data?.status && !this.getRateCall) {\n          this.disableAddPaymentBtn = true;\n          this.alertDialog = true;\n          this.alertMsg =\n            getRate?.data?.message || \"Error in getting rate details\";\n          this.openDatePicker = false;\n          this.openTimePicker = false;\n          EventBus.$emit('datetime-set');\n\n        } else {\n          this.disableAddPaymentBtn = false;\n          this.openDatePicker = false;\n          this.openTimePicker = false;\n          EventBus.$emit('datetime-set');\n\n        }\n        this.estimate = Object.assign({}, getRate?.data?.data);\n        // estimatedVal != \"\" &&\n        // estimatedVal != null &&\n        // estimatedVal != undefined\n        //   ? Number(estimatedVal).toFixed(2)\n        //   : estimatedVal;\n        this.openDatePicker = false;\n        this.openTimePicker = false;\n        this.addPaymentBtnLoading = false;\n      }\n      catch (error) {\n        this.addPaymentBtnLoading = false;\n        console.log(error);\n      }\n    },\n    async beforeDateTimeChange() {\n      if (!this.zoneDetails.zcode) {\n        return\n      }\n      try {\n        // format(new Date(this.checkinDate), \"yyyy-MM-dd'T'HH:mm:ss\");\n\n        let href = window.location.href;\n        let edtEntryTime = \"\"\n        if (href.includes('entrytime')) {\n          let params = href.split('?');\n          let timeparam = params[2].split('entrytime')[1];\n          edtEntryTime = timeparam.substring(1, timeparam.length)\n        }\n        this.startDate = edtEntryTime !== null && edtEntryTime !== undefined && edtEntryTime !== \"\" ? format(new Date(this.formatExitDateTime(edtEntryTime, 'date')), \"yyyy-MM-dd'T'HH:mm:ss\") : this.zoneDetails.timezone\n          ? format(\n            dateToTimeZoneDate(\n              new Date(),\n              this.zoneDetails.timezone\n            ),\n            \"yyyy-MM-dd'T'HH:mm:ss\"\n          )\n          : format(new Date(), \"yyyy-MM-dd'T'HH:mm:ss\");\n        let stopTime = this.stopTime;\n        let selectedHours = this.casinoDetails.userDetail.entrytime != null && this.casinoDetails.userDetail.entrytime !== undefined && this.casinoDetails.userDetail.entrytime != \"\" ? format(new Date(this.casinoDetails.userDetail.entrytime), 'HH') : format(dateToTimeZoneDate(new Date(), this.zoneDetails.timezone), 'HH');\n        let selectedMins = this.casinoDetails.userDetail.entrytime != null && this.casinoDetails.userDetail.entrytime !== undefined && this.casinoDetails.userDetail.entrytime != \"\" ? format(new Date(this.casinoDetails.userDetail.entrytime), 'mm') : format(dateToTimeZoneDate(new Date(), this.zoneDetails.timezone), 'mm');\n        let exitdate = this.time !== null && this.time !== undefined && this.time !== \"\" ? format(this.time, 'yyyy-MM-dd') : \"\";\n        let exittime = Object.hasOwnProperty.call(this.zoneDetails, 'istimePickerConfigurationGated') && this.zoneDetails?.timePickerConfiguration == '0' ? 'T' + stopTime : 'T' + selectedHours + \":\" + selectedMins + \":00\";\n\n        let stopDate = exitdate + exittime;\n        let data = {\n          startAt: this.startDate,\n          stopAt: stopDate,\n          zcode: this.zoneDetails.zcode,\n        };\n        this.addPaymentBtnLoading = true;\n        var getRate = await APIHelper(\"POST\", \"/api/v2/getRate\", data);\n        //condition to check if the date time selected is lesser than current time\n        if (!getRate?.data?.status && !this.getRateCall) {\n          this.disableAddPaymentBtn = true;\n          this.alertDialog = true;\n          this.alertMsg =\n            getRate?.data?.message || \"Error in getting rate details\";\n          this.openDatePicker = false;\n          this.openTimePicker = false;\n          EventBus.$emit('datetime-set');\n        } else {\n          this.disableAddPaymentBtn = false;\n          this.openDatePicker = false;\n          this.openTimePicker = false;\n          EventBus.$emit('datetime-set');\n        }\n        this.beforeEstimate = Object.assign({}, getRate?.data?.data);\n        // estimatedVal != \"\" &&\n        // estimatedVal != null &&\n        // estimatedVal != undefined\n        //   ? Number(estimatedVal).toFixed(2)\n        //   : estimatedVal;\n        this.addPaymentBtnLoading = false;\n      }\n      catch (error) {\n        this.addPaymentBtnLoading = false;\n        console.log(error);\n      }\n    },\n    formatDate(date) {\n      let stringdate = date.toString();\n      if (!date) return null;\n\n      const [year, month, day] = stringdate.split(\"-\");\n      return `${month}/${day}/${year}`;\n    },\n    parseDate(date) {\n      if (!date) return null;\n\n      const [month, day, year] = date.split(\"/\");\n      return `${year}-${month.padStart(2, \"0\")}-${day.padStart(2, \"0\")}`;\n    },\n    async addPayment() {\n      let exitDate = this.time != null || this.time !== undefined || this.time != \"\" ? format(this.time, 'yyyy-MM-dd') : format(new Date(), 'yyyy-MM-dd')\n      let exitTime = this.time != null || this.time !== undefined || this.time != \"\" ? Object.hasOwnProperty.call(this.zoneDetails, 'timePickerConfiguration') && this.zoneDetails.timePickerConfiguration == 1 ? format(this.time, 'hh:mm a') : \"11:59 PM\" : \"\";\n      let exitDateTime = exitDate + \" \" + exitTime\n      let entryDateTime = this.zoneDetails.timezone\n        ? format(\n          dateToTimeZoneDate(new Date(), this.zoneDetails.timezone),\n          \"yyyy-MM-dd hh:mm a\"\n        )\n        : format(new Date(), \"yyyy-MM-dd'T'HH:mm a\");\n      let commitData = {\n        plate: this.licencePlate,\n        contact: this.contactObj?.formattedNumber,\n        entryTime: entryDateTime,\n        edtParams: this.casinoDetails?.userDetail?.edtParams,\n        exitTime: exitDateTime,\n        estimate: this.estimate,\n      };\n      let details = await APIHelper(\"POST\", \"/api/v1/prepaid/openTransaction\", {\n        vehicleNo: this.licencePlate,\n        contact: this.contactObj?.formattedNumber,\n        exitTime: exitDateTime, zcode: this.zoneDetails?.zcode,\n        mid: this.zoneDetails?.mid,\n        eventType: \"PaidHostPass\",\n      });\n\n      if (details?.data?.status) {\n        this.$store.commit(\"SET_CASINO_USERDETAILS\", commitData);\n        this.$router.replace({ path: \"/prepaidhost/makepayment\" });\n      } else {\n        if (details?.data?.message == \"Booking Already Exists\") {\n          let commitData = {\n            plate: this.licencePlate,\n            contact: this.contactObj.formattedNumber,\n            entryTime: entryDateTime,\n            edtParams: this.casinoDetails?.userDetail?.edtParams,\n            exitTime: exitDateTime,\n            estimate: this.estimate,\n            bid: details?.data?.data?.bid\n          };\n          if (details?.data?.data?.cardOnFile == 0 || details?.data?.data?.cardOnFile == 2) {\n            this.$store.commit(\"SET_CASINO_USERDETAILS\", commitData);\n            this.$router.replace({ path: \"/prepaidhost/makepayment\" });\n          }\n          else if (details?.data?.data?.cardOnFile == 1) {\n            // this.$store.commit(\"SET_CASINO_USERDETAILS\", commitData);\n            // this.$router.replace({ path: \"/prepaidhost/odReceipt\" });\n            let url = window.location.origin + \"/g/\" + details?.data?.data?.bid;\n            window.location.replace(url);\n          }\n        }\n        this.alertMsg = details?.data?.message ? details?.data?.message : \"\";\n\n        this.alertDialog = true;\n      }\n    },\n\n    uppercase() {\n      if (rules.alphaNumeric(this.licencePlate) === \"Must be alphanumeric\") {\n        this.licencePlate = this.licencePlate.replace(/[^\\w\\s]/gi, '')\n      }\n      this.licencePlate = this.licencePlate.trim()\n      this.licencePlate = this.licencePlate.toUpperCase();\n    },\n    /**\n     * @method getZoneDetails fetch the zone details and commit SET_ZONE_DETAILS mutation.\n     */\n    async getZoneDetails(searchParamKey, searchParamValue) {\n      try {\n        var zoneDetails = await APIHelper(\n          \"GET\",\n          \"/api/v1/user/config\" + searchParamKey + \"=\" + searchParamValue\n        );\n        this.$store.commit(\"SET_ZONE_DETAILS\", zoneDetails.data?.zone);\n      } catch (error) {\n        console.log(error);\n      }\n    },\n    /**\n     * @method getOnDemandZoneDetails fetch the ondemand zone details from Pcom and commit SET_ZONE_DETAILS mutation.\n     */\n    async getOnDemandZoneDetails(searchParamValue) {\n      this.loading = true;\n      try {\n        var zoneDetails = await APIHelper(\n          \"GET\",\n          \"/api/v1/getOnDemand/\" + searchParamValue\n        );\n        this.loading = false;\n        if (zoneDetails.data?.lot) {\n          this.$store.commit(\n            \"SET_ON_DEMAND_ZONE_DETAILS\",\n            zoneDetails.data?.lot\n          );\n          this.setDatePicker();\n        } else {\n          this.alertMsg =\n            zoneDetails?.data?.message || \"Error in loading location details.\";\n          this.alertDialog = true;\n        }\n      } catch (error) {\n        this.loading = false;\n        console.log(error);\n      }\n    },\n    onContactInput(contactDetails) {\n      this.isContactValid = contactDetails?.isValid;\n      this.contactObj = Object.assign({}, contactDetails);\n    },\n    setReenterPlateFlag() {\n      this.licencePlate = this.selectedPlate || \"\";\n      this.reEnterPlate = true;\n      this.confirmCreateSessionDialog = false;\n    },\n    /**\n     * @method createSession Fetch booking id on add booking and fetch the booking info.\n     */\n    async createSession() {\n      this.addLicencePlateBtnLoading = true;\n      let postObj = {\n        contact: this.contactObj?.formattedNumber,\n        uniqueID: this.contactObj?.nationalNumber,\n        vehicleNo: this.licencePlate.toUpperCase(),\n        locationCode: this.zoneDetails.zcode,\n        zid: this.zoneDetails.zid,\n        entrytime: format(\n          new Date(\n            new Date().toLocaleString(\"en-US\", {\n              timeZone: this.zoneDetails.timezone,\n            })\n          ),\n          \"yyyy-MM-dd HH:mm:ss\"\n        ),\n        source: \"appclip\",\n        webView: \"1\",\n        type: \"2\",\n        state: 2,\n        payment_status: 0,\n        txnID_addCC: 0,\n      };\n      if (this.reEnterPlate) {\n        Object.assign(postObj, { createNewSession: 1 });\n      }\n      try {\n        var session = await APIHelper(\"POST\", \"/api/v1/addBooking\", postObj);\n        let bid = session?.data?.refno;\n        if (session.data.status === false) {\n          this.errMsg = session?.data?.message ? session.data.message : \"\";\n          if (\n            session?.data?.showCreateNewSessionPopup &&\n            session.data.showCreateNewSessionPopup == 1\n          ) {\n            this.postToLoggerAPI({\n              phone: this.contactObj?.nationalNumber,\n              plate: this.licencePlate.toUpperCase(),\n              statusText: \"Parker session not found in the system.\",\n            });\n            this.confirmCreateSessionDialog = true;\n            this.addLicencePlateBtnLoading = false;\n            return;\n          }\n          this.errDialog = true;\n          this.addLicencePlateBtnLoading = false;\n          return;\n        }\n        await this.getBookingDetails(bid);\n        let url = window.location.origin + \"/g/\" + bid;\n        this.addLicencePlateBtnLoading = false;\n        this.reEnterPlate\n          ? this.postToLoggerAPI({\n            phone: this.contactObj?.nationalNumber,\n            refId: bid,\n            icon: \"login\",\n            plate: this.licencePlate.toUpperCase(),\n            statusText:\n              \"Parker plate/contact number not found in the system. Parker created a new session using generic payment QR\",\n          })\n          : this.postToLoggerAPI({\n            phone: this.contactObj?.nationalNumber,\n            refId: bid,\n            icon: \"login\",\n            plate: this.licencePlate.toUpperCase(),\n            statusText:\n              \"Parker session found. Parker opened his/her session using generic payment QR\",\n          });\n\n        window.location.replace(url);\n      } catch (error) {\n        this.addLicencePlateBtnLoading = false;\n        console.log(error);\n      }\n    },\n    /**\n     * @method getBookingDetails fetch the booking details and commit SET_BOOKING_DETAILS mutation.\n     */\n    async getBookingDetails(bookingId) {\n      try {\n        var bookingDetails = await APIHelper(\n          \"GET\",\n          \"/api/v1/booking/config/\" + bookingId\n        );\n        this.$store.commit(\n          \"SET_BOOKING_DETAILS\",\n          bookingDetails.data?.data ? bookingDetails.data.data : null\n        );\n      } catch (error) {\n        console.log(error);\n      }\n    },\n    closeConfirmCreateSessionDialog() {\n      this.confirmCreateSessionDialog = false;\n      this.addLicencePlateBtnLoading = false;\n    },\n  },\n};\n</script>\n<style lang=\"less\" >\n.information {\n  background-color: #edf1f4;\n}\n\n.booking_header {\n  position: absolute;\n  bottom: 30px;\n  left: 16px;\n  font-size: 18px;\n  font-weight: bolder;\n}\n\n.add_licence_plate_btn {\n  width: 100%;\n  background-color: #f2555c !important;\n  font-size: 18px !important;\n  font-weight: 700 !important;\n  letter-spacing: normal !important;\n  height: 50px !important;\n}\n\n.country-selector.md.has-value .country-selector__input {\n  border: none;\n  border-bottom: 1px solid rgb(118, 118, 118);\n}\n\n.input-tel.md .input-tel__input {\n  border: none;\n  border-bottom: 1px solid rgb(118, 118, 118);\n  margin-left: 2px;\n}\n\n.input-tel.is-focused.has-error .input-tel__input {\n  box-shadow: none !important;\n}\n\n.input-tel.is-focused.is-valid .input-tel__input {\n  box-shadow: none !important;\n}\n\n.time-picker-input {\n  flex: 1 1 auto;\n  line-height: 20px;\n  padding: 8px 0 8px;\n  max-width: 100%;\n  min-width: 0px;\n  font-size: 16px;\n  font-family: \"Work Sans\";\n}\n\n.time-picker-input :focus-visible {\n  outline-color: #1976d2;\n}\n\n.vue__time-picker input.display-time {\n  padding: 0px !important;\n  border-bottom: 1px solid #767676;\n  border-top: 0px;\n  border-right: 0px;\n  border-left: 0px;\n}\n\n.vue__time-picker-dropdown ul li:not([disabled]).active,\n.vue__time-picker-dropdown ul li:not([disabled]).active:focus,\n.vue__time-picker-dropdown ul li:not([disabled]).active:hover,\n.vue__time-picker .dropdown ul li:not([disabled]).active,\n.vue__time-picker .dropdown ul li:not([disabled]).active:focus,\n.vue__time-picker .dropdown ul li:not([disabled]).active:hover {\n  background: #f2555c !important;\n}\n\n[data-key=\"am\"] {\n  border: 0.2px solid red;\n  border-radius: 2px;\n  margin-left: 2px;\n}\n\n[data-key=\"pm\"] {\n  border: 0.2px solid red;\n  margin-top: 0.5em;\n  margin-left: 2px;\n}\n\n.hours .hint {\n  position: sticky;\n  top: 0;\n  text-align: center;\n  background: #68808c;\n  z-index: 1;\n  -webkit-text-fill-color: white;\n  margin-bottom: 10px;\n}\n\n.apms .hint {\n  position: sticky;\n  top: 0;\n  text-align: center;\n  background: #68808c;\n  z-index: 1;\n  margin-left: 1px;\n  -webkit-text-fill-color: white;\n  margin-bottom: 10px;\n}\n\n.hours::-webkit-scrollbar {\n  display: none;\n}\n\n.minutes::-webkit-scrollbar {\n  display: none;\n}\n\n.minutes .hint {\n  position: sticky;\n  top: 0;\n  text-align: center;\n  background: #68808c;\n  z-index: 1;\n  -webkit-text-fill-color: white;\n  margin-bottom: 10px;\n}\n\nhr {\n  border: 1px solid #ffbc1f;\n}\n\ninput[type=number] {\n  -moz-appearance: textfield;\n}\n\n// .vue__time-picker input.display-time{\n//   border-bottom:1px solid #767676;\n//     border-top:0px;\n//     border-right:0px;\n//     border-left:0px;\n// }\n</style>\t"]}]}