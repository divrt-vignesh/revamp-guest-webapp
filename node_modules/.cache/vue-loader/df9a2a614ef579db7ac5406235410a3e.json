{"remainingRequest":"/home/vignesh/DIVRT/guest-webapp/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/vignesh/DIVRT/guest-webapp/src/views/LoadSession.vue?vue&type=style&index=0&lang=less&","dependencies":[{"path":"/home/vignesh/DIVRT/guest-webapp/src/views/LoadSession.vue","mtime":1681899235374},{"path":"/home/vignesh/DIVRT/guest-webapp/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vignesh/DIVRT/guest-webapp/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/home/vignesh/DIVRT/guest-webapp/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/home/vignesh/DIVRT/guest-webapp/node_modules/less-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vignesh/DIVRT/guest-webapp/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vignesh/DIVRT/guest-webapp/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLmJvb2tpbmdfaGVhZGVyIHsKICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgYm90dG9tOiAzMHB4OwogIGxlZnQ6IDE2cHg7CiAgZm9udC1zaXplOiAxOHB4OwogIGZvbnQtd2VpZ2h0OiBib2xkZXI7Cn0KCi5hZGRfbGljZW5jZV9wbGF0ZV9idG4gewogIHdpZHRoOiAxMDAlOwogIGJhY2tncm91bmQtY29sb3I6ICNmMjU1NWMgIWltcG9ydGFudDsKICBmb250LXNpemU6IDE4cHggIWltcG9ydGFudDsKICBmb250LXdlaWdodDogNzAwICFpbXBvcnRhbnQ7CiAgbGV0dGVyLXNwYWNpbmc6IG5vcm1hbCAhaW1wb3J0YW50OwogIGhlaWdodDogNTBweCAhaW1wb3J0YW50Owp9Cg=="},{"version":3,"sources":["LoadSession.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiRA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"LoadSession.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <v-container class=\"pa-4\" fluid>\n    <v-row class=\"text-center\" no-gutters>\n      <v-col cols=\"12\">\n        <v-img alt=\"PARKING.COM\" class=\"my-3\" height=\"42\" contain src=\"../assets/logo_huge_drk.png\" />\n      </v-col>\n    </v-row>\n    <v-row no-gutters>\n      <v-col>\n        <v-card class=\"mx-auto rounded-lg\" max-width=\"374\">\n          <template slot=\"progress\">\n            <v-progress-linear color=\"red\" height=\"10\" indeterminate></v-progress-linear>\n          </template>\n          <div style=\"position: relative\">\n            <!-- <v-skeleton-loader\n                v-show=\"!bookingDetails.hasOwnProperty('zone')\"\n                height=\"260px\"\n                class=\"rounded-t-lg\"\n                type=\"image\"\n              ></v-skeleton-loader> -->\n\n            <v-img class=\"rounded-t-lg\" max-height=\"150px\" style=\"filter: brightness(50%)\" :src=\"\n              bookingDetails.hasOwnProperty('zone') &&\n                bookingDetails.zone.image != '' &&\n                bookingDetails.zone.image != null\n                ? bookingDetails.zone.image\n                : zoneImgURL\n            \" :lazy-src=\"\n  bookingDetails.hasOwnProperty('zone') &&\n    bookingDetails.zone.image != '' &&\n    bookingDetails.zone.image != null\n    ? bookingDetails.zone.image\n    : zoneImgURL\n\" alt=\"Parking.com garage\">\n              <template v-slot:placeholder>\n                <v-row class=\"fill-height ma-0\" align=\"center\" justify=\"center\" no-gutters>\n                  <v-progress-circular indeterminate color=\"grey lighten-5\"></v-progress-circular>\n                </v-row>\n              </template>\n            </v-img>\n            <div class=\"booking_header white--text text-left mr-4\">\n              You are parked at\n              {{\n                bookingDetails.hasOwnProperty(\"zone\")\n                ? bookingDetails.zone.zoneName\n                : \"\"\n              }}\n            </div>\n          </div>\n          <v-card-text class=\"pa-2\">\n            <v-form ref=\"detailsForm\">\n              <v-container fluid pa-0>\n                <v-row no-gutters>\n                  <v-col cols=\"12\" class=\"px-4 mt-2 text-center color-black\" style=\"font-size: 12px\">\n                    <p class=\"mb-0 black--text\" v-if=\"licencePlate == null || licencePlate == ''\">\n                      Add your license plate number for hassle-free parking\n                    </p>\n                    <p class=\"mb-0 black--text\" v-else>\n                      Confirm your license plate number for hassle-free parking\n                    </p>\n                  </v-col>\n                </v-row>\n                <v-row no-gutters class=\"pt-2\">\n                  <v-col cols=\"1\" class=\"text-right align-self-end\">\n                    <v-icon class=\"material-icons-outlined\">pin</v-icon>\n                  </v-col>\n                  <v-col cols=\"11\" class=\"px-4\">\n                    <v-text-field v-model=\"licencePlate\" hide-details=\"auto\" maxlength=\"10\"\n                      :rules=\"[rules.isRequired, rules.alphaNumeric]\" label=\"License Plate\" clearable></v-text-field>\n                  </v-col>\n                </v-row>\n                <v-row no-gutters class=\"py-2\">\n                  <v-col cols=\"1\" class=\"text-right align-self-end\">\n                    <v-icon class=\"material-icons-outlined\">send_to_mobile</v-icon>\n                  </v-col>\n                  <v-col cols=\"11\" class=\"px-4\">\n                    <v-text-field v-model=\"contact\" hide-details=\"auto\" disabled maxlength=\"10\" :rules=\"[\n                      rules.isRequired,\n                      rules.isNumeric,\n                      rules.exactCharacters(10),\n                    ]\" label=\"Phone Number\" clearable></v-text-field>\n                  </v-col>\n                  <v-col cols=\"1\">\n                  </v-col>\n                  <v-col cols=\"11\" class=\"px-4\">\n                    <span style=\"font-size:10px\">Phone number is mandatory for generating the receipt</span>\n                  </v-col>\n                </v-row>\n              </v-container>\n            </v-form>\n          </v-card-text>\n          <v-card-actions class=\"justify-center py-8\">\n            <v-container class=\"pa-0\" fluid>\n              <v-row no-gutters v-if=\"licencePlate == null || licencePlate == ''\">\n                <v-col cols=\"12\" class=\"px-2\">\n                  <v-btn rounded elevation=\"0\" class=\"add_licence_plate_btn white--text\"\n                    :loading=\"addLicencePlateBtnLoading\" :disabled=\"disableAddLicencePlateBtn\"\n                    @click=\"updateLoadedSessionPlate()\">Continue</v-btn>\n                </v-col>\n              </v-row>\n              <v-row no-gutters v-else>\n                <v-col cols=\"12\" class=\"px-2\">\n                  <v-btn rounded elevation=\"0\" class=\"add_licence_plate_btn white--text\"\n                    :loading=\"addLicencePlateBtnLoading\" :disabled=\"disableAddLicencePlateBtn\"\n                    @click=\"updateLoadedSessionPlate()\">Confirm</v-btn>\n                </v-col>\n              </v-row>\n              <v-row no-gutters>\n                <v-col cols=\"12\" class=\"mt-2 text-center color-black\" style=\"font-size: 12px\">\n                  <p class=\"mb-0\">\n                    A valid credit card is required to park. Without one, you\n                    could be subject to a parking violation and issued a\n                    citation.\n                  </p>\n                </v-col>\n              </v-row>\n            </v-container>\n          </v-card-actions>\n        </v-card>\n      </v-col>\n    </v-row>\n    <v-dialog v-model=\"confirmCreateSessionDialog\" max-width=\"fit-content\">\n      <v-card class=\"pa-0\">\n        <v-card-title class=\"justify-center\">\n          <v-icon x-large color=\"red accent-2\">mdi-alert-outline</v-icon>\n        </v-card-title>\n        <v-card-text class=\"text-center mt-5\">\n          <span style=\"font-size: 20px\">\n            We couldnâ€™t find your plate. Please try entering it again.\n          </span>\n        </v-card-text>\n        <v-card-actions class=\"text-center pb-6\">\n          <v-container pa-0 fluid>\n            <v-row no-gutters>\n              <v-col cols=\"12\">\n                <v-btn rounded block elevation=\"0\" class=\"white--text exit_dialog_btn\"\n                  @click=\"confirmCreateSessionDialog = false\">OK</v-btn>\n              </v-col>\n              <!-- <v-col cols=\"12\" class=\"mt-4\">\n                        <v-btn\n                          rounded\n                          block\n                          elevation=\"0\"\n                          class=\"\"\n                          @click=\"closeConfirmCreateSessionDialog()\"\n                          >Close</v-btn\n                        >\n                      </v-col> -->\n            </v-row>\n          </v-container>\n        </v-card-actions>\n      </v-card>\n    </v-dialog>\n  </v-container>\n</template>\n\n<script>\nimport { mapGetters } from \"vuex\";\nimport APIHelper from \"../apiHelper\";\nimport rules from \"@/utils/rules\";\n// import { format } from \"date-fns\";\n// import loggerHelper from \"../loggerHelper\";\n// import { mapGetters } from \"vuex\";\nexport default {\n  name: \"CreateSession\",\n  components: {},\n  data: () => ({\n    contactOption: \"+1\",\n    rules: rules,\n    licencePlate: \"\",\n    contact: \"\",\n    addLicencePlateBtnLoading: false,\n    confirmCreateSessionDialog: false\n  }),\n  computed: {\n    ...mapGetters({\n      bookingId: \"getterBookingId\",\n      bookingDetails: \"getterBookingDetails\",\n    }),\n    disableAddLicencePlateBtn() {\n      return this.contact == \"\" ||\n        this.contact == null ||\n        this.licencePlate == \"\" ||\n        this.licencePlate == null ||\n        this.contact.length != 10 ||\n        /^[a-z0-9]+$/i.test(this.licencePlate) === false\n        ? true\n        : false;\n    },\n  },\n  watch: {\n    bookingDetails() {\n      this.licencePlate = this.bookingDetails?.booking?.vehicleNo\n        ? this.bookingDetails?.booking?.vehicleNo\n        : \"\";\n      this.contact = this.bookingDetails?.user?.contact\n        ? this.bookingDetails.user.contact.length > 10\n          ? this.bookingDetails.user.contact.substring(\n            this.bookingDetails.user.contact.length - 10\n          )\n          : this.bookingDetails.user.contact\n        : \"\";\n      this.confirmCreateSessionDialog = (this.bookingDetails?.booking?.isLPRVerified && this.bookingDetails.booking.isLPRVerified == \"0\") ? true : false\n    },\n  },\n  created() { },\n  async mounted() {\n    this.licencePlate = this.bookingDetails?.booking?.vehicleNo\n      ? this.bookingDetails?.booking?.vehicleNo\n      : \"\";\n    this.contact = this.bookingDetails?.user?.contact\n      ? this.bookingDetails.user.contact.length > 10\n        ? this.bookingDetails.user.contact.substring(\n          this.bookingDetails.user.contact.length - 10\n        )\n        : this.bookingDetails.user.contact\n      : \"\";\n    this.contactOption =\n      this.bookingDetails?.user?.contact &&\n        this.bookingDetails.user.contact.length > 10\n        ? this.bookingDetails.user.contact.substring(\n          0,\n          this.bookingDetails.user.contact.length - 10\n        )\n        : this.contactOption;\n    this.confirmCreateSessionDialog = (this.bookingDetails?.booking?.isLPRVerified && this.bookingDetails.booking.isLPRVerified == \"0\") ? true : false\n  },\n  destroyed() { },\n  methods: {\n    /**\n     * @method updateLoadedSessionPlate update license plate of the loaded session\n     */\n    async updateLoadedSessionPlate() {\n      this.addLicencePlateBtnLoading = true;\n      let postObj = { vehicleNo: this.licencePlate.toUpperCase(), webView: 1 };\n      try {\n        var updatePlate = await APIHelper(\n          \"PATCH\",\n          \"/api/v1/modifyLPR/\" + this.bookingId,\n          postObj\n        );\n        this.addLicencePlateBtnLoading = false;\n        console.log(updatePlate);\n        if (updatePlate?.data?.status && updatePlate.data.status == true) {\n          await this.getBookingDetails(this.bookingId);\n          this.$router.replace({ path: \"/checkedin\" });\n        }\n      } catch (error) {\n        this.addLicencePlateBtnLoading = false;\n        console.log(error);\n      }\n    },\n    /**\n     * @method getBookingDetails fetch the booking details and commit SET_BOOKING_DETAILS mutation.\n     */\n    async getBookingDetails(bookingId) {\n      try {\n        var bookingDetails = await APIHelper(\n          \"GET\",\n          \"/api/v1/booking/config/\" + bookingId\n        );\n        this.$store.commit(\n          \"SET_BOOKING_DETAILS\",\n          bookingDetails.data?.data ? bookingDetails.data.data : null\n        );\n      } catch (error) {\n        console.log(error);\n      }\n    },\n  },\n};\n</script>\n<style lang=\"less\">\n.booking_header {\n  position: absolute;\n  bottom: 30px;\n  left: 16px;\n  font-size: 18px;\n  font-weight: bolder;\n}\n\n.add_licence_plate_btn {\n  width: 100%;\n  background-color: #f2555c !important;\n  font-size: 18px !important;\n  font-weight: 700 !important;\n  letter-spacing: normal !important;\n  height: 50px !important;\n}\n</style>\n"]}]}